{"meta":{"version":1,"warehouse":"4.0.0"},"models":{"Asset":[{"_id":"themes/chic/source/favicon.png","path":"favicon.png","modified":1,"renderable":1},{"_id":"themes/chic/source/css/base.styl","path":"css/base.styl","modified":1,"renderable":1},{"_id":"themes/chic/source/css/custom.styl","path":"css/custom.styl","modified":1,"renderable":1},{"_id":"themes/chic/source/css/font.styl","path":"css/font.styl","modified":1,"renderable":1},{"_id":"themes/chic/source/css/layout.styl","path":"css/layout.styl","modified":1,"renderable":1},{"_id":"themes/chic/source/css/media.styl","path":"css/media.styl","modified":1,"renderable":1},{"_id":"themes/chic/source/css/normalize.styl","path":"css/normalize.styl","modified":1,"renderable":1},{"_id":"themes/chic/source/css/style.styl","path":"css/style.styl","modified":1,"renderable":1},{"_id":"themes/chic/source/css/variable.styl","path":"css/variable.styl","modified":1,"renderable":1},{"_id":"themes/chic/source/image/gavatar.jpg","path":"image/gavatar.jpg","modified":1,"renderable":1},{"_id":"themes/chic/source/js/script.js","path":"js/script.js","modified":1,"renderable":1},{"_id":"themes/chic/source/js/tocbot.min.js","path":"js/tocbot.min.js","modified":1,"renderable":1},{"_id":"themes/chic/source/fonts/iconfont/demo.css","path":"fonts/iconfont/demo.css","modified":1,"renderable":1},{"_id":"themes/chic/source/fonts/iconfont/iconfont.css","path":"fonts/iconfont/iconfont.css","modified":1,"renderable":1},{"_id":"themes/chic/source/fonts/iconfont/demo_index.html","path":"fonts/iconfont/demo_index.html","modified":1,"renderable":1},{"_id":"themes/chic/source/fonts/iconfont/iconfont.js","path":"fonts/iconfont/iconfont.js","modified":1,"renderable":1},{"_id":"themes/chic/source/fonts/iconfont/iconfont.eot","path":"fonts/iconfont/iconfont.eot","modified":1,"renderable":1},{"_id":"themes/chic/source/fonts/iconfont/iconfont.json","path":"fonts/iconfont/iconfont.json","modified":1,"renderable":1},{"_id":"themes/chic/source/fonts/iconfont/iconfont.svg","path":"fonts/iconfont/iconfont.svg","modified":1,"renderable":1},{"_id":"themes/chic/source/fonts/iconfont/iconfont.ttf","path":"fonts/iconfont/iconfont.ttf","modified":1,"renderable":1},{"_id":"themes/chic/source/fonts/iconfont/iconfont.woff","path":"fonts/iconfont/iconfont.woff","modified":1,"renderable":1},{"_id":"themes/chic/source/fonts/iconfont/iconfont.woff2","path":"fonts/iconfont/iconfont.woff2","modified":1,"renderable":1},{"_id":"themes/chic/source/fonts/lanting/lanting.TTF","path":"fonts/lanting/lanting.TTF","modified":1,"renderable":1},{"_id":"themes/chic/source/fonts/lanting/lanting.otf","path":"fonts/lanting/lanting.otf","modified":1,"renderable":1},{"_id":"themes/chic/source/fonts/lanting/lanting.eot","path":"fonts/lanting/lanting.eot","modified":1,"renderable":1},{"_id":"themes/chic/source/fonts/lanting/lanting.woff","path":"fonts/lanting/lanting.woff","modified":1,"renderable":1},{"_id":"themes/chic/source/fonts/lanting/lanting.woff2","path":"fonts/lanting/lanting.woff2","modified":1,"renderable":1}],"Cache":[{"_id":"source/_posts/2014-11-13-my-dict.md","hash":"94abfb5b77b251529cc369bd44bc9b2ac7c8074c","modified":1644699190500},{"_id":"source/_posts/2014-11-14-aphorism.md","hash":"c654adf90517d7903f4e39fea0ab966894adec5b","modified":1644699190500},{"_id":"source/_posts/2014-12-18-linux-notes.md","hash":"907c4364bcf4cc90a6e5ad7ff604c31d205d7cc6","modified":1644699190500},{"_id":"source/_posts/2014-12-12-connect-mongodb-in-vagrant-with-mongohub.md","hash":"45aee2bb6648fa30d514f0951119691baebdc7e6","modified":1644699190500},{"_id":"source/_posts/2015-01-13-create-git-server.md","hash":"6a2eff51e19307423c6fc92bf37ed75d0262a879","modified":1644699190501},{"_id":"source/_posts/2014-12-22-how-to-use-linux-screen.md","hash":"e38251ce509c1aade56db84042083d94e5c18ae8","modified":1644699190500},{"_id":"source/_posts/2014-12-26-secure-linux-server.md","hash":"96e686a59123d211583a2b26f040532970f9ffc0","modified":1644699190501},{"_id":"source/_posts/2015-01-14-use-supervisor-for-laravel-queue.md","hash":"080ffd9eac8902b618b24909b8f4309f9cfe02ad","modified":1644699190501},{"_id":"source/_posts/2015-02-02-popular-js-css-collection.md","hash":"07118a44fe6e3e5f2c92ff6931bc26f356cdc87e","modified":1644699190503},{"_id":"source/_posts/2015-09-10-optimize-nginx-and-php-fpm-configuration.md","hash":"b28b267aeb8d5e60a9558d116980020f19f6119b","modified":1644699190503},{"_id":"source/_posts/2016-07-01-jin-gang-jing-note.md","hash":"70df36823dd7b4e58d32cd5746a2a09115e275e6","modified":1644699190503},{"_id":"source/_posts/2016-08-01-php-advance-1-useage.md","hash":"7cd9fcd77f206bbea79fab7ae2e24a755b6e08aa","modified":1644699190504},{"_id":"source/_posts/2016-08-05-a-sand-county-almanac.md","hash":"72e52b09d8d093b1d6906d380127fa26af9b90e1","modified":1644699190504},{"_id":"source/_posts/2016-10-03-php-advance-2-psr.md","hash":"73d54b9df8e8d4cc81713cf00220405859259634","modified":1644699190504},{"_id":"source/_posts/2016-10-25-rfc-2119.md","hash":"4a71b722463ef884f05800530d78abf82db9b7a4","modified":1644699190504},{"_id":"source/_posts/2016-11-17-elasticsearch-01-getstart.md","hash":"e34a26b216672e42c6a7bac2d3e0b272109ff675","modified":1644699190504},{"_id":"source/_posts/2016-10-25-semantic-versioning-2.md","hash":"a6b7e8d5ac793cee7f031175818cb5b99c24530e","modified":1644699190504},{"_id":"source/_posts/2016-12-11-be-productive-for-mac-1.md","hash":"3981e1679da1fc1a14314373a231a4069dc6d12a","modified":1644699190505},{"_id":"source/_posts/2016-11-17-elasticsearch-02-mapping.md","hash":"68749f3fdc75a1afaccf347f9118dd3f111bf2b0","modified":1644699190505},{"_id":"source/_posts/2016-12-30-keyboard-conf.md","hash":"f1ad76c88e543409b5c46ad11f26872c77a4070f","modified":1644699190505},{"_id":"source/_posts/2017-01-04-vim-configuration.md","hash":"f277d517ea92b7d4015b80c177d10cd554d7ef12","modified":1644699190505},{"_id":"source/_posts/2017-02-20-php-advance-3-good-practice.md","hash":"01bd1a4184edc77d3ea32e3847ab21fb88596325","modified":1644699190506},{"_id":"source/_posts/2017-02-25-php-advance-4-tuning.md","hash":"e8774dff42f7f80a31493107f1b8b4ed5350c6ad","modified":1644699190506},{"_id":"source/_posts/2017-02-26-php-advance-5-development-testing.md","hash":"90896bc192e4ed99810030e331f3b8f08dcc7147","modified":1644699190506},{"_id":"source/_posts/2017-03-11-powerset-algorithms.md","hash":"b82bcabc73f1e083bff0a0c9f082b2f8bf48eb49","modified":1644699190506},{"_id":"source/_posts/2017-04-30-the-school-of-life.md","hash":"c709c6befbd9608f9c615fbb1212016fbc6b4d8e","modified":1644699190506},{"_id":"source/_posts/2017-09-10-wang-yangming.md","hash":"37a0c0feac11b11b2af50afacd7129a1e383bdbe","modified":1644699190507},{"_id":"source/_posts/2017-09-12-chan-xue-ru-men-lin-mu-da-zhuo.md","hash":"8145fd1ed547356eb8aed648d5d3b8048c35bdd7","modified":1644699190508},{"_id":"source/_posts/2019-03-23-canada-personal-tax-rrsp-and-tfsa.md","hash":"dec14dae5b53aa00bf6ba2f9927b3eb88356d830","modified":1644699190508},{"_id":"source/_posts/2020-04-26-gtd-plan.md","hash":"4be4b6e59aac0f8c9d75c4b7f7eba74af401c84f","modified":1644699190509},{"_id":"source/_posts/2021-02-28-get-start-with-tmux.md","hash":"7d99dc20642095a95162cb6ec00b2f3cafc0a998","modified":1644699190509},{"_id":"source/_posts/2021-03-10-linux-common-commands-2.md","hash":"0965c385e47864a107981783a8d4dea5a3817e94","modified":1644699190509},{"_id":"source/_posts/2021-03-18-linux-common-commands-3.md","hash":"2f069a87ed14e2409ef66b8c2b26c4fd39b71242","modified":1644699190510},{"_id":"source/_posts/2021-03-03-linux-common-commands-1.md","hash":"d386ce197c038733be01d61bc2d9689ad53a837d","modified":1644699190509},{"_id":"source/about/index.md","hash":"eafdeda7f01003c9a2dd77d6472c3ab932325c5f","modified":1644699769630},{"_id":"source/category/index.md","hash":"2aa64942630017781d21b1999599b18d34d1630c","modified":1644699190510},{"_id":"source/tag/index.md","hash":"2121a2f3fafb4d33e095952e2fa2a4f91afbbb74","modified":1644699190510},{"_id":"themes/chic/ChangeLogs.md","hash":"82786c20871dd56447d872db9c16bd14b0cf01b8","modified":1644699190510},{"_id":"themes/chic/LICENSE.md","hash":"9911bdafa287bd65a822f84cc12012980bd10247","modified":1644699190511},{"_id":"themes/chic/README-CN.md","hash":"af0765f26b72d49f1b29afe1a9d0c4a492912aaa","modified":1644699190511},{"_id":"themes/chic/_config.yml","hash":"0522cbc55025e33b3978c1e6214f11e4cb129011","modified":1644699190511},{"_id":"themes/chic/README.md","hash":"3805a9cae08d92b63dbc3764e57bb0b295972049","modified":1644699190511},{"_id":"themes/chic/package.json","hash":"8b4072879307eed0e74ae35390825c5e03b9229c","modified":1644699190516},{"_id":"themes/chic/languages/de.yml","hash":"3ebf0775abbee928c8d7bda943c191d166ded0d3","modified":1644699190511},{"_id":"themes/chic/languages/default.yml","hash":"3083f319b352d21d80fc5e20113ddf27889c9d11","modified":1644699190511},{"_id":"themes/chic/languages/es.yml","hash":"76edb1171b86532ef12cfd15f5f2c1ac3949f061","modified":1644699190512},{"_id":"themes/chic/languages/ko.yml","hash":"881d6a0a101706e0452af81c580218e0bfddd9cf","modified":1644699190512},{"_id":"themes/chic/languages/fr.yml","hash":"415e1c580ced8e4ce20b3b0aeedc3610341c76fb","modified":1644699190512},{"_id":"themes/chic/languages/ja.yml","hash":"a73e1b9c80fd6e930e2628b393bfe3fb716a21a9","modified":1644699190512},{"_id":"themes/chic/languages/nl.yml","hash":"12ed59faba1fc4e8cdd1d42ab55ef518dde8039c","modified":1644699190512},{"_id":"themes/chic/languages/no.yml","hash":"965a171e70347215ec726952e63f5b47930931ef","modified":1644699190512},{"_id":"themes/chic/languages/pt.yml","hash":"57d07b75d434fbfc33b0ddb543021cb5f53318a8","modified":1644699190513},{"_id":"themes/chic/languages/ru.yml","hash":"4fda301bbd8b39f2c714e2c934eccc4b27c0a2b0","modified":1644699190513},{"_id":"themes/chic/languages/zh-CN.yml","hash":"ca40697097ab0b3672a80b455d3f4081292d1eed","modified":1644699190513},{"_id":"themes/chic/languages/zh-TW.yml","hash":"53ce3000c5f767759c7d2c4efcaa9049788599c3","modified":1644699190513},{"_id":"themes/chic/layout/archive.ejs","hash":"48cdf67b628eb6a1c24d484ed252f5b0e3f06ddf","modified":1644699190516},{"_id":"themes/chic/layout/category.ejs","hash":"5c27ad718daf576e7fe69b40ac9204d79e22feed","modified":1644699190516},{"_id":"themes/chic/layout/layout.ejs","hash":"f874320edabdefc204f9e17d119a16d16f26c363","modified":1644699190516},{"_id":"themes/chic/layout/page.ejs","hash":"3179c527694a789760742e1923c7ac5f94b4997c","modified":1644699190516},{"_id":"themes/chic/layout/index.ejs","hash":"b3344720176ad12dc88745cc5b31d497356ca4fa","modified":1644699190516},{"_id":"themes/chic/layout/post.ejs","hash":"a23f83d6c559ce88588472267468a54488d50e8e","modified":1644699190516},{"_id":"themes/chic/layout/tag.ejs","hash":"1d0daa3823d08c69e40c6d68809e10c9c2308979","modified":1644699190516},{"_id":"themes/chic/scripts/imageTag.js","hash":"4b69804c1e4bf638eda7022499c440ce24e28587","modified":1644699190517},{"_id":"themes/chic/source/favicon.png","hash":"6ad676a2df760d823510d5ddb9a6b367247bd9c2","modified":1644699190530},{"_id":"themes/chic/layout/_page/archive.ejs","hash":"04233830605abd5e36af9f4986a117bbc945e920","modified":1644699190513},{"_id":"themes/chic/layout/_page/page.ejs","hash":"1d875d59cf4d6b681cc8cf755f19b5355e5d1144","modified":1644699190514},{"_id":"themes/chic/layout/_page/category.ejs","hash":"e63734fd3ddc57f522f886ccc74f53725318ec4a","modified":1644699190514},{"_id":"themes/chic/layout/_page/post.ejs","hash":"2c898ebd2a69261efa18dc2b9449dceff957f0a0","modified":1644699190514},{"_id":"themes/chic/layout/_page/profile.ejs","hash":"c6d3cf2ef90e5d0fd580e7cff1db47c28fb36037","modified":1644699190514},{"_id":"themes/chic/layout/_page/tag.ejs","hash":"0c20ff00532103f9a59639ca9956fc0bce4aabc2","modified":1644699190514},{"_id":"themes/chic/layout/_partial/comment.ejs","hash":"5d02529d32eb595af8dcb840bbb42210c8e4be08","modified":1644699190514},{"_id":"themes/chic/layout/_partial/footer.ejs","hash":"d35c1f74db5a6a5cbbdcc53e26655a50e5303381","modified":1644699190515},{"_id":"themes/chic/layout/_partial/head.ejs","hash":"aa01ec0de71ac7de9cedfa84aed2d1200c50cffe","modified":1644699190515},{"_id":"themes/chic/layout/_partial/header.ejs","hash":"ddd750877d39695c349e299e88dda2091cba63a8","modified":1644699190515},{"_id":"themes/chic/layout/_partial/paginator.ejs","hash":"ab59d5db77f2aa64dfe03656e72fd49702c62e23","modified":1644699190515},{"_id":"themes/chic/layout/_partial/toc.ejs","hash":"a04c425b37a586408cc223fc628275d46e98b8d4","modified":1644699190515},{"_id":"themes/chic/source/css/base.styl","hash":"7ea2db2c139a719bb7d3f3c5e182dd0e0d59e098","modified":1644699190529},{"_id":"themes/chic/layout/_plugins/katex.ejs","hash":"c71eb685fb2427e86589fb6ddb4df223a992c7aa","modified":1644699190515},{"_id":"themes/chic/source/css/custom.styl","hash":"bf8dee1a094b104d87a53b43f6daa7ba43b67574","modified":1644699190529},{"_id":"themes/chic/source/css/font.styl","hash":"8c1da30e223c0a3d7ef452abc9f0e4cc71dbc140","modified":1644699190529},{"_id":"themes/chic/source/css/media.styl","hash":"939c0cc804333729a633ca791a40c784dd13c751","modified":1644699190529},{"_id":"themes/chic/source/css/layout.styl","hash":"9942d05bb2c55cf035d4bf9af325e1e81766a510","modified":1644699190529},{"_id":"themes/chic/source/css/normalize.styl","hash":"b3337320133b7a336db7033aa6bbe94b054c0b21","modified":1644699190529},{"_id":"themes/chic/source/css/style.styl","hash":"a13f2c38070a89b06a2ede599f5ce5fd160e11c9","modified":1644699190530},{"_id":"themes/chic/source/css/variable.styl","hash":"906faa95457eba70118a0705e13b8f43409e502f","modified":1644699190530},{"_id":"themes/chic/source/image/gavatar.jpg","hash":"974547c384669846ee47989cb3b9c3f80002f010","modified":1644699190594},{"_id":"themes/chic/source/js/script.js","hash":"fe634b02c92aa992be3087c57781c2b21bc1b627","modified":1644699190594},{"_id":"themes/chic/source/css/_highlight/agate.styl","hash":"53027913ed8d4f75ac3e49e76aad824f0df62da3","modified":1644699190517},{"_id":"themes/chic/source/css/_highlight/androidstudio.styl","hash":"2af0861725f97f0ee2ded67c3d2d4548c62b2d16","modified":1644699190517},{"_id":"themes/chic/source/js/tocbot.min.js","hash":"98af336bfc6118bd6aaae5722491e212ab70b5d3","modified":1644699190595},{"_id":"themes/chic/source/css/_highlight/arta.styl","hash":"b3e81e3e694ceb8deed178adb8b91013c5120e30","modified":1644699190517},{"_id":"themes/chic/source/css/_highlight/arduino-light.styl","hash":"15e8572585cd708221c513dea4bdd89d8fe56c10","modified":1644699190517},{"_id":"themes/chic/source/css/_highlight/ascetic.styl","hash":"32cff3bef6fac3760fe78f203096477052a90552","modified":1644699190517},{"_id":"themes/chic/source/css/_highlight/atelier-cave-dark.styl","hash":"ce63dd8548688d88254405eedfa75b1d7c82449e","modified":1644699190517},{"_id":"themes/chic/source/css/_highlight/atelier-cave-light.styl","hash":"a5be0744a7ecf4a08f600ade4cfd555afc67bc15","modified":1644699190518},{"_id":"themes/chic/source/css/_highlight/atelier-dune-dark.styl","hash":"c196ff0ee064af0e507823694ae39020addfc280","modified":1644699190518},{"_id":"themes/chic/source/css/_highlight/atelier-dune-light.styl","hash":"931435fbc6f974e8ce9e32722680035d248a9dc1","modified":1644699190518},{"_id":"themes/chic/source/css/_highlight/atelier-estuary-dark.styl","hash":"0bb16a4eff93688f40787abc2f9e56e7d5cc93e7","modified":1644699190518},{"_id":"themes/chic/source/css/_highlight/atelier-estuary-light.styl","hash":"344276ca9b27e51d4c907f76afe5d13cf8e60bdf","modified":1644699190518},{"_id":"themes/chic/source/css/_highlight/atelier-forest-dark.styl","hash":"effbc5d75fa87203c847039869c22031b40d5b7d","modified":1644699190518},{"_id":"themes/chic/source/css/_highlight/atelier-heath-dark.styl","hash":"9a2e9a1d0a01bbdf158560c3ed1c134e098b2c68","modified":1644699190519},{"_id":"themes/chic/source/css/_highlight/atelier-forest-light.styl","hash":"95228d9f2102fad425536aac44b80b2cba1f5950","modified":1644699190518},{"_id":"themes/chic/source/css/_highlight/atelier-heath-light.styl","hash":"8c8c2e445abef85273be966d59770e9ced6aac21","modified":1644699190519},{"_id":"themes/chic/source/css/_highlight/atelier-lakeside-dark.styl","hash":"10ee3882fca7b97a37bd309d2d35fce9868647bb","modified":1644699190519},{"_id":"themes/chic/source/css/_highlight/atelier-lakeside-light.styl","hash":"2c54cb9bdb259ae3b5b29f63ac2469ed34b08578","modified":1644699190519},{"_id":"themes/chic/source/css/_highlight/atelier-plateau-dark.styl","hash":"84c80e6f67f62fce958d25817c277d2360272617","modified":1644699190519},{"_id":"themes/chic/source/css/_highlight/atelier-plateau-light.styl","hash":"d1a05fdd1ededc9063d181ab25bad55a164aeb4a","modified":1644699190519},{"_id":"themes/chic/source/css/_highlight/atelier-savanna-dark.styl","hash":"e32c1c70def8060fce5e790979a126da650ac642","modified":1644699190519},{"_id":"themes/chic/source/css/_highlight/atelier-savanna-light.styl","hash":"f8244c93711c7cb59dd79d2df966806b30d171ea","modified":1644699190519},{"_id":"themes/chic/source/css/_highlight/atelier-seaside-dark.styl","hash":"2edf385215bbe1985b1a10106525d362667d28c2","modified":1644699190520},{"_id":"themes/chic/source/css/_highlight/atelier-seaside-light.styl","hash":"0597342da6e2d0c5bdcc7d42dabb07322b1a4177","modified":1644699190520},{"_id":"themes/chic/source/css/_highlight/atelier-sulphurpool-dark.styl","hash":"538a14321193cd8abf2ddc484306631e54149ffb","modified":1644699190520},{"_id":"themes/chic/source/css/_highlight/atelier-sulphurpool-light.styl","hash":"efa52713efc468abeeb2b9299704371583b857de","modified":1644699190520},{"_id":"themes/chic/source/css/_highlight/brown-paper.styl","hash":"329b85ae9130a5587a6fb1c6f80396f9cca5ddc1","modified":1644699190520},{"_id":"themes/chic/source/css/_highlight/brown-papersq.png","hash":"3a1332ede3a75a3d24f60b6ed69035b72da5e182","modified":1644699190520},{"_id":"themes/chic/source/css/_highlight/codepen-embed.styl","hash":"8b7b34484f76a6c2c3b1a9e49abb9b382f439ae8","modified":1644699190520},{"_id":"themes/chic/source/css/_highlight/color-brewer.styl","hash":"2a439d6214430e2f45dd4939b4dfe1fe1a20aa0f","modified":1644699190521},{"_id":"themes/chic/source/css/_highlight/dark.styl","hash":"f5e6e75958de59e87fc6be3a1668e870e20bc836","modified":1644699190521},{"_id":"themes/chic/source/css/_highlight/darkula.styl","hash":"9717efa9194837ba3fb4d762997d33075dcf8bfa","modified":1644699190521},{"_id":"themes/chic/source/css/_highlight/docco.styl","hash":"b1c176378bb275f2e8caa759f36294e42d614bf1","modified":1644699190521},{"_id":"themes/chic/source/css/_highlight/far.styl","hash":"aaac3028f5e33123cd123a583cddc9290c45ec8e","modified":1644699190521},{"_id":"themes/chic/source/css/_highlight/github-gist.styl","hash":"48211a03d33e7f7ada0b261162bea06676155a71","modified":1644699190521},{"_id":"themes/chic/source/css/_highlight/github.styl","hash":"3336aeba324c6d34a6fd41fef9b47bc598f7064c","modified":1644699190521},{"_id":"themes/chic/source/css/_highlight/foundation.styl","hash":"bf8ddc94b4ad995b8b8805b5a4cf95004553fdac","modified":1644699190521},{"_id":"themes/chic/source/css/_highlight/googlecode.styl","hash":"bda816beee7b439814b514e6869dc678822be1bc","modified":1644699190522},{"_id":"themes/chic/source/css/_highlight/grayscale.styl","hash":"bf37d8b8d1e602126c51526f0cc28807440228ed","modified":1644699190522},{"_id":"themes/chic/source/css/_highlight/gruvbox-dark.styl","hash":"76b744c14fd5600bea64731c05df97c2df75523f","modified":1644699190522},{"_id":"themes/chic/source/css/_highlight/highlightjs.styl","hash":"65b5981dc3c57cedd1cb668c0e377230987e08d1","modified":1644699190522},{"_id":"themes/chic/source/css/_highlight/hopscotch.styl","hash":"1378a6bc67a32c0cbff72ab771268b53f9aa586d","modified":1644699190522},{"_id":"themes/chic/source/css/_highlight/hybrid.styl","hash":"b8eb5c69d12f2ee5ebc50265ae271699d7f1a8d3","modified":1644699190522},{"_id":"themes/chic/source/css/_highlight/idea.styl","hash":"a02967cb51c16a34e0ee895d33ded2b823d35b21","modified":1644699190522},{"_id":"themes/chic/source/css/_highlight/index.styl","hash":"002d5596f6379cc87dbd43d9145bc764aa666be1","modified":1644699190522},{"_id":"themes/chic/source/css/_highlight/ir-black.styl","hash":"53e5d74326a4527b92272bbd6946d4fec92720e8","modified":1644699190523},{"_id":"themes/chic/source/css/_highlight/kimbie.dark.styl","hash":"45dbb168f22d739d0109745d2decd66b5f94e786","modified":1644699190523},{"_id":"themes/chic/source/css/_highlight/kimbie.light.styl","hash":"61f8baed25be05288c8604d5070afbcd9f183f49","modified":1644699190523},{"_id":"themes/chic/source/css/_highlight/kimbie.styl","hash":"51b889ca7c6fe178cfbbe28d875a6ea427184441","modified":1644699190523},{"_id":"themes/chic/source/css/_highlight/magula.styl","hash":"16d323f989b1420a0f72ef989242ece9bf17a456","modified":1644699190523},{"_id":"themes/chic/source/css/_highlight/mono-blue.styl","hash":"4c89a6ae29de67c0700585af82a60607e85df928","modified":1644699190523},{"_id":"themes/chic/source/css/_highlight/monokai-sublime.styl","hash":"c385b11345894be7e6ce3c5f08663e199933b8e4","modified":1644699190523},{"_id":"themes/chic/source/css/_highlight/monokai.styl","hash":"f87be027848ea6bee623a08ad1e17b2f5b7937ee","modified":1644699190524},{"_id":"themes/chic/source/css/_highlight/obsidian.styl","hash":"199e28326be8590883f0813ebbd54fcfaa4750fd","modified":1644699190524},{"_id":"themes/chic/source/css/_highlight/paraiso-dark.styl","hash":"f1537bd868579fa018ecdbfd2eb922dcf3ba2cac","modified":1644699190524},{"_id":"themes/chic/source/css/_highlight/paraiso.styl","hash":"75f181eece6b71d033ea0c8d6cf00ae7efb9e29b","modified":1644699190524},{"_id":"themes/chic/source/css/_highlight/paraiso-light.styl","hash":"d224d1df0eb3395d9eea1344cee945c228af2911","modified":1644699190524},{"_id":"themes/chic/source/css/_highlight/pojoaque.jpg","hash":"c5fe6533b88b21f8d90d3d03954c6b29baa67791","modified":1644699190524},{"_id":"themes/chic/source/css/_highlight/pojoaque.styl","hash":"2601b4285803a7cea5ccded8d624ca95f80e3d88","modified":1644699190524},{"_id":"themes/chic/source/css/_highlight/railscasts.styl","hash":"b6674db9210e0c4444e4835fff2d1361f3ebd64c","modified":1644699190524},{"_id":"themes/chic/source/css/_highlight/rainbow.styl","hash":"c0cf97aae3e10fdcd10414547a711c9effbc39b8","modified":1644699190524},{"_id":"themes/chic/source/css/_highlight/school-book.png","hash":"711ec983c874e093bb89eb77afcbdf6741fa61ee","modified":1644699190525},{"_id":"themes/chic/source/css/_highlight/school-book.styl","hash":"beabbbcc7930f8de19159381a01c0ba41dc2291f","modified":1644699190525},{"_id":"themes/chic/source/css/_highlight/solarized-dark.styl","hash":"90c9da5aa594383697e5b18892a7f95beb053f55","modified":1644699190525},{"_id":"themes/chic/source/css/_highlight/solarized-light.styl","hash":"aa0dd3fd25c464183b59c5575c9bee8756b397f2","modified":1644699190525},{"_id":"themes/chic/source/css/_highlight/sunburst.styl","hash":"af3eec0fd56151e55bbd49c31b151f36717611d8","modified":1644699190525},{"_id":"themes/chic/source/css/_highlight/tomorrow-night-blue.styl","hash":"f24c17d0ab815dcfaab3438cb9fe2ab4839f5e0d","modified":1644699190525},{"_id":"themes/chic/source/css/_highlight/tomorrow-night-bright.styl","hash":"7674fecb6d27350727dc0d2dc93bc018382ebbd0","modified":1644699190525},{"_id":"themes/chic/source/css/_highlight/tomorrow-night-eighties.styl","hash":"28d751075ebabf7d0327a36f725076fe82fdf626","modified":1644699190525},{"_id":"themes/chic/source/css/_highlight/tomorrow-night.styl","hash":"16ba09b2db501e4e3e2e7d62595d9bf935bf27c4","modified":1644699190526},{"_id":"themes/chic/source/css/_highlight/tomorrow.styl","hash":"15779cf6846725c7c35fc56cac39047d7e0aec1c","modified":1644699190526},{"_id":"themes/chic/source/css/_highlight/vs.styl","hash":"959a746f4b37aacb5d1d6ff1d57e0c045289d75d","modified":1644699190526},{"_id":"themes/chic/source/css/_highlight/xcode.styl","hash":"5e8532ae8366dcf6a4ef5e4813dc3d42ab3d0a50","modified":1644699190526},{"_id":"themes/chic/source/css/_highlight/zenburn.styl","hash":"68ff9332ccc03f9389b15b713415cde016f8088f","modified":1644699190526},{"_id":"themes/chic/source/css/_page/archive.styl","hash":"0cbf71610242bfe9203443f89f503f8a94159edf","modified":1644699190528},{"_id":"themes/chic/source/css/_page/category.styl","hash":"5c43e18d2990846c3e7485d14e9d7715ae11d839","modified":1644699190528},{"_id":"themes/chic/source/css/_page/page.styl","hash":"34e33b52d2e046aa2f5494e81ff4ac2d5ca78058","modified":1644699190528},{"_id":"themes/chic/source/css/_page/profile.styl","hash":"5ef6d5a06132f26b7aa01b2fbf4bbfb8ee862b7b","modified":1644699190528},{"_id":"themes/chic/source/css/_page/tag.styl","hash":"55b220cc58011876fb3a470cd1fde8ed87c93079","modified":1644699190528},{"_id":"themes/chic/source/css/_lib/looper.css","hash":"863144dc9af7c1e181670515bc85eaf768f4e287","modified":1644699190527},{"_id":"themes/chic/source/css/_lib/tocbot.css","hash":"15601837bf8557c2fd111e4450ed4c8495fd11a0","modified":1644699190527},{"_id":"themes/chic/source/css/_partial/footer.styl","hash":"4f58e607eaa59cda3b5a9fdb3404ffb75c4d1a03","modified":1644699190528},{"_id":"themes/chic/source/css/_partial/header.styl","hash":"be70b4ab3bcc977f1055664899742804c716929d","modified":1644699190529},{"_id":"themes/chic/source/css/_partial/paginator.styl","hash":"b4f4a5180c4cbc70d186792b8a1fd0f5855bd86a","modified":1644699190529},{"_id":"themes/chic/source/fonts/iconfont/demo.css","hash":"65c50db528a5abe06426b1a20735feaf1f2a0d9b","modified":1644699190531},{"_id":"themes/chic/source/fonts/iconfont/iconfont.css","hash":"1277d6d1b3a3cbd93b1c135557b99612f7bba1b5","modified":1644699190531},{"_id":"themes/chic/source/fonts/iconfont/demo_index.html","hash":"c9406308092dd599bc42fd102dcfad27151815c3","modified":1644699190531},{"_id":"themes/chic/source/fonts/iconfont/iconfont.js","hash":"92597acc86d5cd7d604d6508ad8ed688902e6c2d","modified":1644699190532},{"_id":"themes/chic/source/fonts/iconfont/iconfont.eot","hash":"3bcf7f94e18bc2319317a3783d99555a5f40d3b3","modified":1644699190531},{"_id":"themes/chic/source/fonts/iconfont/iconfont.json","hash":"370d2155f384fbff65e9bfdffc824ad38664f3b5","modified":1644699190532},{"_id":"themes/chic/source/fonts/iconfont/iconfont.svg","hash":"077b513aab87a8fd6f4b8cd728f0fc527521f07e","modified":1644699190532},{"_id":"themes/chic/source/fonts/iconfont/iconfont.ttf","hash":"15b178fde18fcc19854cd8499461ae4b840587e1","modified":1644699190533},{"_id":"themes/chic/source/fonts/iconfont/iconfont.woff","hash":"2277394b519fa9e870edd2b590c9c51bd7ba22d2","modified":1644699190533},{"_id":"themes/chic/source/fonts/iconfont/iconfont.woff2","hash":"8b918fb5820258317538fc3a8dec32ddb61aa005","modified":1644699190533},{"_id":"themes/chic/source/css/_page/_post/post_code.styl","hash":"06c3a3524ffd4b27e03e79489001997ea5d727d3","modified":1644699190527},{"_id":"themes/chic/source/css/_page/_post/post_content.styl","hash":"5e3d63077549d8e2e5ff8c452e809760f5a99c17","modified":1644699190527},{"_id":"themes/chic/source/css/_page/_post/post_copyright.styl","hash":"64fd9f07ed45f035057d46740af0db70218714aa","modified":1644699190527},{"_id":"themes/chic/source/css/_page/_post/post_header.styl","hash":"9a09f0c92e1e47c69b0fe02728dda6526e33086b","modified":1644699190527},{"_id":"themes/chic/source/css/_page/_post/post_nav.styl","hash":"d500f8dbc2669b88f5405ec15c6a791bc193a6ac","modified":1644699190527},{"_id":"themes/chic/source/css/_page/_post/post_tags.styl","hash":"2ff93677aa4d81da83c659b4dd4e3cb482d9ce7d","modified":1644699190528},{"_id":"themes/chic/source/css/_page/_post/post_toc.styl","hash":"15e1ec7af93f41184f986aba21991a79923b0a0e","modified":1644699190528},{"_id":"themes/chic/source/fonts/lanting/lanting.woff2","hash":"5f325fcd2726a5b44e08b7004a5219e14847cbfa","modified":1644699190594},{"_id":"themes/chic/source/fonts/lanting/lanting.woff","hash":"642ad1f17d27d4b1010d1a0571d1b44cbc823d9d","modified":1644699190592},{"_id":"themes/chic/source/fonts/lanting/lanting.eot","hash":"3e184614f037939a6f98d607da3ed7dffb350e65","modified":1644699190565},{"_id":"themes/chic/source/fonts/lanting/lanting.TTF","hash":"97e9a4538cceef4b17d54c7dc589524905d1b685","modified":1644699190549},{"_id":"themes/chic/source/fonts/lanting/lanting.otf","hash":"4e184da596772d3ef6e5763cdee3e46a1ce2f2dd","modified":1644699190588},{"_id":"public/atom.xml","hash":"7203e60855e7c94aa2a0a307a1df1e67fafbf21e","modified":1644700566069},{"_id":"public/content.json","hash":"cce7b57b76b821123ac4750a7163294795d33741","modified":1644700566069},{"_id":"public/about/index.html","hash":"6a676c41373dd2d264a4dc86c6c67bffb8e88e80","modified":1644700566069},{"_id":"public/tag/index.html","hash":"bf50cee2b5e199a55676f992857b26e0a80051e2","modified":1644700566069},{"_id":"public/category/index.html","hash":"7edf65c1effed765e59a45f92135318e8537eff9","modified":1644700566069},{"_id":"public/2021-03-10-linux-common-commands-2.html","hash":"b9c1a368b1fbcf49a9f946d6208066969921d643","modified":1644700566069},{"_id":"public/2017-04-30-the-school-of-life.html","hash":"62adf7a2345943a99c2d23357d3046e057ff5789","modified":1644700566069},{"_id":"public/2017-02-26-php-advance-5-development-testing.html","hash":"da5be658358513541ea787630fbe4358634a02db","modified":1644700566069},{"_id":"public/2017-02-25-php-advance-4-tuning.html","hash":"b05b33de5f6220800a4fc7e8c266c742074fe26d","modified":1644700566069},{"_id":"public/2016-11-17-elasticsearch-01-getstart.html","hash":"b211ff148341b52f6938314d9e4a8ef1e71c262b","modified":1644700566069},{"_id":"public/2016-10-25-rfc-2119.html","hash":"0b21f4ad09e9f5672fbc87ef268685511978051f","modified":1644700566069},{"_id":"public/2016-10-25-semantic-versioning-2.html","hash":"4471941e83aeff38b591c3ed9d2801254248670d","modified":1644700566069},{"_id":"public/2016-08-05-a-sand-county-almanac.html","hash":"f6cbb742f120a6613304f2a1575b7c1a604619f9","modified":1644700566069},{"_id":"public/2016-07-01-jin-gang-jing-note.html","hash":"afb588a2ecb39f058bd30b7b58f6f5379025b0be","modified":1644700566069},{"_id":"public/2015-09-10-optimize-nginx-and-php-fpm-configuration.html","hash":"07cc43ce192edd8ac38360c62378e5fa45f77678","modified":1644700566069},{"_id":"public/2015-02-02-popular-js-css-collection.html","hash":"81fad452342ec11a89408ce7e20a33297bf02ed5","modified":1644700566069},{"_id":"public/2015-01-14-use-supervisor-for-laravel-queue.html","hash":"2ee7209cf295b6f70037d922ed0f5c31691438ce","modified":1644700566069},{"_id":"public/2015-01-13-create-git-server.html","hash":"c3e7fc3864bf339b2ff7173a39feae3ed77e1bcc","modified":1644700566069},{"_id":"public/2014-12-26-secure-linux-server.html","hash":"89001be950c15e2e17397cd254bac17c0cc5ff52","modified":1644700566069},{"_id":"public/2014-12-22-how-to-use-linux-screen.html","hash":"e5a7865d3ee8564492dc8603140ab28e9e07ec1f","modified":1644700566069},{"_id":"public/2014-12-12-connect-mongodb-in-vagrant-with-mongohub.html","hash":"f5462c81b4c684b373a081481cb42de1060a42ca","modified":1644700566069},{"_id":"public/2014-11-14-aphorism.html","hash":"23ac3e4ebf1d1d394b221ae8886492fe0a55ae85","modified":1644700566069},{"_id":"public/2014-11-13-my-dict.html","hash":"fc54f5e65368755c3cf17f7b4b7f256ce386161e","modified":1644700566069},{"_id":"public/archives/index.html","hash":"019f1e323bba4b5c1cbf30cda91407e9b0b987c8","modified":1644700566069},{"_id":"public/archives/page/2/index.html","hash":"46c063fb9c57fd93bc39abb399b99918c5604565","modified":1644700566069},{"_id":"public/archives/2014/index.html","hash":"32cf4b3ef65144cd7f09fb6fde6e9e6926107cc9","modified":1644700566069},{"_id":"public/archives/2014/11/index.html","hash":"0f8ad269d901932966093c0b9d5af06e30b63152","modified":1644700566069},{"_id":"public/archives/2014/12/index.html","hash":"66025834f2e50f50cfc366043f535afbd61aeaf6","modified":1644700566069},{"_id":"public/archives/2015/01/index.html","hash":"870cc75dab4ff32a0b0b54b4cecab9e057c06ac1","modified":1644700566069},{"_id":"public/archives/2015/index.html","hash":"ac73763a6bde3e063b41394dadb64d09e3d1afbe","modified":1644700566069},{"_id":"public/archives/2015/02/index.html","hash":"fe7fbe79003c0ea7aa4c1044b671ae7c7357737b","modified":1644700566069},{"_id":"public/archives/2015/09/index.html","hash":"e42b2d7192e9ac606dc871971ee6e162f0317bf4","modified":1644700566069},{"_id":"public/archives/2016/index.html","hash":"b494e9e3f786f45c2d538ff307b71b5ffa42d305","modified":1644700566069},{"_id":"public/archives/2016/07/index.html","hash":"7de3b3db1c9ce82eb514c3880f89b34a5c3ae300","modified":1644700566069},{"_id":"public/archives/2016/08/index.html","hash":"3d86962d396b17e7a12331cf4303f99494cafe5f","modified":1644700566069},{"_id":"public/archives/2016/10/index.html","hash":"c95a7c0ecd41d8901e5f1e585b93653ced2566c7","modified":1644700566069},{"_id":"public/archives/2016/11/index.html","hash":"643a07208796b71a05291263698b7d10201e496a","modified":1644700566069},{"_id":"public/archives/2016/12/index.html","hash":"fbd63398ede458aa452314a205f5a57642546976","modified":1644700566069},{"_id":"public/archives/2017/index.html","hash":"e5bc08f8cd048bfdeb69531045727572c78f3f43","modified":1644700566069},{"_id":"public/archives/2017/01/index.html","hash":"1fc0c202e3c2f6859c5523a318dba85176ea61d1","modified":1644700566069},{"_id":"public/archives/2017/02/index.html","hash":"0a907000f9bb3ea99e9c32b889eb2e057652e249","modified":1644700566069},{"_id":"public/archives/2017/03/index.html","hash":"5f38b9500202282b1d3c3df501c04f13a00f81e6","modified":1644700566069},{"_id":"public/archives/2017/04/index.html","hash":"77c16ae0ac66287229fd420020b5c4acd1ff46ef","modified":1644700566069},{"_id":"public/archives/2017/09/index.html","hash":"a51f1369b97af46f26d2fab111542163971673fa","modified":1644700566069},{"_id":"public/archives/2019/index.html","hash":"abf458cf333468c048a7a7f1dca0b80136392e8f","modified":1644700566069},{"_id":"public/archives/2019/03/index.html","hash":"26492fd0e173b966c304d328da6982fd0c1dfebe","modified":1644700566069},{"_id":"public/archives/2020/index.html","hash":"5df8ce3bf6b7a4c0de30689470bbb1d2527abd9f","modified":1644700566069},{"_id":"public/archives/2020/04/index.html","hash":"71b8302e567f25be9e7a53813139fecfaebd59d9","modified":1644700566069},{"_id":"public/archives/2021/index.html","hash":"ab69ce97884d6fa6b786261ad2ff5f39f3e050c3","modified":1644700566069},{"_id":"public/archives/2021/02/index.html","hash":"52ea087447d7ddf741e55fccc24c755cde5522a4","modified":1644700566069},{"_id":"public/archives/2021/03/index.html","hash":"1f02f5bc384e53674a328c031dae4d24550c0f53","modified":1644700566069},{"_id":"public/categories/阅读笔记/index.html","hash":"97591343f87418467381107cda0526b0780ce1cc","modified":1644700566069},{"_id":"public/categories/编程学习/index.html","hash":"32c214fbfa5ef049cb3ccc0090046ca19ecbf8bf","modified":1644700566069},{"_id":"public/categories/编程学习/page/2/index.html","hash":"908da20b0944f3520c3b279a37b2af9d3be35278","modified":1644700566069},{"_id":"public/categories/生活随想/index.html","hash":"8ce19cb5962aec52b06ff9f1a53f70edd651ca04","modified":1644700566069},{"_id":"public/index.html","hash":"306c84c2baee6a6fc053af0484fc077911a15ef1","modified":1644700566069},{"_id":"public/page/2/index.html","hash":"306c84c2baee6a6fc053af0484fc077911a15ef1","modified":1644700566069},{"_id":"public/page/3/index.html","hash":"306c84c2baee6a6fc053af0484fc077911a15ef1","modified":1644700566069},{"_id":"public/page/4/index.html","hash":"306c84c2baee6a6fc053af0484fc077911a15ef1","modified":1644700566069},{"_id":"public/tags/笔记/index.html","hash":"4ca45dd3af84b1c3062752bb7da6fb67a481cea3","modified":1644700566069},{"_id":"public/tags/哲学/index.html","hash":"b45a54b34d6497fcf3cd4ff7fd5ad27cd1365fc7","modified":1644700566069},{"_id":"public/tags/Linux/index.html","hash":"91c044331e2b5abe69ba1526b66bc9cca576abc3","modified":1644700566069},{"_id":"public/tags/MongoDB/index.html","hash":"a333280838d796073b28f900eeb0871e14fc5bbb","modified":1644700566069},{"_id":"public/tags/Git/index.html","hash":"341ae9877aede8643c8b945d761367ef281189c0","modified":1644700566069},{"_id":"public/tags/PHP/index.html","hash":"c889b12fa40a66e6f498e911d81f45f11bcf13b9","modified":1644700566069},{"_id":"public/tags/Laravel/index.html","hash":"36139f0c3d65aeec87ead56ac4ecda77885fc3db","modified":1644700566069},{"_id":"public/tags/CSS/index.html","hash":"b743388eabf79c3fb711aff788e980fee9fe85a1","modified":1644700566069},{"_id":"public/tags/Javascript/index.html","hash":"f1dcdf275f0ea031c7e5bcf6c64f7c16cb673d81","modified":1644700566069},{"_id":"public/tags/Nginx/index.html","hash":"d62bdce309e96c9a8e035d221a0309b82cf8e46d","modified":1644700566069},{"_id":"public/tags/编程规范/index.html","hash":"e8b334798f02ce9bce894bb98f5a2843ccacee8f","modified":1644700566069},{"_id":"public/tags/Elasticsearch/index.html","hash":"95f9fd6ac46b81127dcea819329405142ee65549","modified":1644700566069},{"_id":"public/tags/效率工具/index.html","hash":"d0375b9d867244d198f170a31fb3d9343fe5332d","modified":1644700566069},{"_id":"public/tags/Mac/index.html","hash":"f8e2271b46fbee45f691927476f0263f5f312e80","modified":1644700566069},{"_id":"public/tags/键盘/index.html","hash":"a9f0bc6b4c0cb028ec301e427a71d48a24dd1cce","modified":1644700566069},{"_id":"public/tags/VIM/index.html","hash":"b2987773d076dfc2305563f7c10384c8c643f4b7","modified":1644700566069},{"_id":"public/tags/算法/index.html","hash":"8348802aa228b39490b5708f7d6d3a82d3afc876","modified":1644700566069},{"_id":"public/tags/排列组合/index.html","hash":"c084085fbdfe8ebf040ba8173b59e3e8932e85c4","modified":1644700566069},{"_id":"public/tags/The-School-of-Life/index.html","hash":"b94a0616f33b528e2fd3295c1aebd992a1c5d429","modified":1644700566069},{"_id":"public/tags/加拿大税务/index.html","hash":"516e4452b1245b647ccb8183d8a7aa4308df3e3f","modified":1644700566069},{"_id":"public/tags/GTD/index.html","hash":"ed4499f15d2ccc7f1d221c63e6a4f42e31cc5d08","modified":1644700566069},{"_id":"public/tags/stdin/index.html","hash":"70ad60919d3160ff0a7922500f03389f834700c8","modified":1644700566069},{"_id":"public/tags/stdout/index.html","hash":"b45461751283bdf221720f09ca39be919593ca03","modified":1644700566069},{"_id":"public/tags/stderr/index.html","hash":"2e771cd31bc28c37ee4e8aeb7939623c31b99dfc","modified":1644700566069},{"_id":"public/tags/netcat/index.html","hash":"4712d273628bc18e95d099104d78d5d7cbe90bac","modified":1644700566069},{"_id":"public/tags/tar/index.html","hash":"06333dee7c92add4c78a20b90b3f409f9641dbef","modified":1644700566069},{"_id":"public/tags/gzip/index.html","hash":"dcd85966cef28e6578b30c6b6b189bd62e89adc7","modified":1644700566069},{"_id":"public/tags/Tmux/index.html","hash":"8a8259c0b0545d6aa5acf65c67ce773e13e7af1e","modified":1644700566069},{"_id":"public/tags/tcpdump/index.html","hash":"1df90116d26dd4153e9dc4f7d31887a8734cc509","modified":1644700566069},{"_id":"public/tags/ps/index.html","hash":"a86e17738fb2b8090cbbf828c8d4c632dc9973d0","modified":1644700566069},{"_id":"public/tags/netstat/index.html","hash":"7e9f17659bcc08f2cec0f79ba90c7f781499ef9f","modified":1644700566069},{"_id":"public/tags/ss/index.html","hash":"e5dcb16769c249c94d162e3c755482720c6fcdd4","modified":1644700566069},{"_id":"public/tags/lsof/index.html","hash":"be3907c1b0671d98567bccea9b54754eace60eff","modified":1644700566069},{"_id":"public/tags/less/index.html","hash":"eabedc0d35d5a7cfb515738e556cc747d24bbaef","modified":1644700566069},{"_id":"public/tags/cat/index.html","hash":"4733bf76a9cf0c64006c97610ddea7914049463c","modified":1644700566069},{"_id":"public/tags/kill/index.html","hash":"362476e613b0a04cf63de10b0da53b0bc45c4313","modified":1644700566069},{"_id":"public/tags/tee/index.html","hash":"2f8da4fd53643d4a0d6629f840704e3eb034cd38","modified":1644700566069},{"_id":"public/2021-03-18-linux-common-commands-3.html","hash":"f84cf3bdf71081493a0821331a0fd10ce4045713","modified":1644700566069},{"_id":"public/2021-03-03-linux-common-commands-1.html","hash":"05f728e8b04de04f5daaf5a2e505fbd7d9a5370e","modified":1644700566069},{"_id":"public/2021-02-28-get-start-with-tmux.html","hash":"3c31fb6040fde8b9277dc5d71f80c411ec52a1ab","modified":1644700566069},{"_id":"public/2020-04-26-gtd-plan.html","hash":"0a4b5889bfaa2aebb605077e9398daba4a18a9da","modified":1644700566069},{"_id":"public/2019-03-23-canada-personal-tax-rrsp-and-tfsa.html","hash":"8fcea8d9731a901ab12e150107f9ddb313115479","modified":1644700566069},{"_id":"public/2017-09-12-chan-xue-ru-men-lin-mu-da-zhuo.html","hash":"4b8ec6c50b423d26c498bdbf7ef9d80f73735ef2","modified":1644700566069},{"_id":"public/2017-09-10-wang-yangming.html","hash":"3da30440c0ffcd707863518fc0ba802e74b4fc85","modified":1644700566069},{"_id":"public/2017-03-11-powerset-algorithms.html","hash":"d4de1f5937692839ffd5d77d7f04eb54d8b6f1df","modified":1644700566069},{"_id":"public/2017-02-20-php-advance-3-good-practice.html","hash":"b0af8615d1e059a9fb40aec6aed6f278f84f00f4","modified":1644700566069},{"_id":"public/2017-01-04-vim-configuration.html","hash":"493f0a3e5cea74a71c485512f0e403235e00c41d","modified":1644700566069},{"_id":"public/2016-12-30-keyboard-conf.html","hash":"907376070315972bb289c715bf3b7b6880c45eee","modified":1644700566069},{"_id":"public/2016-12-11-be-productive-for-mac-1.html","hash":"d5662a262655ba75e3290ff53f0fc5c883003ca1","modified":1644700566069},{"_id":"public/2016-11-17-elasticsearch-02-mapping.html","hash":"9ec9ad39f7c181bb1f57179afb502fe81c19148b","modified":1644700566069},{"_id":"public/2016-10-03-php-advance-2-psr.html","hash":"18122385842e7333c0d91fa48a5db4c46f8ecdd3","modified":1644700566069},{"_id":"public/2016-08-01-php-advance-1-useage.html","hash":"ccce71b58ea4e7a2d0029cc1b5e1f999da96ab3f","modified":1644700566069},{"_id":"public/2014-12-18-linux-notes.html","hash":"01f13ed9b39c7aa3aa453247fd41bfea0d2a55ab","modified":1644700566069},{"_id":"public/image/gavatar.jpg","hash":"974547c384669846ee47989cb3b9c3f80002f010","modified":1644700566069},{"_id":"public/favicon.png","hash":"6ad676a2df760d823510d5ddb9a6b367247bd9c2","modified":1644700566069},{"_id":"public/fonts/iconfont/iconfont.svg","hash":"077b513aab87a8fd6f4b8cd728f0fc527521f07e","modified":1644700566069},{"_id":"public/fonts/iconfont/iconfont.eot","hash":"3bcf7f94e18bc2319317a3783d99555a5f40d3b3","modified":1644700566069},{"_id":"public/fonts/iconfont/iconfont.ttf","hash":"15b178fde18fcc19854cd8499461ae4b840587e1","modified":1644700566069},{"_id":"public/fonts/iconfont/iconfont.woff","hash":"2277394b519fa9e870edd2b590c9c51bd7ba22d2","modified":1644700566069},{"_id":"public/fonts/iconfont/iconfont.woff2","hash":"8b918fb5820258317538fc3a8dec32ddb61aa005","modified":1644700566069},{"_id":"public/css/custom.css","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1644700566069},{"_id":"public/css/base.css","hash":"ea2d491ce6242c6b7087a2652a1135694c292137","modified":1644700566069},{"_id":"public/css/media.css","hash":"08504a15857dd6c31157010177608e8c9ff89e3e","modified":1644700566069},{"_id":"public/css/normalize.css","hash":"2d4b663b6a4c68295b6ba240fa2dd9fb3863093c","modified":1644700566069},{"_id":"public/css/layout.css","hash":"c81e2e01ff5e95a3e613064b8490045ff936c305","modified":1644700566069},{"_id":"public/css/font.css","hash":"87059edd1f2bfc4296f5599e73208893f2b06458","modified":1644700566069},{"_id":"public/css/variable.css","hash":"cb4180b3bbad471e30cf52ebb40e998d58a30d7d","modified":1644700566069},{"_id":"public/fonts/iconfont/demo.css","hash":"65c50db528a5abe06426b1a20735feaf1f2a0d9b","modified":1644700566069},{"_id":"public/js/script.js","hash":"fe634b02c92aa992be3087c57781c2b21bc1b627","modified":1644700566069},{"_id":"public/js/tocbot.min.js","hash":"98af336bfc6118bd6aaae5722491e212ab70b5d3","modified":1644700566069},{"_id":"public/fonts/iconfont/iconfont.css","hash":"1277d6d1b3a3cbd93b1c135557b99612f7bba1b5","modified":1644700566069},{"_id":"public/fonts/iconfont/iconfont.js","hash":"92597acc86d5cd7d604d6508ad8ed688902e6c2d","modified":1644700566069},{"_id":"public/fonts/iconfont/iconfont.json","hash":"67644fad0a62896642ff60e800f6702b030f0336","modified":1644700566069},{"_id":"public/css/style.css","hash":"d469aecf37d04a8a12965928f08972764f20c595","modified":1644700566069},{"_id":"public/fonts/iconfont/demo_index.html","hash":"c9406308092dd599bc42fd102dcfad27151815c3","modified":1644700566069},{"_id":"public/fonts/lanting/lanting.woff2","hash":"5f325fcd2726a5b44e08b7004a5219e14847cbfa","modified":1644700566069},{"_id":"public/fonts/lanting/lanting.woff","hash":"642ad1f17d27d4b1010d1a0571d1b44cbc823d9d","modified":1644700566069},{"_id":"public/fonts/lanting/lanting.eot","hash":"3e184614f037939a6f98d607da3ed7dffb350e65","modified":1644700566069},{"_id":"public/fonts/lanting/lanting.TTF","hash":"97e9a4538cceef4b17d54c7dc589524905d1b685","modified":1644700566069},{"_id":"public/fonts/lanting/lanting.otf","hash":"4e184da596772d3ef6e5763cdee3e46a1ce2f2dd","modified":1644700566069}],"Category":[{"name":"阅读笔记","_id":"ckzkc92wy0004oqox6ghlbce6"},{"name":"编程学习","_id":"ckzkc92x4000foqox6k3n3mxq"},{"name":"生活随想","_id":"ckzkc92xe001koqoxbxo7f4z5"}],"Data":[],"Page":[{"title":"分类","layout":"category","date":"2020-04-19T02:20:23.000Z","_content":"","source":"category/index.md","raw":"---\ntitle: 分类\nlayout: category\ndate: 2020-04-18 22:20:23\n---\n","updated":"2022-02-12T20:53:10.510Z","path":"category/index.html","comments":1,"_id":"ckzkc92ws0000oqox83461izm","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"关于/About Me","layout":"page","date":"2014-11-11T05:00:00.000Z","_content":"\n## 个人简介/Profile\n\nNothing to talk about...\n\n## 个人链接/Links\n\nGithub: [@erictt](https://github.com/erictt)\nEmail: ericyy87@gmail.com\nBlog: https://ericyy.me\nLinkedIn: https://www.linkedin.com/in/ericyyy/\n软件工程 & 机器学习笔记/CS & ML Notes: https://cs.ericyy.me\n","source":"about/index.md","raw":"---\ntitle: 关于/About Me\nlayout: page\ndate: 2014-11-11\n---\n\n## 个人简介/Profile\n\nNothing to talk about...\n\n## 个人链接/Links\n\nGithub: [@erictt](https://github.com/erictt)\nEmail: ericyy87@gmail.com\nBlog: https://ericyy.me\nLinkedIn: https://www.linkedin.com/in/ericyyy/\n软件工程 & 机器学习笔记/CS & ML Notes: https://cs.ericyy.me\n","updated":"2022-02-12T21:02:49.630Z","path":"about/index.html","comments":1,"_id":"ckzkc92wx0002oqoxdggfe04r","content":"<h2 id=\"个人简介-x2F-Profile\"><a href=\"#个人简介-x2F-Profile\" class=\"headerlink\" title=\"个人简介&#x2F;Profile\"></a>个人简介&#x2F;Profile</h2><p>Nothing to talk about…</p>\n<h2 id=\"个人链接-x2F-Links\"><a href=\"#个人链接-x2F-Links\" class=\"headerlink\" title=\"个人链接&#x2F;Links\"></a>个人链接&#x2F;Links</h2><p>Github: <a href=\"https://github.com/erictt\">@erictt</a><br>Email: <a href=\"mailto:&#x65;&#114;&#105;&#x63;&#x79;&#121;&#x38;&#x37;&#64;&#x67;&#x6d;&#x61;&#x69;&#108;&#x2e;&#x63;&#111;&#x6d;\">&#x65;&#114;&#105;&#x63;&#x79;&#121;&#x38;&#x37;&#64;&#x67;&#x6d;&#x61;&#x69;&#108;&#x2e;&#x63;&#111;&#x6d;</a><br>Blog: <a href=\"https://ericyy.me/\">https://ericyy.me</a><br>LinkedIn: <a href=\"https://www.linkedin.com/in/ericyyy/\">https://www.linkedin.com/in/ericyyy/</a><br>软件工程 &amp; 机器学习笔记&#x2F;CS &amp; ML Notes: <a href=\"https://cs.ericyy.me/\">https://cs.ericyy.me</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"个人简介-x2F-Profile\"><a href=\"#个人简介-x2F-Profile\" class=\"headerlink\" title=\"个人简介&#x2F;Profile\"></a>个人简介&#x2F;Profile</h2><p>Nothing to talk about…</p>\n<h2 id=\"个人链接-x2F-Links\"><a href=\"#个人链接-x2F-Links\" class=\"headerlink\" title=\"个人链接&#x2F;Links\"></a>个人链接&#x2F;Links</h2><p>Github: <a href=\"https://github.com/erictt\">@erictt</a><br>Email: <a href=\"mailto:&#x65;&#114;&#105;&#x63;&#x79;&#121;&#x38;&#x37;&#64;&#x67;&#x6d;&#x61;&#x69;&#108;&#x2e;&#x63;&#111;&#x6d;\">&#x65;&#114;&#105;&#x63;&#x79;&#121;&#x38;&#x37;&#64;&#x67;&#x6d;&#x61;&#x69;&#108;&#x2e;&#x63;&#111;&#x6d;</a><br>Blog: <a href=\"https://ericyy.me/\">https://ericyy.me</a><br>LinkedIn: <a href=\"https://www.linkedin.com/in/ericyyy/\">https://www.linkedin.com/in/ericyyy/</a><br>软件工程 &amp; 机器学习笔记&#x2F;CS &amp; ML Notes: <a href=\"https://cs.ericyy.me/\">https://cs.ericyy.me</a></p>\n"},{"title":"标签","layout":"tag","date":"2020-04-19T02:20:18.000Z","_content":"","source":"tag/index.md","raw":"---\ntitle: 标签\nlayout: tag\ndate: 2020-04-18 22:20:18\n---\n","updated":"2022-02-12T20:53:10.510Z","path":"tag/index.html","comments":1,"_id":"ckzkc92x00006oqoxei3l7fsp","content":"","site":{"data":{}},"excerpt":"","more":""}],"Post":[{"layout":"post","title":"名词解释","date":"2014-11-13T05:00:00.000Z","description":"一些自己对名词的理解","keywords":"成熟,融入,名词","_content":"\n#### 成熟\n一种自觉。让你可以轻车熟路地以简单世故的方式应对身边的事物，并拿捏到最佳程度。而在这样的世界里，你是自由的。你可以随心所欲而不逾矩。\n\n#### 融入\n去掉自己的独特个性，接受主流的价值观。\n\n---\n以前总会努力去了解人性，理解这个世界，但还是做不到。然后远离了很多人和事，把自己关在屋子里。一天，一个月，一年。慢慢发现，时间真的是这世上唯一存在的东西，而人只不过证明其存在罢了。\n\n\n","source":"_posts/2014-11-13-my-dict.md","raw":"---\nlayout: post\ntitle: 名词解释\ncategory: 阅读笔记\ntags: [笔记]\ndate: 2014-11-13\ndescription: 一些自己对名词的理解\nkeywords: 成熟,融入,名词\n---\n\n#### 成熟\n一种自觉。让你可以轻车熟路地以简单世故的方式应对身边的事物，并拿捏到最佳程度。而在这样的世界里，你是自由的。你可以随心所欲而不逾矩。\n\n#### 融入\n去掉自己的独特个性，接受主流的价值观。\n\n---\n以前总会努力去了解人性，理解这个世界，但还是做不到。然后远离了很多人和事，把自己关在屋子里。一天，一个月，一年。慢慢发现，时间真的是这世上唯一存在的东西，而人只不过证明其存在罢了。\n\n\n","slug":"2014-11-13-my-dict","published":1,"updated":"2022-02-12T20:53:10.500Z","comments":1,"photos":[],"link":"","_id":"ckzkc92wu0001oqoxaveve1sy","content":"<h4 id=\"成熟\"><a href=\"#成熟\" class=\"headerlink\" title=\"成熟\"></a>成熟</h4><p>一种自觉。让你可以轻车熟路地以简单世故的方式应对身边的事物，并拿捏到最佳程度。而在这样的世界里，你是自由的。你可以随心所欲而不逾矩。</p>\n<h4 id=\"融入\"><a href=\"#融入\" class=\"headerlink\" title=\"融入\"></a>融入</h4><p>去掉自己的独特个性，接受主流的价值观。</p>\n<hr>\n<p>以前总会努力去了解人性，理解这个世界，但还是做不到。然后远离了很多人和事，把自己关在屋子里。一天，一个月，一年。慢慢发现，时间真的是这世上唯一存在的东西，而人只不过证明其存在罢了。</p>\n","site":{"data":{}},"excerpt":"","more":"<h4 id=\"成熟\"><a href=\"#成熟\" class=\"headerlink\" title=\"成熟\"></a>成熟</h4><p>一种自觉。让你可以轻车熟路地以简单世故的方式应对身边的事物，并拿捏到最佳程度。而在这样的世界里，你是自由的。你可以随心所欲而不逾矩。</p>\n<h4 id=\"融入\"><a href=\"#融入\" class=\"headerlink\" title=\"融入\"></a>融入</h4><p>去掉自己的独特个性，接受主流的价值观。</p>\n<hr>\n<p>以前总会努力去了解人性，理解这个世界，但还是做不到。然后远离了很多人和事，把自己关在屋子里。一天，一个月，一年。慢慢发现，时间真的是这世上唯一存在的东西，而人只不过证明其存在罢了。</p>\n"},{"layout":"post","title":"读书摘录","date":"2014-11-14T05:00:00.000Z","description":"收录自己喜欢的句子","keywords":"哲学,生活,见解","_content":"\nUpdated at 2014.11.18\n\n在极限的媚俗之王国，总是先有答案并排除一切新问题。所以极权的媚俗的真正对手就是爱发问的人。 人们总想以自己的生活制造媚俗，要摆脱它，得付出多少艰辛，令人绝望。\n-- 米兰昆德拉《生命中不能承受之轻》\n\n一个呆板的人只能理解呆板事物，一个庸俗的人只会欣赏平庸和俗套，头脑混乱者喜欢模糊不清的东西，没有思想的人则和胡言昏话气味相投。\n-- 叔本华\n\n一个习惯于处理钱财的有钱女人，会小心翼翼地花钱。但一个在结婚以后才首次获得支配金钱权利的女人，会再用钱的时候大胆妄为，她简直就是大肆挥霍。\n-- 博斯维尔《约翰逊的一生》\n\n在独处的时候，每个人都只能反求于自身，这个人的自身拥有就会暴露无遗。\n-- 叔本华\n\n----\nUpdated at 2014.11.14\n\n不乱于心，不困于情。不畏将来，不念过往。如此，安好。\n-- 丰子恺\n\nDon’t let the noise of others’ opinions drown out your own inner voice. And most important, have the courage to follow your heart and intuition.\n-- Steve Jobs\n\nAs a teenager I was so insecure. I was the type of guy that never fitted in because he never dared to choose. I was convinced I had absolutely no talent at all. For nothing. And that thought took away all my ambition too.\n-- Johnny Depp\n\n人们最终所真正能够理解和欣赏的事物，只不过是一些在本质上和他自身相同的事物罢了。\n-- 叔本华\n\n奈何一个人随着年龄增长，梦想便不复轻盈。他开始用双手掂量生活，更看重果实而非花朵。\n-- 叶芝《凯尔特的薄暮》\n\n派：“人生就是不断地放下，遗憾的是，我都没能好好地与他们告别。”\n-- 李安  《少年派的奇幻漂流》\n\n最美丽的女人不是她自身，而是她营造的美丽氛围。\n-- 严歌苓《无出路咖啡馆》\n\n老师问我长大想做什么，我说“快乐的人”。老师说我不懂问题，我告诉老师，是他不懂人生。\n-- 约翰·列侬\n\n麦兜系列的很大一部分是在试图回答一个问题: 人怎样才可以不扭曲自己, 同时还能面对这个比较扭曲的世界\n-- \"麦兜之父\"谢立文\n\n白岩松有天安慰我：“人们声称的最美好的岁月其实都是最痛苦的，只是事后回忆起来的时候才那么幸福。”\n-- 柴静《看见》\n\n好莱坞的想象力，它代表着人类的技术和制作的顶峰，但是，以技术和制作为代表的想象不是人类想象的全部。好莱坞的想象，是头脑的想象，而还有一种想象则属于心灵。科学和技术的探索也许有穷尽的一天，而心灵的想象却永无止境。\n-- 蒋韵\n\n漂亮和美丽是两回事。一双眼睛可以不漂亮，但眼神可以美丽。一副不够标志的面容可以有可爱的神态，一副不完美的身材可以有好看的仪态和举止。这都在于一个灵魂的丰富和坦荡。或许美化灵魂有不少途径，但我想，阅读是其中易走的，不昂贵的，不须求助他人的捷径。\n-- @严歌苓\n\n我们花了两年学会说话，却要花上六十年来学会闭嘴。大多数时候，我们说得越多，彼此的距离却越远，矛盾也越多。在沟通中，大多数人总是急于表达自己，一吐为快，却一点也不懂对方。两年学说话，一生学闭嘴。懂与不懂，不多说。心乱心静，慢慢说。若真没话，就别说。\n-- 海明威\n\n有些人在普通人里算出类拔萃，非常努力又不甘平庸。这种人但凡有了了一点年龄或阅历，就总忍不住想表现得深刻一点。在伪装深刻和真心肤浅中间，选择哪个更容易看见自己？\n-- 柴静《看见》\n\n他现在穷了，原因并非别人剥夺了他的一切，而是他抛弃了一切。缘何如此？---他惯于寻觅。所谓穷人，正是那些对他甘愿受穷做了错误理解的人。\n-- 尼采\n\n有时，答案和问题并不在一条直线上。\n-- 刘墉\n\n友情和爱情一样，也是有保鲜期的，想一想，有多少已经不联系的朋友，默默地存在于你的通讯录中。不是不想联系，实在是人生残酷，时空变幻，你我再无交集，与其相见，不如怀念，与其攀缘，不如随缘。人生不过是一场旅行，你路过我，我路过你，然后，各自修行，各自向前。\n--  伊北《半生素衣:陆小曼传》\n\n两种人爱做梦：弱者和智者。弱者梦想现实中有但他无力得到的东西，他以之抚慰生存的失败。智者梦想现实中没有也不可能有的东西，他以之解说生存的意义。\n-- 周国平\n\nLife's altered you, as it's altered me. And what would be the point of living if we didn't let life change us? 生活改变了你，也改变了我，如果我们拒绝被生活改变，那生活又有什么意义？\n-- 《唐顿庄园》\n\n指间的戒指不再闪亮，婚纱在衣柜早就尘封，我们的容颜都已慢慢地苍老。但那份心情，却依旧没有改变。感谢你带给我的每一天。正是因为你，我才有勇气说，“永远，永远”。\n-- 高铭《天才在左 疯子在右》\n\nYou don't need anybody to tell you who you are or what you are. You are what you are!\n-- John Lennon\n\n","source":"_posts/2014-11-14-aphorism.md","raw":"---\nlayout: post\ntitle: 读书摘录\ncategory: 阅读笔记\ntags: [哲学, 笔记]\ndate: 2014-11-14\ndescription: 收录自己喜欢的句子\nkeywords: 哲学,生活,见解\n---\n\nUpdated at 2014.11.18\n\n在极限的媚俗之王国，总是先有答案并排除一切新问题。所以极权的媚俗的真正对手就是爱发问的人。 人们总想以自己的生活制造媚俗，要摆脱它，得付出多少艰辛，令人绝望。\n-- 米兰昆德拉《生命中不能承受之轻》\n\n一个呆板的人只能理解呆板事物，一个庸俗的人只会欣赏平庸和俗套，头脑混乱者喜欢模糊不清的东西，没有思想的人则和胡言昏话气味相投。\n-- 叔本华\n\n一个习惯于处理钱财的有钱女人，会小心翼翼地花钱。但一个在结婚以后才首次获得支配金钱权利的女人，会再用钱的时候大胆妄为，她简直就是大肆挥霍。\n-- 博斯维尔《约翰逊的一生》\n\n在独处的时候，每个人都只能反求于自身，这个人的自身拥有就会暴露无遗。\n-- 叔本华\n\n----\nUpdated at 2014.11.14\n\n不乱于心，不困于情。不畏将来，不念过往。如此，安好。\n-- 丰子恺\n\nDon’t let the noise of others’ opinions drown out your own inner voice. And most important, have the courage to follow your heart and intuition.\n-- Steve Jobs\n\nAs a teenager I was so insecure. I was the type of guy that never fitted in because he never dared to choose. I was convinced I had absolutely no talent at all. For nothing. And that thought took away all my ambition too.\n-- Johnny Depp\n\n人们最终所真正能够理解和欣赏的事物，只不过是一些在本质上和他自身相同的事物罢了。\n-- 叔本华\n\n奈何一个人随着年龄增长，梦想便不复轻盈。他开始用双手掂量生活，更看重果实而非花朵。\n-- 叶芝《凯尔特的薄暮》\n\n派：“人生就是不断地放下，遗憾的是，我都没能好好地与他们告别。”\n-- 李安  《少年派的奇幻漂流》\n\n最美丽的女人不是她自身，而是她营造的美丽氛围。\n-- 严歌苓《无出路咖啡馆》\n\n老师问我长大想做什么，我说“快乐的人”。老师说我不懂问题，我告诉老师，是他不懂人生。\n-- 约翰·列侬\n\n麦兜系列的很大一部分是在试图回答一个问题: 人怎样才可以不扭曲自己, 同时还能面对这个比较扭曲的世界\n-- \"麦兜之父\"谢立文\n\n白岩松有天安慰我：“人们声称的最美好的岁月其实都是最痛苦的，只是事后回忆起来的时候才那么幸福。”\n-- 柴静《看见》\n\n好莱坞的想象力，它代表着人类的技术和制作的顶峰，但是，以技术和制作为代表的想象不是人类想象的全部。好莱坞的想象，是头脑的想象，而还有一种想象则属于心灵。科学和技术的探索也许有穷尽的一天，而心灵的想象却永无止境。\n-- 蒋韵\n\n漂亮和美丽是两回事。一双眼睛可以不漂亮，但眼神可以美丽。一副不够标志的面容可以有可爱的神态，一副不完美的身材可以有好看的仪态和举止。这都在于一个灵魂的丰富和坦荡。或许美化灵魂有不少途径，但我想，阅读是其中易走的，不昂贵的，不须求助他人的捷径。\n-- @严歌苓\n\n我们花了两年学会说话，却要花上六十年来学会闭嘴。大多数时候，我们说得越多，彼此的距离却越远，矛盾也越多。在沟通中，大多数人总是急于表达自己，一吐为快，却一点也不懂对方。两年学说话，一生学闭嘴。懂与不懂，不多说。心乱心静，慢慢说。若真没话，就别说。\n-- 海明威\n\n有些人在普通人里算出类拔萃，非常努力又不甘平庸。这种人但凡有了了一点年龄或阅历，就总忍不住想表现得深刻一点。在伪装深刻和真心肤浅中间，选择哪个更容易看见自己？\n-- 柴静《看见》\n\n他现在穷了，原因并非别人剥夺了他的一切，而是他抛弃了一切。缘何如此？---他惯于寻觅。所谓穷人，正是那些对他甘愿受穷做了错误理解的人。\n-- 尼采\n\n有时，答案和问题并不在一条直线上。\n-- 刘墉\n\n友情和爱情一样，也是有保鲜期的，想一想，有多少已经不联系的朋友，默默地存在于你的通讯录中。不是不想联系，实在是人生残酷，时空变幻，你我再无交集，与其相见，不如怀念，与其攀缘，不如随缘。人生不过是一场旅行，你路过我，我路过你，然后，各自修行，各自向前。\n--  伊北《半生素衣:陆小曼传》\n\n两种人爱做梦：弱者和智者。弱者梦想现实中有但他无力得到的东西，他以之抚慰生存的失败。智者梦想现实中没有也不可能有的东西，他以之解说生存的意义。\n-- 周国平\n\nLife's altered you, as it's altered me. And what would be the point of living if we didn't let life change us? 生活改变了你，也改变了我，如果我们拒绝被生活改变，那生活又有什么意义？\n-- 《唐顿庄园》\n\n指间的戒指不再闪亮，婚纱在衣柜早就尘封，我们的容颜都已慢慢地苍老。但那份心情，却依旧没有改变。感谢你带给我的每一天。正是因为你，我才有勇气说，“永远，永远”。\n-- 高铭《天才在左 疯子在右》\n\nYou don't need anybody to tell you who you are or what you are. You are what you are!\n-- John Lennon\n\n","slug":"2014-11-14-aphorism","published":1,"updated":"2022-02-12T20:53:10.500Z","comments":1,"photos":[],"link":"","_id":"ckzkc92wx0003oqox58dzgsha","content":"<p>Updated at 2014.11.18</p>\n<p>在极限的媚俗之王国，总是先有答案并排除一切新问题。所以极权的媚俗的真正对手就是爱发问的人。 人们总想以自己的生活制造媚俗，要摆脱它，得付出多少艰辛，令人绝望。<br>– 米兰昆德拉《生命中不能承受之轻》</p>\n<p>一个呆板的人只能理解呆板事物，一个庸俗的人只会欣赏平庸和俗套，头脑混乱者喜欢模糊不清的东西，没有思想的人则和胡言昏话气味相投。<br>– 叔本华</p>\n<p>一个习惯于处理钱财的有钱女人，会小心翼翼地花钱。但一个在结婚以后才首次获得支配金钱权利的女人，会再用钱的时候大胆妄为，她简直就是大肆挥霍。<br>– 博斯维尔《约翰逊的一生》</p>\n<p>在独处的时候，每个人都只能反求于自身，这个人的自身拥有就会暴露无遗。<br>– 叔本华</p>\n<hr>\n<p>Updated at 2014.11.14</p>\n<p>不乱于心，不困于情。不畏将来，不念过往。如此，安好。<br>– 丰子恺</p>\n<p>Don’t let the noise of others’ opinions drown out your own inner voice. And most important, have the courage to follow your heart and intuition.<br>– Steve Jobs</p>\n<p>As a teenager I was so insecure. I was the type of guy that never fitted in because he never dared to choose. I was convinced I had absolutely no talent at all. For nothing. And that thought took away all my ambition too.<br>– Johnny Depp</p>\n<p>人们最终所真正能够理解和欣赏的事物，只不过是一些在本质上和他自身相同的事物罢了。<br>– 叔本华</p>\n<p>奈何一个人随着年龄增长，梦想便不复轻盈。他开始用双手掂量生活，更看重果实而非花朵。<br>– 叶芝《凯尔特的薄暮》</p>\n<p>派：“人生就是不断地放下，遗憾的是，我都没能好好地与他们告别。”<br>– 李安  《少年派的奇幻漂流》</p>\n<p>最美丽的女人不是她自身，而是她营造的美丽氛围。<br>– 严歌苓《无出路咖啡馆》</p>\n<p>老师问我长大想做什么，我说“快乐的人”。老师说我不懂问题，我告诉老师，是他不懂人生。<br>– 约翰·列侬</p>\n<p>麦兜系列的很大一部分是在试图回答一个问题: 人怎样才可以不扭曲自己, 同时还能面对这个比较扭曲的世界<br>– “麦兜之父”谢立文</p>\n<p>白岩松有天安慰我：“人们声称的最美好的岁月其实都是最痛苦的，只是事后回忆起来的时候才那么幸福。”<br>– 柴静《看见》</p>\n<p>好莱坞的想象力，它代表着人类的技术和制作的顶峰，但是，以技术和制作为代表的想象不是人类想象的全部。好莱坞的想象，是头脑的想象，而还有一种想象则属于心灵。科学和技术的探索也许有穷尽的一天，而心灵的想象却永无止境。<br>– 蒋韵</p>\n<p>漂亮和美丽是两回事。一双眼睛可以不漂亮，但眼神可以美丽。一副不够标志的面容可以有可爱的神态，一副不完美的身材可以有好看的仪态和举止。这都在于一个灵魂的丰富和坦荡。或许美化灵魂有不少途径，但我想，阅读是其中易走的，不昂贵的，不须求助他人的捷径。<br>– @严歌苓</p>\n<p>我们花了两年学会说话，却要花上六十年来学会闭嘴。大多数时候，我们说得越多，彼此的距离却越远，矛盾也越多。在沟通中，大多数人总是急于表达自己，一吐为快，却一点也不懂对方。两年学说话，一生学闭嘴。懂与不懂，不多说。心乱心静，慢慢说。若真没话，就别说。<br>– 海明威</p>\n<p>有些人在普通人里算出类拔萃，非常努力又不甘平庸。这种人但凡有了了一点年龄或阅历，就总忍不住想表现得深刻一点。在伪装深刻和真心肤浅中间，选择哪个更容易看见自己？<br>– 柴静《看见》</p>\n<p>他现在穷了，原因并非别人剥夺了他的一切，而是他抛弃了一切。缘何如此？—他惯于寻觅。所谓穷人，正是那些对他甘愿受穷做了错误理解的人。<br>– 尼采</p>\n<p>有时，答案和问题并不在一条直线上。<br>– 刘墉</p>\n<p>友情和爱情一样，也是有保鲜期的，想一想，有多少已经不联系的朋友，默默地存在于你的通讯录中。不是不想联系，实在是人生残酷，时空变幻，你我再无交集，与其相见，不如怀念，与其攀缘，不如随缘。人生不过是一场旅行，你路过我，我路过你，然后，各自修行，各自向前。<br>–  伊北《半生素衣:陆小曼传》</p>\n<p>两种人爱做梦：弱者和智者。弱者梦想现实中有但他无力得到的东西，他以之抚慰生存的失败。智者梦想现实中没有也不可能有的东西，他以之解说生存的意义。<br>– 周国平</p>\n<p>Life’s altered you, as it’s altered me. And what would be the point of living if we didn’t let life change us? 生活改变了你，也改变了我，如果我们拒绝被生活改变，那生活又有什么意义？<br>– 《唐顿庄园》</p>\n<p>指间的戒指不再闪亮，婚纱在衣柜早就尘封，我们的容颜都已慢慢地苍老。但那份心情，却依旧没有改变。感谢你带给我的每一天。正是因为你，我才有勇气说，“永远，永远”。<br>– 高铭《天才在左 疯子在右》</p>\n<p>You don’t need anybody to tell you who you are or what you are. You are what you are!<br>– John Lennon</p>\n","site":{"data":{}},"excerpt":"","more":"<p>Updated at 2014.11.18</p>\n<p>在极限的媚俗之王国，总是先有答案并排除一切新问题。所以极权的媚俗的真正对手就是爱发问的人。 人们总想以自己的生活制造媚俗，要摆脱它，得付出多少艰辛，令人绝望。<br>– 米兰昆德拉《生命中不能承受之轻》</p>\n<p>一个呆板的人只能理解呆板事物，一个庸俗的人只会欣赏平庸和俗套，头脑混乱者喜欢模糊不清的东西，没有思想的人则和胡言昏话气味相投。<br>– 叔本华</p>\n<p>一个习惯于处理钱财的有钱女人，会小心翼翼地花钱。但一个在结婚以后才首次获得支配金钱权利的女人，会再用钱的时候大胆妄为，她简直就是大肆挥霍。<br>– 博斯维尔《约翰逊的一生》</p>\n<p>在独处的时候，每个人都只能反求于自身，这个人的自身拥有就会暴露无遗。<br>– 叔本华</p>\n<hr>\n<p>Updated at 2014.11.14</p>\n<p>不乱于心，不困于情。不畏将来，不念过往。如此，安好。<br>– 丰子恺</p>\n<p>Don’t let the noise of others’ opinions drown out your own inner voice. And most important, have the courage to follow your heart and intuition.<br>– Steve Jobs</p>\n<p>As a teenager I was so insecure. I was the type of guy that never fitted in because he never dared to choose. I was convinced I had absolutely no talent at all. For nothing. And that thought took away all my ambition too.<br>– Johnny Depp</p>\n<p>人们最终所真正能够理解和欣赏的事物，只不过是一些在本质上和他自身相同的事物罢了。<br>– 叔本华</p>\n<p>奈何一个人随着年龄增长，梦想便不复轻盈。他开始用双手掂量生活，更看重果实而非花朵。<br>– 叶芝《凯尔特的薄暮》</p>\n<p>派：“人生就是不断地放下，遗憾的是，我都没能好好地与他们告别。”<br>– 李安  《少年派的奇幻漂流》</p>\n<p>最美丽的女人不是她自身，而是她营造的美丽氛围。<br>– 严歌苓《无出路咖啡馆》</p>\n<p>老师问我长大想做什么，我说“快乐的人”。老师说我不懂问题，我告诉老师，是他不懂人生。<br>– 约翰·列侬</p>\n<p>麦兜系列的很大一部分是在试图回答一个问题: 人怎样才可以不扭曲自己, 同时还能面对这个比较扭曲的世界<br>– “麦兜之父”谢立文</p>\n<p>白岩松有天安慰我：“人们声称的最美好的岁月其实都是最痛苦的，只是事后回忆起来的时候才那么幸福。”<br>– 柴静《看见》</p>\n<p>好莱坞的想象力，它代表着人类的技术和制作的顶峰，但是，以技术和制作为代表的想象不是人类想象的全部。好莱坞的想象，是头脑的想象，而还有一种想象则属于心灵。科学和技术的探索也许有穷尽的一天，而心灵的想象却永无止境。<br>– 蒋韵</p>\n<p>漂亮和美丽是两回事。一双眼睛可以不漂亮，但眼神可以美丽。一副不够标志的面容可以有可爱的神态，一副不完美的身材可以有好看的仪态和举止。这都在于一个灵魂的丰富和坦荡。或许美化灵魂有不少途径，但我想，阅读是其中易走的，不昂贵的，不须求助他人的捷径。<br>– @严歌苓</p>\n<p>我们花了两年学会说话，却要花上六十年来学会闭嘴。大多数时候，我们说得越多，彼此的距离却越远，矛盾也越多。在沟通中，大多数人总是急于表达自己，一吐为快，却一点也不懂对方。两年学说话，一生学闭嘴。懂与不懂，不多说。心乱心静，慢慢说。若真没话，就别说。<br>– 海明威</p>\n<p>有些人在普通人里算出类拔萃，非常努力又不甘平庸。这种人但凡有了了一点年龄或阅历，就总忍不住想表现得深刻一点。在伪装深刻和真心肤浅中间，选择哪个更容易看见自己？<br>– 柴静《看见》</p>\n<p>他现在穷了，原因并非别人剥夺了他的一切，而是他抛弃了一切。缘何如此？—他惯于寻觅。所谓穷人，正是那些对他甘愿受穷做了错误理解的人。<br>– 尼采</p>\n<p>有时，答案和问题并不在一条直线上。<br>– 刘墉</p>\n<p>友情和爱情一样，也是有保鲜期的，想一想，有多少已经不联系的朋友，默默地存在于你的通讯录中。不是不想联系，实在是人生残酷，时空变幻，你我再无交集，与其相见，不如怀念，与其攀缘，不如随缘。人生不过是一场旅行，你路过我，我路过你，然后，各自修行，各自向前。<br>–  伊北《半生素衣:陆小曼传》</p>\n<p>两种人爱做梦：弱者和智者。弱者梦想现实中有但他无力得到的东西，他以之抚慰生存的失败。智者梦想现实中没有也不可能有的东西，他以之解说生存的意义。<br>– 周国平</p>\n<p>Life’s altered you, as it’s altered me. And what would be the point of living if we didn’t let life change us? 生活改变了你，也改变了我，如果我们拒绝被生活改变，那生活又有什么意义？<br>– 《唐顿庄园》</p>\n<p>指间的戒指不再闪亮，婚纱在衣柜早就尘封，我们的容颜都已慢慢地苍老。但那份心情，却依旧没有改变。感谢你带给我的每一天。正是因为你，我才有勇气说，“永远，永远”。<br>– 高铭《天才在左 疯子在右》</p>\n<p>You don’t need anybody to tell you who you are or what you are. You are what you are!<br>– John Lennon</p>\n"},{"layout":"post","title":"Linux 常用命令笔记","date":"2014-12-18T05:00:00.000Z","description":"收录Linux中常用命令","keywords":"Linux","_content":"\n## [Manage User](#manage-user)\n\n* /etc/shadow : Secure user account information\n* /etc/passwd : User account information\n* /etc/gshadow : Contains the shadowed information for group accounts\n* /etc/group : Defines the groups to which users belong\n* /etc/sudoers : List of who can run what by sudo\n* /home/* : Home directories\n\n### Add new Group\n\n* `groupadd [group]`\n\n###  Add new User\n\n* `useradd -m -g [initial_group] -G [additional_groups] -s [login_shell] [username]`\n* `-m` creates the user home directory as /home/username. Within their home directory, a non-root user can write files, delete them, install programs, and so on.\n* `-g` defines the group name or number of the user's initial login group. If specified, the group name must exist; if a group number is provided, it must refer to an already existing group. If not specified, the behaviour of useradd will depend on the USERGROUPS_ENAB variable contained in /etc/login.defs. The default behaviour (USERGROUPS_ENAB yes) is to create a group with the same name as the username, with GID equal to UID.\n* `-G` introduces a list of supplementary groups which the user is also a member of. Each group is separated from the next by a comma, with no intervening spaces. The default is for the user to belong only to the initial group.\n* `-s` defines the path and file name of the user's default login shell. After the boot process is complete, the default login shell is the one specified here. Ensure the chosen shell package is installed if choosing something other than Bash.\n\n###  Set user to sudoers\n\n* Add user to sudo group: `sudo usermod -aG sudo <username>`\n* Remove user from sudo group: `gpasswd -d user sudo`\n\n###  SSH login without password\n\n* `ssh-copy-id user@server`\n* `cat .ssh/id_rsa.pub | ssh user@server 'cat >> .ssh/authorized_keys'`\n    * Avoid entering passphrase (just once):\n        * `eval \"$(ssh-agent -s)\"`\n        * `ssh-add ~/.ssh/id_rsa`\n    * [Auto-launching ssh-agent on msysgit] (https://help.github.com/articles/working-with-ssh-key-passphrases/#auto-launching-ssh-agent-on-msysgit)\n\n###  Generating SSH keys\n\n* `ssh-keygen -t rsa -C \"your_email@example.com\"`\n\n### Change hostname\n\n* `vi /etc/hostname`\n* don't forget to add `127.0.0.1 <hostname>` to /etc/hosts\n\n### Accept ssh host keys automatically on Linux\n\n* `ssh -oStrictHostKeyChecking=no user@remote_host`\n* Disable strict host key checking permanently in ssh\n\n    * Add the following to either ~/.ssh/config or /etc/ssh/ssh_config.\n\n        * Sample 1(disable host key checking for a particular host):\n\n                Host remote_host.com\n                StrictHostKeyChecking no\n\n        * Sample 2(turn off host key checking for all hosts you connect to):\n\n                Host *\n                StrictHostKeyChecking no\n\n        * Sample 3(avoid host key verification, and not use known_hosts file for 192.168.1.* subnet):\n\n                Host 192.168.0.*\n                StrictHostKeyChecking no\n                UserKnownHostsFile=/dev/null\n\n* Add the fingerprint for a server to your known_hosts manually.\n\n    `ssh-keyscan -H <ip-address> >> ~/.ssh/known_hosts`\n\n    `ssh-keyscan -H <hostname> >> ~/.ssh/known_hosts`\n\n    Remove them:\n\n    `ssh-keygen -R <ip-address>`\n\n    `ssh-keygen -R <hostname>`\n\n## Netstat Command\n\n* Find out on which port a program is running\n\n    * `netstat -ap | grep ssh`\n    * `netstat -an | grep ':80'`\n\n## Service Management\n\n* Check service automatically start or not.\n    * `ls /etc/rc2.d` // Just need to check the runlevel 2 on Ubuntu\n* Add service `apache2`\n    * `update-rc.d apache2 defaults`\n*  Remove service `apache2`\n    * `update-rc.d -f  apache2 remove`\n* Check the status of service `apache2`\n    * `service apache2 status`\n* Check Server `hhvm` autoload level\n    * `sudo initctl show-config hhvm`\n\n## Remove executable bit recursively from files (not directories)\n\n* `chmod -R -x+X *`\n\n    * `-R` - operate recursively\n    * `-x` - remove executable flags for all users\n    * `+X` - set executable flags for all users if it is a directory\n    * Note: On OS X, have to do it separately in two commands: `sudo chmod -R -x * && sudo chmod -R +X *`\n\n* `find . -type f -exec chmod -x {} \\;`\n* `chmod -x $(find . -type f)`\n\n## Batch replace text inside text file\n\n* `find . -type f -name \\*.txt -exec sed -i.bak 's|http://|rtmp://|g' {} +`\n\n    * This will create backups of each file. I suggest you check a few to make sure it did what you want, then you can delete them using `find . -name \\*.bak -delete`\n\n## Find and remove files\n\n* `find . -type f -name \"FILE-TO-FIND\" -exec rm -f {} \\;`\n\n    * `-name \"FILE-TO-FIND\"` : File pattern.\n    * `-exec rm -rf {} \\;` : Delete all files matched by file pattern.\n    * `-type f` : Only match files and do not include directory names.\n\n## Bug Collection\n\n* [Ubuntu 14.04] Nodejs ERROR : /usr/bin/env: node: No such file or directory\n    * `ln -s /usr/bin/nodejs /usr/bin/node`\n\n## Checking Hardware\n\n* Mainboard: `dmidecode | grep -i 'serial number'`\n* CPU: `cat /proc/cpuinfo`\n* Hard Drive:\n    * partition `fdisk -l`\n    * size `df -h`\n    * usage `du -h`\n* Memory: `cat /proc/meminfo`\n\n## Kill all the process\n* `ps aux | grep procname | awk '{print $2}' | xargs kill -9`\n\n## Git Related\n\n* Delete remote tags.\n    * `git tag -l | xargs -n 1 git push --delete origin`\n* Delete local tasg.\n    * `git tag -l | xargs git tag -d`\n\n","source":"_posts/2014-12-18-linux-notes.md","raw":"---\nlayout: post\ntitle: Linux 常用命令笔记\ncategory: 编程学习\ndate: 2014-12-18\ntags: [Linux]\ndescription: 收录Linux中常用命令\nkeywords: Linux\n---\n\n## [Manage User](#manage-user)\n\n* /etc/shadow : Secure user account information\n* /etc/passwd : User account information\n* /etc/gshadow : Contains the shadowed information for group accounts\n* /etc/group : Defines the groups to which users belong\n* /etc/sudoers : List of who can run what by sudo\n* /home/* : Home directories\n\n### Add new Group\n\n* `groupadd [group]`\n\n###  Add new User\n\n* `useradd -m -g [initial_group] -G [additional_groups] -s [login_shell] [username]`\n* `-m` creates the user home directory as /home/username. Within their home directory, a non-root user can write files, delete them, install programs, and so on.\n* `-g` defines the group name or number of the user's initial login group. If specified, the group name must exist; if a group number is provided, it must refer to an already existing group. If not specified, the behaviour of useradd will depend on the USERGROUPS_ENAB variable contained in /etc/login.defs. The default behaviour (USERGROUPS_ENAB yes) is to create a group with the same name as the username, with GID equal to UID.\n* `-G` introduces a list of supplementary groups which the user is also a member of. Each group is separated from the next by a comma, with no intervening spaces. The default is for the user to belong only to the initial group.\n* `-s` defines the path and file name of the user's default login shell. After the boot process is complete, the default login shell is the one specified here. Ensure the chosen shell package is installed if choosing something other than Bash.\n\n###  Set user to sudoers\n\n* Add user to sudo group: `sudo usermod -aG sudo <username>`\n* Remove user from sudo group: `gpasswd -d user sudo`\n\n###  SSH login without password\n\n* `ssh-copy-id user@server`\n* `cat .ssh/id_rsa.pub | ssh user@server 'cat >> .ssh/authorized_keys'`\n    * Avoid entering passphrase (just once):\n        * `eval \"$(ssh-agent -s)\"`\n        * `ssh-add ~/.ssh/id_rsa`\n    * [Auto-launching ssh-agent on msysgit] (https://help.github.com/articles/working-with-ssh-key-passphrases/#auto-launching-ssh-agent-on-msysgit)\n\n###  Generating SSH keys\n\n* `ssh-keygen -t rsa -C \"your_email@example.com\"`\n\n### Change hostname\n\n* `vi /etc/hostname`\n* don't forget to add `127.0.0.1 <hostname>` to /etc/hosts\n\n### Accept ssh host keys automatically on Linux\n\n* `ssh -oStrictHostKeyChecking=no user@remote_host`\n* Disable strict host key checking permanently in ssh\n\n    * Add the following to either ~/.ssh/config or /etc/ssh/ssh_config.\n\n        * Sample 1(disable host key checking for a particular host):\n\n                Host remote_host.com\n                StrictHostKeyChecking no\n\n        * Sample 2(turn off host key checking for all hosts you connect to):\n\n                Host *\n                StrictHostKeyChecking no\n\n        * Sample 3(avoid host key verification, and not use known_hosts file for 192.168.1.* subnet):\n\n                Host 192.168.0.*\n                StrictHostKeyChecking no\n                UserKnownHostsFile=/dev/null\n\n* Add the fingerprint for a server to your known_hosts manually.\n\n    `ssh-keyscan -H <ip-address> >> ~/.ssh/known_hosts`\n\n    `ssh-keyscan -H <hostname> >> ~/.ssh/known_hosts`\n\n    Remove them:\n\n    `ssh-keygen -R <ip-address>`\n\n    `ssh-keygen -R <hostname>`\n\n## Netstat Command\n\n* Find out on which port a program is running\n\n    * `netstat -ap | grep ssh`\n    * `netstat -an | grep ':80'`\n\n## Service Management\n\n* Check service automatically start or not.\n    * `ls /etc/rc2.d` // Just need to check the runlevel 2 on Ubuntu\n* Add service `apache2`\n    * `update-rc.d apache2 defaults`\n*  Remove service `apache2`\n    * `update-rc.d -f  apache2 remove`\n* Check the status of service `apache2`\n    * `service apache2 status`\n* Check Server `hhvm` autoload level\n    * `sudo initctl show-config hhvm`\n\n## Remove executable bit recursively from files (not directories)\n\n* `chmod -R -x+X *`\n\n    * `-R` - operate recursively\n    * `-x` - remove executable flags for all users\n    * `+X` - set executable flags for all users if it is a directory\n    * Note: On OS X, have to do it separately in two commands: `sudo chmod -R -x * && sudo chmod -R +X *`\n\n* `find . -type f -exec chmod -x {} \\;`\n* `chmod -x $(find . -type f)`\n\n## Batch replace text inside text file\n\n* `find . -type f -name \\*.txt -exec sed -i.bak 's|http://|rtmp://|g' {} +`\n\n    * This will create backups of each file. I suggest you check a few to make sure it did what you want, then you can delete them using `find . -name \\*.bak -delete`\n\n## Find and remove files\n\n* `find . -type f -name \"FILE-TO-FIND\" -exec rm -f {} \\;`\n\n    * `-name \"FILE-TO-FIND\"` : File pattern.\n    * `-exec rm -rf {} \\;` : Delete all files matched by file pattern.\n    * `-type f` : Only match files and do not include directory names.\n\n## Bug Collection\n\n* [Ubuntu 14.04] Nodejs ERROR : /usr/bin/env: node: No such file or directory\n    * `ln -s /usr/bin/nodejs /usr/bin/node`\n\n## Checking Hardware\n\n* Mainboard: `dmidecode | grep -i 'serial number'`\n* CPU: `cat /proc/cpuinfo`\n* Hard Drive:\n    * partition `fdisk -l`\n    * size `df -h`\n    * usage `du -h`\n* Memory: `cat /proc/meminfo`\n\n## Kill all the process\n* `ps aux | grep procname | awk '{print $2}' | xargs kill -9`\n\n## Git Related\n\n* Delete remote tags.\n    * `git tag -l | xargs -n 1 git push --delete origin`\n* Delete local tasg.\n    * `git tag -l | xargs git tag -d`\n\n","slug":"2014-12-18-linux-notes","published":1,"updated":"2022-02-12T20:53:10.500Z","comments":1,"photos":[],"link":"","_id":"ckzkc92x00007oqoxalribsm7","content":"<h2 id=\"Manage-User\"><a href=\"#Manage-User\" class=\"headerlink\" title=\"Manage User\"></a><a href=\"#manage-user\">Manage User</a></h2><ul>\n<li>&#x2F;etc&#x2F;shadow : Secure user account information</li>\n<li>&#x2F;etc&#x2F;passwd : User account information</li>\n<li>&#x2F;etc&#x2F;gshadow : Contains the shadowed information for group accounts</li>\n<li>&#x2F;etc&#x2F;group : Defines the groups to which users belong</li>\n<li>&#x2F;etc&#x2F;sudoers : List of who can run what by sudo</li>\n<li>&#x2F;home&#x2F;* : Home directories</li>\n</ul>\n<h3 id=\"Add-new-Group\"><a href=\"#Add-new-Group\" class=\"headerlink\" title=\"Add new Group\"></a>Add new Group</h3><ul>\n<li><code>groupadd [group]</code></li>\n</ul>\n<h3 id=\"Add-new-User\"><a href=\"#Add-new-User\" class=\"headerlink\" title=\"Add new User\"></a>Add new User</h3><ul>\n<li><code>useradd -m -g [initial_group] -G [additional_groups] -s [login_shell] [username]</code></li>\n<li><code>-m</code> creates the user home directory as &#x2F;home&#x2F;username. Within their home directory, a non-root user can write files, delete them, install programs, and so on.</li>\n<li><code>-g</code> defines the group name or number of the user’s initial login group. If specified, the group name must exist; if a group number is provided, it must refer to an already existing group. If not specified, the behaviour of useradd will depend on the USERGROUPS_ENAB variable contained in &#x2F;etc&#x2F;login.defs. The default behaviour (USERGROUPS_ENAB yes) is to create a group with the same name as the username, with GID equal to UID.</li>\n<li><code>-G</code> introduces a list of supplementary groups which the user is also a member of. Each group is separated from the next by a comma, with no intervening spaces. The default is for the user to belong only to the initial group.</li>\n<li><code>-s</code> defines the path and file name of the user’s default login shell. After the boot process is complete, the default login shell is the one specified here. Ensure the chosen shell package is installed if choosing something other than Bash.</li>\n</ul>\n<h3 id=\"Set-user-to-sudoers\"><a href=\"#Set-user-to-sudoers\" class=\"headerlink\" title=\"Set user to sudoers\"></a>Set user to sudoers</h3><ul>\n<li>Add user to sudo group: <code>sudo usermod -aG sudo &lt;username&gt;</code></li>\n<li>Remove user from sudo group: <code>gpasswd -d user sudo</code></li>\n</ul>\n<h3 id=\"SSH-login-without-password\"><a href=\"#SSH-login-without-password\" class=\"headerlink\" title=\"SSH login without password\"></a>SSH login without password</h3><ul>\n<li><code>ssh-copy-id user@server</code></li>\n<li><code>cat .ssh/id_rsa.pub | ssh user@server &#39;cat &gt;&gt; .ssh/authorized_keys&#39;</code><ul>\n<li>Avoid entering passphrase (just once):<ul>\n<li><code>eval &quot;$(ssh-agent -s)&quot;</code></li>\n<li><code>ssh-add ~/.ssh/id_rsa</code></li>\n</ul>\n</li>\n<li>[Auto-launching ssh-agent on msysgit] (<a href=\"https://help.github.com/articles/working-with-ssh-key-passphrases/#auto-launching-ssh-agent-on-msysgit\">https://help.github.com/articles/working-with-ssh-key-passphrases/#auto-launching-ssh-agent-on-msysgit</a>)</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Generating-SSH-keys\"><a href=\"#Generating-SSH-keys\" class=\"headerlink\" title=\"Generating SSH keys\"></a>Generating SSH keys</h3><ul>\n<li><code>ssh-keygen -t rsa -C &quot;your_email@example.com&quot;</code></li>\n</ul>\n<h3 id=\"Change-hostname\"><a href=\"#Change-hostname\" class=\"headerlink\" title=\"Change hostname\"></a>Change hostname</h3><ul>\n<li><code>vi /etc/hostname</code></li>\n<li>don’t forget to add <code>127.0.0.1 &lt;hostname&gt;</code> to &#x2F;etc&#x2F;hosts</li>\n</ul>\n<h3 id=\"Accept-ssh-host-keys-automatically-on-Linux\"><a href=\"#Accept-ssh-host-keys-automatically-on-Linux\" class=\"headerlink\" title=\"Accept ssh host keys automatically on Linux\"></a>Accept ssh host keys automatically on Linux</h3><ul>\n<li><p><code>ssh -oStrictHostKeyChecking=no user@remote_host</code></p>\n</li>\n<li><p>Disable strict host key checking permanently in ssh</p>\n<ul>\n<li><p>Add the following to either ~&#x2F;.ssh&#x2F;config or &#x2F;etc&#x2F;ssh&#x2F;ssh_config.</p>\n<ul>\n<li><p>Sample 1(disable host key checking for a particular host):</p>\n<pre><code>  Host remote_host.com\n  StrictHostKeyChecking no\n</code></pre>\n</li>\n<li><p>Sample 2(turn off host key checking for all hosts you connect to):</p>\n<pre><code>  Host *\n  StrictHostKeyChecking no\n</code></pre>\n</li>\n<li><p>Sample 3(avoid host key verification, and not use known_hosts file for 192.168.1.* subnet):</p>\n<pre><code>  Host 192.168.0.*\n  StrictHostKeyChecking no\n  UserKnownHostsFile=/dev/null\n</code></pre>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>Add the fingerprint for a server to your known_hosts manually.</p>\n<p>  <code>ssh-keyscan -H &lt;ip-address&gt; &gt;&gt; ~/.ssh/known_hosts</code></p>\n<p>  <code>ssh-keyscan -H &lt;hostname&gt; &gt;&gt; ~/.ssh/known_hosts</code></p>\n<p>  Remove them:</p>\n<p>  <code>ssh-keygen -R &lt;ip-address&gt;</code></p>\n<p>  <code>ssh-keygen -R &lt;hostname&gt;</code></p>\n</li>\n</ul>\n<h2 id=\"Netstat-Command\"><a href=\"#Netstat-Command\" class=\"headerlink\" title=\"Netstat Command\"></a>Netstat Command</h2><ul>\n<li><p>Find out on which port a program is running</p>\n<ul>\n<li><code>netstat -ap | grep ssh</code></li>\n<li><code>netstat -an | grep &#39;:80&#39;</code></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Service-Management\"><a href=\"#Service-Management\" class=\"headerlink\" title=\"Service Management\"></a>Service Management</h2><ul>\n<li>Check service automatically start or not.<ul>\n<li><code>ls /etc/rc2.d</code> &#x2F;&#x2F; Just need to check the runlevel 2 on Ubuntu</li>\n</ul>\n</li>\n<li>Add service <code>apache2</code><ul>\n<li><code>update-rc.d apache2 defaults</code></li>\n</ul>\n</li>\n<li>Remove service <code>apache2</code><ul>\n<li><code>update-rc.d -f  apache2 remove</code></li>\n</ul>\n</li>\n<li>Check the status of service <code>apache2</code><ul>\n<li><code>service apache2 status</code></li>\n</ul>\n</li>\n<li>Check Server <code>hhvm</code> autoload level<ul>\n<li><code>sudo initctl show-config hhvm</code></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Remove-executable-bit-recursively-from-files-not-directories\"><a href=\"#Remove-executable-bit-recursively-from-files-not-directories\" class=\"headerlink\" title=\"Remove executable bit recursively from files (not directories)\"></a>Remove executable bit recursively from files (not directories)</h2><ul>\n<li><p><code>chmod -R -x+X *</code></p>\n<ul>\n<li><code>-R</code> - operate recursively</li>\n<li><code>-x</code> - remove executable flags for all users</li>\n<li><code>+X</code> - set executable flags for all users if it is a directory</li>\n<li>Note: On OS X, have to do it separately in two commands: <code>sudo chmod -R -x * &amp;&amp; sudo chmod -R +X *</code></li>\n</ul>\n</li>\n<li><p><code>find . -type f -exec chmod -x &#123;&#125; \\;</code></p>\n</li>\n<li><p><code>chmod -x $(find . -type f)</code></p>\n</li>\n</ul>\n<h2 id=\"Batch-replace-text-inside-text-file\"><a href=\"#Batch-replace-text-inside-text-file\" class=\"headerlink\" title=\"Batch replace text inside text file\"></a>Batch replace text inside text file</h2><ul>\n<li><p><code>find . -type f -name \\*.txt -exec sed -i.bak &#39;s|http://|rtmp://|g&#39; &#123;&#125; +</code></p>\n<ul>\n<li>This will create backups of each file. I suggest you check a few to make sure it did what you want, then you can delete them using <code>find . -name \\*.bak -delete</code></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Find-and-remove-files\"><a href=\"#Find-and-remove-files\" class=\"headerlink\" title=\"Find and remove files\"></a>Find and remove files</h2><ul>\n<li><p><code>find . -type f -name &quot;FILE-TO-FIND&quot; -exec rm -f &#123;&#125; \\;</code></p>\n<ul>\n<li><code>-name &quot;FILE-TO-FIND&quot;</code> : File pattern.</li>\n<li><code>-exec rm -rf &#123;&#125; \\;</code> : Delete all files matched by file pattern.</li>\n<li><code>-type f</code> : Only match files and do not include directory names.</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Bug-Collection\"><a href=\"#Bug-Collection\" class=\"headerlink\" title=\"Bug Collection\"></a>Bug Collection</h2><ul>\n<li>[Ubuntu 14.04] Nodejs ERROR : &#x2F;usr&#x2F;bin&#x2F;env: node: No such file or directory<ul>\n<li><code>ln -s /usr/bin/nodejs /usr/bin/node</code></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Checking-Hardware\"><a href=\"#Checking-Hardware\" class=\"headerlink\" title=\"Checking Hardware\"></a>Checking Hardware</h2><ul>\n<li>Mainboard: <code>dmidecode | grep -i &#39;serial number&#39;</code></li>\n<li>CPU: <code>cat /proc/cpuinfo</code></li>\n<li>Hard Drive:<ul>\n<li>partition <code>fdisk -l</code></li>\n<li>size <code>df -h</code></li>\n<li>usage <code>du -h</code></li>\n</ul>\n</li>\n<li>Memory: <code>cat /proc/meminfo</code></li>\n</ul>\n<h2 id=\"Kill-all-the-process\"><a href=\"#Kill-all-the-process\" class=\"headerlink\" title=\"Kill all the process\"></a>Kill all the process</h2><ul>\n<li><code>ps aux | grep procname | awk &#39;&#123;print $2&#125;&#39; | xargs kill -9</code></li>\n</ul>\n<h2 id=\"Git-Related\"><a href=\"#Git-Related\" class=\"headerlink\" title=\"Git Related\"></a>Git Related</h2><ul>\n<li>Delete remote tags.<ul>\n<li><code>git tag -l | xargs -n 1 git push --delete origin</code></li>\n</ul>\n</li>\n<li>Delete local tasg.<ul>\n<li><code>git tag -l | xargs git tag -d</code></li>\n</ul>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"Manage-User\"><a href=\"#Manage-User\" class=\"headerlink\" title=\"Manage User\"></a><a href=\"#manage-user\">Manage User</a></h2><ul>\n<li>&#x2F;etc&#x2F;shadow : Secure user account information</li>\n<li>&#x2F;etc&#x2F;passwd : User account information</li>\n<li>&#x2F;etc&#x2F;gshadow : Contains the shadowed information for group accounts</li>\n<li>&#x2F;etc&#x2F;group : Defines the groups to which users belong</li>\n<li>&#x2F;etc&#x2F;sudoers : List of who can run what by sudo</li>\n<li>&#x2F;home&#x2F;* : Home directories</li>\n</ul>\n<h3 id=\"Add-new-Group\"><a href=\"#Add-new-Group\" class=\"headerlink\" title=\"Add new Group\"></a>Add new Group</h3><ul>\n<li><code>groupadd [group]</code></li>\n</ul>\n<h3 id=\"Add-new-User\"><a href=\"#Add-new-User\" class=\"headerlink\" title=\"Add new User\"></a>Add new User</h3><ul>\n<li><code>useradd -m -g [initial_group] -G [additional_groups] -s [login_shell] [username]</code></li>\n<li><code>-m</code> creates the user home directory as &#x2F;home&#x2F;username. Within their home directory, a non-root user can write files, delete them, install programs, and so on.</li>\n<li><code>-g</code> defines the group name or number of the user’s initial login group. If specified, the group name must exist; if a group number is provided, it must refer to an already existing group. If not specified, the behaviour of useradd will depend on the USERGROUPS_ENAB variable contained in &#x2F;etc&#x2F;login.defs. The default behaviour (USERGROUPS_ENAB yes) is to create a group with the same name as the username, with GID equal to UID.</li>\n<li><code>-G</code> introduces a list of supplementary groups which the user is also a member of. Each group is separated from the next by a comma, with no intervening spaces. The default is for the user to belong only to the initial group.</li>\n<li><code>-s</code> defines the path and file name of the user’s default login shell. After the boot process is complete, the default login shell is the one specified here. Ensure the chosen shell package is installed if choosing something other than Bash.</li>\n</ul>\n<h3 id=\"Set-user-to-sudoers\"><a href=\"#Set-user-to-sudoers\" class=\"headerlink\" title=\"Set user to sudoers\"></a>Set user to sudoers</h3><ul>\n<li>Add user to sudo group: <code>sudo usermod -aG sudo &lt;username&gt;</code></li>\n<li>Remove user from sudo group: <code>gpasswd -d user sudo</code></li>\n</ul>\n<h3 id=\"SSH-login-without-password\"><a href=\"#SSH-login-without-password\" class=\"headerlink\" title=\"SSH login without password\"></a>SSH login without password</h3><ul>\n<li><code>ssh-copy-id user@server</code></li>\n<li><code>cat .ssh/id_rsa.pub | ssh user@server &#39;cat &gt;&gt; .ssh/authorized_keys&#39;</code><ul>\n<li>Avoid entering passphrase (just once):<ul>\n<li><code>eval &quot;$(ssh-agent -s)&quot;</code></li>\n<li><code>ssh-add ~/.ssh/id_rsa</code></li>\n</ul>\n</li>\n<li>[Auto-launching ssh-agent on msysgit] (<a href=\"https://help.github.com/articles/working-with-ssh-key-passphrases/#auto-launching-ssh-agent-on-msysgit\">https://help.github.com/articles/working-with-ssh-key-passphrases/#auto-launching-ssh-agent-on-msysgit</a>)</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Generating-SSH-keys\"><a href=\"#Generating-SSH-keys\" class=\"headerlink\" title=\"Generating SSH keys\"></a>Generating SSH keys</h3><ul>\n<li><code>ssh-keygen -t rsa -C &quot;your_email@example.com&quot;</code></li>\n</ul>\n<h3 id=\"Change-hostname\"><a href=\"#Change-hostname\" class=\"headerlink\" title=\"Change hostname\"></a>Change hostname</h3><ul>\n<li><code>vi /etc/hostname</code></li>\n<li>don’t forget to add <code>127.0.0.1 &lt;hostname&gt;</code> to &#x2F;etc&#x2F;hosts</li>\n</ul>\n<h3 id=\"Accept-ssh-host-keys-automatically-on-Linux\"><a href=\"#Accept-ssh-host-keys-automatically-on-Linux\" class=\"headerlink\" title=\"Accept ssh host keys automatically on Linux\"></a>Accept ssh host keys automatically on Linux</h3><ul>\n<li><p><code>ssh -oStrictHostKeyChecking=no user@remote_host</code></p>\n</li>\n<li><p>Disable strict host key checking permanently in ssh</p>\n<ul>\n<li><p>Add the following to either ~&#x2F;.ssh&#x2F;config or &#x2F;etc&#x2F;ssh&#x2F;ssh_config.</p>\n<ul>\n<li><p>Sample 1(disable host key checking for a particular host):</p>\n<pre><code>  Host remote_host.com\n  StrictHostKeyChecking no\n</code></pre>\n</li>\n<li><p>Sample 2(turn off host key checking for all hosts you connect to):</p>\n<pre><code>  Host *\n  StrictHostKeyChecking no\n</code></pre>\n</li>\n<li><p>Sample 3(avoid host key verification, and not use known_hosts file for 192.168.1.* subnet):</p>\n<pre><code>  Host 192.168.0.*\n  StrictHostKeyChecking no\n  UserKnownHostsFile=/dev/null\n</code></pre>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>Add the fingerprint for a server to your known_hosts manually.</p>\n<p>  <code>ssh-keyscan -H &lt;ip-address&gt; &gt;&gt; ~/.ssh/known_hosts</code></p>\n<p>  <code>ssh-keyscan -H &lt;hostname&gt; &gt;&gt; ~/.ssh/known_hosts</code></p>\n<p>  Remove them:</p>\n<p>  <code>ssh-keygen -R &lt;ip-address&gt;</code></p>\n<p>  <code>ssh-keygen -R &lt;hostname&gt;</code></p>\n</li>\n</ul>\n<h2 id=\"Netstat-Command\"><a href=\"#Netstat-Command\" class=\"headerlink\" title=\"Netstat Command\"></a>Netstat Command</h2><ul>\n<li><p>Find out on which port a program is running</p>\n<ul>\n<li><code>netstat -ap | grep ssh</code></li>\n<li><code>netstat -an | grep &#39;:80&#39;</code></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Service-Management\"><a href=\"#Service-Management\" class=\"headerlink\" title=\"Service Management\"></a>Service Management</h2><ul>\n<li>Check service automatically start or not.<ul>\n<li><code>ls /etc/rc2.d</code> &#x2F;&#x2F; Just need to check the runlevel 2 on Ubuntu</li>\n</ul>\n</li>\n<li>Add service <code>apache2</code><ul>\n<li><code>update-rc.d apache2 defaults</code></li>\n</ul>\n</li>\n<li>Remove service <code>apache2</code><ul>\n<li><code>update-rc.d -f  apache2 remove</code></li>\n</ul>\n</li>\n<li>Check the status of service <code>apache2</code><ul>\n<li><code>service apache2 status</code></li>\n</ul>\n</li>\n<li>Check Server <code>hhvm</code> autoload level<ul>\n<li><code>sudo initctl show-config hhvm</code></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Remove-executable-bit-recursively-from-files-not-directories\"><a href=\"#Remove-executable-bit-recursively-from-files-not-directories\" class=\"headerlink\" title=\"Remove executable bit recursively from files (not directories)\"></a>Remove executable bit recursively from files (not directories)</h2><ul>\n<li><p><code>chmod -R -x+X *</code></p>\n<ul>\n<li><code>-R</code> - operate recursively</li>\n<li><code>-x</code> - remove executable flags for all users</li>\n<li><code>+X</code> - set executable flags for all users if it is a directory</li>\n<li>Note: On OS X, have to do it separately in two commands: <code>sudo chmod -R -x * &amp;&amp; sudo chmod -R +X *</code></li>\n</ul>\n</li>\n<li><p><code>find . -type f -exec chmod -x &#123;&#125; \\;</code></p>\n</li>\n<li><p><code>chmod -x $(find . -type f)</code></p>\n</li>\n</ul>\n<h2 id=\"Batch-replace-text-inside-text-file\"><a href=\"#Batch-replace-text-inside-text-file\" class=\"headerlink\" title=\"Batch replace text inside text file\"></a>Batch replace text inside text file</h2><ul>\n<li><p><code>find . -type f -name \\*.txt -exec sed -i.bak &#39;s|http://|rtmp://|g&#39; &#123;&#125; +</code></p>\n<ul>\n<li>This will create backups of each file. I suggest you check a few to make sure it did what you want, then you can delete them using <code>find . -name \\*.bak -delete</code></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Find-and-remove-files\"><a href=\"#Find-and-remove-files\" class=\"headerlink\" title=\"Find and remove files\"></a>Find and remove files</h2><ul>\n<li><p><code>find . -type f -name &quot;FILE-TO-FIND&quot; -exec rm -f &#123;&#125; \\;</code></p>\n<ul>\n<li><code>-name &quot;FILE-TO-FIND&quot;</code> : File pattern.</li>\n<li><code>-exec rm -rf &#123;&#125; \\;</code> : Delete all files matched by file pattern.</li>\n<li><code>-type f</code> : Only match files and do not include directory names.</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Bug-Collection\"><a href=\"#Bug-Collection\" class=\"headerlink\" title=\"Bug Collection\"></a>Bug Collection</h2><ul>\n<li>[Ubuntu 14.04] Nodejs ERROR : &#x2F;usr&#x2F;bin&#x2F;env: node: No such file or directory<ul>\n<li><code>ln -s /usr/bin/nodejs /usr/bin/node</code></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Checking-Hardware\"><a href=\"#Checking-Hardware\" class=\"headerlink\" title=\"Checking Hardware\"></a>Checking Hardware</h2><ul>\n<li>Mainboard: <code>dmidecode | grep -i &#39;serial number&#39;</code></li>\n<li>CPU: <code>cat /proc/cpuinfo</code></li>\n<li>Hard Drive:<ul>\n<li>partition <code>fdisk -l</code></li>\n<li>size <code>df -h</code></li>\n<li>usage <code>du -h</code></li>\n</ul>\n</li>\n<li>Memory: <code>cat /proc/meminfo</code></li>\n</ul>\n<h2 id=\"Kill-all-the-process\"><a href=\"#Kill-all-the-process\" class=\"headerlink\" title=\"Kill all the process\"></a>Kill all the process</h2><ul>\n<li><code>ps aux | grep procname | awk &#39;&#123;print $2&#125;&#39; | xargs kill -9</code></li>\n</ul>\n<h2 id=\"Git-Related\"><a href=\"#Git-Related\" class=\"headerlink\" title=\"Git Related\"></a>Git Related</h2><ul>\n<li>Delete remote tags.<ul>\n<li><code>git tag -l | xargs -n 1 git push --delete origin</code></li>\n</ul>\n</li>\n<li>Delete local tasg.<ul>\n<li><code>git tag -l | xargs git tag -d</code></li>\n</ul>\n</li>\n</ul>\n"},{"layout":"post","title":"使用mongohub在vagrant里连接mongodb","date":"2014-12-12T05:00:00.000Z","description":"使用 Mongohub 在 Vagrant 里连接 MongoDB","keywords":"MongoDB, Mongohub, Vagrant","_content":"\n重要: 注释掉mongodb配置 `# bind_ip = 127.0.0.1`\n\n1. forword 端口27017到宿主机\n\n2. 使用ssh tunnel方式连接\n  \n    SSH Host = 127.0.0.1\n\n    SSH Port = 2222\n\n    Username = vagrant\n\n    Password = vagrant\n\n    key = ~/.vagrant.d/insecure_private_key\n\n","source":"_posts/2014-12-12-connect-mongodb-in-vagrant-with-mongohub.md","raw":"---\nlayout: post\ntitle: 使用mongohub在vagrant里连接mongodb\ncategory: 编程学习\ntags: [MongoDB]\ndate: 2014-12-12\ndescription: 使用 Mongohub 在 Vagrant 里连接 MongoDB\nkeywords: MongoDB, Mongohub, Vagrant\n---\n\n重要: 注释掉mongodb配置 `# bind_ip = 127.0.0.1`\n\n1. forword 端口27017到宿主机\n\n2. 使用ssh tunnel方式连接\n  \n    SSH Host = 127.0.0.1\n\n    SSH Port = 2222\n\n    Username = vagrant\n\n    Password = vagrant\n\n    key = ~/.vagrant.d/insecure_private_key\n\n","slug":"2014-12-12-connect-mongodb-in-vagrant-with-mongohub","published":1,"updated":"2022-02-12T20:53:10.500Z","comments":1,"photos":[],"link":"","_id":"ckzkc92x10008oqoxf01s44xb","content":"<p>重要: 注释掉mongodb配置 <code># bind_ip = 127.0.0.1</code></p>\n<ol>\n<li><p>forword 端口27017到宿主机</p>\n</li>\n<li><p>使用ssh tunnel方式连接</p>\n<p> SSH Host &#x3D; 127.0.0.1</p>\n<p> SSH Port &#x3D; 2222</p>\n<p> Username &#x3D; vagrant</p>\n<p> Password &#x3D; vagrant</p>\n<p> key &#x3D; ~&#x2F;.vagrant.d&#x2F;insecure_private_key</p>\n</li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<p>重要: 注释掉mongodb配置 <code># bind_ip = 127.0.0.1</code></p>\n<ol>\n<li><p>forword 端口27017到宿主机</p>\n</li>\n<li><p>使用ssh tunnel方式连接</p>\n<p> SSH Host &#x3D; 127.0.0.1</p>\n<p> SSH Port &#x3D; 2222</p>\n<p> Username &#x3D; vagrant</p>\n<p> Password &#x3D; vagrant</p>\n<p> key &#x3D; ~&#x2F;.vagrant.d&#x2F;insecure_private_key</p>\n</li>\n</ol>\n"},{"layout":"post","title":"创建GIT服务器","date":"2015-01-13T05:00:00.000Z","description":null,"keywords":"Linux, Git, Repository","_content":"\n## 添加git 用户\n\n* `sudo adduser git`\n\n## 创建authorized_keys,用于认证用户\n\n* `su git`\n* `cd`\n* `mkdir .ssh && chmod 700 .ssh`\n* `touch .ssh/authorized_keys && chmod 600 .ssh/authorized_keys`\n\n## 添加认证用户公钥\n\n* 在本地执行 `cat .ssh/id_rsa.pub | ssh git@git-server 'cat >> .ssh/authorized_keys'`\n\n## 创建git repo\n\n* `cd /opt/git`\n* `mkdir project.git`\n* `cd project.git`\n* `git init --bare`\n    * 输出信息: Initialized empty Git repository in /opt/git/project.git/\n\n## 远程repo地址\n\n* `git@git-server:/opt/git/project.git`\n\n\n","source":"_posts/2015-01-13-create-git-server.md","raw":"---\nlayout: post\ntitle: 创建GIT服务器\ncategory: 编程学习\ntags: [Linux, Git]\ndate: 2015-01-13\ndescription:\nkeywords: Linux, Git, Repository\n---\n\n## 添加git 用户\n\n* `sudo adduser git`\n\n## 创建authorized_keys,用于认证用户\n\n* `su git`\n* `cd`\n* `mkdir .ssh && chmod 700 .ssh`\n* `touch .ssh/authorized_keys && chmod 600 .ssh/authorized_keys`\n\n## 添加认证用户公钥\n\n* 在本地执行 `cat .ssh/id_rsa.pub | ssh git@git-server 'cat >> .ssh/authorized_keys'`\n\n## 创建git repo\n\n* `cd /opt/git`\n* `mkdir project.git`\n* `cd project.git`\n* `git init --bare`\n    * 输出信息: Initialized empty Git repository in /opt/git/project.git/\n\n## 远程repo地址\n\n* `git@git-server:/opt/git/project.git`\n\n\n","slug":"2015-01-13-create-git-server","published":1,"updated":"2022-02-12T20:53:10.501Z","comments":1,"photos":[],"link":"","_id":"ckzkc92x10009oqox8ro51v6k","content":"<h2 id=\"添加git-用户\"><a href=\"#添加git-用户\" class=\"headerlink\" title=\"添加git 用户\"></a>添加git 用户</h2><ul>\n<li><code>sudo adduser git</code></li>\n</ul>\n<h2 id=\"创建authorized-keys-用于认证用户\"><a href=\"#创建authorized-keys-用于认证用户\" class=\"headerlink\" title=\"创建authorized_keys,用于认证用户\"></a>创建authorized_keys,用于认证用户</h2><ul>\n<li><code>su git</code></li>\n<li><code>cd</code></li>\n<li><code>mkdir .ssh &amp;&amp; chmod 700 .ssh</code></li>\n<li><code>touch .ssh/authorized_keys &amp;&amp; chmod 600 .ssh/authorized_keys</code></li>\n</ul>\n<h2 id=\"添加认证用户公钥\"><a href=\"#添加认证用户公钥\" class=\"headerlink\" title=\"添加认证用户公钥\"></a>添加认证用户公钥</h2><ul>\n<li>在本地执行 <code>cat .ssh/id_rsa.pub | ssh git@git-server &#39;cat &gt;&gt; .ssh/authorized_keys&#39;</code></li>\n</ul>\n<h2 id=\"创建git-repo\"><a href=\"#创建git-repo\" class=\"headerlink\" title=\"创建git repo\"></a>创建git repo</h2><ul>\n<li><code>cd /opt/git</code></li>\n<li><code>mkdir project.git</code></li>\n<li><code>cd project.git</code></li>\n<li><code>git init --bare</code><ul>\n<li>输出信息: Initialized empty Git repository in &#x2F;opt&#x2F;git&#x2F;project.git&#x2F;</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"远程repo地址\"><a href=\"#远程repo地址\" class=\"headerlink\" title=\"远程repo地址\"></a>远程repo地址</h2><ul>\n<li><code>git@git-server:/opt/git/project.git</code></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"添加git-用户\"><a href=\"#添加git-用户\" class=\"headerlink\" title=\"添加git 用户\"></a>添加git 用户</h2><ul>\n<li><code>sudo adduser git</code></li>\n</ul>\n<h2 id=\"创建authorized-keys-用于认证用户\"><a href=\"#创建authorized-keys-用于认证用户\" class=\"headerlink\" title=\"创建authorized_keys,用于认证用户\"></a>创建authorized_keys,用于认证用户</h2><ul>\n<li><code>su git</code></li>\n<li><code>cd</code></li>\n<li><code>mkdir .ssh &amp;&amp; chmod 700 .ssh</code></li>\n<li><code>touch .ssh/authorized_keys &amp;&amp; chmod 600 .ssh/authorized_keys</code></li>\n</ul>\n<h2 id=\"添加认证用户公钥\"><a href=\"#添加认证用户公钥\" class=\"headerlink\" title=\"添加认证用户公钥\"></a>添加认证用户公钥</h2><ul>\n<li>在本地执行 <code>cat .ssh/id_rsa.pub | ssh git@git-server &#39;cat &gt;&gt; .ssh/authorized_keys&#39;</code></li>\n</ul>\n<h2 id=\"创建git-repo\"><a href=\"#创建git-repo\" class=\"headerlink\" title=\"创建git repo\"></a>创建git repo</h2><ul>\n<li><code>cd /opt/git</code></li>\n<li><code>mkdir project.git</code></li>\n<li><code>cd project.git</code></li>\n<li><code>git init --bare</code><ul>\n<li>输出信息: Initialized empty Git repository in &#x2F;opt&#x2F;git&#x2F;project.git&#x2F;</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"远程repo地址\"><a href=\"#远程repo地址\" class=\"headerlink\" title=\"远程repo地址\"></a>远程repo地址</h2><ul>\n<li><code>git@git-server:/opt/git/project.git</code></li>\n</ul>\n"},{"layout":"post","title":"如何使用Linux的screen命令","date":"2014-12-22T05:00:00.000Z","description":"如何使用Linux的screen命令","keywords":"Linux, Command, Screen","_content":"\n摘录自: [http://www.rackaid.com/blog/linux-screen-tutorial-and-how-to/](http://www.rackaid.com/blog/linux-screen-tutorial-and-how-to/)\n\n## 功能\n\n* 多终端共享一个SSH会话\n* 能在网络状况不好的状况下保持可用\n* 从多个地址断开并重新连接终端会话\n* 在执行耗时任务时无需维持终端会话\n\n\n## 安装\n\n* CentOS: `yum install screen`\n* Ubuntu: `apt-get install screen`\n\n## 起始命令\n\n* `screen` 进入screen模式\n\n## 控制命令\n\n* `Ctrl+a` screen 使用Ctrl+a快捷键作为命令前缀来发送信号，例如`Ctrl+a+?`为打开screen帮助页面\n\n## 创建窗口\n\n* `Ctrl+a+c` 使用默认视窗创建新的窗口，旧视窗能然可用\n\n## 窗口之间切换\n\n使用screen 向前或向后切换窗口\n\n* `Ctrl+a+n` 下一个窗口\n* `Ctrl+a+p` 上一个窗口\n* 两次`Ctrl+a` 可以在最近的上一个或下一个窗口中来回切换\n\n## 挂起会话\n\n与当前的screen分离并跳出到原有的shell会话中，并可以使用`screen -r`重新连上\n\n对于需要在服务器执行长时间消耗的任务是个非常不错的选择\n\nPS: 如果当前网络连接中断，screen会自动挂起会话\n\n* `Ctrl+a+d`\n\n## 恢复会话\n\n如果你的会话连接由于某种原因中端，可以使用此命令恢复\n\n* `screen -r`\n\n## 记录screen的输出\n\n* `Ctrl+a+H` 为当前会话创建日志进行追踪\n\nscreen 会跨多个会话进行日志追踪。对于在服务器操作较多的情况，可以有捕捉自己的操作\n\n## 获取警告提醒\n\nscreen可以监听会话活动。在下载或者编译等耗时操作时，可用于提醒警告\n\n当你在等待一个耗时进程的输出时，可使用`Ctrl+a+M`来监听活动。screen会等输出完成后，在页面底部闪出一条提醒。此时可切换至其他screen进行其他操作，而不需要时而切换回来查看任务是否完成\n\n或者你在编译程序或下载文件，等待会话无内容输出的情况。可使用`Ctrl+a+_`来监听当前会话是否已无内容输出\n\n## 锁定screen会话\n\n当你要离开电脑一会儿，可使用`Ctrl+a+x`加入密码来锁定screen\n\n## 停止screen\n\n当完成任务后，推荐停止screen会话，而非挂起会话\n\n* 输入`exit`\n* `Ctrl+a+k`\n\n","source":"_posts/2014-12-22-how-to-use-linux-screen.md","raw":"---\nlayout: post\ntitle: 如何使用Linux的screen命令\ncategory: 编程学习\ndate: 2014-12-22\ntags: [Linux]\ndescription: 如何使用Linux的screen命令\nkeywords: Linux, Command, Screen\n---\n\n摘录自: [http://www.rackaid.com/blog/linux-screen-tutorial-and-how-to/](http://www.rackaid.com/blog/linux-screen-tutorial-and-how-to/)\n\n## 功能\n\n* 多终端共享一个SSH会话\n* 能在网络状况不好的状况下保持可用\n* 从多个地址断开并重新连接终端会话\n* 在执行耗时任务时无需维持终端会话\n\n\n## 安装\n\n* CentOS: `yum install screen`\n* Ubuntu: `apt-get install screen`\n\n## 起始命令\n\n* `screen` 进入screen模式\n\n## 控制命令\n\n* `Ctrl+a` screen 使用Ctrl+a快捷键作为命令前缀来发送信号，例如`Ctrl+a+?`为打开screen帮助页面\n\n## 创建窗口\n\n* `Ctrl+a+c` 使用默认视窗创建新的窗口，旧视窗能然可用\n\n## 窗口之间切换\n\n使用screen 向前或向后切换窗口\n\n* `Ctrl+a+n` 下一个窗口\n* `Ctrl+a+p` 上一个窗口\n* 两次`Ctrl+a` 可以在最近的上一个或下一个窗口中来回切换\n\n## 挂起会话\n\n与当前的screen分离并跳出到原有的shell会话中，并可以使用`screen -r`重新连上\n\n对于需要在服务器执行长时间消耗的任务是个非常不错的选择\n\nPS: 如果当前网络连接中断，screen会自动挂起会话\n\n* `Ctrl+a+d`\n\n## 恢复会话\n\n如果你的会话连接由于某种原因中端，可以使用此命令恢复\n\n* `screen -r`\n\n## 记录screen的输出\n\n* `Ctrl+a+H` 为当前会话创建日志进行追踪\n\nscreen 会跨多个会话进行日志追踪。对于在服务器操作较多的情况，可以有捕捉自己的操作\n\n## 获取警告提醒\n\nscreen可以监听会话活动。在下载或者编译等耗时操作时，可用于提醒警告\n\n当你在等待一个耗时进程的输出时，可使用`Ctrl+a+M`来监听活动。screen会等输出完成后，在页面底部闪出一条提醒。此时可切换至其他screen进行其他操作，而不需要时而切换回来查看任务是否完成\n\n或者你在编译程序或下载文件，等待会话无内容输出的情况。可使用`Ctrl+a+_`来监听当前会话是否已无内容输出\n\n## 锁定screen会话\n\n当你要离开电脑一会儿，可使用`Ctrl+a+x`加入密码来锁定screen\n\n## 停止screen\n\n当完成任务后，推荐停止screen会话，而非挂起会话\n\n* 输入`exit`\n* `Ctrl+a+k`\n\n","slug":"2014-12-22-how-to-use-linux-screen","published":1,"updated":"2022-02-12T20:53:10.500Z","comments":1,"photos":[],"link":"","_id":"ckzkc92x3000doqoxcifjc8qs","content":"<p>摘录自: <a href=\"http://www.rackaid.com/blog/linux-screen-tutorial-and-how-to/\">http://www.rackaid.com/blog/linux-screen-tutorial-and-how-to/</a></p>\n<h2 id=\"功能\"><a href=\"#功能\" class=\"headerlink\" title=\"功能\"></a>功能</h2><ul>\n<li>多终端共享一个SSH会话</li>\n<li>能在网络状况不好的状况下保持可用</li>\n<li>从多个地址断开并重新连接终端会话</li>\n<li>在执行耗时任务时无需维持终端会话</li>\n</ul>\n<h2 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h2><ul>\n<li>CentOS: <code>yum install screen</code></li>\n<li>Ubuntu: <code>apt-get install screen</code></li>\n</ul>\n<h2 id=\"起始命令\"><a href=\"#起始命令\" class=\"headerlink\" title=\"起始命令\"></a>起始命令</h2><ul>\n<li><code>screen</code> 进入screen模式</li>\n</ul>\n<h2 id=\"控制命令\"><a href=\"#控制命令\" class=\"headerlink\" title=\"控制命令\"></a>控制命令</h2><ul>\n<li><code>Ctrl+a</code> screen 使用Ctrl+a快捷键作为命令前缀来发送信号，例如<code>Ctrl+a+?</code>为打开screen帮助页面</li>\n</ul>\n<h2 id=\"创建窗口\"><a href=\"#创建窗口\" class=\"headerlink\" title=\"创建窗口\"></a>创建窗口</h2><ul>\n<li><code>Ctrl+a+c</code> 使用默认视窗创建新的窗口，旧视窗能然可用</li>\n</ul>\n<h2 id=\"窗口之间切换\"><a href=\"#窗口之间切换\" class=\"headerlink\" title=\"窗口之间切换\"></a>窗口之间切换</h2><p>使用screen 向前或向后切换窗口</p>\n<ul>\n<li><code>Ctrl+a+n</code> 下一个窗口</li>\n<li><code>Ctrl+a+p</code> 上一个窗口</li>\n<li>两次<code>Ctrl+a</code> 可以在最近的上一个或下一个窗口中来回切换</li>\n</ul>\n<h2 id=\"挂起会话\"><a href=\"#挂起会话\" class=\"headerlink\" title=\"挂起会话\"></a>挂起会话</h2><p>与当前的screen分离并跳出到原有的shell会话中，并可以使用<code>screen -r</code>重新连上</p>\n<p>对于需要在服务器执行长时间消耗的任务是个非常不错的选择</p>\n<p>PS: 如果当前网络连接中断，screen会自动挂起会话</p>\n<ul>\n<li><code>Ctrl+a+d</code></li>\n</ul>\n<h2 id=\"恢复会话\"><a href=\"#恢复会话\" class=\"headerlink\" title=\"恢复会话\"></a>恢复会话</h2><p>如果你的会话连接由于某种原因中端，可以使用此命令恢复</p>\n<ul>\n<li><code>screen -r</code></li>\n</ul>\n<h2 id=\"记录screen的输出\"><a href=\"#记录screen的输出\" class=\"headerlink\" title=\"记录screen的输出\"></a>记录screen的输出</h2><ul>\n<li><code>Ctrl+a+H</code> 为当前会话创建日志进行追踪</li>\n</ul>\n<p>screen 会跨多个会话进行日志追踪。对于在服务器操作较多的情况，可以有捕捉自己的操作</p>\n<h2 id=\"获取警告提醒\"><a href=\"#获取警告提醒\" class=\"headerlink\" title=\"获取警告提醒\"></a>获取警告提醒</h2><p>screen可以监听会话活动。在下载或者编译等耗时操作时，可用于提醒警告</p>\n<p>当你在等待一个耗时进程的输出时，可使用<code>Ctrl+a+M</code>来监听活动。screen会等输出完成后，在页面底部闪出一条提醒。此时可切换至其他screen进行其他操作，而不需要时而切换回来查看任务是否完成</p>\n<p>或者你在编译程序或下载文件，等待会话无内容输出的情况。可使用<code>Ctrl+a+_</code>来监听当前会话是否已无内容输出</p>\n<h2 id=\"锁定screen会话\"><a href=\"#锁定screen会话\" class=\"headerlink\" title=\"锁定screen会话\"></a>锁定screen会话</h2><p>当你要离开电脑一会儿，可使用<code>Ctrl+a+x</code>加入密码来锁定screen</p>\n<h2 id=\"停止screen\"><a href=\"#停止screen\" class=\"headerlink\" title=\"停止screen\"></a>停止screen</h2><p>当完成任务后，推荐停止screen会话，而非挂起会话</p>\n<ul>\n<li>输入<code>exit</code></li>\n<li><code>Ctrl+a+k</code></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<p>摘录自: <a href=\"http://www.rackaid.com/blog/linux-screen-tutorial-and-how-to/\">http://www.rackaid.com/blog/linux-screen-tutorial-and-how-to/</a></p>\n<h2 id=\"功能\"><a href=\"#功能\" class=\"headerlink\" title=\"功能\"></a>功能</h2><ul>\n<li>多终端共享一个SSH会话</li>\n<li>能在网络状况不好的状况下保持可用</li>\n<li>从多个地址断开并重新连接终端会话</li>\n<li>在执行耗时任务时无需维持终端会话</li>\n</ul>\n<h2 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h2><ul>\n<li>CentOS: <code>yum install screen</code></li>\n<li>Ubuntu: <code>apt-get install screen</code></li>\n</ul>\n<h2 id=\"起始命令\"><a href=\"#起始命令\" class=\"headerlink\" title=\"起始命令\"></a>起始命令</h2><ul>\n<li><code>screen</code> 进入screen模式</li>\n</ul>\n<h2 id=\"控制命令\"><a href=\"#控制命令\" class=\"headerlink\" title=\"控制命令\"></a>控制命令</h2><ul>\n<li><code>Ctrl+a</code> screen 使用Ctrl+a快捷键作为命令前缀来发送信号，例如<code>Ctrl+a+?</code>为打开screen帮助页面</li>\n</ul>\n<h2 id=\"创建窗口\"><a href=\"#创建窗口\" class=\"headerlink\" title=\"创建窗口\"></a>创建窗口</h2><ul>\n<li><code>Ctrl+a+c</code> 使用默认视窗创建新的窗口，旧视窗能然可用</li>\n</ul>\n<h2 id=\"窗口之间切换\"><a href=\"#窗口之间切换\" class=\"headerlink\" title=\"窗口之间切换\"></a>窗口之间切换</h2><p>使用screen 向前或向后切换窗口</p>\n<ul>\n<li><code>Ctrl+a+n</code> 下一个窗口</li>\n<li><code>Ctrl+a+p</code> 上一个窗口</li>\n<li>两次<code>Ctrl+a</code> 可以在最近的上一个或下一个窗口中来回切换</li>\n</ul>\n<h2 id=\"挂起会话\"><a href=\"#挂起会话\" class=\"headerlink\" title=\"挂起会话\"></a>挂起会话</h2><p>与当前的screen分离并跳出到原有的shell会话中，并可以使用<code>screen -r</code>重新连上</p>\n<p>对于需要在服务器执行长时间消耗的任务是个非常不错的选择</p>\n<p>PS: 如果当前网络连接中断，screen会自动挂起会话</p>\n<ul>\n<li><code>Ctrl+a+d</code></li>\n</ul>\n<h2 id=\"恢复会话\"><a href=\"#恢复会话\" class=\"headerlink\" title=\"恢复会话\"></a>恢复会话</h2><p>如果你的会话连接由于某种原因中端，可以使用此命令恢复</p>\n<ul>\n<li><code>screen -r</code></li>\n</ul>\n<h2 id=\"记录screen的输出\"><a href=\"#记录screen的输出\" class=\"headerlink\" title=\"记录screen的输出\"></a>记录screen的输出</h2><ul>\n<li><code>Ctrl+a+H</code> 为当前会话创建日志进行追踪</li>\n</ul>\n<p>screen 会跨多个会话进行日志追踪。对于在服务器操作较多的情况，可以有捕捉自己的操作</p>\n<h2 id=\"获取警告提醒\"><a href=\"#获取警告提醒\" class=\"headerlink\" title=\"获取警告提醒\"></a>获取警告提醒</h2><p>screen可以监听会话活动。在下载或者编译等耗时操作时，可用于提醒警告</p>\n<p>当你在等待一个耗时进程的输出时，可使用<code>Ctrl+a+M</code>来监听活动。screen会等输出完成后，在页面底部闪出一条提醒。此时可切换至其他screen进行其他操作，而不需要时而切换回来查看任务是否完成</p>\n<p>或者你在编译程序或下载文件，等待会话无内容输出的情况。可使用<code>Ctrl+a+_</code>来监听当前会话是否已无内容输出</p>\n<h2 id=\"锁定screen会话\"><a href=\"#锁定screen会话\" class=\"headerlink\" title=\"锁定screen会话\"></a>锁定screen会话</h2><p>当你要离开电脑一会儿，可使用<code>Ctrl+a+x</code>加入密码来锁定screen</p>\n<h2 id=\"停止screen\"><a href=\"#停止screen\" class=\"headerlink\" title=\"停止screen\"></a>停止screen</h2><p>当完成任务后，推荐停止screen会话，而非挂起会话</p>\n<ul>\n<li>输入<code>exit</code></li>\n<li><code>Ctrl+a+k</code></li>\n</ul>\n"},{"layout":"post","title":"Linux服务器安全设置","date":"2014-12-26T05:00:00.000Z","description":"Linux服务器安全设置，常用配置包括iptable，使用SSH Key认证登录，禁用root密码登录，防火墙设置等","keywords":"Linux,Note","_content":"\n翻译自[Linode: Securing Your Server](https://www.linode.com/docs/security/securing-your-server)\n\n以下配置环境为:\n\n* 本地: Mac OS X\n* 服务器: Ubuntu 14.04\n\n## 添加用户，并将其加入sudo组\n\n例如增加webapps用户，并将其加入webapps用户组：\n\n* `ssh root@<your-service-ip>` // 使用root登录服务器\n* `groupadd webapps` // 创建webapps用户组\n* `useradd -m -g webapps -s /bin/bash webapps`\n    * `-m` 创建home根目录\n    * `-g` 指定用户组\n    * `-s` 指定使用的bash\n* `sudo usermod -aG sudo webapps`\n    * `-G` 附加用户组\n\n## 在本地创建并使用SSH key认证登录服务器\n\n### 生成密钥\n\n* `ssh-keygen -t rsa -C \"your_email@example.com\"`\n* 避免在每次登录的时候每次都需要输入passphrase\n    * `eval \"$(ssh-agent -s)\"`\n    * `ssh-add ~/.ssh/id_rsa`\n\n### 上传至服务器\n\n* 使用webapps登录服务器，并执行`mkdir ~/.ssh && touch ~/.ssh/authorized_keys`创建空文件authorized_keys用于存放公钥\n* 在本地执行`cat ~/.ssh/id_rsa.pub | ssh webapps@<your-server-ip> 'cat >> .ssh/authorized_keys'`\n\n### 禁止root用户密码登录\n\n* `sudo vi /etc/ssh/sshd_config`\n    * 修改 `PermitRootLogin yes` 为 `PermitRootLogin without-password`\n* `sudo service ssh restart` 重启ssh服务\n\n## 创建防火墙\n\n### 创建文件 `/etc/iptables.firewall.rules` 用于存放防火墙规则，内容如下：\n\n* 以下规则仅开放HTTP (80), HTTPS (443), SSH (22)三个端口\n\n        *filter\n\n        #  Allow all loopback (lo0) traffic and drop all traffic to 127/8 that doesn't use lo0\n        -A INPUT -i lo -j ACCEPT\n        -A INPUT -d 127.0.0.0/8 -j REJECT\n\n        #  Accept all established inbound connections\n        -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT\n\n        #  Allow all outbound traffic - you can modify this to only allow certain traffic\n        -A OUTPUT -j ACCEPT\n\n        #  Allow HTTP and HTTPS connections from anywhere (the normal ports for websites and SSL).\n        -A INPUT -p tcp --dport 80 -j ACCEPT\n        -A INPUT -p tcp --dport 443 -j ACCEPT\n\n        #  Allow SSH connections\n        #\n        #  The -dport number should be the same port number you set in sshd_config\n        #\n        -A INPUT -p tcp -m state --state NEW --dport 22 -j ACCEPT\n\n        #  Allow ping\n        -A INPUT -p icmp --icmp-type echo-request -j ACCEPT\n\n        #  Log iptables denied calls\n        -A INPUT -m limit --limit 5/min -j LOG --log-prefix \"iptables denied: \" --log-level 7\n\n        #  Drop all other inbound - default deny unless explicitly allowed policy\n        -A INPUT -j DROP\n        -A FORWARD -j DROP\n\n        COMMIT\n\n### 激活防火墙配置\n\n* `sudo iptables-restore < /etc/iptables.firewall.rules`\n\n### 查看防火墙配置信息\n\n* `sudo iptables -L`\n\n### 配置启动执行脚本，保证防火墙配置在服务器每次重启后即时生效\n\n* `sudo vi /etc/network/if-pre-up.d/firewall` 编辑文件，内容如下：\n\n        #!/bin/sh\n        /sbin/iptables-restore < /etc/iptables.firewall.rules\n\n* `sudo chmod +x /etc/network/if-pre-up.d/firewall` 修改文件权限为可执行\n\n## 安装配置Fail2Ban\n\nFail2Ban可以有效防止同一IP多次失败登录。它会临时创建防火墙规则来阻止攻击。\n\n### 安装\n\n* `sudo apt-get install fail2ban`\n\n### 设置\n\n* `bantime` 指定阻止保持时长\n* `maxretry` 设置IP可以尝试连接的次数\n\n### 重启fail2ban服务\n\n* `sudo service fail2ban restart`\n\n\n","source":"_posts/2014-12-26-secure-linux-server.md","raw":"---\nlayout: post\ntitle: Linux服务器安全设置\ncategory: 编程学习\ntags: [Linux]\ndate: 2014-12-26\ndescription: Linux服务器安全设置，常用配置包括iptable，使用SSH Key认证登录，禁用root密码登录，防火墙设置等\nkeywords: Linux,Note\n---\n\n翻译自[Linode: Securing Your Server](https://www.linode.com/docs/security/securing-your-server)\n\n以下配置环境为:\n\n* 本地: Mac OS X\n* 服务器: Ubuntu 14.04\n\n## 添加用户，并将其加入sudo组\n\n例如增加webapps用户，并将其加入webapps用户组：\n\n* `ssh root@<your-service-ip>` // 使用root登录服务器\n* `groupadd webapps` // 创建webapps用户组\n* `useradd -m -g webapps -s /bin/bash webapps`\n    * `-m` 创建home根目录\n    * `-g` 指定用户组\n    * `-s` 指定使用的bash\n* `sudo usermod -aG sudo webapps`\n    * `-G` 附加用户组\n\n## 在本地创建并使用SSH key认证登录服务器\n\n### 生成密钥\n\n* `ssh-keygen -t rsa -C \"your_email@example.com\"`\n* 避免在每次登录的时候每次都需要输入passphrase\n    * `eval \"$(ssh-agent -s)\"`\n    * `ssh-add ~/.ssh/id_rsa`\n\n### 上传至服务器\n\n* 使用webapps登录服务器，并执行`mkdir ~/.ssh && touch ~/.ssh/authorized_keys`创建空文件authorized_keys用于存放公钥\n* 在本地执行`cat ~/.ssh/id_rsa.pub | ssh webapps@<your-server-ip> 'cat >> .ssh/authorized_keys'`\n\n### 禁止root用户密码登录\n\n* `sudo vi /etc/ssh/sshd_config`\n    * 修改 `PermitRootLogin yes` 为 `PermitRootLogin without-password`\n* `sudo service ssh restart` 重启ssh服务\n\n## 创建防火墙\n\n### 创建文件 `/etc/iptables.firewall.rules` 用于存放防火墙规则，内容如下：\n\n* 以下规则仅开放HTTP (80), HTTPS (443), SSH (22)三个端口\n\n        *filter\n\n        #  Allow all loopback (lo0) traffic and drop all traffic to 127/8 that doesn't use lo0\n        -A INPUT -i lo -j ACCEPT\n        -A INPUT -d 127.0.0.0/8 -j REJECT\n\n        #  Accept all established inbound connections\n        -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT\n\n        #  Allow all outbound traffic - you can modify this to only allow certain traffic\n        -A OUTPUT -j ACCEPT\n\n        #  Allow HTTP and HTTPS connections from anywhere (the normal ports for websites and SSL).\n        -A INPUT -p tcp --dport 80 -j ACCEPT\n        -A INPUT -p tcp --dport 443 -j ACCEPT\n\n        #  Allow SSH connections\n        #\n        #  The -dport number should be the same port number you set in sshd_config\n        #\n        -A INPUT -p tcp -m state --state NEW --dport 22 -j ACCEPT\n\n        #  Allow ping\n        -A INPUT -p icmp --icmp-type echo-request -j ACCEPT\n\n        #  Log iptables denied calls\n        -A INPUT -m limit --limit 5/min -j LOG --log-prefix \"iptables denied: \" --log-level 7\n\n        #  Drop all other inbound - default deny unless explicitly allowed policy\n        -A INPUT -j DROP\n        -A FORWARD -j DROP\n\n        COMMIT\n\n### 激活防火墙配置\n\n* `sudo iptables-restore < /etc/iptables.firewall.rules`\n\n### 查看防火墙配置信息\n\n* `sudo iptables -L`\n\n### 配置启动执行脚本，保证防火墙配置在服务器每次重启后即时生效\n\n* `sudo vi /etc/network/if-pre-up.d/firewall` 编辑文件，内容如下：\n\n        #!/bin/sh\n        /sbin/iptables-restore < /etc/iptables.firewall.rules\n\n* `sudo chmod +x /etc/network/if-pre-up.d/firewall` 修改文件权限为可执行\n\n## 安装配置Fail2Ban\n\nFail2Ban可以有效防止同一IP多次失败登录。它会临时创建防火墙规则来阻止攻击。\n\n### 安装\n\n* `sudo apt-get install fail2ban`\n\n### 设置\n\n* `bantime` 指定阻止保持时长\n* `maxretry` 设置IP可以尝试连接的次数\n\n### 重启fail2ban服务\n\n* `sudo service fail2ban restart`\n\n\n","slug":"2014-12-26-secure-linux-server","published":1,"updated":"2022-02-12T20:53:10.501Z","comments":1,"photos":[],"link":"","_id":"ckzkc92x4000eoqox7s05gzzm","content":"<p>翻译自<a href=\"https://www.linode.com/docs/security/securing-your-server\">Linode: Securing Your Server</a></p>\n<p>以下配置环境为:</p>\n<ul>\n<li>本地: Mac OS X</li>\n<li>服务器: Ubuntu 14.04</li>\n</ul>\n<h2 id=\"添加用户，并将其加入sudo组\"><a href=\"#添加用户，并将其加入sudo组\" class=\"headerlink\" title=\"添加用户，并将其加入sudo组\"></a>添加用户，并将其加入sudo组</h2><p>例如增加webapps用户，并将其加入webapps用户组：</p>\n<ul>\n<li><code>ssh root@&lt;your-service-ip&gt;</code> &#x2F;&#x2F; 使用root登录服务器</li>\n<li><code>groupadd webapps</code> &#x2F;&#x2F; 创建webapps用户组</li>\n<li><code>useradd -m -g webapps -s /bin/bash webapps</code><ul>\n<li><code>-m</code> 创建home根目录</li>\n<li><code>-g</code> 指定用户组</li>\n<li><code>-s</code> 指定使用的bash</li>\n</ul>\n</li>\n<li><code>sudo usermod -aG sudo webapps</code><ul>\n<li><code>-G</code> 附加用户组</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"在本地创建并使用SSH-key认证登录服务器\"><a href=\"#在本地创建并使用SSH-key认证登录服务器\" class=\"headerlink\" title=\"在本地创建并使用SSH key认证登录服务器\"></a>在本地创建并使用SSH key认证登录服务器</h2><h3 id=\"生成密钥\"><a href=\"#生成密钥\" class=\"headerlink\" title=\"生成密钥\"></a>生成密钥</h3><ul>\n<li><code>ssh-keygen -t rsa -C &quot;your_email@example.com&quot;</code></li>\n<li>避免在每次登录的时候每次都需要输入passphrase<ul>\n<li><code>eval &quot;$(ssh-agent -s)&quot;</code></li>\n<li><code>ssh-add ~/.ssh/id_rsa</code></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"上传至服务器\"><a href=\"#上传至服务器\" class=\"headerlink\" title=\"上传至服务器\"></a>上传至服务器</h3><ul>\n<li>使用webapps登录服务器，并执行<code>mkdir ~/.ssh &amp;&amp; touch ~/.ssh/authorized_keys</code>创建空文件authorized_keys用于存放公钥</li>\n<li>在本地执行<code>cat ~/.ssh/id_rsa.pub | ssh webapps@&lt;your-server-ip&gt; &#39;cat &gt;&gt; .ssh/authorized_keys&#39;</code></li>\n</ul>\n<h3 id=\"禁止root用户密码登录\"><a href=\"#禁止root用户密码登录\" class=\"headerlink\" title=\"禁止root用户密码登录\"></a>禁止root用户密码登录</h3><ul>\n<li><code>sudo vi /etc/ssh/sshd_config</code><ul>\n<li>修改 <code>PermitRootLogin yes</code> 为 <code>PermitRootLogin without-password</code></li>\n</ul>\n</li>\n<li><code>sudo service ssh restart</code> 重启ssh服务</li>\n</ul>\n<h2 id=\"创建防火墙\"><a href=\"#创建防火墙\" class=\"headerlink\" title=\"创建防火墙\"></a>创建防火墙</h2><h3 id=\"创建文件-etc-iptables-firewall-rules-用于存放防火墙规则，内容如下：\"><a href=\"#创建文件-etc-iptables-firewall-rules-用于存放防火墙规则，内容如下：\" class=\"headerlink\" title=\"创建文件 /etc/iptables.firewall.rules 用于存放防火墙规则，内容如下：\"></a>创建文件 <code>/etc/iptables.firewall.rules</code> 用于存放防火墙规则，内容如下：</h3><ul>\n<li><p>以下规则仅开放HTTP (80), HTTPS (443), SSH (22)三个端口</p>\n<pre><code>  *filter\n\n  #  Allow all loopback (lo0) traffic and drop all traffic to 127/8 that doesn&#39;t use lo0\n  -A INPUT -i lo -j ACCEPT\n  -A INPUT -d 127.0.0.0/8 -j REJECT\n\n  #  Accept all established inbound connections\n  -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT\n\n  #  Allow all outbound traffic - you can modify this to only allow certain traffic\n  -A OUTPUT -j ACCEPT\n\n  #  Allow HTTP and HTTPS connections from anywhere (the normal ports for websites and SSL).\n  -A INPUT -p tcp --dport 80 -j ACCEPT\n  -A INPUT -p tcp --dport 443 -j ACCEPT\n\n  #  Allow SSH connections\n  #\n  #  The -dport number should be the same port number you set in sshd_config\n  #\n  -A INPUT -p tcp -m state --state NEW --dport 22 -j ACCEPT\n\n  #  Allow ping\n  -A INPUT -p icmp --icmp-type echo-request -j ACCEPT\n\n  #  Log iptables denied calls\n  -A INPUT -m limit --limit 5/min -j LOG --log-prefix &quot;iptables denied: &quot; --log-level 7\n\n  #  Drop all other inbound - default deny unless explicitly allowed policy\n  -A INPUT -j DROP\n  -A FORWARD -j DROP\n\n  COMMIT\n</code></pre>\n</li>\n</ul>\n<h3 id=\"激活防火墙配置\"><a href=\"#激活防火墙配置\" class=\"headerlink\" title=\"激活防火墙配置\"></a>激活防火墙配置</h3><ul>\n<li><code>sudo iptables-restore &lt; /etc/iptables.firewall.rules</code></li>\n</ul>\n<h3 id=\"查看防火墙配置信息\"><a href=\"#查看防火墙配置信息\" class=\"headerlink\" title=\"查看防火墙配置信息\"></a>查看防火墙配置信息</h3><ul>\n<li><code>sudo iptables -L</code></li>\n</ul>\n<h3 id=\"配置启动执行脚本，保证防火墙配置在服务器每次重启后即时生效\"><a href=\"#配置启动执行脚本，保证防火墙配置在服务器每次重启后即时生效\" class=\"headerlink\" title=\"配置启动执行脚本，保证防火墙配置在服务器每次重启后即时生效\"></a>配置启动执行脚本，保证防火墙配置在服务器每次重启后即时生效</h3><ul>\n<li><p><code>sudo vi /etc/network/if-pre-up.d/firewall</code> 编辑文件，内容如下：</p>\n<pre><code>  #!/bin/sh\n  /sbin/iptables-restore &lt; /etc/iptables.firewall.rules\n</code></pre>\n</li>\n<li><p><code>sudo chmod +x /etc/network/if-pre-up.d/firewall</code> 修改文件权限为可执行</p>\n</li>\n</ul>\n<h2 id=\"安装配置Fail2Ban\"><a href=\"#安装配置Fail2Ban\" class=\"headerlink\" title=\"安装配置Fail2Ban\"></a>安装配置Fail2Ban</h2><p>Fail2Ban可以有效防止同一IP多次失败登录。它会临时创建防火墙规则来阻止攻击。</p>\n<h3 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h3><ul>\n<li><code>sudo apt-get install fail2ban</code></li>\n</ul>\n<h3 id=\"设置\"><a href=\"#设置\" class=\"headerlink\" title=\"设置\"></a>设置</h3><ul>\n<li><code>bantime</code> 指定阻止保持时长</li>\n<li><code>maxretry</code> 设置IP可以尝试连接的次数</li>\n</ul>\n<h3 id=\"重启fail2ban服务\"><a href=\"#重启fail2ban服务\" class=\"headerlink\" title=\"重启fail2ban服务\"></a>重启fail2ban服务</h3><ul>\n<li><code>sudo service fail2ban restart</code></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<p>翻译自<a href=\"https://www.linode.com/docs/security/securing-your-server\">Linode: Securing Your Server</a></p>\n<p>以下配置环境为:</p>\n<ul>\n<li>本地: Mac OS X</li>\n<li>服务器: Ubuntu 14.04</li>\n</ul>\n<h2 id=\"添加用户，并将其加入sudo组\"><a href=\"#添加用户，并将其加入sudo组\" class=\"headerlink\" title=\"添加用户，并将其加入sudo组\"></a>添加用户，并将其加入sudo组</h2><p>例如增加webapps用户，并将其加入webapps用户组：</p>\n<ul>\n<li><code>ssh root@&lt;your-service-ip&gt;</code> &#x2F;&#x2F; 使用root登录服务器</li>\n<li><code>groupadd webapps</code> &#x2F;&#x2F; 创建webapps用户组</li>\n<li><code>useradd -m -g webapps -s /bin/bash webapps</code><ul>\n<li><code>-m</code> 创建home根目录</li>\n<li><code>-g</code> 指定用户组</li>\n<li><code>-s</code> 指定使用的bash</li>\n</ul>\n</li>\n<li><code>sudo usermod -aG sudo webapps</code><ul>\n<li><code>-G</code> 附加用户组</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"在本地创建并使用SSH-key认证登录服务器\"><a href=\"#在本地创建并使用SSH-key认证登录服务器\" class=\"headerlink\" title=\"在本地创建并使用SSH key认证登录服务器\"></a>在本地创建并使用SSH key认证登录服务器</h2><h3 id=\"生成密钥\"><a href=\"#生成密钥\" class=\"headerlink\" title=\"生成密钥\"></a>生成密钥</h3><ul>\n<li><code>ssh-keygen -t rsa -C &quot;your_email@example.com&quot;</code></li>\n<li>避免在每次登录的时候每次都需要输入passphrase<ul>\n<li><code>eval &quot;$(ssh-agent -s)&quot;</code></li>\n<li><code>ssh-add ~/.ssh/id_rsa</code></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"上传至服务器\"><a href=\"#上传至服务器\" class=\"headerlink\" title=\"上传至服务器\"></a>上传至服务器</h3><ul>\n<li>使用webapps登录服务器，并执行<code>mkdir ~/.ssh &amp;&amp; touch ~/.ssh/authorized_keys</code>创建空文件authorized_keys用于存放公钥</li>\n<li>在本地执行<code>cat ~/.ssh/id_rsa.pub | ssh webapps@&lt;your-server-ip&gt; &#39;cat &gt;&gt; .ssh/authorized_keys&#39;</code></li>\n</ul>\n<h3 id=\"禁止root用户密码登录\"><a href=\"#禁止root用户密码登录\" class=\"headerlink\" title=\"禁止root用户密码登录\"></a>禁止root用户密码登录</h3><ul>\n<li><code>sudo vi /etc/ssh/sshd_config</code><ul>\n<li>修改 <code>PermitRootLogin yes</code> 为 <code>PermitRootLogin without-password</code></li>\n</ul>\n</li>\n<li><code>sudo service ssh restart</code> 重启ssh服务</li>\n</ul>\n<h2 id=\"创建防火墙\"><a href=\"#创建防火墙\" class=\"headerlink\" title=\"创建防火墙\"></a>创建防火墙</h2><h3 id=\"创建文件-etc-iptables-firewall-rules-用于存放防火墙规则，内容如下：\"><a href=\"#创建文件-etc-iptables-firewall-rules-用于存放防火墙规则，内容如下：\" class=\"headerlink\" title=\"创建文件 /etc/iptables.firewall.rules 用于存放防火墙规则，内容如下：\"></a>创建文件 <code>/etc/iptables.firewall.rules</code> 用于存放防火墙规则，内容如下：</h3><ul>\n<li><p>以下规则仅开放HTTP (80), HTTPS (443), SSH (22)三个端口</p>\n<pre><code>  *filter\n\n  #  Allow all loopback (lo0) traffic and drop all traffic to 127/8 that doesn&#39;t use lo0\n  -A INPUT -i lo -j ACCEPT\n  -A INPUT -d 127.0.0.0/8 -j REJECT\n\n  #  Accept all established inbound connections\n  -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT\n\n  #  Allow all outbound traffic - you can modify this to only allow certain traffic\n  -A OUTPUT -j ACCEPT\n\n  #  Allow HTTP and HTTPS connections from anywhere (the normal ports for websites and SSL).\n  -A INPUT -p tcp --dport 80 -j ACCEPT\n  -A INPUT -p tcp --dport 443 -j ACCEPT\n\n  #  Allow SSH connections\n  #\n  #  The -dport number should be the same port number you set in sshd_config\n  #\n  -A INPUT -p tcp -m state --state NEW --dport 22 -j ACCEPT\n\n  #  Allow ping\n  -A INPUT -p icmp --icmp-type echo-request -j ACCEPT\n\n  #  Log iptables denied calls\n  -A INPUT -m limit --limit 5/min -j LOG --log-prefix &quot;iptables denied: &quot; --log-level 7\n\n  #  Drop all other inbound - default deny unless explicitly allowed policy\n  -A INPUT -j DROP\n  -A FORWARD -j DROP\n\n  COMMIT\n</code></pre>\n</li>\n</ul>\n<h3 id=\"激活防火墙配置\"><a href=\"#激活防火墙配置\" class=\"headerlink\" title=\"激活防火墙配置\"></a>激活防火墙配置</h3><ul>\n<li><code>sudo iptables-restore &lt; /etc/iptables.firewall.rules</code></li>\n</ul>\n<h3 id=\"查看防火墙配置信息\"><a href=\"#查看防火墙配置信息\" class=\"headerlink\" title=\"查看防火墙配置信息\"></a>查看防火墙配置信息</h3><ul>\n<li><code>sudo iptables -L</code></li>\n</ul>\n<h3 id=\"配置启动执行脚本，保证防火墙配置在服务器每次重启后即时生效\"><a href=\"#配置启动执行脚本，保证防火墙配置在服务器每次重启后即时生效\" class=\"headerlink\" title=\"配置启动执行脚本，保证防火墙配置在服务器每次重启后即时生效\"></a>配置启动执行脚本，保证防火墙配置在服务器每次重启后即时生效</h3><ul>\n<li><p><code>sudo vi /etc/network/if-pre-up.d/firewall</code> 编辑文件，内容如下：</p>\n<pre><code>  #!/bin/sh\n  /sbin/iptables-restore &lt; /etc/iptables.firewall.rules\n</code></pre>\n</li>\n<li><p><code>sudo chmod +x /etc/network/if-pre-up.d/firewall</code> 修改文件权限为可执行</p>\n</li>\n</ul>\n<h2 id=\"安装配置Fail2Ban\"><a href=\"#安装配置Fail2Ban\" class=\"headerlink\" title=\"安装配置Fail2Ban\"></a>安装配置Fail2Ban</h2><p>Fail2Ban可以有效防止同一IP多次失败登录。它会临时创建防火墙规则来阻止攻击。</p>\n<h3 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h3><ul>\n<li><code>sudo apt-get install fail2ban</code></li>\n</ul>\n<h3 id=\"设置\"><a href=\"#设置\" class=\"headerlink\" title=\"设置\"></a>设置</h3><ul>\n<li><code>bantime</code> 指定阻止保持时长</li>\n<li><code>maxretry</code> 设置IP可以尝试连接的次数</li>\n</ul>\n<h3 id=\"重启fail2ban服务\"><a href=\"#重启fail2ban服务\" class=\"headerlink\" title=\"重启fail2ban服务\"></a>重启fail2ban服务</h3><ul>\n<li><code>sudo service fail2ban restart</code></li>\n</ul>\n"},{"layout":"post","title":"使用Supervisor来守护Laravel Queue进程","date":"2015-01-14T05:00:00.000Z","description":null,"keywords":"Linux, Laravel, Queue, Supervisor","_content":"\n## 安装Supervisor\n\n* `sudo apt-get install supervisor`\n\n## 编辑Queue守护进程\n\n* `sudo vi /etc/supervisor/conf.d/myqueue.conf`\n\n        [program:myqueue]\n        command                 = php artisan queue:work  --env=production --queue=queue1,queue2\n        user                    = www-data\n        directory               = /path/to/app/\n        process_name            = %(program_name)s_%(process_num)s\n        numprocs                = 6\n        autostart               = true\n        autorestart             = true\n        stdout_logfile          = /path/to/app/app/storage/logs/supervisor-pd-queue.log\n        stdout_logfile_maxbytes = 10MB\n        stderr_logfile          = /path/to/app/app/storage/logs/supervisor-pd-queue.log\n        stderr_logfile_maxbytes = 10MB\n\n## 启动进程\n\n* `$ sudo supervisorctl`\n* `> reread` # Tell supervisord to check for new items in /etc/supervisor/conf.d/\n* `> add myqueue`       # Add this process to Supervisord\n* `> start myqueue`     # May say \"already started\"\n\n## 查看进程是否启动\n\n* `$ ps aux | grep php`\n\n\n","source":"_posts/2015-01-14-use-supervisor-for-laravel-queue.md","raw":"---\nlayout: post\ntitle: 使用Supervisor来守护Laravel Queue进程\ncategory: 编程学习\ntags: [Linux, PHP, Laravel]\ndate: 2015-01-14\ndescription:\nkeywords: Linux, Laravel, Queue, Supervisor\n---\n\n## 安装Supervisor\n\n* `sudo apt-get install supervisor`\n\n## 编辑Queue守护进程\n\n* `sudo vi /etc/supervisor/conf.d/myqueue.conf`\n\n        [program:myqueue]\n        command                 = php artisan queue:work  --env=production --queue=queue1,queue2\n        user                    = www-data\n        directory               = /path/to/app/\n        process_name            = %(program_name)s_%(process_num)s\n        numprocs                = 6\n        autostart               = true\n        autorestart             = true\n        stdout_logfile          = /path/to/app/app/storage/logs/supervisor-pd-queue.log\n        stdout_logfile_maxbytes = 10MB\n        stderr_logfile          = /path/to/app/app/storage/logs/supervisor-pd-queue.log\n        stderr_logfile_maxbytes = 10MB\n\n## 启动进程\n\n* `$ sudo supervisorctl`\n* `> reread` # Tell supervisord to check for new items in /etc/supervisor/conf.d/\n* `> add myqueue`       # Add this process to Supervisord\n* `> start myqueue`     # May say \"already started\"\n\n## 查看进程是否启动\n\n* `$ ps aux | grep php`\n\n\n","slug":"2015-01-14-use-supervisor-for-laravel-queue","published":1,"updated":"2022-02-12T20:53:10.501Z","comments":1,"photos":[],"link":"","_id":"ckzkc92x5000ioqox8kgj9qe3","content":"<h2 id=\"安装Supervisor\"><a href=\"#安装Supervisor\" class=\"headerlink\" title=\"安装Supervisor\"></a>安装Supervisor</h2><ul>\n<li><code>sudo apt-get install supervisor</code></li>\n</ul>\n<h2 id=\"编辑Queue守护进程\"><a href=\"#编辑Queue守护进程\" class=\"headerlink\" title=\"编辑Queue守护进程\"></a>编辑Queue守护进程</h2><ul>\n<li><p><code>sudo vi /etc/supervisor/conf.d/myqueue.conf</code></p>\n<pre><code>  [program:myqueue]\n  command                 = php artisan queue:work  --env=production --queue=queue1,queue2\n  user                    = www-data\n  directory               = /path/to/app/\n  process_name            = %(program_name)s_%(process_num)s\n  numprocs                = 6\n  autostart               = true\n  autorestart             = true\n  stdout_logfile          = /path/to/app/app/storage/logs/supervisor-pd-queue.log\n  stdout_logfile_maxbytes = 10MB\n  stderr_logfile          = /path/to/app/app/storage/logs/supervisor-pd-queue.log\n  stderr_logfile_maxbytes = 10MB\n</code></pre>\n</li>\n</ul>\n<h2 id=\"启动进程\"><a href=\"#启动进程\" class=\"headerlink\" title=\"启动进程\"></a>启动进程</h2><ul>\n<li><code>$ sudo supervisorctl</code></li>\n<li><code>&gt; reread</code> # Tell supervisord to check for new items in &#x2F;etc&#x2F;supervisor&#x2F;conf.d&#x2F;</li>\n<li><code>&gt; add myqueue</code>       # Add this process to Supervisord</li>\n<li><code>&gt; start myqueue</code>     # May say “already started”</li>\n</ul>\n<h2 id=\"查看进程是否启动\"><a href=\"#查看进程是否启动\" class=\"headerlink\" title=\"查看进程是否启动\"></a>查看进程是否启动</h2><ul>\n<li><code>$ ps aux | grep php</code></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"安装Supervisor\"><a href=\"#安装Supervisor\" class=\"headerlink\" title=\"安装Supervisor\"></a>安装Supervisor</h2><ul>\n<li><code>sudo apt-get install supervisor</code></li>\n</ul>\n<h2 id=\"编辑Queue守护进程\"><a href=\"#编辑Queue守护进程\" class=\"headerlink\" title=\"编辑Queue守护进程\"></a>编辑Queue守护进程</h2><ul>\n<li><p><code>sudo vi /etc/supervisor/conf.d/myqueue.conf</code></p>\n<pre><code>  [program:myqueue]\n  command                 = php artisan queue:work  --env=production --queue=queue1,queue2\n  user                    = www-data\n  directory               = /path/to/app/\n  process_name            = %(program_name)s_%(process_num)s\n  numprocs                = 6\n  autostart               = true\n  autorestart             = true\n  stdout_logfile          = /path/to/app/app/storage/logs/supervisor-pd-queue.log\n  stdout_logfile_maxbytes = 10MB\n  stderr_logfile          = /path/to/app/app/storage/logs/supervisor-pd-queue.log\n  stderr_logfile_maxbytes = 10MB\n</code></pre>\n</li>\n</ul>\n<h2 id=\"启动进程\"><a href=\"#启动进程\" class=\"headerlink\" title=\"启动进程\"></a>启动进程</h2><ul>\n<li><code>$ sudo supervisorctl</code></li>\n<li><code>&gt; reread</code> # Tell supervisord to check for new items in &#x2F;etc&#x2F;supervisor&#x2F;conf.d&#x2F;</li>\n<li><code>&gt; add myqueue</code>       # Add this process to Supervisord</li>\n<li><code>&gt; start myqueue</code>     # May say “already started”</li>\n</ul>\n<h2 id=\"查看进程是否启动\"><a href=\"#查看进程是否启动\" class=\"headerlink\" title=\"查看进程是否启动\"></a>查看进程是否启动</h2><ul>\n<li><code>$ ps aux | grep php</code></li>\n</ul>\n"},{"layout":"post","title":"收集一些常用的 JS 和 CSS 库","date":"2015-02-02T05:00:00.000Z","description":null,"keywords":"CSS,Javascript","_content":"\n### [Shape of CSS](http://css-tricks.com/examples/ShapesOfCSS/)\n\n* Shapes includes : Circle, Rectangle, Star(5-points), etc.\n\n### [facebook/flux](https://github.com/facebook/flux)\n\n* Application Architecture for Building User Interfaces\n\n### [hapijs/boom](https://github.com/hapijs/boom)\n\n* HTTP-friendly error objects\n\n\n### [koajs/koa](https://github.com/koajs/koa)\n\n* Expressive middleware for node.js using generators\n\n### [josdejong/jsoneditor](https://github.com/josdejong/jsoneditor)\n\n* A web-based tool to view, edit, format, and validate JSON\n\n\n### [No9/harmon](https://github.com/No9/harmon)\n\n* middleware for node-http-proxy to modify the remote website response with trumpet\n\n### [nodejitsu/node-http-proxy](https://github.com/nodejitsu/node-http-proxy)\n\n* A full-featured http proxy for node.js\n\n### [faisalman/ua-parser-js](https://github.com/faisalman/ua-parser-js)\n\n* UAParser.js - Lightweight JavaScript-based User-Agent string parser. Supports browser & node.js environment. Also available as jQuery/Zepto plugin, Component/Bower/Meteor package, & RequireJS/AMD module\n\n\n","source":"_posts/2015-02-02-popular-js-css-collection.md","raw":"---\nlayout: post\ntitle: 收集一些常用的 JS 和 CSS 库\ncategory: 编程学习\ntags: [CSS, Javascript]\ndate: 2015-02-02\ndescription:\nkeywords: CSS,Javascript\n---\n\n### [Shape of CSS](http://css-tricks.com/examples/ShapesOfCSS/)\n\n* Shapes includes : Circle, Rectangle, Star(5-points), etc.\n\n### [facebook/flux](https://github.com/facebook/flux)\n\n* Application Architecture for Building User Interfaces\n\n### [hapijs/boom](https://github.com/hapijs/boom)\n\n* HTTP-friendly error objects\n\n\n### [koajs/koa](https://github.com/koajs/koa)\n\n* Expressive middleware for node.js using generators\n\n### [josdejong/jsoneditor](https://github.com/josdejong/jsoneditor)\n\n* A web-based tool to view, edit, format, and validate JSON\n\n\n### [No9/harmon](https://github.com/No9/harmon)\n\n* middleware for node-http-proxy to modify the remote website response with trumpet\n\n### [nodejitsu/node-http-proxy](https://github.com/nodejitsu/node-http-proxy)\n\n* A full-featured http proxy for node.js\n\n### [faisalman/ua-parser-js](https://github.com/faisalman/ua-parser-js)\n\n* UAParser.js - Lightweight JavaScript-based User-Agent string parser. Supports browser & node.js environment. Also available as jQuery/Zepto plugin, Component/Bower/Meteor package, & RequireJS/AMD module\n\n\n","slug":"2015-02-02-popular-js-css-collection","published":1,"updated":"2022-02-12T20:53:10.503Z","comments":1,"photos":[],"link":"","_id":"ckzkc92x5000joqoxej03gdpo","content":"<h3 id=\"Shape-of-CSS\"><a href=\"#Shape-of-CSS\" class=\"headerlink\" title=\"Shape of CSS\"></a><a href=\"http://css-tricks.com/examples/ShapesOfCSS/\">Shape of CSS</a></h3><ul>\n<li>Shapes includes : Circle, Rectangle, Star(5-points), etc.</li>\n</ul>\n<h3 id=\"facebook-x2F-flux\"><a href=\"#facebook-x2F-flux\" class=\"headerlink\" title=\"facebook&#x2F;flux\"></a><a href=\"https://github.com/facebook/flux\">facebook&#x2F;flux</a></h3><ul>\n<li>Application Architecture for Building User Interfaces</li>\n</ul>\n<h3 id=\"hapijs-x2F-boom\"><a href=\"#hapijs-x2F-boom\" class=\"headerlink\" title=\"hapijs&#x2F;boom\"></a><a href=\"https://github.com/hapijs/boom\">hapijs&#x2F;boom</a></h3><ul>\n<li>HTTP-friendly error objects</li>\n</ul>\n<h3 id=\"koajs-x2F-koa\"><a href=\"#koajs-x2F-koa\" class=\"headerlink\" title=\"koajs&#x2F;koa\"></a><a href=\"https://github.com/koajs/koa\">koajs&#x2F;koa</a></h3><ul>\n<li>Expressive middleware for node.js using generators</li>\n</ul>\n<h3 id=\"josdejong-x2F-jsoneditor\"><a href=\"#josdejong-x2F-jsoneditor\" class=\"headerlink\" title=\"josdejong&#x2F;jsoneditor\"></a><a href=\"https://github.com/josdejong/jsoneditor\">josdejong&#x2F;jsoneditor</a></h3><ul>\n<li>A web-based tool to view, edit, format, and validate JSON</li>\n</ul>\n<h3 id=\"No9-x2F-harmon\"><a href=\"#No9-x2F-harmon\" class=\"headerlink\" title=\"No9&#x2F;harmon\"></a><a href=\"https://github.com/No9/harmon\">No9&#x2F;harmon</a></h3><ul>\n<li>middleware for node-http-proxy to modify the remote website response with trumpet</li>\n</ul>\n<h3 id=\"nodejitsu-x2F-node-http-proxy\"><a href=\"#nodejitsu-x2F-node-http-proxy\" class=\"headerlink\" title=\"nodejitsu&#x2F;node-http-proxy\"></a><a href=\"https://github.com/nodejitsu/node-http-proxy\">nodejitsu&#x2F;node-http-proxy</a></h3><ul>\n<li>A full-featured http proxy for node.js</li>\n</ul>\n<h3 id=\"faisalman-x2F-ua-parser-js\"><a href=\"#faisalman-x2F-ua-parser-js\" class=\"headerlink\" title=\"faisalman&#x2F;ua-parser-js\"></a><a href=\"https://github.com/faisalman/ua-parser-js\">faisalman&#x2F;ua-parser-js</a></h3><ul>\n<li>UAParser.js - Lightweight JavaScript-based User-Agent string parser. Supports browser &amp; node.js environment. Also available as jQuery&#x2F;Zepto plugin, Component&#x2F;Bower&#x2F;Meteor package, &amp; RequireJS&#x2F;AMD module</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"Shape-of-CSS\"><a href=\"#Shape-of-CSS\" class=\"headerlink\" title=\"Shape of CSS\"></a><a href=\"http://css-tricks.com/examples/ShapesOfCSS/\">Shape of CSS</a></h3><ul>\n<li>Shapes includes : Circle, Rectangle, Star(5-points), etc.</li>\n</ul>\n<h3 id=\"facebook-x2F-flux\"><a href=\"#facebook-x2F-flux\" class=\"headerlink\" title=\"facebook&#x2F;flux\"></a><a href=\"https://github.com/facebook/flux\">facebook&#x2F;flux</a></h3><ul>\n<li>Application Architecture for Building User Interfaces</li>\n</ul>\n<h3 id=\"hapijs-x2F-boom\"><a href=\"#hapijs-x2F-boom\" class=\"headerlink\" title=\"hapijs&#x2F;boom\"></a><a href=\"https://github.com/hapijs/boom\">hapijs&#x2F;boom</a></h3><ul>\n<li>HTTP-friendly error objects</li>\n</ul>\n<h3 id=\"koajs-x2F-koa\"><a href=\"#koajs-x2F-koa\" class=\"headerlink\" title=\"koajs&#x2F;koa\"></a><a href=\"https://github.com/koajs/koa\">koajs&#x2F;koa</a></h3><ul>\n<li>Expressive middleware for node.js using generators</li>\n</ul>\n<h3 id=\"josdejong-x2F-jsoneditor\"><a href=\"#josdejong-x2F-jsoneditor\" class=\"headerlink\" title=\"josdejong&#x2F;jsoneditor\"></a><a href=\"https://github.com/josdejong/jsoneditor\">josdejong&#x2F;jsoneditor</a></h3><ul>\n<li>A web-based tool to view, edit, format, and validate JSON</li>\n</ul>\n<h3 id=\"No9-x2F-harmon\"><a href=\"#No9-x2F-harmon\" class=\"headerlink\" title=\"No9&#x2F;harmon\"></a><a href=\"https://github.com/No9/harmon\">No9&#x2F;harmon</a></h3><ul>\n<li>middleware for node-http-proxy to modify the remote website response with trumpet</li>\n</ul>\n<h3 id=\"nodejitsu-x2F-node-http-proxy\"><a href=\"#nodejitsu-x2F-node-http-proxy\" class=\"headerlink\" title=\"nodejitsu&#x2F;node-http-proxy\"></a><a href=\"https://github.com/nodejitsu/node-http-proxy\">nodejitsu&#x2F;node-http-proxy</a></h3><ul>\n<li>A full-featured http proxy for node.js</li>\n</ul>\n<h3 id=\"faisalman-x2F-ua-parser-js\"><a href=\"#faisalman-x2F-ua-parser-js\" class=\"headerlink\" title=\"faisalman&#x2F;ua-parser-js\"></a><a href=\"https://github.com/faisalman/ua-parser-js\">faisalman&#x2F;ua-parser-js</a></h3><ul>\n<li>UAParser.js - Lightweight JavaScript-based User-Agent string parser. Supports browser &amp; node.js environment. Also available as jQuery&#x2F;Zepto plugin, Component&#x2F;Bower&#x2F;Meteor package, &amp; RequireJS&#x2F;AMD module</li>\n</ul>\n"},{"layout":"post","title":"优化配置 Nginx 和 PHP-FPM","date":"2015-09-10T04:00:00.000Z","description":null,"keywords":"nginx,php-fpm,optimize","_content":"\n## nginx\n\n* `server_tokens off;`\n\n    hide nginx server tokens\n\n* `access_log off;`\n\n    reduce nginx write to disk times\n\n* `worker_processes 1;`\n\n    always equals `grep processor /proc/cpuinfo | wc -l`\n\n* `worker_connections 4096;`\n\n    `ulimit -n` will echo the max connection of server.\n\n* `client_body_buffer_size 32K;`\n\n    This handles the client buffer size, meaning any POST actions sent to Nginx.\n\n* `client_header_buffer_size 10k;`\n* `large_client_header_buffers 4 32k;`\n* `client_max_body_size 50m;`\n\n* Gzip Compression\n\n    Gzip can help reduce the amount of network transfer Nginx deals with. However, be careful increasing the gzip_comp_level too high as the server will begin wasting cpu cycles.\n\n        gzip             on;\n        gzip_comp_level  2;\n        gzip_min_length  1000;\n        gzip_proxied     expired no-cache no-store private auth;\n        gzip_types       text/plain application/x-javascript text/xml text/css application/xml;\n\n* Timeouts\n\n    Timeouts can also drastically improve performance.\n\n    The `client_body_timeout` and `client_header_timeout` directives are responsible for the time a server will wait for a client body or client header to be sent after request. If neither a body or header is sent, the server will issue a 408 error or Request time out.\n\n    The keepalive_timeout assigns the timeout for keep-alive connections with the client. Simply put, Nginx will close connections with the client after this period of time.\n\n    Finally, the send_timeout is established not on the entire transfer of answer, but only between two operations of reading; if after this time client will take nothing, then Nginx is shutting down the connection.\n\n        client_body_timeout 12;\n        client_header_timeout 12;\n        keepalive_timeout 15;\n        send_timeout 10;\n\n## php-fpm\n\n* `pm.max_spare_servers = 30;`\n\n    The desired maximum number of idle server processes.\n\n* `pm.max_children = 1024;`\n\n    On an average each PHP-FPM process took ~75MB of RAM on my machine.\n\n    Appropriate value for pm.max_children can be calculated as:\n\n    pm.max_children = Total RAM dedicated to the web server / Max child process size - in my case it was 85MB\n\n    The server has 8GB of RAM, so:\n\n    pm.max_children = 6144MB / 85MB = 72\n\n    assuming you are devoting 80% of available memory to PHP-FPM, the command below will suggest an approx pm.max_children value for all pools:\n\n    `echo \"pm.max_children = $(( $(awk '/MemTotal:/ { printf \"%d\\n\", ($2*0.80) }' /proc/meminfo) / $(ps --no-headers -o \"rss,cmd\" -C php-fpm | awk '{ sum+=$1 } END { printf (\"%d\\n\", sum/NR) }') ))\"`\n\n* `pm.max_requests = 800;`\n\n    The number of requests each child process should execute before respawning.\n\nRefers:\n\n[http://myshell.co.uk/blog/2012/07/adjusting-child-processes-for-php-fpm-nginx/](http://myshell.co.uk/blog/2012/07/adjusting-child-processes-for-php-fpm-nginx/)\n\n[https://www.digitalocean.com/community/tutorials/how-to-optimize-nginx-configuration](https://www.digitalocean.com/community/tutorials/how-to-optimize-nginx-configuration)\n\n[http://www.hjue.me/post/php-fpm-nginx](http://www.hjue.me/post/php-fpm-nginx)\n\n","source":"_posts/2015-09-10-optimize-nginx-and-php-fpm-configuration.md","raw":"---\nlayout: post\ntitle: 优化配置 Nginx 和 PHP-FPM\ncategory: 编程学习\ntags: [Nginx, PHP]\ndate: 2015-09-10\ndescription:\nkeywords: nginx,php-fpm,optimize\n---\n\n## nginx\n\n* `server_tokens off;`\n\n    hide nginx server tokens\n\n* `access_log off;`\n\n    reduce nginx write to disk times\n\n* `worker_processes 1;`\n\n    always equals `grep processor /proc/cpuinfo | wc -l`\n\n* `worker_connections 4096;`\n\n    `ulimit -n` will echo the max connection of server.\n\n* `client_body_buffer_size 32K;`\n\n    This handles the client buffer size, meaning any POST actions sent to Nginx.\n\n* `client_header_buffer_size 10k;`\n* `large_client_header_buffers 4 32k;`\n* `client_max_body_size 50m;`\n\n* Gzip Compression\n\n    Gzip can help reduce the amount of network transfer Nginx deals with. However, be careful increasing the gzip_comp_level too high as the server will begin wasting cpu cycles.\n\n        gzip             on;\n        gzip_comp_level  2;\n        gzip_min_length  1000;\n        gzip_proxied     expired no-cache no-store private auth;\n        gzip_types       text/plain application/x-javascript text/xml text/css application/xml;\n\n* Timeouts\n\n    Timeouts can also drastically improve performance.\n\n    The `client_body_timeout` and `client_header_timeout` directives are responsible for the time a server will wait for a client body or client header to be sent after request. If neither a body or header is sent, the server will issue a 408 error or Request time out.\n\n    The keepalive_timeout assigns the timeout for keep-alive connections with the client. Simply put, Nginx will close connections with the client after this period of time.\n\n    Finally, the send_timeout is established not on the entire transfer of answer, but only between two operations of reading; if after this time client will take nothing, then Nginx is shutting down the connection.\n\n        client_body_timeout 12;\n        client_header_timeout 12;\n        keepalive_timeout 15;\n        send_timeout 10;\n\n## php-fpm\n\n* `pm.max_spare_servers = 30;`\n\n    The desired maximum number of idle server processes.\n\n* `pm.max_children = 1024;`\n\n    On an average each PHP-FPM process took ~75MB of RAM on my machine.\n\n    Appropriate value for pm.max_children can be calculated as:\n\n    pm.max_children = Total RAM dedicated to the web server / Max child process size - in my case it was 85MB\n\n    The server has 8GB of RAM, so:\n\n    pm.max_children = 6144MB / 85MB = 72\n\n    assuming you are devoting 80% of available memory to PHP-FPM, the command below will suggest an approx pm.max_children value for all pools:\n\n    `echo \"pm.max_children = $(( $(awk '/MemTotal:/ { printf \"%d\\n\", ($2*0.80) }' /proc/meminfo) / $(ps --no-headers -o \"rss,cmd\" -C php-fpm | awk '{ sum+=$1 } END { printf (\"%d\\n\", sum/NR) }') ))\"`\n\n* `pm.max_requests = 800;`\n\n    The number of requests each child process should execute before respawning.\n\nRefers:\n\n[http://myshell.co.uk/blog/2012/07/adjusting-child-processes-for-php-fpm-nginx/](http://myshell.co.uk/blog/2012/07/adjusting-child-processes-for-php-fpm-nginx/)\n\n[https://www.digitalocean.com/community/tutorials/how-to-optimize-nginx-configuration](https://www.digitalocean.com/community/tutorials/how-to-optimize-nginx-configuration)\n\n[http://www.hjue.me/post/php-fpm-nginx](http://www.hjue.me/post/php-fpm-nginx)\n\n","slug":"2015-09-10-optimize-nginx-and-php-fpm-configuration","published":1,"updated":"2022-02-12T20:53:10.503Z","comments":1,"photos":[],"link":"","_id":"ckzkc92x7000noqoxa32z062m","content":"<h2 id=\"nginx\"><a href=\"#nginx\" class=\"headerlink\" title=\"nginx\"></a>nginx</h2><ul>\n<li><p><code>server_tokens off;</code></p>\n<p>  hide nginx server tokens</p>\n</li>\n<li><p><code>access_log off;</code></p>\n<p>  reduce nginx write to disk times</p>\n</li>\n<li><p><code>worker_processes 1;</code></p>\n<p>  always equals <code>grep processor /proc/cpuinfo | wc -l</code></p>\n</li>\n<li><p><code>worker_connections 4096;</code></p>\n<p>  <code>ulimit -n</code> will echo the max connection of server.</p>\n</li>\n<li><p><code>client_body_buffer_size 32K;</code></p>\n<p>  This handles the client buffer size, meaning any POST actions sent to Nginx.</p>\n</li>\n<li><p><code>client_header_buffer_size 10k;</code></p>\n</li>\n<li><p><code>large_client_header_buffers 4 32k;</code></p>\n</li>\n<li><p><code>client_max_body_size 50m;</code></p>\n</li>\n<li><p>Gzip Compression</p>\n<p>  Gzip can help reduce the amount of network transfer Nginx deals with. However, be careful increasing the gzip_comp_level too high as the server will begin wasting cpu cycles.</p>\n<pre><code>  gzip             on;\n  gzip_comp_level  2;\n  gzip_min_length  1000;\n  gzip_proxied     expired no-cache no-store private auth;\n  gzip_types       text/plain application/x-javascript text/xml text/css application/xml;\n</code></pre>\n</li>\n<li><p>Timeouts</p>\n<p>  Timeouts can also drastically improve performance.</p>\n<p>  The <code>client_body_timeout</code> and <code>client_header_timeout</code> directives are responsible for the time a server will wait for a client body or client header to be sent after request. If neither a body or header is sent, the server will issue a 408 error or Request time out.</p>\n<p>  The keepalive_timeout assigns the timeout for keep-alive connections with the client. Simply put, Nginx will close connections with the client after this period of time.</p>\n<p>  Finally, the send_timeout is established not on the entire transfer of answer, but only between two operations of reading; if after this time client will take nothing, then Nginx is shutting down the connection.</p>\n<pre><code>  client_body_timeout 12;\n  client_header_timeout 12;\n  keepalive_timeout 15;\n  send_timeout 10;\n</code></pre>\n</li>\n</ul>\n<h2 id=\"php-fpm\"><a href=\"#php-fpm\" class=\"headerlink\" title=\"php-fpm\"></a>php-fpm</h2><ul>\n<li><p><code>pm.max_spare_servers = 30;</code></p>\n<p>  The desired maximum number of idle server processes.</p>\n</li>\n<li><p><code>pm.max_children = 1024;</code></p>\n<p>  On an average each PHP-FPM process took ~75MB of RAM on my machine.</p>\n<p>  Appropriate value for pm.max_children can be calculated as:</p>\n<p>  pm.max_children &#x3D; Total RAM dedicated to the web server &#x2F; Max child process size - in my case it was 85MB</p>\n<p>  The server has 8GB of RAM, so:</p>\n<p>  pm.max_children &#x3D; 6144MB &#x2F; 85MB &#x3D; 72</p>\n<p>  assuming you are devoting 80% of available memory to PHP-FPM, the command below will suggest an approx pm.max_children value for all pools:</p>\n<p>  <code>echo &quot;pm.max_children = $(( $(awk &#39;/MemTotal:/ &#123; printf &quot;%d\\n&quot;, ($2*0.80) &#125;&#39; /proc/meminfo) / $(ps --no-headers -o &quot;rss,cmd&quot; -C php-fpm | awk &#39;&#123; sum+=$1 &#125; END &#123; printf (&quot;%d\\n&quot;, sum/NR) &#125;&#39;) ))&quot;</code></p>\n</li>\n<li><p><code>pm.max_requests = 800;</code></p>\n<p>  The number of requests each child process should execute before respawning.</p>\n</li>\n</ul>\n<p>Refers:</p>\n<p><a href=\"http://myshell.co.uk/blog/2012/07/adjusting-child-processes-for-php-fpm-nginx/\">http://myshell.co.uk/blog/2012/07/adjusting-child-processes-for-php-fpm-nginx/</a></p>\n<p><a href=\"https://www.digitalocean.com/community/tutorials/how-to-optimize-nginx-configuration\">https://www.digitalocean.com/community/tutorials/how-to-optimize-nginx-configuration</a></p>\n<p><a href=\"http://www.hjue.me/post/php-fpm-nginx\">http://www.hjue.me/post/php-fpm-nginx</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"nginx\"><a href=\"#nginx\" class=\"headerlink\" title=\"nginx\"></a>nginx</h2><ul>\n<li><p><code>server_tokens off;</code></p>\n<p>  hide nginx server tokens</p>\n</li>\n<li><p><code>access_log off;</code></p>\n<p>  reduce nginx write to disk times</p>\n</li>\n<li><p><code>worker_processes 1;</code></p>\n<p>  always equals <code>grep processor /proc/cpuinfo | wc -l</code></p>\n</li>\n<li><p><code>worker_connections 4096;</code></p>\n<p>  <code>ulimit -n</code> will echo the max connection of server.</p>\n</li>\n<li><p><code>client_body_buffer_size 32K;</code></p>\n<p>  This handles the client buffer size, meaning any POST actions sent to Nginx.</p>\n</li>\n<li><p><code>client_header_buffer_size 10k;</code></p>\n</li>\n<li><p><code>large_client_header_buffers 4 32k;</code></p>\n</li>\n<li><p><code>client_max_body_size 50m;</code></p>\n</li>\n<li><p>Gzip Compression</p>\n<p>  Gzip can help reduce the amount of network transfer Nginx deals with. However, be careful increasing the gzip_comp_level too high as the server will begin wasting cpu cycles.</p>\n<pre><code>  gzip             on;\n  gzip_comp_level  2;\n  gzip_min_length  1000;\n  gzip_proxied     expired no-cache no-store private auth;\n  gzip_types       text/plain application/x-javascript text/xml text/css application/xml;\n</code></pre>\n</li>\n<li><p>Timeouts</p>\n<p>  Timeouts can also drastically improve performance.</p>\n<p>  The <code>client_body_timeout</code> and <code>client_header_timeout</code> directives are responsible for the time a server will wait for a client body or client header to be sent after request. If neither a body or header is sent, the server will issue a 408 error or Request time out.</p>\n<p>  The keepalive_timeout assigns the timeout for keep-alive connections with the client. Simply put, Nginx will close connections with the client after this period of time.</p>\n<p>  Finally, the send_timeout is established not on the entire transfer of answer, but only between two operations of reading; if after this time client will take nothing, then Nginx is shutting down the connection.</p>\n<pre><code>  client_body_timeout 12;\n  client_header_timeout 12;\n  keepalive_timeout 15;\n  send_timeout 10;\n</code></pre>\n</li>\n</ul>\n<h2 id=\"php-fpm\"><a href=\"#php-fpm\" class=\"headerlink\" title=\"php-fpm\"></a>php-fpm</h2><ul>\n<li><p><code>pm.max_spare_servers = 30;</code></p>\n<p>  The desired maximum number of idle server processes.</p>\n</li>\n<li><p><code>pm.max_children = 1024;</code></p>\n<p>  On an average each PHP-FPM process took ~75MB of RAM on my machine.</p>\n<p>  Appropriate value for pm.max_children can be calculated as:</p>\n<p>  pm.max_children &#x3D; Total RAM dedicated to the web server &#x2F; Max child process size - in my case it was 85MB</p>\n<p>  The server has 8GB of RAM, so:</p>\n<p>  pm.max_children &#x3D; 6144MB &#x2F; 85MB &#x3D; 72</p>\n<p>  assuming you are devoting 80% of available memory to PHP-FPM, the command below will suggest an approx pm.max_children value for all pools:</p>\n<p>  <code>echo &quot;pm.max_children = $(( $(awk &#39;/MemTotal:/ &#123; printf &quot;%d\\n&quot;, ($2*0.80) &#125;&#39; /proc/meminfo) / $(ps --no-headers -o &quot;rss,cmd&quot; -C php-fpm | awk &#39;&#123; sum+=$1 &#125; END &#123; printf (&quot;%d\\n&quot;, sum/NR) &#125;&#39;) ))&quot;</code></p>\n</li>\n<li><p><code>pm.max_requests = 800;</code></p>\n<p>  The number of requests each child process should execute before respawning.</p>\n</li>\n</ul>\n<p>Refers:</p>\n<p><a href=\"http://myshell.co.uk/blog/2012/07/adjusting-child-processes-for-php-fpm-nginx/\">http://myshell.co.uk/blog/2012/07/adjusting-child-processes-for-php-fpm-nginx/</a></p>\n<p><a href=\"https://www.digitalocean.com/community/tutorials/how-to-optimize-nginx-configuration\">https://www.digitalocean.com/community/tutorials/how-to-optimize-nginx-configuration</a></p>\n<p><a href=\"http://www.hjue.me/post/php-fpm-nginx\">http://www.hjue.me/post/php-fpm-nginx</a></p>\n"},{"layout":"post","title":"《金刚经说什么》读书笔记","date":"2016-07-01T04:00:00.000Z","description":null,"keywords":"金刚经,读书笔记","_content":"\n先把做人的道理完成，再来搞这个学佛的事。但是既然要学佛了，千万要注意不住于相四个字；一住相，什么都学不成了。\n福慧双修。智慧具足，福德具足。《金刚经》告诉你，真正的福德要怎样修呢？就是不住相布施。\n-- 第五品\n\n\n","source":"_posts/2016-07-01-jin-gang-jing-note.md","raw":"---\nlayout: post\ntitle: 《金刚经说什么》读书笔记\ncategory: 阅读笔记\ntags: [笔记]\ndate: 2016-07-01\ndescription:\nkeywords: 金刚经,读书笔记\n---\n\n先把做人的道理完成，再来搞这个学佛的事。但是既然要学佛了，千万要注意不住于相四个字；一住相，什么都学不成了。\n福慧双修。智慧具足，福德具足。《金刚经》告诉你，真正的福德要怎样修呢？就是不住相布施。\n-- 第五品\n\n\n","slug":"2016-07-01-jin-gang-jing-note","published":1,"updated":"2022-02-12T20:53:10.503Z","comments":1,"photos":[],"link":"","_id":"ckzkc92x8000poqox69k9gqs3","content":"<p>先把做人的道理完成，再来搞这个学佛的事。但是既然要学佛了，千万要注意不住于相四个字；一住相，什么都学不成了。<br>福慧双修。智慧具足，福德具足。《金刚经》告诉你，真正的福德要怎样修呢？就是不住相布施。<br>– 第五品</p>\n","site":{"data":{}},"excerpt":"","more":"<p>先把做人的道理完成，再来搞这个学佛的事。但是既然要学佛了，千万要注意不住于相四个字；一住相，什么都学不成了。<br>福慧双修。智慧具足，福德具足。《金刚经》告诉你，真正的福德要怎样修呢？就是不住相布施。<br>– 第五品</p>\n"},{"layout":"post","title":"常规用法 - PHP进阶 (1)","date":"2016-08-01T04:00:00.000Z","description":"PHP的一些知识梳理","keywords":"Modern PHP, PHP, Namespace, traits, closure, 命名空间, 闭包, Hiphop","_content":"\n### 命名空间 Namespace (PHP 5.3+)\n\n沙盒机制。虚拟的层级关系，更好的隔离不同的组建。PS：以下仅为推荐用法。\n\n* 声明、引用、别名 (Declear, Import, Alias)\n\n* 声明：\n\n\t\t<?php \n\t\t// 必须在首行，推荐保持每个命名空间一行\n\t\tnamespace Symfony\\Component\\HttpFoundation;\n\n* 引用 & 别名\n\t// 推荐保持每个引用一行\n\t\n### Class\n\n\t<?php\n\t// 引用\n\tuse Symfony\\Component\\HttpFoundation\\Response;\n\n\t$response = new Response('Oops', 400);\n\t$response->send();\n\n\t// 别名\n\tuse Symfony\\Component\\HttpFoundation\\Response as Res;\n\n\t$r = new Res('Oops', 400);\n\t$r->send();\n\n### Function (PHP 5.6+)\n\n\t<?php \n\t// 引用\n\tuse function My\\Full\\functionName;\n\n\t// 别名\n\tuse function My\\Full\\functionName as func;\n\n### Constant\n\n\t// 引用\n\tuse const My\\Full\\CONSTANT;\n\n### PHP 7+ code\n\n\tuse some\\namespace\\{ClassA, ClassB, ClassC as C};\n\tuse function some\\namespace\\{fn_a, fn_b, fn_c};\n\tuse const some\\namespace\\{ConstA, ConstB, ConstC};\n\n### 全局命名空间\n\t\n* 引用时不加入命名空间，程序默认为与当前命名空间相同\n* 没有命名空间的程序，默认在global下，例如Exception。使用时需要在前边加上\"/\"：\n\t\n\t\t<?php\n\t\tnamespace My\\App;\n\n\t\tclass Foo\n\t\t{\n\t\t\tpublic function doSomething()\n\t\t\t{\n\t\t\t\t$exception = new \\Exception();\n\t\t\t}\n\t\t}\n\n### 代码设计接口化\n* 面向对象思维中的典型应用，在开发组件时尽可能的使用接口来统一功能，能为复用者或者后继开发人员节省非常多的时间\n\n\t\n\t\t// 实例来自PHP官方文档\n\t\tinterface iTemplate\n\t\t{\n\t\t    public function setVariable($name, $var);\n\t\t    public function getHtml($template);\n\t\t}\n\n\t\t// Implement the interface\n\t\tclass Template implements iTemplate\n\t\t{\n\t\t    private $vars = array();\n\t\t  \n\t\t    public function setVariable($name, $var)\n\t\t    {\n\t\t        $this->vars[$name] = $var;\n\t\t    }\n\t\t  \n\t\t    public function getHtml($template)\n\t\t    {\n\t\t        foreach($this->vars as $name => $value) {\n\t\t            $template = str_replace('{' . $name . '}', $value, $template);\n\t\t        }\n\t\t \n\t\t        return $template;\n\t\t    }\n\t\t}\n\n### Traits (PHP 5.4+) \n* 大部分编程语言都是采用继承(extend)来实现类的扩展，Traits存在的目的是注入代码片段。\n* 简单的理解就是一段需要复用的代码，我们不再复制粘贴到各个文件当中，而仅仅是使用traits的方式来引入。\n* 其实include好像也可以实现同样的功能？\n\n\t\t<?php\n\t\ttrait SayWorld {\n\t\t    public function sayHello() {\n\t\t        echo 'Hello World!';\n\t\t    }\n\t\t}\n\n\t\tclass MyHelloWorld {\n\t\t    use SayWorld;\n\t\t}\n\n### 生成器 (Generator) (PHP 5.5+)\n* 不同于JS中的Generator，PHP更单纯的是个迭代器，封装了自己的状态。目的是节省性能以及降低代码复杂度。\n\t\n\t\t<?php \n\t\t// 如下代码在执行的时候会依次输出三个值\n\t\tfunction myGenerator()\n\t\t{\n\t\t\tyield 'value1';\n\t\t\tyield 'value2';\n\t\t\tyield 'value3';\n\t\t}\n\n* 常与foreach循环一起连用。使用场景如逐行读取文件，重复的计算等\n\t\t\n\t\t<?php\n\t\tfunction getLines($file) {\n\t\t    $f = fopen($file, 'r');\n\t\t    try {\n\t\t        while ($line = fgets($f)) {\n\t\t            yield $line;\n\t\t        }\n\t\t    } finally {\n\t\t        fclose($f);\n\t\t    }\n\t\t}\n\n\t\tforeach (getLines(\"file.txt\") as $n => $line) {\n\t\t    if ($n > 5) break;\n\t\t    echo $line;\n\t\t}\n\n### 闭包(Closures) (PHP 5.3+)\n* 通常会用在需要回调函数时，比如array_map()和preg_replace_callback()。\n\n\t\t<?php\n\t\tfunction cube($n)\n\t\t{\n\t\t    return($n * $n * $n);\n\t\t}\n\n\t\t$a = array(1, 2, 3, 4, 5);\n\t\t$b = array_map(\"cube\", $a);\n\t\tprint_r($b);\n\n* 另一种情况是动态追加函数或变量到当前函数/类中。\n\n\t* 低级用法\n\n\t\t\t<?php\n\t\t\tfunction enclosePerson($name) {\n\t\t\t    return function ($doCommand) use ($name) {\n\t\t\t        return sprintf('%s, %s', $name, $doCommand);\n\t\t\t    };\n\t\t\t}\n\t\t\t// 在闭包函数中封装了字符串'Clay'\n\t\t\t$clay = enclosePerson('Clay');\n\t\t\techo $clay('get me sweet tea!');\n\n\t* 高级用法\n\t\t\n\t\t\t<?php\n\t\t\tclass App\n\t\t\t{\n\t\t\t    protected $routes = [];\n\t\t\t    protected $responseStatus = '200 OK';\n\t\t\t    protected $responseContentType = 'text/html';\n\t\t\t    protected $responseBody = 'Hello world';\n\t\t\t    public function addRoute($routePath, $routeCallback)\n\t\t\t    {\n\t\t\t    \t// bindTo 将routeCallback函数追加给当前的app对象，然后将其赋值给$routePath键\n\t\t\t    \t// __CLASS__ 为当前类名，并包含当前声明的命名空间，使用在此处，意为$routeCallback的作用域在当前类，\n\t\t\t    \t// 想了解更多作用域相关信息请移步：http://php.net/manual/zh/closure.bindto.php#119410\n\t\t\t        $this->routes[$routePath] = $routeCallback->bindTo($this, __CLASS__);\n\t\t\t    }\n\t\t\t    public function dispatch($currentPath)\n\t\t\t    {\n\t\t\t        foreach ($this->routes as $routePath => $callback) {\n\t\t\t            if ($routePath === $currentPath) {\n\t\t\t            \t// 该函数是在addRoute函数执行时被追加\n\t\t\t            \t// 执行了回调函数后，赋值了responseContentType和responseBody\n\t\t\t                $callback();\n\t\t\t            }\n\t\t\t        }\n\t\t\t        header('HTTP/1.1 ' . $this->responseStatus);\n\t\t\t        header('Content-type: ' . $this->responseContentType);\n\t\t\t        header('Content-length: ' . mb_strlen($this->responseBody));\n\t\t\t        echo $this->responseBody;\n\t\t\t    }\n\t\t\t}\n\t\t\t$app = new App();\n\t\t\t$app->addRoute('/users/josh', function () {\n\t\t\t    $this->responseContentType = 'application/json;charset=utf8';\n\t\t\t    $this->responseBody = '{\"name\": \"Josh\"}';\n\t\t\t});\n\t\t\t$app->dispatch('/users/josh');\n\t\t\t\n### Zend OPcache (PHP 5.5+)\n* 类似于APC、XCache等第三方cache扩展，预编译PHP代码为二进制程序，缓存在内存中。\n\n\n_本文档参考了《O'Reilly Modern PHP》以及PHP官方文档_\n\n","source":"_posts/2016-08-01-php-advance-1-useage.md","raw":"---\nlayout: post\ntitle: 常规用法 - PHP进阶 (1)\ncategory: 编程学习\ntags: [PHP]\ndate: 2016-08-01\ndescription: PHP的一些知识梳理\nkeywords: Modern PHP, PHP, Namespace, traits, closure, 命名空间, 闭包, Hiphop\n---\n\n### 命名空间 Namespace (PHP 5.3+)\n\n沙盒机制。虚拟的层级关系，更好的隔离不同的组建。PS：以下仅为推荐用法。\n\n* 声明、引用、别名 (Declear, Import, Alias)\n\n* 声明：\n\n\t\t<?php \n\t\t// 必须在首行，推荐保持每个命名空间一行\n\t\tnamespace Symfony\\Component\\HttpFoundation;\n\n* 引用 & 别名\n\t// 推荐保持每个引用一行\n\t\n### Class\n\n\t<?php\n\t// 引用\n\tuse Symfony\\Component\\HttpFoundation\\Response;\n\n\t$response = new Response('Oops', 400);\n\t$response->send();\n\n\t// 别名\n\tuse Symfony\\Component\\HttpFoundation\\Response as Res;\n\n\t$r = new Res('Oops', 400);\n\t$r->send();\n\n### Function (PHP 5.6+)\n\n\t<?php \n\t// 引用\n\tuse function My\\Full\\functionName;\n\n\t// 别名\n\tuse function My\\Full\\functionName as func;\n\n### Constant\n\n\t// 引用\n\tuse const My\\Full\\CONSTANT;\n\n### PHP 7+ code\n\n\tuse some\\namespace\\{ClassA, ClassB, ClassC as C};\n\tuse function some\\namespace\\{fn_a, fn_b, fn_c};\n\tuse const some\\namespace\\{ConstA, ConstB, ConstC};\n\n### 全局命名空间\n\t\n* 引用时不加入命名空间，程序默认为与当前命名空间相同\n* 没有命名空间的程序，默认在global下，例如Exception。使用时需要在前边加上\"/\"：\n\t\n\t\t<?php\n\t\tnamespace My\\App;\n\n\t\tclass Foo\n\t\t{\n\t\t\tpublic function doSomething()\n\t\t\t{\n\t\t\t\t$exception = new \\Exception();\n\t\t\t}\n\t\t}\n\n### 代码设计接口化\n* 面向对象思维中的典型应用，在开发组件时尽可能的使用接口来统一功能，能为复用者或者后继开发人员节省非常多的时间\n\n\t\n\t\t// 实例来自PHP官方文档\n\t\tinterface iTemplate\n\t\t{\n\t\t    public function setVariable($name, $var);\n\t\t    public function getHtml($template);\n\t\t}\n\n\t\t// Implement the interface\n\t\tclass Template implements iTemplate\n\t\t{\n\t\t    private $vars = array();\n\t\t  \n\t\t    public function setVariable($name, $var)\n\t\t    {\n\t\t        $this->vars[$name] = $var;\n\t\t    }\n\t\t  \n\t\t    public function getHtml($template)\n\t\t    {\n\t\t        foreach($this->vars as $name => $value) {\n\t\t            $template = str_replace('{' . $name . '}', $value, $template);\n\t\t        }\n\t\t \n\t\t        return $template;\n\t\t    }\n\t\t}\n\n### Traits (PHP 5.4+) \n* 大部分编程语言都是采用继承(extend)来实现类的扩展，Traits存在的目的是注入代码片段。\n* 简单的理解就是一段需要复用的代码，我们不再复制粘贴到各个文件当中，而仅仅是使用traits的方式来引入。\n* 其实include好像也可以实现同样的功能？\n\n\t\t<?php\n\t\ttrait SayWorld {\n\t\t    public function sayHello() {\n\t\t        echo 'Hello World!';\n\t\t    }\n\t\t}\n\n\t\tclass MyHelloWorld {\n\t\t    use SayWorld;\n\t\t}\n\n### 生成器 (Generator) (PHP 5.5+)\n* 不同于JS中的Generator，PHP更单纯的是个迭代器，封装了自己的状态。目的是节省性能以及降低代码复杂度。\n\t\n\t\t<?php \n\t\t// 如下代码在执行的时候会依次输出三个值\n\t\tfunction myGenerator()\n\t\t{\n\t\t\tyield 'value1';\n\t\t\tyield 'value2';\n\t\t\tyield 'value3';\n\t\t}\n\n* 常与foreach循环一起连用。使用场景如逐行读取文件，重复的计算等\n\t\t\n\t\t<?php\n\t\tfunction getLines($file) {\n\t\t    $f = fopen($file, 'r');\n\t\t    try {\n\t\t        while ($line = fgets($f)) {\n\t\t            yield $line;\n\t\t        }\n\t\t    } finally {\n\t\t        fclose($f);\n\t\t    }\n\t\t}\n\n\t\tforeach (getLines(\"file.txt\") as $n => $line) {\n\t\t    if ($n > 5) break;\n\t\t    echo $line;\n\t\t}\n\n### 闭包(Closures) (PHP 5.3+)\n* 通常会用在需要回调函数时，比如array_map()和preg_replace_callback()。\n\n\t\t<?php\n\t\tfunction cube($n)\n\t\t{\n\t\t    return($n * $n * $n);\n\t\t}\n\n\t\t$a = array(1, 2, 3, 4, 5);\n\t\t$b = array_map(\"cube\", $a);\n\t\tprint_r($b);\n\n* 另一种情况是动态追加函数或变量到当前函数/类中。\n\n\t* 低级用法\n\n\t\t\t<?php\n\t\t\tfunction enclosePerson($name) {\n\t\t\t    return function ($doCommand) use ($name) {\n\t\t\t        return sprintf('%s, %s', $name, $doCommand);\n\t\t\t    };\n\t\t\t}\n\t\t\t// 在闭包函数中封装了字符串'Clay'\n\t\t\t$clay = enclosePerson('Clay');\n\t\t\techo $clay('get me sweet tea!');\n\n\t* 高级用法\n\t\t\n\t\t\t<?php\n\t\t\tclass App\n\t\t\t{\n\t\t\t    protected $routes = [];\n\t\t\t    protected $responseStatus = '200 OK';\n\t\t\t    protected $responseContentType = 'text/html';\n\t\t\t    protected $responseBody = 'Hello world';\n\t\t\t    public function addRoute($routePath, $routeCallback)\n\t\t\t    {\n\t\t\t    \t// bindTo 将routeCallback函数追加给当前的app对象，然后将其赋值给$routePath键\n\t\t\t    \t// __CLASS__ 为当前类名，并包含当前声明的命名空间，使用在此处，意为$routeCallback的作用域在当前类，\n\t\t\t    \t// 想了解更多作用域相关信息请移步：http://php.net/manual/zh/closure.bindto.php#119410\n\t\t\t        $this->routes[$routePath] = $routeCallback->bindTo($this, __CLASS__);\n\t\t\t    }\n\t\t\t    public function dispatch($currentPath)\n\t\t\t    {\n\t\t\t        foreach ($this->routes as $routePath => $callback) {\n\t\t\t            if ($routePath === $currentPath) {\n\t\t\t            \t// 该函数是在addRoute函数执行时被追加\n\t\t\t            \t// 执行了回调函数后，赋值了responseContentType和responseBody\n\t\t\t                $callback();\n\t\t\t            }\n\t\t\t        }\n\t\t\t        header('HTTP/1.1 ' . $this->responseStatus);\n\t\t\t        header('Content-type: ' . $this->responseContentType);\n\t\t\t        header('Content-length: ' . mb_strlen($this->responseBody));\n\t\t\t        echo $this->responseBody;\n\t\t\t    }\n\t\t\t}\n\t\t\t$app = new App();\n\t\t\t$app->addRoute('/users/josh', function () {\n\t\t\t    $this->responseContentType = 'application/json;charset=utf8';\n\t\t\t    $this->responseBody = '{\"name\": \"Josh\"}';\n\t\t\t});\n\t\t\t$app->dispatch('/users/josh');\n\t\t\t\n### Zend OPcache (PHP 5.5+)\n* 类似于APC、XCache等第三方cache扩展，预编译PHP代码为二进制程序，缓存在内存中。\n\n\n_本文档参考了《O'Reilly Modern PHP》以及PHP官方文档_\n\n","slug":"2016-08-01-php-advance-1-useage","published":1,"updated":"2022-02-12T20:53:10.504Z","comments":1,"photos":[],"link":"","_id":"ckzkc92x9000uoqoxd6necjcb","content":"<h3 id=\"命名空间-Namespace-PHP-5-3\"><a href=\"#命名空间-Namespace-PHP-5-3\" class=\"headerlink\" title=\"命名空间 Namespace (PHP 5.3+)\"></a>命名空间 Namespace (PHP 5.3+)</h3><p>沙盒机制。虚拟的层级关系，更好的隔离不同的组建。PS：以下仅为推荐用法。</p>\n<ul>\n<li><p>声明、引用、别名 (Declear, Import, Alias)</p>\n</li>\n<li><p>声明：</p>\n<pre><code>  &lt;?php \n  // 必须在首行，推荐保持每个命名空间一行\n  namespace Symfony\\Component\\HttpFoundation;\n</code></pre>\n</li>\n<li><p>引用 &amp; 别名<br>  &#x2F;&#x2F; 推荐保持每个引用一行</p>\n</li>\n</ul>\n<h3 id=\"Class\"><a href=\"#Class\" class=\"headerlink\" title=\"Class\"></a>Class</h3><pre><code>&lt;?php\n// 引用\nuse Symfony\\Component\\HttpFoundation\\Response;\n\n$response = new Response(&#39;Oops&#39;, 400);\n$response-&gt;send();\n\n// 别名\nuse Symfony\\Component\\HttpFoundation\\Response as Res;\n\n$r = new Res(&#39;Oops&#39;, 400);\n$r-&gt;send();\n</code></pre>\n<h3 id=\"Function-PHP-5-6\"><a href=\"#Function-PHP-5-6\" class=\"headerlink\" title=\"Function (PHP 5.6+)\"></a>Function (PHP 5.6+)</h3><pre><code>&lt;?php \n// 引用\nuse function My\\Full\\functionName;\n\n// 别名\nuse function My\\Full\\functionName as func;\n</code></pre>\n<h3 id=\"Constant\"><a href=\"#Constant\" class=\"headerlink\" title=\"Constant\"></a>Constant</h3><pre><code>// 引用\nuse const My\\Full\\CONSTANT;\n</code></pre>\n<h3 id=\"PHP-7-code\"><a href=\"#PHP-7-code\" class=\"headerlink\" title=\"PHP 7+ code\"></a>PHP 7+ code</h3><pre><code>use some\\namespace\\&#123;ClassA, ClassB, ClassC as C&#125;;\nuse function some\\namespace\\&#123;fn_a, fn_b, fn_c&#125;;\nuse const some\\namespace\\&#123;ConstA, ConstB, ConstC&#125;;\n</code></pre>\n<h3 id=\"全局命名空间\"><a href=\"#全局命名空间\" class=\"headerlink\" title=\"全局命名空间\"></a>全局命名空间</h3><ul>\n<li><p>引用时不加入命名空间，程序默认为与当前命名空间相同</p>\n</li>\n<li><p>没有命名空间的程序，默认在global下，例如Exception。使用时需要在前边加上”&#x2F;“：</p>\n<pre><code>  &lt;?php\n  namespace My\\App;\n\n  class Foo\n  &#123;\n      public function doSomething()\n      &#123;\n          $exception = new \\Exception();\n      &#125;\n  &#125;\n</code></pre>\n</li>\n</ul>\n<h3 id=\"代码设计接口化\"><a href=\"#代码设计接口化\" class=\"headerlink\" title=\"代码设计接口化\"></a>代码设计接口化</h3><ul>\n<li><p>面向对象思维中的典型应用，在开发组件时尽可能的使用接口来统一功能，能为复用者或者后继开发人员节省非常多的时间</p>\n<pre><code>  // 实例来自PHP官方文档\n  interface iTemplate\n  &#123;\n      public function setVariable($name, $var);\n      public function getHtml($template);\n  &#125;\n\n  // Implement the interface\n  class Template implements iTemplate\n  &#123;\n      private $vars = array();\n    \n      public function setVariable($name, $var)\n      &#123;\n          $this-&gt;vars[$name] = $var;\n      &#125;\n    \n      public function getHtml($template)\n      &#123;\n          foreach($this-&gt;vars as $name =&gt; $value) &#123;\n              $template = str_replace(&#39;&#123;&#39; . $name . &#39;&#125;&#39;, $value, $template);\n          &#125;\n   \n          return $template;\n      &#125;\n  &#125;\n</code></pre>\n</li>\n</ul>\n<h3 id=\"Traits-PHP-5-4\"><a href=\"#Traits-PHP-5-4\" class=\"headerlink\" title=\"Traits (PHP 5.4+)\"></a>Traits (PHP 5.4+)</h3><ul>\n<li><p>大部分编程语言都是采用继承(extend)来实现类的扩展，Traits存在的目的是注入代码片段。</p>\n</li>\n<li><p>简单的理解就是一段需要复用的代码，我们不再复制粘贴到各个文件当中，而仅仅是使用traits的方式来引入。</p>\n</li>\n<li><p>其实include好像也可以实现同样的功能？</p>\n<pre><code>  &lt;?php\n  trait SayWorld &#123;\n      public function sayHello() &#123;\n          echo &#39;Hello World!&#39;;\n      &#125;\n  &#125;\n\n  class MyHelloWorld &#123;\n      use SayWorld;\n  &#125;\n</code></pre>\n</li>\n</ul>\n<h3 id=\"生成器-Generator-PHP-5-5\"><a href=\"#生成器-Generator-PHP-5-5\" class=\"headerlink\" title=\"生成器 (Generator) (PHP 5.5+)\"></a>生成器 (Generator) (PHP 5.5+)</h3><ul>\n<li><p>不同于JS中的Generator，PHP更单纯的是个迭代器，封装了自己的状态。目的是节省性能以及降低代码复杂度。</p>\n<pre><code>  &lt;?php \n  // 如下代码在执行的时候会依次输出三个值\n  function myGenerator()\n  &#123;\n      yield &#39;value1&#39;;\n      yield &#39;value2&#39;;\n      yield &#39;value3&#39;;\n  &#125;\n</code></pre>\n</li>\n<li><p>常与foreach循环一起连用。使用场景如逐行读取文件，重复的计算等</p>\n<pre><code>  &lt;?php\n  function getLines($file) &#123;\n      $f = fopen($file, &#39;r&#39;);\n      try &#123;\n          while ($line = fgets($f)) &#123;\n              yield $line;\n          &#125;\n      &#125; finally &#123;\n          fclose($f);\n      &#125;\n  &#125;\n\n  foreach (getLines(&quot;file.txt&quot;) as $n =&gt; $line) &#123;\n      if ($n &gt; 5) break;\n      echo $line;\n  &#125;\n</code></pre>\n</li>\n</ul>\n<h3 id=\"闭包-Closures-PHP-5-3\"><a href=\"#闭包-Closures-PHP-5-3\" class=\"headerlink\" title=\"闭包(Closures) (PHP 5.3+)\"></a>闭包(Closures) (PHP 5.3+)</h3><ul>\n<li><p>通常会用在需要回调函数时，比如array_map()和preg_replace_callback()。</p>\n<pre><code>  &lt;?php\n  function cube($n)\n  &#123;\n      return($n * $n * $n);\n  &#125;\n\n  $a = array(1, 2, 3, 4, 5);\n  $b = array_map(&quot;cube&quot;, $a);\n  print_r($b);\n</code></pre>\n</li>\n<li><p>另一种情况是动态追加函数或变量到当前函数&#x2F;类中。</p>\n<ul>\n<li><p>低级用法</p>\n<pre><code>  &lt;?php\n  function enclosePerson($name) &#123;\n      return function ($doCommand) use ($name) &#123;\n          return sprintf(&#39;%s, %s&#39;, $name, $doCommand);\n      &#125;;\n  &#125;\n  // 在闭包函数中封装了字符串&#39;Clay&#39;\n  $clay = enclosePerson(&#39;Clay&#39;);\n  echo $clay(&#39;get me sweet tea!&#39;);\n</code></pre>\n</li>\n<li><p>高级用法</p>\n<pre><code>  &lt;?php\n  class App\n  &#123;\n      protected $routes = [];\n      protected $responseStatus = &#39;200 OK&#39;;\n      protected $responseContentType = &#39;text/html&#39;;\n      protected $responseBody = &#39;Hello world&#39;;\n      public function addRoute($routePath, $routeCallback)\n      &#123;\n          // bindTo 将routeCallback函数追加给当前的app对象，然后将其赋值给$routePath键\n          // __CLASS__ 为当前类名，并包含当前声明的命名空间，使用在此处，意为$routeCallback的作用域在当前类，\n          // 想了解更多作用域相关信息请移步：http://php.net/manual/zh/closure.bindto.php#119410\n          $this-&gt;routes[$routePath] = $routeCallback-&gt;bindTo($this, __CLASS__);\n      &#125;\n      public function dispatch($currentPath)\n      &#123;\n          foreach ($this-&gt;routes as $routePath =&gt; $callback) &#123;\n              if ($routePath === $currentPath) &#123;\n                  // 该函数是在addRoute函数执行时被追加\n                  // 执行了回调函数后，赋值了responseContentType和responseBody\n                  $callback();\n              &#125;\n          &#125;\n          header(&#39;HTTP/1.1 &#39; . $this-&gt;responseStatus);\n          header(&#39;Content-type: &#39; . $this-&gt;responseContentType);\n          header(&#39;Content-length: &#39; . mb_strlen($this-&gt;responseBody));\n          echo $this-&gt;responseBody;\n      &#125;\n  &#125;\n  $app = new App();\n  $app-&gt;addRoute(&#39;/users/josh&#39;, function () &#123;\n      $this-&gt;responseContentType = &#39;application/json;charset=utf8&#39;;\n      $this-&gt;responseBody = &#39;&#123;&quot;name&quot;: &quot;Josh&quot;&#125;&#39;;\n  &#125;);\n  $app-&gt;dispatch(&#39;/users/josh&#39;);\n</code></pre>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Zend-OPcache-PHP-5-5\"><a href=\"#Zend-OPcache-PHP-5-5\" class=\"headerlink\" title=\"Zend OPcache (PHP 5.5+)\"></a>Zend OPcache (PHP 5.5+)</h3><ul>\n<li>类似于APC、XCache等第三方cache扩展，预编译PHP代码为二进制程序，缓存在内存中。</li>\n</ul>\n<p><em>本文档参考了《O’Reilly Modern PHP》以及PHP官方文档</em></p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"命名空间-Namespace-PHP-5-3\"><a href=\"#命名空间-Namespace-PHP-5-3\" class=\"headerlink\" title=\"命名空间 Namespace (PHP 5.3+)\"></a>命名空间 Namespace (PHP 5.3+)</h3><p>沙盒机制。虚拟的层级关系，更好的隔离不同的组建。PS：以下仅为推荐用法。</p>\n<ul>\n<li><p>声明、引用、别名 (Declear, Import, Alias)</p>\n</li>\n<li><p>声明：</p>\n<pre><code>  &lt;?php \n  // 必须在首行，推荐保持每个命名空间一行\n  namespace Symfony\\Component\\HttpFoundation;\n</code></pre>\n</li>\n<li><p>引用 &amp; 别名<br>  &#x2F;&#x2F; 推荐保持每个引用一行</p>\n</li>\n</ul>\n<h3 id=\"Class\"><a href=\"#Class\" class=\"headerlink\" title=\"Class\"></a>Class</h3><pre><code>&lt;?php\n// 引用\nuse Symfony\\Component\\HttpFoundation\\Response;\n\n$response = new Response(&#39;Oops&#39;, 400);\n$response-&gt;send();\n\n// 别名\nuse Symfony\\Component\\HttpFoundation\\Response as Res;\n\n$r = new Res(&#39;Oops&#39;, 400);\n$r-&gt;send();\n</code></pre>\n<h3 id=\"Function-PHP-5-6\"><a href=\"#Function-PHP-5-6\" class=\"headerlink\" title=\"Function (PHP 5.6+)\"></a>Function (PHP 5.6+)</h3><pre><code>&lt;?php \n// 引用\nuse function My\\Full\\functionName;\n\n// 别名\nuse function My\\Full\\functionName as func;\n</code></pre>\n<h3 id=\"Constant\"><a href=\"#Constant\" class=\"headerlink\" title=\"Constant\"></a>Constant</h3><pre><code>// 引用\nuse const My\\Full\\CONSTANT;\n</code></pre>\n<h3 id=\"PHP-7-code\"><a href=\"#PHP-7-code\" class=\"headerlink\" title=\"PHP 7+ code\"></a>PHP 7+ code</h3><pre><code>use some\\namespace\\&#123;ClassA, ClassB, ClassC as C&#125;;\nuse function some\\namespace\\&#123;fn_a, fn_b, fn_c&#125;;\nuse const some\\namespace\\&#123;ConstA, ConstB, ConstC&#125;;\n</code></pre>\n<h3 id=\"全局命名空间\"><a href=\"#全局命名空间\" class=\"headerlink\" title=\"全局命名空间\"></a>全局命名空间</h3><ul>\n<li><p>引用时不加入命名空间，程序默认为与当前命名空间相同</p>\n</li>\n<li><p>没有命名空间的程序，默认在global下，例如Exception。使用时需要在前边加上”&#x2F;“：</p>\n<pre><code>  &lt;?php\n  namespace My\\App;\n\n  class Foo\n  &#123;\n      public function doSomething()\n      &#123;\n          $exception = new \\Exception();\n      &#125;\n  &#125;\n</code></pre>\n</li>\n</ul>\n<h3 id=\"代码设计接口化\"><a href=\"#代码设计接口化\" class=\"headerlink\" title=\"代码设计接口化\"></a>代码设计接口化</h3><ul>\n<li><p>面向对象思维中的典型应用，在开发组件时尽可能的使用接口来统一功能，能为复用者或者后继开发人员节省非常多的时间</p>\n<pre><code>  // 实例来自PHP官方文档\n  interface iTemplate\n  &#123;\n      public function setVariable($name, $var);\n      public function getHtml($template);\n  &#125;\n\n  // Implement the interface\n  class Template implements iTemplate\n  &#123;\n      private $vars = array();\n    \n      public function setVariable($name, $var)\n      &#123;\n          $this-&gt;vars[$name] = $var;\n      &#125;\n    \n      public function getHtml($template)\n      &#123;\n          foreach($this-&gt;vars as $name =&gt; $value) &#123;\n              $template = str_replace(&#39;&#123;&#39; . $name . &#39;&#125;&#39;, $value, $template);\n          &#125;\n   \n          return $template;\n      &#125;\n  &#125;\n</code></pre>\n</li>\n</ul>\n<h3 id=\"Traits-PHP-5-4\"><a href=\"#Traits-PHP-5-4\" class=\"headerlink\" title=\"Traits (PHP 5.4+)\"></a>Traits (PHP 5.4+)</h3><ul>\n<li><p>大部分编程语言都是采用继承(extend)来实现类的扩展，Traits存在的目的是注入代码片段。</p>\n</li>\n<li><p>简单的理解就是一段需要复用的代码，我们不再复制粘贴到各个文件当中，而仅仅是使用traits的方式来引入。</p>\n</li>\n<li><p>其实include好像也可以实现同样的功能？</p>\n<pre><code>  &lt;?php\n  trait SayWorld &#123;\n      public function sayHello() &#123;\n          echo &#39;Hello World!&#39;;\n      &#125;\n  &#125;\n\n  class MyHelloWorld &#123;\n      use SayWorld;\n  &#125;\n</code></pre>\n</li>\n</ul>\n<h3 id=\"生成器-Generator-PHP-5-5\"><a href=\"#生成器-Generator-PHP-5-5\" class=\"headerlink\" title=\"生成器 (Generator) (PHP 5.5+)\"></a>生成器 (Generator) (PHP 5.5+)</h3><ul>\n<li><p>不同于JS中的Generator，PHP更单纯的是个迭代器，封装了自己的状态。目的是节省性能以及降低代码复杂度。</p>\n<pre><code>  &lt;?php \n  // 如下代码在执行的时候会依次输出三个值\n  function myGenerator()\n  &#123;\n      yield &#39;value1&#39;;\n      yield &#39;value2&#39;;\n      yield &#39;value3&#39;;\n  &#125;\n</code></pre>\n</li>\n<li><p>常与foreach循环一起连用。使用场景如逐行读取文件，重复的计算等</p>\n<pre><code>  &lt;?php\n  function getLines($file) &#123;\n      $f = fopen($file, &#39;r&#39;);\n      try &#123;\n          while ($line = fgets($f)) &#123;\n              yield $line;\n          &#125;\n      &#125; finally &#123;\n          fclose($f);\n      &#125;\n  &#125;\n\n  foreach (getLines(&quot;file.txt&quot;) as $n =&gt; $line) &#123;\n      if ($n &gt; 5) break;\n      echo $line;\n  &#125;\n</code></pre>\n</li>\n</ul>\n<h3 id=\"闭包-Closures-PHP-5-3\"><a href=\"#闭包-Closures-PHP-5-3\" class=\"headerlink\" title=\"闭包(Closures) (PHP 5.3+)\"></a>闭包(Closures) (PHP 5.3+)</h3><ul>\n<li><p>通常会用在需要回调函数时，比如array_map()和preg_replace_callback()。</p>\n<pre><code>  &lt;?php\n  function cube($n)\n  &#123;\n      return($n * $n * $n);\n  &#125;\n\n  $a = array(1, 2, 3, 4, 5);\n  $b = array_map(&quot;cube&quot;, $a);\n  print_r($b);\n</code></pre>\n</li>\n<li><p>另一种情况是动态追加函数或变量到当前函数&#x2F;类中。</p>\n<ul>\n<li><p>低级用法</p>\n<pre><code>  &lt;?php\n  function enclosePerson($name) &#123;\n      return function ($doCommand) use ($name) &#123;\n          return sprintf(&#39;%s, %s&#39;, $name, $doCommand);\n      &#125;;\n  &#125;\n  // 在闭包函数中封装了字符串&#39;Clay&#39;\n  $clay = enclosePerson(&#39;Clay&#39;);\n  echo $clay(&#39;get me sweet tea!&#39;);\n</code></pre>\n</li>\n<li><p>高级用法</p>\n<pre><code>  &lt;?php\n  class App\n  &#123;\n      protected $routes = [];\n      protected $responseStatus = &#39;200 OK&#39;;\n      protected $responseContentType = &#39;text/html&#39;;\n      protected $responseBody = &#39;Hello world&#39;;\n      public function addRoute($routePath, $routeCallback)\n      &#123;\n          // bindTo 将routeCallback函数追加给当前的app对象，然后将其赋值给$routePath键\n          // __CLASS__ 为当前类名，并包含当前声明的命名空间，使用在此处，意为$routeCallback的作用域在当前类，\n          // 想了解更多作用域相关信息请移步：http://php.net/manual/zh/closure.bindto.php#119410\n          $this-&gt;routes[$routePath] = $routeCallback-&gt;bindTo($this, __CLASS__);\n      &#125;\n      public function dispatch($currentPath)\n      &#123;\n          foreach ($this-&gt;routes as $routePath =&gt; $callback) &#123;\n              if ($routePath === $currentPath) &#123;\n                  // 该函数是在addRoute函数执行时被追加\n                  // 执行了回调函数后，赋值了responseContentType和responseBody\n                  $callback();\n              &#125;\n          &#125;\n          header(&#39;HTTP/1.1 &#39; . $this-&gt;responseStatus);\n          header(&#39;Content-type: &#39; . $this-&gt;responseContentType);\n          header(&#39;Content-length: &#39; . mb_strlen($this-&gt;responseBody));\n          echo $this-&gt;responseBody;\n      &#125;\n  &#125;\n  $app = new App();\n  $app-&gt;addRoute(&#39;/users/josh&#39;, function () &#123;\n      $this-&gt;responseContentType = &#39;application/json;charset=utf8&#39;;\n      $this-&gt;responseBody = &#39;&#123;&quot;name&quot;: &quot;Josh&quot;&#125;&#39;;\n  &#125;);\n  $app-&gt;dispatch(&#39;/users/josh&#39;);\n</code></pre>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Zend-OPcache-PHP-5-5\"><a href=\"#Zend-OPcache-PHP-5-5\" class=\"headerlink\" title=\"Zend OPcache (PHP 5.5+)\"></a>Zend OPcache (PHP 5.5+)</h3><ul>\n<li>类似于APC、XCache等第三方cache扩展，预编译PHP代码为二进制程序，缓存在内存中。</li>\n</ul>\n<p><em>本文档参考了《O’Reilly Modern PHP》以及PHP官方文档</em></p>\n"},{"layout":"post","title":"《沙郡年记》读书笔记","date":"2016-08-05T04:00:00.000Z","description":null,"keywords":"沙郡年记, A Sand County Almanac, Aldo Leopold","_content":"\n只有那些不会抬头仰望天空，不会侧耳倾听雁鸣的人，才会认为三月的早晨是如此单调乏味。\n-- 三月大雁归来\n\n贫瘠的沙土和微弱的阳光无法让它绽放出更大更好的花朵来，然而对于葶苈来说已经足够。毕竟。葶苈算不上春之花，而仅仅是对希望的一种补充。\n-- 四月 潮水来临\n\n空中之舞的戏剧每晚都在数百个农场上演，农场的主人却叹息说缺乏娱乐，他们错误地认为：可供消遣的文娱活动只有在剧院里才能找到。这些人生活在土地上，却不懂如何依靠土地快乐地生活。\n-- 四月 潮水来临\n\n我思索起鳟鱼和人的行为方式。我们是多么像鱼，时刻准备着，热切渴望着，想要抓住周遭环境之风吹落到事件之流殇到所有新东西。当我们发现那看似美妙的诱饵内藏着钓钩时，又是多么懊悔自己的仓促和草率！尽管如此，我仍认为渴望本身有一定的价值，不论渴望的对象时真实还是虚幻。\n-- 六月 钓鱼田园诗\n\n创造通常仅限于神与诗人，但是如果知道方法，即或是身价卑微的普通百姓也可以绕开这一规章的限制。例如，要种植一棵松树，既不需要成为神灵也不需要成为诗人，需要的仅仅是拥有一把铲子，有了这样奇妙的规章漏洞，任何一个庄稼汉都可以说：要有个棵树，于是就有了一棵树。\n-- 十二月 家园的范围\n\n为了找到所爱，它们（旅鸽）只需要自由的天空，以及用力挥动翅膀的意愿。\n-- 威斯康星州\n\n良好的嗜好可能是对于庸常事物的孤独反抗，也可能是志趣相投的一群人共同进行的合谋。\n-- 闲暇时间\n\n人类乘坐着顺环河而下的原木，明智审慎地去除一些树节，从而控制原木的方向和速度。这一技艺使我们获得了“智者”这种特别的称谓。去除树节的技巧被称为经济学，对于古老路途的记忆被称为历史，对于新路线的选择被称为治国才能，关于即将到来的浅滩或急流的交谈被称为政治。一些人不仅想除掉所有原木的树节，而且想改造整条河流中的原木船队。这种集体进行的与自然的对话被称为国家计划。\n-- 环河\n\n能否看出荒野的文化价值，归根结底在于人类思想上的谦卑态度。肤浅无知、不再植根于土地的现代人，自以为已经发现了重要的东西，空谈着自认可以延续千年的政治或经济帝国。而只有真正的学者才明白，历史是由单一起点展开的连续旅程构成的，人类一次次回到这出发点，由此再次上路，寻求另一套永恒的价值观。\n-- 荒野\n\n","source":"_posts/2016-08-05-a-sand-county-almanac.md","raw":"---\nlayout: post\ntitle: 《沙郡年记》读书笔记\ncategory: 阅读笔记\ntags: [笔记]\ndate: 2016-08-05\ndescription:\nkeywords: 沙郡年记, A Sand County Almanac, Aldo Leopold\n---\n\n只有那些不会抬头仰望天空，不会侧耳倾听雁鸣的人，才会认为三月的早晨是如此单调乏味。\n-- 三月大雁归来\n\n贫瘠的沙土和微弱的阳光无法让它绽放出更大更好的花朵来，然而对于葶苈来说已经足够。毕竟。葶苈算不上春之花，而仅仅是对希望的一种补充。\n-- 四月 潮水来临\n\n空中之舞的戏剧每晚都在数百个农场上演，农场的主人却叹息说缺乏娱乐，他们错误地认为：可供消遣的文娱活动只有在剧院里才能找到。这些人生活在土地上，却不懂如何依靠土地快乐地生活。\n-- 四月 潮水来临\n\n我思索起鳟鱼和人的行为方式。我们是多么像鱼，时刻准备着，热切渴望着，想要抓住周遭环境之风吹落到事件之流殇到所有新东西。当我们发现那看似美妙的诱饵内藏着钓钩时，又是多么懊悔自己的仓促和草率！尽管如此，我仍认为渴望本身有一定的价值，不论渴望的对象时真实还是虚幻。\n-- 六月 钓鱼田园诗\n\n创造通常仅限于神与诗人，但是如果知道方法，即或是身价卑微的普通百姓也可以绕开这一规章的限制。例如，要种植一棵松树，既不需要成为神灵也不需要成为诗人，需要的仅仅是拥有一把铲子，有了这样奇妙的规章漏洞，任何一个庄稼汉都可以说：要有个棵树，于是就有了一棵树。\n-- 十二月 家园的范围\n\n为了找到所爱，它们（旅鸽）只需要自由的天空，以及用力挥动翅膀的意愿。\n-- 威斯康星州\n\n良好的嗜好可能是对于庸常事物的孤独反抗，也可能是志趣相投的一群人共同进行的合谋。\n-- 闲暇时间\n\n人类乘坐着顺环河而下的原木，明智审慎地去除一些树节，从而控制原木的方向和速度。这一技艺使我们获得了“智者”这种特别的称谓。去除树节的技巧被称为经济学，对于古老路途的记忆被称为历史，对于新路线的选择被称为治国才能，关于即将到来的浅滩或急流的交谈被称为政治。一些人不仅想除掉所有原木的树节，而且想改造整条河流中的原木船队。这种集体进行的与自然的对话被称为国家计划。\n-- 环河\n\n能否看出荒野的文化价值，归根结底在于人类思想上的谦卑态度。肤浅无知、不再植根于土地的现代人，自以为已经发现了重要的东西，空谈着自认可以延续千年的政治或经济帝国。而只有真正的学者才明白，历史是由单一起点展开的连续旅程构成的，人类一次次回到这出发点，由此再次上路，寻求另一套永恒的价值观。\n-- 荒野\n\n","slug":"2016-08-05-a-sand-county-almanac","published":1,"updated":"2022-02-12T20:53:10.504Z","comments":1,"photos":[],"link":"","_id":"ckzkc92xa000xoqoxfcqj9u9z","content":"<p>只有那些不会抬头仰望天空，不会侧耳倾听雁鸣的人，才会认为三月的早晨是如此单调乏味。<br>– 三月大雁归来</p>\n<p>贫瘠的沙土和微弱的阳光无法让它绽放出更大更好的花朵来，然而对于葶苈来说已经足够。毕竟。葶苈算不上春之花，而仅仅是对希望的一种补充。<br>– 四月 潮水来临</p>\n<p>空中之舞的戏剧每晚都在数百个农场上演，农场的主人却叹息说缺乏娱乐，他们错误地认为：可供消遣的文娱活动只有在剧院里才能找到。这些人生活在土地上，却不懂如何依靠土地快乐地生活。<br>– 四月 潮水来临</p>\n<p>我思索起鳟鱼和人的行为方式。我们是多么像鱼，时刻准备着，热切渴望着，想要抓住周遭环境之风吹落到事件之流殇到所有新东西。当我们发现那看似美妙的诱饵内藏着钓钩时，又是多么懊悔自己的仓促和草率！尽管如此，我仍认为渴望本身有一定的价值，不论渴望的对象时真实还是虚幻。<br>– 六月 钓鱼田园诗</p>\n<p>创造通常仅限于神与诗人，但是如果知道方法，即或是身价卑微的普通百姓也可以绕开这一规章的限制。例如，要种植一棵松树，既不需要成为神灵也不需要成为诗人，需要的仅仅是拥有一把铲子，有了这样奇妙的规章漏洞，任何一个庄稼汉都可以说：要有个棵树，于是就有了一棵树。<br>– 十二月 家园的范围</p>\n<p>为了找到所爱，它们（旅鸽）只需要自由的天空，以及用力挥动翅膀的意愿。<br>– 威斯康星州</p>\n<p>良好的嗜好可能是对于庸常事物的孤独反抗，也可能是志趣相投的一群人共同进行的合谋。<br>– 闲暇时间</p>\n<p>人类乘坐着顺环河而下的原木，明智审慎地去除一些树节，从而控制原木的方向和速度。这一技艺使我们获得了“智者”这种特别的称谓。去除树节的技巧被称为经济学，对于古老路途的记忆被称为历史，对于新路线的选择被称为治国才能，关于即将到来的浅滩或急流的交谈被称为政治。一些人不仅想除掉所有原木的树节，而且想改造整条河流中的原木船队。这种集体进行的与自然的对话被称为国家计划。<br>– 环河</p>\n<p>能否看出荒野的文化价值，归根结底在于人类思想上的谦卑态度。肤浅无知、不再植根于土地的现代人，自以为已经发现了重要的东西，空谈着自认可以延续千年的政治或经济帝国。而只有真正的学者才明白，历史是由单一起点展开的连续旅程构成的，人类一次次回到这出发点，由此再次上路，寻求另一套永恒的价值观。<br>– 荒野</p>\n","site":{"data":{}},"excerpt":"","more":"<p>只有那些不会抬头仰望天空，不会侧耳倾听雁鸣的人，才会认为三月的早晨是如此单调乏味。<br>– 三月大雁归来</p>\n<p>贫瘠的沙土和微弱的阳光无法让它绽放出更大更好的花朵来，然而对于葶苈来说已经足够。毕竟。葶苈算不上春之花，而仅仅是对希望的一种补充。<br>– 四月 潮水来临</p>\n<p>空中之舞的戏剧每晚都在数百个农场上演，农场的主人却叹息说缺乏娱乐，他们错误地认为：可供消遣的文娱活动只有在剧院里才能找到。这些人生活在土地上，却不懂如何依靠土地快乐地生活。<br>– 四月 潮水来临</p>\n<p>我思索起鳟鱼和人的行为方式。我们是多么像鱼，时刻准备着，热切渴望着，想要抓住周遭环境之风吹落到事件之流殇到所有新东西。当我们发现那看似美妙的诱饵内藏着钓钩时，又是多么懊悔自己的仓促和草率！尽管如此，我仍认为渴望本身有一定的价值，不论渴望的对象时真实还是虚幻。<br>– 六月 钓鱼田园诗</p>\n<p>创造通常仅限于神与诗人，但是如果知道方法，即或是身价卑微的普通百姓也可以绕开这一规章的限制。例如，要种植一棵松树，既不需要成为神灵也不需要成为诗人，需要的仅仅是拥有一把铲子，有了这样奇妙的规章漏洞，任何一个庄稼汉都可以说：要有个棵树，于是就有了一棵树。<br>– 十二月 家园的范围</p>\n<p>为了找到所爱，它们（旅鸽）只需要自由的天空，以及用力挥动翅膀的意愿。<br>– 威斯康星州</p>\n<p>良好的嗜好可能是对于庸常事物的孤独反抗，也可能是志趣相投的一群人共同进行的合谋。<br>– 闲暇时间</p>\n<p>人类乘坐着顺环河而下的原木，明智审慎地去除一些树节，从而控制原木的方向和速度。这一技艺使我们获得了“智者”这种特别的称谓。去除树节的技巧被称为经济学，对于古老路途的记忆被称为历史，对于新路线的选择被称为治国才能，关于即将到来的浅滩或急流的交谈被称为政治。一些人不仅想除掉所有原木的树节，而且想改造整条河流中的原木船队。这种集体进行的与自然的对话被称为国家计划。<br>– 环河</p>\n<p>能否看出荒野的文化价值，归根结底在于人类思想上的谦卑态度。肤浅无知、不再植根于土地的现代人，自以为已经发现了重要的东西，空谈着自认可以延续千年的政治或经济帝国。而只有真正的学者才明白，历史是由单一起点展开的连续旅程构成的，人类一次次回到这出发点，由此再次上路，寻求另一套永恒的价值观。<br>– 荒野</p>\n"},{"layout":"post","title":"PSR标准解读 - PHP进阶 (2)","date":"2016-10-03T04:00:00.000Z","description":"PSR标准解读","keywords":"Modern PHP, PHP, Note, PSR, PHP-FIG","_content":"\n### _PSR-0 自动加载的标准结构 (虽然已不被推荐使用，但composer还在支持)_\n\n#### 要点：\n\n* 结构： `\\<Vendor Name>\\(<Namespace>\\)*<Class Name>`\n* 第一层级的命名为开发人员的标识\n* 完整的命名空间可包含多个层级\n* 在加载文件的时候，命名空间的分隔符`\\`会被`DIRECTORY_SEPARATOR`替换\n* 类名中的`_`会被`DIRECTORY_SEPARATOR`替换，所以`_`无任何意义\n* 在加载文件的时候，命名空间会补全`.php`后缀\n* 命名空间及类命名可以大小写随意\n* 示例：\n\n\t\t\\Symfony\\Core\\Request => /path/to/project/lib/vendor/Symfony/Core/Request.php\n\n\t\t\\namespace\\package_name\\Class_Name => /path/to/project/lib/vendor/namespace/package_name/Class/Name.php\n\t* 需要注意的是，层级目录会重复vendor和namespace。\n\n#### 加载器的实现示例：\n\n\t<?php\n\n\tfunction autoload($className)\n\t{\n\t    $className = ltrim($className, '\\\\');\n\t    $fileName  = '';\n\t    $namespace = '';\n\t    if ($lastNsPos = strrpos($className, '\\\\')) {\n\t        $namespace = substr($className, 0, $lastNsPos);\n\t        $className = substr($className, $lastNsPos + 1);\n\t        $fileName  = str_replace('\\\\', DIRECTORY_SEPARATOR, $namespace) . DIRECTORY_SEPARATOR;\n\t    }\n\t    $fileName .= str_replace('_', DIRECTORY_SEPARATOR, $className) . '.php';\n\n\t    require $fileName;\n\t}\n\tspl_autoload_register('autoload');\n\n\n\n### PSR-1 基本代码样式\n* 标签 (PHP tags)\n\t\n\t代码必须包含在<?php ?> 或者 <?= ?>中\n\n* 编码 (Encoding)\n\n\t必须使用带BOM的UTF-8\n\n* 对象化 (Objective)\n\n\t单个PHP文件只负责一件事。定义类、trait、function、常量或者执行一系列的动作。不应该同时包含定义和执行代码。\n\n* 自动加载 (Autoloading)\n\n\t命名空间和类必须支持PSR-4标准。\n\n* 类名 (Class names)\n\n\t使用驼峰格式，首字母大写。例：CoffeeBean、TitleCase。\n\n* 常量名 (Constant names)\n\n\t必须全大写，并以下划线切分单词。例：PROJECT_NAME。\n\n* 方法命名 (Method names)\n\n\t使用驼峰格式，首字母小写。例：testCode。\n\n### PSR-2 严格代码样式\n\n* 包含PSR-1中的所有要求\n\n* 首行缩进 (Indentation)\n\n\t使用4个空格 (鄙人也是这个阵营的)\n\n* 文件和行 (Files and lines)\n\n\tPHP文件必须使用Unix格式的换行结尾，最后必须多一个空行。必须省略\"?>\"结尾标签。\n\n\t单行字符最好不超过80，最多不能大于120.\n\n\t每行最后不能有多余的空格。\n\n* PHP关键词 (Keywords)\n\n\t所有PHP的关键词使用小写。`true`、 `false`、 `null`等。\n\n* 命名空间 (Namespaces)\n\n\t每个命名空间的声明必须跟着一空行。同理在使用`use`关键词的时候后边也需要跟一空行。\n\n\t\t<?php\n\t\tnamespace MY\\Component;\n\n\t\tuse Symfony\\Components\\HttpFoundation\\Request;\n\t\tuse Symfony\\Components\\HttpFoundation\\Response;\n\n\t\tclass App\n\t\t{\n\t\t\t// Class defination body\n\t\t}\n\t\n* 类 (Classes)\n\n\t定义类时使用的大括号必须在新的一行。在使用`extends`或`implements`时保证在同一行\n\n\t\t<?php\n\t\tnamespace MY\\Component;\n\n\t\tclass App extends YourApp\n\t\t{\n\t\t\t// Class defination body\n\t\t}\n\n* 方法 (Methods)\n\n\t大括号同样另起一行。参数以一个逗号加空格隔开，结尾不能有多余的空格。\n\n\t\t<?php\n\t\tnamespace MY\\Component;\n\n\t\tclass App extends YourApp\n\t\t{\n\t\t\tpublic function doSomething($firstParam = true, $secondParam = 2)\n\t\t\t{\n\t\t\t\t// Method defination body\n\t\t\t}\n\t\t}\n\n* 方法的可见行 (Visibility)\n\n\t使用关键词`public`、`protected`、`private`代替之前经常使用的`var`，或者变量以下划线开始来表示私有的方式。\n\n\t在定义方法为`abstract`或者`final`时，可见行关键词必须在前。\n\n\t\t<?php\n\t\tnamespace MY\\Component;\n\n\t\tclass App extends YourApp\n\t\t{\n\t\t\t// Static property with visibility\n\t\t\tpublic static $numberOfBirds = 0;\n\n\t\t\t// Method with visibility\t\n\t\t\tpublic function __construct()\n\t\t\t{\n\t\t\t\tstatic::$numberOfBirds++;\n\t\t\t}\n\t\t}\n\n* 控制结构 (Control structures)\n\t\n\t所有的控制结构类关键词必须跟一个空格。例：`if`、`elseif`、`else`、`while`、`case`、`switch`、`do`、`for`、`foreach`、`try`、`catch`。\n\n\t\t<?php\n\t\t$gorilla = new \\Animal\\Gorilla;\n\t\t$ibis = new \\Animal\\StawNeckedIbis;\n\n\t\tif ($gorilla->isAwake() === true) {\n\t\t\tdo {\n\t\t\t\t$gorilla->beatChest();\n\t\t\t} while($ibis->isAsleep() === true);\n\n\t\t\t$ibis->flyAway();\n\t\t}\n\n### PSR-3 日志接口\n\n* PSR-1和PSR-2是编码规范， PSR-3是接口定义，它定义了PHP的日志组件的一系列接口信息。\n\n* 一个PHP的日志组件应该实现了`Psr\\Log\\LoggerInterface`接口的所有方法。该接口的定义参照了系统日志协议RFC5424。具体内容可参照： [LoggerInterface.php](https://github.com/php-fig/log/blob/master/Psr/Log/LoggerInterface.php)定义。\n\n### PSR-4 自动加载器\n\n* 同PSR-0，该标准描述了如何在运行时定位及加载PHP的类、接口以及traits。可以成为PSR-0的简化升级版。移除了对`_`转换成`DIRECTORY_SEPARATOR`的支持，目录结构也不需要再在`src/`下重复vendor和namespace。\n* 比如`\\Oreilly\\ModernPHP`这个命名空间对应的物理地址`src/`。PHP就知道所有使用了这个命名空间的类、接口以及traits都在`src/`目录下边。而命名空间`\\Oreilly\\ModernPHP\\Chapter1\\`对应的物理文件应该是`src/Chapter1/`。\n\n_本文档参考了《O'Reilly Modern PHP》以及PHP官方文档_\n\n","source":"_posts/2016-10-03-php-advance-2-psr.md","raw":"---\nlayout: post\ntitle: PSR标准解读 - PHP进阶 (2)\ncategory: 编程学习\ntags: [PHP, 编程规范]\ndate: 2016-10-03\ndescription: PSR标准解读\nkeywords: Modern PHP, PHP, Note, PSR, PHP-FIG\n---\n\n### _PSR-0 自动加载的标准结构 (虽然已不被推荐使用，但composer还在支持)_\n\n#### 要点：\n\n* 结构： `\\<Vendor Name>\\(<Namespace>\\)*<Class Name>`\n* 第一层级的命名为开发人员的标识\n* 完整的命名空间可包含多个层级\n* 在加载文件的时候，命名空间的分隔符`\\`会被`DIRECTORY_SEPARATOR`替换\n* 类名中的`_`会被`DIRECTORY_SEPARATOR`替换，所以`_`无任何意义\n* 在加载文件的时候，命名空间会补全`.php`后缀\n* 命名空间及类命名可以大小写随意\n* 示例：\n\n\t\t\\Symfony\\Core\\Request => /path/to/project/lib/vendor/Symfony/Core/Request.php\n\n\t\t\\namespace\\package_name\\Class_Name => /path/to/project/lib/vendor/namespace/package_name/Class/Name.php\n\t* 需要注意的是，层级目录会重复vendor和namespace。\n\n#### 加载器的实现示例：\n\n\t<?php\n\n\tfunction autoload($className)\n\t{\n\t    $className = ltrim($className, '\\\\');\n\t    $fileName  = '';\n\t    $namespace = '';\n\t    if ($lastNsPos = strrpos($className, '\\\\')) {\n\t        $namespace = substr($className, 0, $lastNsPos);\n\t        $className = substr($className, $lastNsPos + 1);\n\t        $fileName  = str_replace('\\\\', DIRECTORY_SEPARATOR, $namespace) . DIRECTORY_SEPARATOR;\n\t    }\n\t    $fileName .= str_replace('_', DIRECTORY_SEPARATOR, $className) . '.php';\n\n\t    require $fileName;\n\t}\n\tspl_autoload_register('autoload');\n\n\n\n### PSR-1 基本代码样式\n* 标签 (PHP tags)\n\t\n\t代码必须包含在<?php ?> 或者 <?= ?>中\n\n* 编码 (Encoding)\n\n\t必须使用带BOM的UTF-8\n\n* 对象化 (Objective)\n\n\t单个PHP文件只负责一件事。定义类、trait、function、常量或者执行一系列的动作。不应该同时包含定义和执行代码。\n\n* 自动加载 (Autoloading)\n\n\t命名空间和类必须支持PSR-4标准。\n\n* 类名 (Class names)\n\n\t使用驼峰格式，首字母大写。例：CoffeeBean、TitleCase。\n\n* 常量名 (Constant names)\n\n\t必须全大写，并以下划线切分单词。例：PROJECT_NAME。\n\n* 方法命名 (Method names)\n\n\t使用驼峰格式，首字母小写。例：testCode。\n\n### PSR-2 严格代码样式\n\n* 包含PSR-1中的所有要求\n\n* 首行缩进 (Indentation)\n\n\t使用4个空格 (鄙人也是这个阵营的)\n\n* 文件和行 (Files and lines)\n\n\tPHP文件必须使用Unix格式的换行结尾，最后必须多一个空行。必须省略\"?>\"结尾标签。\n\n\t单行字符最好不超过80，最多不能大于120.\n\n\t每行最后不能有多余的空格。\n\n* PHP关键词 (Keywords)\n\n\t所有PHP的关键词使用小写。`true`、 `false`、 `null`等。\n\n* 命名空间 (Namespaces)\n\n\t每个命名空间的声明必须跟着一空行。同理在使用`use`关键词的时候后边也需要跟一空行。\n\n\t\t<?php\n\t\tnamespace MY\\Component;\n\n\t\tuse Symfony\\Components\\HttpFoundation\\Request;\n\t\tuse Symfony\\Components\\HttpFoundation\\Response;\n\n\t\tclass App\n\t\t{\n\t\t\t// Class defination body\n\t\t}\n\t\n* 类 (Classes)\n\n\t定义类时使用的大括号必须在新的一行。在使用`extends`或`implements`时保证在同一行\n\n\t\t<?php\n\t\tnamespace MY\\Component;\n\n\t\tclass App extends YourApp\n\t\t{\n\t\t\t// Class defination body\n\t\t}\n\n* 方法 (Methods)\n\n\t大括号同样另起一行。参数以一个逗号加空格隔开，结尾不能有多余的空格。\n\n\t\t<?php\n\t\tnamespace MY\\Component;\n\n\t\tclass App extends YourApp\n\t\t{\n\t\t\tpublic function doSomething($firstParam = true, $secondParam = 2)\n\t\t\t{\n\t\t\t\t// Method defination body\n\t\t\t}\n\t\t}\n\n* 方法的可见行 (Visibility)\n\n\t使用关键词`public`、`protected`、`private`代替之前经常使用的`var`，或者变量以下划线开始来表示私有的方式。\n\n\t在定义方法为`abstract`或者`final`时，可见行关键词必须在前。\n\n\t\t<?php\n\t\tnamespace MY\\Component;\n\n\t\tclass App extends YourApp\n\t\t{\n\t\t\t// Static property with visibility\n\t\t\tpublic static $numberOfBirds = 0;\n\n\t\t\t// Method with visibility\t\n\t\t\tpublic function __construct()\n\t\t\t{\n\t\t\t\tstatic::$numberOfBirds++;\n\t\t\t}\n\t\t}\n\n* 控制结构 (Control structures)\n\t\n\t所有的控制结构类关键词必须跟一个空格。例：`if`、`elseif`、`else`、`while`、`case`、`switch`、`do`、`for`、`foreach`、`try`、`catch`。\n\n\t\t<?php\n\t\t$gorilla = new \\Animal\\Gorilla;\n\t\t$ibis = new \\Animal\\StawNeckedIbis;\n\n\t\tif ($gorilla->isAwake() === true) {\n\t\t\tdo {\n\t\t\t\t$gorilla->beatChest();\n\t\t\t} while($ibis->isAsleep() === true);\n\n\t\t\t$ibis->flyAway();\n\t\t}\n\n### PSR-3 日志接口\n\n* PSR-1和PSR-2是编码规范， PSR-3是接口定义，它定义了PHP的日志组件的一系列接口信息。\n\n* 一个PHP的日志组件应该实现了`Psr\\Log\\LoggerInterface`接口的所有方法。该接口的定义参照了系统日志协议RFC5424。具体内容可参照： [LoggerInterface.php](https://github.com/php-fig/log/blob/master/Psr/Log/LoggerInterface.php)定义。\n\n### PSR-4 自动加载器\n\n* 同PSR-0，该标准描述了如何在运行时定位及加载PHP的类、接口以及traits。可以成为PSR-0的简化升级版。移除了对`_`转换成`DIRECTORY_SEPARATOR`的支持，目录结构也不需要再在`src/`下重复vendor和namespace。\n* 比如`\\Oreilly\\ModernPHP`这个命名空间对应的物理地址`src/`。PHP就知道所有使用了这个命名空间的类、接口以及traits都在`src/`目录下边。而命名空间`\\Oreilly\\ModernPHP\\Chapter1\\`对应的物理文件应该是`src/Chapter1/`。\n\n_本文档参考了《O'Reilly Modern PHP》以及PHP官方文档_\n\n","slug":"2016-10-03-php-advance-2-psr","published":1,"updated":"2022-02-12T20:53:10.504Z","comments":1,"photos":[],"link":"","_id":"ckzkc92xa0012oqoxgdhg774n","content":"<h3 id=\"PSR-0-自动加载的标准结构-虽然已不被推荐使用，但composer还在支持\"><a href=\"#PSR-0-自动加载的标准结构-虽然已不被推荐使用，但composer还在支持\" class=\"headerlink\" title=\"PSR-0 自动加载的标准结构 (虽然已不被推荐使用，但composer还在支持)\"></a><em>PSR-0 自动加载的标准结构 (虽然已不被推荐使用，但composer还在支持)</em></h3><h4 id=\"要点：\"><a href=\"#要点：\" class=\"headerlink\" title=\"要点：\"></a>要点：</h4><ul>\n<li><p>结构： <code>\\&lt;Vendor Name&gt;\\(&lt;Namespace&gt;\\)*&lt;Class Name&gt;</code></p>\n</li>\n<li><p>第一层级的命名为开发人员的标识</p>\n</li>\n<li><p>完整的命名空间可包含多个层级</p>\n</li>\n<li><p>在加载文件的时候，命名空间的分隔符<code>\\</code>会被<code>DIRECTORY_SEPARATOR</code>替换</p>\n</li>\n<li><p>类名中的<code>_</code>会被<code>DIRECTORY_SEPARATOR</code>替换，所以<code>_</code>无任何意义</p>\n</li>\n<li><p>在加载文件的时候，命名空间会补全<code>.php</code>后缀</p>\n</li>\n<li><p>命名空间及类命名可以大小写随意</p>\n</li>\n<li><p>示例：</p>\n<pre><code>  \\Symfony\\Core\\Request =&gt; /path/to/project/lib/vendor/Symfony/Core/Request.php\n\n  \\namespace\\package_name\\Class_Name =&gt; /path/to/project/lib/vendor/namespace/package_name/Class/Name.php\n</code></pre>\n<ul>\n<li>需要注意的是，层级目录会重复vendor和namespace。</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"加载器的实现示例：\"><a href=\"#加载器的实现示例：\" class=\"headerlink\" title=\"加载器的实现示例：\"></a>加载器的实现示例：</h4><pre><code>&lt;?php\n\nfunction autoload($className)\n&#123;\n    $className = ltrim($className, &#39;\\\\&#39;);\n    $fileName  = &#39;&#39;;\n    $namespace = &#39;&#39;;\n    if ($lastNsPos = strrpos($className, &#39;\\\\&#39;)) &#123;\n        $namespace = substr($className, 0, $lastNsPos);\n        $className = substr($className, $lastNsPos + 1);\n        $fileName  = str_replace(&#39;\\\\&#39;, DIRECTORY_SEPARATOR, $namespace) . DIRECTORY_SEPARATOR;\n    &#125;\n    $fileName .= str_replace(&#39;_&#39;, DIRECTORY_SEPARATOR, $className) . &#39;.php&#39;;\n\n    require $fileName;\n&#125;\nspl_autoload_register(&#39;autoload&#39;);\n</code></pre>\n<h3 id=\"PSR-1-基本代码样式\"><a href=\"#PSR-1-基本代码样式\" class=\"headerlink\" title=\"PSR-1 基本代码样式\"></a>PSR-1 基本代码样式</h3><ul>\n<li><p>标签 (PHP tags)</p>\n<p>  代码必须包含在<?php ?> 或者 <?= ?>中</p>\n</li>\n<li><p>编码 (Encoding)</p>\n<p>  必须使用带BOM的UTF-8</p>\n</li>\n<li><p>对象化 (Objective)</p>\n<p>  单个PHP文件只负责一件事。定义类、trait、function、常量或者执行一系列的动作。不应该同时包含定义和执行代码。</p>\n</li>\n<li><p>自动加载 (Autoloading)</p>\n<p>  命名空间和类必须支持PSR-4标准。</p>\n</li>\n<li><p>类名 (Class names)</p>\n<p>  使用驼峰格式，首字母大写。例：CoffeeBean、TitleCase。</p>\n</li>\n<li><p>常量名 (Constant names)</p>\n<p>  必须全大写，并以下划线切分单词。例：PROJECT_NAME。</p>\n</li>\n<li><p>方法命名 (Method names)</p>\n<p>  使用驼峰格式，首字母小写。例：testCode。</p>\n</li>\n</ul>\n<h3 id=\"PSR-2-严格代码样式\"><a href=\"#PSR-2-严格代码样式\" class=\"headerlink\" title=\"PSR-2 严格代码样式\"></a>PSR-2 严格代码样式</h3><ul>\n<li><p>包含PSR-1中的所有要求</p>\n</li>\n<li><p>首行缩进 (Indentation)</p>\n<p>  使用4个空格 (鄙人也是这个阵营的)</p>\n</li>\n<li><p>文件和行 (Files and lines)</p>\n<p>  PHP文件必须使用Unix格式的换行结尾，最后必须多一个空行。必须省略”?&gt;”结尾标签。</p>\n<p>  单行字符最好不超过80，最多不能大于120.</p>\n<p>  每行最后不能有多余的空格。</p>\n</li>\n<li><p>PHP关键词 (Keywords)</p>\n<p>  所有PHP的关键词使用小写。<code>true</code>、 <code>false</code>、 <code>null</code>等。</p>\n</li>\n<li><p>命名空间 (Namespaces)</p>\n<p>  每个命名空间的声明必须跟着一空行。同理在使用<code>use</code>关键词的时候后边也需要跟一空行。</p>\n<pre><code>  &lt;?php\n  namespace MY\\Component;\n\n  use Symfony\\Components\\HttpFoundation\\Request;\n  use Symfony\\Components\\HttpFoundation\\Response;\n\n  class App\n  &#123;\n      // Class defination body\n  &#125;\n</code></pre>\n</li>\n<li><p>类 (Classes)</p>\n<p>  定义类时使用的大括号必须在新的一行。在使用<code>extends</code>或<code>implements</code>时保证在同一行</p>\n<pre><code>  &lt;?php\n  namespace MY\\Component;\n\n  class App extends YourApp\n  &#123;\n      // Class defination body\n  &#125;\n</code></pre>\n</li>\n<li><p>方法 (Methods)</p>\n<p>  大括号同样另起一行。参数以一个逗号加空格隔开，结尾不能有多余的空格。</p>\n<pre><code>  &lt;?php\n  namespace MY\\Component;\n\n  class App extends YourApp\n  &#123;\n      public function doSomething($firstParam = true, $secondParam = 2)\n      &#123;\n          // Method defination body\n      &#125;\n  &#125;\n</code></pre>\n</li>\n<li><p>方法的可见行 (Visibility)</p>\n<p>  使用关键词<code>public</code>、<code>protected</code>、<code>private</code>代替之前经常使用的<code>var</code>，或者变量以下划线开始来表示私有的方式。</p>\n<p>  在定义方法为<code>abstract</code>或者<code>final</code>时，可见行关键词必须在前。</p>\n<pre><code>  &lt;?php\n  namespace MY\\Component;\n\n  class App extends YourApp\n  &#123;\n      // Static property with visibility\n      public static $numberOfBirds = 0;\n\n      // Method with visibility    \n      public function __construct()\n      &#123;\n          static::$numberOfBirds++;\n      &#125;\n  &#125;\n</code></pre>\n</li>\n<li><p>控制结构 (Control structures)</p>\n<p>  所有的控制结构类关键词必须跟一个空格。例：<code>if</code>、<code>elseif</code>、<code>else</code>、<code>while</code>、<code>case</code>、<code>switch</code>、<code>do</code>、<code>for</code>、<code>foreach</code>、<code>try</code>、<code>catch</code>。</p>\n<pre><code>  &lt;?php\n  $gorilla = new \\Animal\\Gorilla;\n  $ibis = new \\Animal\\StawNeckedIbis;\n\n  if ($gorilla-&gt;isAwake() === true) &#123;\n      do &#123;\n          $gorilla-&gt;beatChest();\n      &#125; while($ibis-&gt;isAsleep() === true);\n\n      $ibis-&gt;flyAway();\n  &#125;\n</code></pre>\n</li>\n</ul>\n<h3 id=\"PSR-3-日志接口\"><a href=\"#PSR-3-日志接口\" class=\"headerlink\" title=\"PSR-3 日志接口\"></a>PSR-3 日志接口</h3><ul>\n<li><p>PSR-1和PSR-2是编码规范， PSR-3是接口定义，它定义了PHP的日志组件的一系列接口信息。</p>\n</li>\n<li><p>一个PHP的日志组件应该实现了<code>Psr\\Log\\LoggerInterface</code>接口的所有方法。该接口的定义参照了系统日志协议RFC5424。具体内容可参照： <a href=\"https://github.com/php-fig/log/blob/master/Psr/Log/LoggerInterface.php\">LoggerInterface.php</a>定义。</p>\n</li>\n</ul>\n<h3 id=\"PSR-4-自动加载器\"><a href=\"#PSR-4-自动加载器\" class=\"headerlink\" title=\"PSR-4 自动加载器\"></a>PSR-4 自动加载器</h3><ul>\n<li>同PSR-0，该标准描述了如何在运行时定位及加载PHP的类、接口以及traits。可以成为PSR-0的简化升级版。移除了对<code>_</code>转换成<code>DIRECTORY_SEPARATOR</code>的支持，目录结构也不需要再在<code>src/</code>下重复vendor和namespace。</li>\n<li>比如<code>\\Oreilly\\ModernPHP</code>这个命名空间对应的物理地址<code>src/</code>。PHP就知道所有使用了这个命名空间的类、接口以及traits都在<code>src/</code>目录下边。而命名空间<code>\\Oreilly\\ModernPHP\\Chapter1\\</code>对应的物理文件应该是<code>src/Chapter1/</code>。</li>\n</ul>\n<p><em>本文档参考了《O’Reilly Modern PHP》以及PHP官方文档</em></p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"PSR-0-自动加载的标准结构-虽然已不被推荐使用，但composer还在支持\"><a href=\"#PSR-0-自动加载的标准结构-虽然已不被推荐使用，但composer还在支持\" class=\"headerlink\" title=\"PSR-0 自动加载的标准结构 (虽然已不被推荐使用，但composer还在支持)\"></a><em>PSR-0 自动加载的标准结构 (虽然已不被推荐使用，但composer还在支持)</em></h3><h4 id=\"要点：\"><a href=\"#要点：\" class=\"headerlink\" title=\"要点：\"></a>要点：</h4><ul>\n<li><p>结构： <code>\\&lt;Vendor Name&gt;\\(&lt;Namespace&gt;\\)*&lt;Class Name&gt;</code></p>\n</li>\n<li><p>第一层级的命名为开发人员的标识</p>\n</li>\n<li><p>完整的命名空间可包含多个层级</p>\n</li>\n<li><p>在加载文件的时候，命名空间的分隔符<code>\\</code>会被<code>DIRECTORY_SEPARATOR</code>替换</p>\n</li>\n<li><p>类名中的<code>_</code>会被<code>DIRECTORY_SEPARATOR</code>替换，所以<code>_</code>无任何意义</p>\n</li>\n<li><p>在加载文件的时候，命名空间会补全<code>.php</code>后缀</p>\n</li>\n<li><p>命名空间及类命名可以大小写随意</p>\n</li>\n<li><p>示例：</p>\n<pre><code>  \\Symfony\\Core\\Request =&gt; /path/to/project/lib/vendor/Symfony/Core/Request.php\n\n  \\namespace\\package_name\\Class_Name =&gt; /path/to/project/lib/vendor/namespace/package_name/Class/Name.php\n</code></pre>\n<ul>\n<li>需要注意的是，层级目录会重复vendor和namespace。</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"加载器的实现示例：\"><a href=\"#加载器的实现示例：\" class=\"headerlink\" title=\"加载器的实现示例：\"></a>加载器的实现示例：</h4><pre><code>&lt;?php\n\nfunction autoload($className)\n&#123;\n    $className = ltrim($className, &#39;\\\\&#39;);\n    $fileName  = &#39;&#39;;\n    $namespace = &#39;&#39;;\n    if ($lastNsPos = strrpos($className, &#39;\\\\&#39;)) &#123;\n        $namespace = substr($className, 0, $lastNsPos);\n        $className = substr($className, $lastNsPos + 1);\n        $fileName  = str_replace(&#39;\\\\&#39;, DIRECTORY_SEPARATOR, $namespace) . DIRECTORY_SEPARATOR;\n    &#125;\n    $fileName .= str_replace(&#39;_&#39;, DIRECTORY_SEPARATOR, $className) . &#39;.php&#39;;\n\n    require $fileName;\n&#125;\nspl_autoload_register(&#39;autoload&#39;);\n</code></pre>\n<h3 id=\"PSR-1-基本代码样式\"><a href=\"#PSR-1-基本代码样式\" class=\"headerlink\" title=\"PSR-1 基本代码样式\"></a>PSR-1 基本代码样式</h3><ul>\n<li><p>标签 (PHP tags)</p>\n<p>  代码必须包含在<?php ?> 或者 <?= ?>中</p>\n</li>\n<li><p>编码 (Encoding)</p>\n<p>  必须使用带BOM的UTF-8</p>\n</li>\n<li><p>对象化 (Objective)</p>\n<p>  单个PHP文件只负责一件事。定义类、trait、function、常量或者执行一系列的动作。不应该同时包含定义和执行代码。</p>\n</li>\n<li><p>自动加载 (Autoloading)</p>\n<p>  命名空间和类必须支持PSR-4标准。</p>\n</li>\n<li><p>类名 (Class names)</p>\n<p>  使用驼峰格式，首字母大写。例：CoffeeBean、TitleCase。</p>\n</li>\n<li><p>常量名 (Constant names)</p>\n<p>  必须全大写，并以下划线切分单词。例：PROJECT_NAME。</p>\n</li>\n<li><p>方法命名 (Method names)</p>\n<p>  使用驼峰格式，首字母小写。例：testCode。</p>\n</li>\n</ul>\n<h3 id=\"PSR-2-严格代码样式\"><a href=\"#PSR-2-严格代码样式\" class=\"headerlink\" title=\"PSR-2 严格代码样式\"></a>PSR-2 严格代码样式</h3><ul>\n<li><p>包含PSR-1中的所有要求</p>\n</li>\n<li><p>首行缩进 (Indentation)</p>\n<p>  使用4个空格 (鄙人也是这个阵营的)</p>\n</li>\n<li><p>文件和行 (Files and lines)</p>\n<p>  PHP文件必须使用Unix格式的换行结尾，最后必须多一个空行。必须省略”?&gt;”结尾标签。</p>\n<p>  单行字符最好不超过80，最多不能大于120.</p>\n<p>  每行最后不能有多余的空格。</p>\n</li>\n<li><p>PHP关键词 (Keywords)</p>\n<p>  所有PHP的关键词使用小写。<code>true</code>、 <code>false</code>、 <code>null</code>等。</p>\n</li>\n<li><p>命名空间 (Namespaces)</p>\n<p>  每个命名空间的声明必须跟着一空行。同理在使用<code>use</code>关键词的时候后边也需要跟一空行。</p>\n<pre><code>  &lt;?php\n  namespace MY\\Component;\n\n  use Symfony\\Components\\HttpFoundation\\Request;\n  use Symfony\\Components\\HttpFoundation\\Response;\n\n  class App\n  &#123;\n      // Class defination body\n  &#125;\n</code></pre>\n</li>\n<li><p>类 (Classes)</p>\n<p>  定义类时使用的大括号必须在新的一行。在使用<code>extends</code>或<code>implements</code>时保证在同一行</p>\n<pre><code>  &lt;?php\n  namespace MY\\Component;\n\n  class App extends YourApp\n  &#123;\n      // Class defination body\n  &#125;\n</code></pre>\n</li>\n<li><p>方法 (Methods)</p>\n<p>  大括号同样另起一行。参数以一个逗号加空格隔开，结尾不能有多余的空格。</p>\n<pre><code>  &lt;?php\n  namespace MY\\Component;\n\n  class App extends YourApp\n  &#123;\n      public function doSomething($firstParam = true, $secondParam = 2)\n      &#123;\n          // Method defination body\n      &#125;\n  &#125;\n</code></pre>\n</li>\n<li><p>方法的可见行 (Visibility)</p>\n<p>  使用关键词<code>public</code>、<code>protected</code>、<code>private</code>代替之前经常使用的<code>var</code>，或者变量以下划线开始来表示私有的方式。</p>\n<p>  在定义方法为<code>abstract</code>或者<code>final</code>时，可见行关键词必须在前。</p>\n<pre><code>  &lt;?php\n  namespace MY\\Component;\n\n  class App extends YourApp\n  &#123;\n      // Static property with visibility\n      public static $numberOfBirds = 0;\n\n      // Method with visibility    \n      public function __construct()\n      &#123;\n          static::$numberOfBirds++;\n      &#125;\n  &#125;\n</code></pre>\n</li>\n<li><p>控制结构 (Control structures)</p>\n<p>  所有的控制结构类关键词必须跟一个空格。例：<code>if</code>、<code>elseif</code>、<code>else</code>、<code>while</code>、<code>case</code>、<code>switch</code>、<code>do</code>、<code>for</code>、<code>foreach</code>、<code>try</code>、<code>catch</code>。</p>\n<pre><code>  &lt;?php\n  $gorilla = new \\Animal\\Gorilla;\n  $ibis = new \\Animal\\StawNeckedIbis;\n\n  if ($gorilla-&gt;isAwake() === true) &#123;\n      do &#123;\n          $gorilla-&gt;beatChest();\n      &#125; while($ibis-&gt;isAsleep() === true);\n\n      $ibis-&gt;flyAway();\n  &#125;\n</code></pre>\n</li>\n</ul>\n<h3 id=\"PSR-3-日志接口\"><a href=\"#PSR-3-日志接口\" class=\"headerlink\" title=\"PSR-3 日志接口\"></a>PSR-3 日志接口</h3><ul>\n<li><p>PSR-1和PSR-2是编码规范， PSR-3是接口定义，它定义了PHP的日志组件的一系列接口信息。</p>\n</li>\n<li><p>一个PHP的日志组件应该实现了<code>Psr\\Log\\LoggerInterface</code>接口的所有方法。该接口的定义参照了系统日志协议RFC5424。具体内容可参照： <a href=\"https://github.com/php-fig/log/blob/master/Psr/Log/LoggerInterface.php\">LoggerInterface.php</a>定义。</p>\n</li>\n</ul>\n<h3 id=\"PSR-4-自动加载器\"><a href=\"#PSR-4-自动加载器\" class=\"headerlink\" title=\"PSR-4 自动加载器\"></a>PSR-4 自动加载器</h3><ul>\n<li>同PSR-0，该标准描述了如何在运行时定位及加载PHP的类、接口以及traits。可以成为PSR-0的简化升级版。移除了对<code>_</code>转换成<code>DIRECTORY_SEPARATOR</code>的支持，目录结构也不需要再在<code>src/</code>下重复vendor和namespace。</li>\n<li>比如<code>\\Oreilly\\ModernPHP</code>这个命名空间对应的物理地址<code>src/</code>。PHP就知道所有使用了这个命名空间的类、接口以及traits都在<code>src/</code>目录下边。而命名空间<code>\\Oreilly\\ModernPHP\\Chapter1\\</code>对应的物理文件应该是<code>src/Chapter1/</code>。</li>\n</ul>\n<p><em>本文档参考了《O’Reilly Modern PHP》以及PHP官方文档</em></p>\n"},{"layout":"post","title":"RFC 2119 解读","date":"2016-10-25T04:00:00.000Z","description":"在写文档的时候，使用特定的关键词来声明需求等级","keywords":"IETF, RFC, 2119","_content":"\n### 简介\n\n\tRFC2119 是技术文档中的规范用语要求，针对若干个关键词进行说明，解释其在文档中的具体用法。在使用中所有字母都必须是大写的。\n\n\t了解它的规定有利于解读英文文档的具体用意。\n\n### 所有遵循该规定的文档都在开头包含以下文字：\n\n\tThe key words \"MUST\", \"MUST NOT\", \"REQUIRED\", \"SHALL\", \"SHALL\n    NOT\", \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\",  \"MAY\", and\n    \"OPTIONAL\" in this document are to be interpreted as described in\n    [RFC 2119](https://tools.ietf.org/html/rfc2119).\n\n#### 1. `MUST`：等同于\"`REQUIRED`\"和\"`SHALL`\"。 必须使用。\n\n#### 2. `MUST NOT`：等同于\"`SHALL NOT`\"。  必须避免使用。\n\n#### 3. `SHOULD`：等同于\"`RECOMMENDED`\"。  推荐使用方式，但在某些特定情况下可以忽略。如果需要采用不同的方式，请务必仔细斟酌。\n\n#### 4. `SHOULD NOT`：等同于\"`NOT RECOMMENDED`\"。 推荐不使用方式，但在某些特定情况下可以忽略。如果需要采用不同的方式，请务必仔细斟酌。\n\n#### 5. `MAY`：等同于\"`OPTIONAL`\"。 可选可不选。\n\n#### 官方文档： [https://tools.ietf.org/html/rfc2119](https://tools.ietf.org/html/rfc2119)\n\n","source":"_posts/2016-10-25-rfc-2119.md","raw":"---\nlayout: post\ntitle: RFC 2119 解读\ncategory: 编程学习\ntags: [编程规范]\ndate: 2016-10-25\ndescription: 在写文档的时候，使用特定的关键词来声明需求等级\nkeywords: IETF, RFC, 2119\n---\n\n### 简介\n\n\tRFC2119 是技术文档中的规范用语要求，针对若干个关键词进行说明，解释其在文档中的具体用法。在使用中所有字母都必须是大写的。\n\n\t了解它的规定有利于解读英文文档的具体用意。\n\n### 所有遵循该规定的文档都在开头包含以下文字：\n\n\tThe key words \"MUST\", \"MUST NOT\", \"REQUIRED\", \"SHALL\", \"SHALL\n    NOT\", \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\",  \"MAY\", and\n    \"OPTIONAL\" in this document are to be interpreted as described in\n    [RFC 2119](https://tools.ietf.org/html/rfc2119).\n\n#### 1. `MUST`：等同于\"`REQUIRED`\"和\"`SHALL`\"。 必须使用。\n\n#### 2. `MUST NOT`：等同于\"`SHALL NOT`\"。  必须避免使用。\n\n#### 3. `SHOULD`：等同于\"`RECOMMENDED`\"。  推荐使用方式，但在某些特定情况下可以忽略。如果需要采用不同的方式，请务必仔细斟酌。\n\n#### 4. `SHOULD NOT`：等同于\"`NOT RECOMMENDED`\"。 推荐不使用方式，但在某些特定情况下可以忽略。如果需要采用不同的方式，请务必仔细斟酌。\n\n#### 5. `MAY`：等同于\"`OPTIONAL`\"。 可选可不选。\n\n#### 官方文档： [https://tools.ietf.org/html/rfc2119](https://tools.ietf.org/html/rfc2119)\n\n","slug":"2016-10-25-rfc-2119","published":1,"updated":"2022-02-12T20:53:10.504Z","comments":1,"photos":[],"link":"","_id":"ckzkc92xb0015oqoxc3w77nw4","content":"<h3 id=\"简介\"><a href=\"#简介\" class=\"headerlink\" title=\"简介\"></a>简介</h3><pre><code>RFC2119 是技术文档中的规范用语要求，针对若干个关键词进行说明，解释其在文档中的具体用法。在使用中所有字母都必须是大写的。\n\n了解它的规定有利于解读英文文档的具体用意。\n</code></pre>\n<h3 id=\"所有遵循该规定的文档都在开头包含以下文字：\"><a href=\"#所有遵循该规定的文档都在开头包含以下文字：\" class=\"headerlink\" title=\"所有遵循该规定的文档都在开头包含以下文字：\"></a>所有遵循该规定的文档都在开头包含以下文字：</h3><pre><code>The key words &quot;MUST&quot;, &quot;MUST NOT&quot;, &quot;REQUIRED&quot;, &quot;SHALL&quot;, &quot;SHALL\nNOT&quot;, &quot;SHOULD&quot;, &quot;SHOULD NOT&quot;, &quot;RECOMMENDED&quot;,  &quot;MAY&quot;, and\n&quot;OPTIONAL&quot; in this document are to be interpreted as described in\n[RFC 2119](https://tools.ietf.org/html/rfc2119).\n</code></pre>\n<h4 id=\"1-MUST：等同于”REQUIRED“和”SHALL“。-必须使用。\"><a href=\"#1-MUST：等同于”REQUIRED“和”SHALL“。-必须使用。\" class=\"headerlink\" title=\"1. MUST：等同于”REQUIRED“和”SHALL“。 必须使用。\"></a>1. <code>MUST</code>：等同于”<code>REQUIRED</code>“和”<code>SHALL</code>“。 必须使用。</h4><h4 id=\"2-MUST-NOT：等同于”SHALL-NOT“。-必须避免使用。\"><a href=\"#2-MUST-NOT：等同于”SHALL-NOT“。-必须避免使用。\" class=\"headerlink\" title=\"2. MUST NOT：等同于”SHALL NOT“。  必须避免使用。\"></a>2. <code>MUST NOT</code>：等同于”<code>SHALL NOT</code>“。  必须避免使用。</h4><h4 id=\"3-SHOULD：等同于”RECOMMENDED“。-推荐使用方式，但在某些特定情况下可以忽略。如果需要采用不同的方式，请务必仔细斟酌。\"><a href=\"#3-SHOULD：等同于”RECOMMENDED“。-推荐使用方式，但在某些特定情况下可以忽略。如果需要采用不同的方式，请务必仔细斟酌。\" class=\"headerlink\" title=\"3. SHOULD：等同于”RECOMMENDED“。  推荐使用方式，但在某些特定情况下可以忽略。如果需要采用不同的方式，请务必仔细斟酌。\"></a>3. <code>SHOULD</code>：等同于”<code>RECOMMENDED</code>“。  推荐使用方式，但在某些特定情况下可以忽略。如果需要采用不同的方式，请务必仔细斟酌。</h4><h4 id=\"4-SHOULD-NOT：等同于”NOT-RECOMMENDED“。-推荐不使用方式，但在某些特定情况下可以忽略。如果需要采用不同的方式，请务必仔细斟酌。\"><a href=\"#4-SHOULD-NOT：等同于”NOT-RECOMMENDED“。-推荐不使用方式，但在某些特定情况下可以忽略。如果需要采用不同的方式，请务必仔细斟酌。\" class=\"headerlink\" title=\"4. SHOULD NOT：等同于”NOT RECOMMENDED“。 推荐不使用方式，但在某些特定情况下可以忽略。如果需要采用不同的方式，请务必仔细斟酌。\"></a>4. <code>SHOULD NOT</code>：等同于”<code>NOT RECOMMENDED</code>“。 推荐不使用方式，但在某些特定情况下可以忽略。如果需要采用不同的方式，请务必仔细斟酌。</h4><h4 id=\"5-MAY：等同于”OPTIONAL“。-可选可不选。\"><a href=\"#5-MAY：等同于”OPTIONAL“。-可选可不选。\" class=\"headerlink\" title=\"5. MAY：等同于”OPTIONAL“。 可选可不选。\"></a>5. <code>MAY</code>：等同于”<code>OPTIONAL</code>“。 可选可不选。</h4><h4 id=\"官方文档：-https-tools-ietf-org-html-rfc2119\"><a href=\"#官方文档：-https-tools-ietf-org-html-rfc2119\" class=\"headerlink\" title=\"官方文档： https://tools.ietf.org/html/rfc2119\"></a>官方文档： <a href=\"https://tools.ietf.org/html/rfc2119\">https://tools.ietf.org/html/rfc2119</a></h4>","site":{"data":{}},"excerpt":"","more":"<h3 id=\"简介\"><a href=\"#简介\" class=\"headerlink\" title=\"简介\"></a>简介</h3><pre><code>RFC2119 是技术文档中的规范用语要求，针对若干个关键词进行说明，解释其在文档中的具体用法。在使用中所有字母都必须是大写的。\n\n了解它的规定有利于解读英文文档的具体用意。\n</code></pre>\n<h3 id=\"所有遵循该规定的文档都在开头包含以下文字：\"><a href=\"#所有遵循该规定的文档都在开头包含以下文字：\" class=\"headerlink\" title=\"所有遵循该规定的文档都在开头包含以下文字：\"></a>所有遵循该规定的文档都在开头包含以下文字：</h3><pre><code>The key words &quot;MUST&quot;, &quot;MUST NOT&quot;, &quot;REQUIRED&quot;, &quot;SHALL&quot;, &quot;SHALL\nNOT&quot;, &quot;SHOULD&quot;, &quot;SHOULD NOT&quot;, &quot;RECOMMENDED&quot;,  &quot;MAY&quot;, and\n&quot;OPTIONAL&quot; in this document are to be interpreted as described in\n[RFC 2119](https://tools.ietf.org/html/rfc2119).\n</code></pre>\n<h4 id=\"1-MUST：等同于”REQUIRED“和”SHALL“。-必须使用。\"><a href=\"#1-MUST：等同于”REQUIRED“和”SHALL“。-必须使用。\" class=\"headerlink\" title=\"1. MUST：等同于”REQUIRED“和”SHALL“。 必须使用。\"></a>1. <code>MUST</code>：等同于”<code>REQUIRED</code>“和”<code>SHALL</code>“。 必须使用。</h4><h4 id=\"2-MUST-NOT：等同于”SHALL-NOT“。-必须避免使用。\"><a href=\"#2-MUST-NOT：等同于”SHALL-NOT“。-必须避免使用。\" class=\"headerlink\" title=\"2. MUST NOT：等同于”SHALL NOT“。  必须避免使用。\"></a>2. <code>MUST NOT</code>：等同于”<code>SHALL NOT</code>“。  必须避免使用。</h4><h4 id=\"3-SHOULD：等同于”RECOMMENDED“。-推荐使用方式，但在某些特定情况下可以忽略。如果需要采用不同的方式，请务必仔细斟酌。\"><a href=\"#3-SHOULD：等同于”RECOMMENDED“。-推荐使用方式，但在某些特定情况下可以忽略。如果需要采用不同的方式，请务必仔细斟酌。\" class=\"headerlink\" title=\"3. SHOULD：等同于”RECOMMENDED“。  推荐使用方式，但在某些特定情况下可以忽略。如果需要采用不同的方式，请务必仔细斟酌。\"></a>3. <code>SHOULD</code>：等同于”<code>RECOMMENDED</code>“。  推荐使用方式，但在某些特定情况下可以忽略。如果需要采用不同的方式，请务必仔细斟酌。</h4><h4 id=\"4-SHOULD-NOT：等同于”NOT-RECOMMENDED“。-推荐不使用方式，但在某些特定情况下可以忽略。如果需要采用不同的方式，请务必仔细斟酌。\"><a href=\"#4-SHOULD-NOT：等同于”NOT-RECOMMENDED“。-推荐不使用方式，但在某些特定情况下可以忽略。如果需要采用不同的方式，请务必仔细斟酌。\" class=\"headerlink\" title=\"4. SHOULD NOT：等同于”NOT RECOMMENDED“。 推荐不使用方式，但在某些特定情况下可以忽略。如果需要采用不同的方式，请务必仔细斟酌。\"></a>4. <code>SHOULD NOT</code>：等同于”<code>NOT RECOMMENDED</code>“。 推荐不使用方式，但在某些特定情况下可以忽略。如果需要采用不同的方式，请务必仔细斟酌。</h4><h4 id=\"5-MAY：等同于”OPTIONAL“。-可选可不选。\"><a href=\"#5-MAY：等同于”OPTIONAL“。-可选可不选。\" class=\"headerlink\" title=\"5. MAY：等同于”OPTIONAL“。 可选可不选。\"></a>5. <code>MAY</code>：等同于”<code>OPTIONAL</code>“。 可选可不选。</h4><h4 id=\"官方文档：-https-tools-ietf-org-html-rfc2119\"><a href=\"#官方文档：-https-tools-ietf-org-html-rfc2119\" class=\"headerlink\" title=\"官方文档： https://tools.ietf.org/html/rfc2119\"></a>官方文档： <a href=\"https://tools.ietf.org/html/rfc2119\">https://tools.ietf.org/html/rfc2119</a></h4>"},{"layout":"post","title":"简要说明语义化版本号的具体用法","date":"2016-10-25T04:00:00.000Z","description":"简要说明语义化版本号的具体用法","keywords":"Semantic, Version, Note","_content":"\n### 版本格式：主版本号.次版本号.修订版本号，版本号递增规则如下：\n\n* `主版本号`：当你做了不兼容的 API 修改，\n\n* `次版本号`：当你做了向下兼容的功能性新增，\n\n* `修订版本号`：当你做了向下兼容的问题修正。\n\n* `先行版本号`及`版本编译信息`可以加到“主版本号.次版本号.修订号”的后面，作为延伸。\n\n### 具体要求：\n\n1. 必须包含公共API，定义在代码或文档中。\n\n2. 格式必须是 `X.Y.Z`。 非负，从0开始。\n\n3. 每次代码修改必须调整版本号。\n\n4. `主版本号`为0时(0.Y.Z) 为开发阶段，可随意修整代码。\n\n5. 1.0.0 是公共API的起始版本号。\n\n6. `修订版本号`为修复BUG递增版本号，向后兼容。\n\n7. 新增功能后次版本号增长。必须保证向后兼容。`修订版本号`归零。\n\n8. 新增不能向后兼容的功能后，`主版本号`增长，`次版本号`及`修订版本号`归零。\n\n9. `先行版本号`，即已发布非正式的版本号标注。必须从1.0.0开始。 在版本号后以`-a.a...`的形式追加。 `a` 可为字母单词数字横杠(-)， 不可为空。范例：1.0.0-alpha、1.0.0-alpha.1、1.0.0-0.3.7、1.0.0-x.7.z.92。\n\n10. `版本编译信息`追加。在先行版本号以`+b.b...`的形式追加。 `b`可为字母单词数字横杠(-)， 不可为空。范例：1.0.0-alpha+001、1.0.0+20130313144700、1.0.0-beta+exp.sha.5114f85。\n\n11. 版本优先级。 从左到右依次比较。`先行版本号`及`版本编译信息`的比较中以`.`切割比较，有编号高于无编号，字母编号高于编号数字。范例：1.0.0-alpha < 1.0.0-alpha.1 < 1.0.0-alpha.beta < 1.0.0-beta < 1.0.0-beta.2 < 1.0.0-beta.11 < 1.0.0-rc.1 < 1.0.0。\n\n_基于官方文档2.0.0版本翻译解释_\n\n文档地址： [http://semver.org/](http://semver.org/)\n\n","source":"_posts/2016-10-25-semantic-versioning-2.md","raw":"---\nlayout: post\ntitle: 简要说明语义化版本号的具体用法\ncategory: 编程学习\ntags: [编程规范]\ndate: 2016-10-25\ndescription: 简要说明语义化版本号的具体用法\nkeywords: Semantic, Version, Note\n---\n\n### 版本格式：主版本号.次版本号.修订版本号，版本号递增规则如下：\n\n* `主版本号`：当你做了不兼容的 API 修改，\n\n* `次版本号`：当你做了向下兼容的功能性新增，\n\n* `修订版本号`：当你做了向下兼容的问题修正。\n\n* `先行版本号`及`版本编译信息`可以加到“主版本号.次版本号.修订号”的后面，作为延伸。\n\n### 具体要求：\n\n1. 必须包含公共API，定义在代码或文档中。\n\n2. 格式必须是 `X.Y.Z`。 非负，从0开始。\n\n3. 每次代码修改必须调整版本号。\n\n4. `主版本号`为0时(0.Y.Z) 为开发阶段，可随意修整代码。\n\n5. 1.0.0 是公共API的起始版本号。\n\n6. `修订版本号`为修复BUG递增版本号，向后兼容。\n\n7. 新增功能后次版本号增长。必须保证向后兼容。`修订版本号`归零。\n\n8. 新增不能向后兼容的功能后，`主版本号`增长，`次版本号`及`修订版本号`归零。\n\n9. `先行版本号`，即已发布非正式的版本号标注。必须从1.0.0开始。 在版本号后以`-a.a...`的形式追加。 `a` 可为字母单词数字横杠(-)， 不可为空。范例：1.0.0-alpha、1.0.0-alpha.1、1.0.0-0.3.7、1.0.0-x.7.z.92。\n\n10. `版本编译信息`追加。在先行版本号以`+b.b...`的形式追加。 `b`可为字母单词数字横杠(-)， 不可为空。范例：1.0.0-alpha+001、1.0.0+20130313144700、1.0.0-beta+exp.sha.5114f85。\n\n11. 版本优先级。 从左到右依次比较。`先行版本号`及`版本编译信息`的比较中以`.`切割比较，有编号高于无编号，字母编号高于编号数字。范例：1.0.0-alpha < 1.0.0-alpha.1 < 1.0.0-alpha.beta < 1.0.0-beta < 1.0.0-beta.2 < 1.0.0-beta.11 < 1.0.0-rc.1 < 1.0.0。\n\n_基于官方文档2.0.0版本翻译解释_\n\n文档地址： [http://semver.org/](http://semver.org/)\n\n","slug":"2016-10-25-semantic-versioning-2","published":1,"updated":"2022-02-12T20:53:10.504Z","comments":1,"photos":[],"link":"","_id":"ckzkc92xc001aoqox97zegupu","content":"<h3 id=\"版本格式：主版本号-次版本号-修订版本号，版本号递增规则如下：\"><a href=\"#版本格式：主版本号-次版本号-修订版本号，版本号递增规则如下：\" class=\"headerlink\" title=\"版本格式：主版本号.次版本号.修订版本号，版本号递增规则如下：\"></a>版本格式：主版本号.次版本号.修订版本号，版本号递增规则如下：</h3><ul>\n<li><p><code>主版本号</code>：当你做了不兼容的 API 修改，</p>\n</li>\n<li><p><code>次版本号</code>：当你做了向下兼容的功能性新增，</p>\n</li>\n<li><p><code>修订版本号</code>：当你做了向下兼容的问题修正。</p>\n</li>\n<li><p><code>先行版本号</code>及<code>版本编译信息</code>可以加到“主版本号.次版本号.修订号”的后面，作为延伸。</p>\n</li>\n</ul>\n<h3 id=\"具体要求：\"><a href=\"#具体要求：\" class=\"headerlink\" title=\"具体要求：\"></a>具体要求：</h3><ol>\n<li><p>必须包含公共API，定义在代码或文档中。</p>\n</li>\n<li><p>格式必须是 <code>X.Y.Z</code>。 非负，从0开始。</p>\n</li>\n<li><p>每次代码修改必须调整版本号。</p>\n</li>\n<li><p><code>主版本号</code>为0时(0.Y.Z) 为开发阶段，可随意修整代码。</p>\n</li>\n<li><p>1.0.0 是公共API的起始版本号。</p>\n</li>\n<li><p><code>修订版本号</code>为修复BUG递增版本号，向后兼容。</p>\n</li>\n<li><p>新增功能后次版本号增长。必须保证向后兼容。<code>修订版本号</code>归零。</p>\n</li>\n<li><p>新增不能向后兼容的功能后，<code>主版本号</code>增长，<code>次版本号</code>及<code>修订版本号</code>归零。</p>\n</li>\n<li><p><code>先行版本号</code>，即已发布非正式的版本号标注。必须从1.0.0开始。 在版本号后以<code>-a.a...</code>的形式追加。 <code>a</code> 可为字母单词数字横杠(-)， 不可为空。范例：1.0.0-alpha、1.0.0-alpha.1、1.0.0-0.3.7、1.0.0-x.7.z.92。</p>\n</li>\n<li><p><code>版本编译信息</code>追加。在先行版本号以<code>+b.b...</code>的形式追加。 <code>b</code>可为字母单词数字横杠(-)， 不可为空。范例：1.0.0-alpha+001、1.0.0+20130313144700、1.0.0-beta+exp.sha.5114f85。</p>\n</li>\n<li><p>版本优先级。 从左到右依次比较。<code>先行版本号</code>及<code>版本编译信息</code>的比较中以<code>.</code>切割比较，有编号高于无编号，字母编号高于编号数字。范例：1.0.0-alpha &lt; 1.0.0-alpha.1 &lt; 1.0.0-alpha.beta &lt; 1.0.0-beta &lt; 1.0.0-beta.2 &lt; 1.0.0-beta.11 &lt; 1.0.0-rc.1 &lt; 1.0.0。</p>\n</li>\n</ol>\n<p><em>基于官方文档2.0.0版本翻译解释</em></p>\n<p>文档地址： <a href=\"http://semver.org/\">http://semver.org/</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"版本格式：主版本号-次版本号-修订版本号，版本号递增规则如下：\"><a href=\"#版本格式：主版本号-次版本号-修订版本号，版本号递增规则如下：\" class=\"headerlink\" title=\"版本格式：主版本号.次版本号.修订版本号，版本号递增规则如下：\"></a>版本格式：主版本号.次版本号.修订版本号，版本号递增规则如下：</h3><ul>\n<li><p><code>主版本号</code>：当你做了不兼容的 API 修改，</p>\n</li>\n<li><p><code>次版本号</code>：当你做了向下兼容的功能性新增，</p>\n</li>\n<li><p><code>修订版本号</code>：当你做了向下兼容的问题修正。</p>\n</li>\n<li><p><code>先行版本号</code>及<code>版本编译信息</code>可以加到“主版本号.次版本号.修订号”的后面，作为延伸。</p>\n</li>\n</ul>\n<h3 id=\"具体要求：\"><a href=\"#具体要求：\" class=\"headerlink\" title=\"具体要求：\"></a>具体要求：</h3><ol>\n<li><p>必须包含公共API，定义在代码或文档中。</p>\n</li>\n<li><p>格式必须是 <code>X.Y.Z</code>。 非负，从0开始。</p>\n</li>\n<li><p>每次代码修改必须调整版本号。</p>\n</li>\n<li><p><code>主版本号</code>为0时(0.Y.Z) 为开发阶段，可随意修整代码。</p>\n</li>\n<li><p>1.0.0 是公共API的起始版本号。</p>\n</li>\n<li><p><code>修订版本号</code>为修复BUG递增版本号，向后兼容。</p>\n</li>\n<li><p>新增功能后次版本号增长。必须保证向后兼容。<code>修订版本号</code>归零。</p>\n</li>\n<li><p>新增不能向后兼容的功能后，<code>主版本号</code>增长，<code>次版本号</code>及<code>修订版本号</code>归零。</p>\n</li>\n<li><p><code>先行版本号</code>，即已发布非正式的版本号标注。必须从1.0.0开始。 在版本号后以<code>-a.a...</code>的形式追加。 <code>a</code> 可为字母单词数字横杠(-)， 不可为空。范例：1.0.0-alpha、1.0.0-alpha.1、1.0.0-0.3.7、1.0.0-x.7.z.92。</p>\n</li>\n<li><p><code>版本编译信息</code>追加。在先行版本号以<code>+b.b...</code>的形式追加。 <code>b</code>可为字母单词数字横杠(-)， 不可为空。范例：1.0.0-alpha+001、1.0.0+20130313144700、1.0.0-beta+exp.sha.5114f85。</p>\n</li>\n<li><p>版本优先级。 从左到右依次比较。<code>先行版本号</code>及<code>版本编译信息</code>的比较中以<code>.</code>切割比较，有编号高于无编号，字母编号高于编号数字。范例：1.0.0-alpha &lt; 1.0.0-alpha.1 &lt; 1.0.0-alpha.beta &lt; 1.0.0-beta &lt; 1.0.0-beta.2 &lt; 1.0.0-beta.11 &lt; 1.0.0-rc.1 &lt; 1.0.0。</p>\n</li>\n</ol>\n<p><em>基于官方文档2.0.0版本翻译解释</em></p>\n<p>文档地址： <a href=\"http://semver.org/\">http://semver.org/</a></p>\n"},{"layout":"post","title":"Get Start - Elasticsearch 学习实践 (1)","date":"2016-11-17T05:00:00.000Z","description":"Elasticsearch文档学习实践之路","keywords":"Elasticsearch, 文档, 全文检索, 搜索","_content":"\n## 基本概念\n\n* 索引(indix)： 相当于关系型数据库的数据库。\n* 类型(type)：相当于关系型数据库的表。\n* 文档(Document)： 相当于关系型数据库中的每一行数据记录。\n* 字段(field)：相当于数据类型，例如字符串、整数、日期等。\n* 映射(mapping)： 用于定义文档及其内部属性字段如何被索引及搜索的。\n* 节点(Node)：单台服务器称为一个节点，默认情况下最好配置2+台保证可用性。\n* 分片索引(Shard)：Elasticsearch会把数据分发到多台服务器上存储。这个过程成为分片(Sharding)。\n* 索引副本(Replica)：副本主要是主分片的复制。在搜索请求阻塞在单个节点时，它可以像原来的主分片一样处理用户搜索请求。\n\n## 安装\n\n### 使用 Docker 安装\n\n* 文件目录结构：\n\n        Dockerfile // Docker安装文件\n        config/\n            elasticsearch.yml // Elasticsearch的基本配置\n            license.json // 在官网注册的Basic License\n            x-pack/\n                roles.yml // 定义角色\n\n* `Dockerfile`\n\n        FROM elasticsearch:5.2.0\n        \n        # Define working directory.\n        WORKDIR /tmp\n        \n        # Define default command.\n        # CMD [\"/elasticsearch/bin/elasticsearch\"]\n        RUN /usr/share/elasticsearch/bin/elasticsearch-plugin install x-pack\n        \n        # 使用IK分词器\n        ENV IK_VERSION 5.2.0\n        RUN wget https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v$IK_VERSION/elasticsearch-analysis-ik-$IK_VERSION.zip\n        RUN unzip elasticsearch-analysis-ik-$IK_VERSION.zip -d /usr/share/elasticsearch/plugins/ik/\n        RUN rm -f elasticsearch-analysis-ik-$IK_VERSION.zip\n        \n        # Mount elasticsearch.yml config\n        # This is a tricky problem, x-pack configuration path is /etc/elasticsearch/ which follow the offical document,\n        # but elasticsearch configuration path is /usr/share/elasticsearch/config. I've asked this issue in Github, still waiting for the answer.\n        # for now, just put them under both paths.\n        ADD config /usr/share/elasticsearch/config\n        ADD config /etc/elasticsearch\n        \n        RUN set -ex \\\n        \t&& for path in \\\n        \t\t# /data/elasticsearch \\\n                /etc/elasticsearch \\\n                /data/logs/elasticsearch \\\n        \t; do \\\n        \t\tmkdir -p \"$path\"; \\\n        \t\tchown -R elasticsearch:elasticsearch \"$path\"; \\\n        \tdone\n        \n        CMD [\"elasticsearch\"]\n        \n        # Expose ports.\n        #   - 9200: HTTP\n        #   - 9300: transport\n        EXPOSE 9200\n        EXPOSE 9300\n        \n* `elastcisearch.yml`\n\n        network.host: 0.0.0.0\n        path:\n          data: /usr/share/elasticsearch/data\n          logs: /data/logs/elasticsearch\n        \n        node.name:   assets\n        cluster.name: assets-dev-1\n        \n        xpack.security.audit.enabled: true\n        xpack.security.authc:\n        # Gold 以上 license 才支持 realms，所以此处只能使用匿名用户\n          anonymous:\n            username: anonymous_user\n            roles: assets_rw\n            authz_exception: true\n          \n          # realms:\n          #   file1:\n          #     type: file\n          #     order: 0\n          #     cache.hash_algo: md5\n          #   native1:\n          #     type: native\n          #     order: 1\n    \n* `x-pack/roles.yml`\n\n        assets_rw:\n          run_as: [ 'elastic' ]\n          cluster: [ 'all' ]\n          \"indices\":\n            - names: [ '*' ]\n              privileges: [ 'all' ] \n              \n* `license.json`\n    * 注册地址：`https://www.elastic.co/subscriptions`， 获得Basic License后便可使用 Kibana来监控数据\n    * 安装方法：需跑起来Docker Container后，在服务器执行`curl -XPUT -u elastic 'http://<host>:<port>/_xpack/license' -d @/path/to/license.json` \n\n","source":"_posts/2016-11-17-elasticsearch-01-getstart.md","raw":"---\nlayout: post\ntitle: Get Start - Elasticsearch 学习实践 (1)\ncategory: 编程学习\ntags: [Elasticsearch]\ndate: 2016-11-17\ndescription: Elasticsearch文档学习实践之路\nkeywords: Elasticsearch, 文档, 全文检索, 搜索\n---\n\n## 基本概念\n\n* 索引(indix)： 相当于关系型数据库的数据库。\n* 类型(type)：相当于关系型数据库的表。\n* 文档(Document)： 相当于关系型数据库中的每一行数据记录。\n* 字段(field)：相当于数据类型，例如字符串、整数、日期等。\n* 映射(mapping)： 用于定义文档及其内部属性字段如何被索引及搜索的。\n* 节点(Node)：单台服务器称为一个节点，默认情况下最好配置2+台保证可用性。\n* 分片索引(Shard)：Elasticsearch会把数据分发到多台服务器上存储。这个过程成为分片(Sharding)。\n* 索引副本(Replica)：副本主要是主分片的复制。在搜索请求阻塞在单个节点时，它可以像原来的主分片一样处理用户搜索请求。\n\n## 安装\n\n### 使用 Docker 安装\n\n* 文件目录结构：\n\n        Dockerfile // Docker安装文件\n        config/\n            elasticsearch.yml // Elasticsearch的基本配置\n            license.json // 在官网注册的Basic License\n            x-pack/\n                roles.yml // 定义角色\n\n* `Dockerfile`\n\n        FROM elasticsearch:5.2.0\n        \n        # Define working directory.\n        WORKDIR /tmp\n        \n        # Define default command.\n        # CMD [\"/elasticsearch/bin/elasticsearch\"]\n        RUN /usr/share/elasticsearch/bin/elasticsearch-plugin install x-pack\n        \n        # 使用IK分词器\n        ENV IK_VERSION 5.2.0\n        RUN wget https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v$IK_VERSION/elasticsearch-analysis-ik-$IK_VERSION.zip\n        RUN unzip elasticsearch-analysis-ik-$IK_VERSION.zip -d /usr/share/elasticsearch/plugins/ik/\n        RUN rm -f elasticsearch-analysis-ik-$IK_VERSION.zip\n        \n        # Mount elasticsearch.yml config\n        # This is a tricky problem, x-pack configuration path is /etc/elasticsearch/ which follow the offical document,\n        # but elasticsearch configuration path is /usr/share/elasticsearch/config. I've asked this issue in Github, still waiting for the answer.\n        # for now, just put them under both paths.\n        ADD config /usr/share/elasticsearch/config\n        ADD config /etc/elasticsearch\n        \n        RUN set -ex \\\n        \t&& for path in \\\n        \t\t# /data/elasticsearch \\\n                /etc/elasticsearch \\\n                /data/logs/elasticsearch \\\n        \t; do \\\n        \t\tmkdir -p \"$path\"; \\\n        \t\tchown -R elasticsearch:elasticsearch \"$path\"; \\\n        \tdone\n        \n        CMD [\"elasticsearch\"]\n        \n        # Expose ports.\n        #   - 9200: HTTP\n        #   - 9300: transport\n        EXPOSE 9200\n        EXPOSE 9300\n        \n* `elastcisearch.yml`\n\n        network.host: 0.0.0.0\n        path:\n          data: /usr/share/elasticsearch/data\n          logs: /data/logs/elasticsearch\n        \n        node.name:   assets\n        cluster.name: assets-dev-1\n        \n        xpack.security.audit.enabled: true\n        xpack.security.authc:\n        # Gold 以上 license 才支持 realms，所以此处只能使用匿名用户\n          anonymous:\n            username: anonymous_user\n            roles: assets_rw\n            authz_exception: true\n          \n          # realms:\n          #   file1:\n          #     type: file\n          #     order: 0\n          #     cache.hash_algo: md5\n          #   native1:\n          #     type: native\n          #     order: 1\n    \n* `x-pack/roles.yml`\n\n        assets_rw:\n          run_as: [ 'elastic' ]\n          cluster: [ 'all' ]\n          \"indices\":\n            - names: [ '*' ]\n              privileges: [ 'all' ] \n              \n* `license.json`\n    * 注册地址：`https://www.elastic.co/subscriptions`， 获得Basic License后便可使用 Kibana来监控数据\n    * 安装方法：需跑起来Docker Container后，在服务器执行`curl -XPUT -u elastic 'http://<host>:<port>/_xpack/license' -d @/path/to/license.json` \n\n","slug":"2016-11-17-elasticsearch-01-getstart","published":1,"updated":"2022-02-12T20:53:10.504Z","comments":1,"photos":[],"link":"","_id":"ckzkc92xd001coqoxgt67h7ww","content":"<h2 id=\"基本概念\"><a href=\"#基本概念\" class=\"headerlink\" title=\"基本概念\"></a>基本概念</h2><ul>\n<li>索引(indix)： 相当于关系型数据库的数据库。</li>\n<li>类型(type)：相当于关系型数据库的表。</li>\n<li>文档(Document)： 相当于关系型数据库中的每一行数据记录。</li>\n<li>字段(field)：相当于数据类型，例如字符串、整数、日期等。</li>\n<li>映射(mapping)： 用于定义文档及其内部属性字段如何被索引及搜索的。</li>\n<li>节点(Node)：单台服务器称为一个节点，默认情况下最好配置2+台保证可用性。</li>\n<li>分片索引(Shard)：Elasticsearch会把数据分发到多台服务器上存储。这个过程成为分片(Sharding)。</li>\n<li>索引副本(Replica)：副本主要是主分片的复制。在搜索请求阻塞在单个节点时，它可以像原来的主分片一样处理用户搜索请求。</li>\n</ul>\n<h2 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h2><h3 id=\"使用-Docker-安装\"><a href=\"#使用-Docker-安装\" class=\"headerlink\" title=\"使用 Docker 安装\"></a>使用 Docker 安装</h3><ul>\n<li><p>文件目录结构：</p>\n<pre><code>  Dockerfile // Docker安装文件\n  config/\n      elasticsearch.yml // Elasticsearch的基本配置\n      license.json // 在官网注册的Basic License\n      x-pack/\n          roles.yml // 定义角色\n</code></pre>\n</li>\n<li><p><code>Dockerfile</code></p>\n<pre><code>  FROM elasticsearch:5.2.0\n  \n  # Define working directory.\n  WORKDIR /tmp\n  \n  # Define default command.\n  # CMD [&quot;/elasticsearch/bin/elasticsearch&quot;]\n  RUN /usr/share/elasticsearch/bin/elasticsearch-plugin install x-pack\n  \n  # 使用IK分词器\n  ENV IK_VERSION 5.2.0\n  RUN wget https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v$IK_VERSION/elasticsearch-analysis-ik-$IK_VERSION.zip\n  RUN unzip elasticsearch-analysis-ik-$IK_VERSION.zip -d /usr/share/elasticsearch/plugins/ik/\n  RUN rm -f elasticsearch-analysis-ik-$IK_VERSION.zip\n  \n  # Mount elasticsearch.yml config\n  # This is a tricky problem, x-pack configuration path is /etc/elasticsearch/ which follow the offical document,\n  # but elasticsearch configuration path is /usr/share/elasticsearch/config. I&#39;ve asked this issue in Github, still waiting for the answer.\n  # for now, just put them under both paths.\n  ADD config /usr/share/elasticsearch/config\n  ADD config /etc/elasticsearch\n  \n  RUN set -ex \\\n      &amp;&amp; for path in \\\n          # /data/elasticsearch \\\n          /etc/elasticsearch \\\n          /data/logs/elasticsearch \\\n      ; do \\\n          mkdir -p &quot;$path&quot;; \\\n          chown -R elasticsearch:elasticsearch &quot;$path&quot;; \\\n      done\n  \n  CMD [&quot;elasticsearch&quot;]\n  \n  # Expose ports.\n  #   - 9200: HTTP\n  #   - 9300: transport\n  EXPOSE 9200\n  EXPOSE 9300\n  \n</code></pre>\n</li>\n<li><p><code>elastcisearch.yml</code></p>\n<pre><code>  network.host: 0.0.0.0\n  path:\n    data: /usr/share/elasticsearch/data\n    logs: /data/logs/elasticsearch\n  \n  node.name:   assets\n  cluster.name: assets-dev-1\n  \n  xpack.security.audit.enabled: true\n  xpack.security.authc:\n  # Gold 以上 license 才支持 realms，所以此处只能使用匿名用户\n    anonymous:\n      username: anonymous_user\n      roles: assets_rw\n      authz_exception: true\n    \n    # realms:\n    #   file1:\n    #     type: file\n    #     order: 0\n    #     cache.hash_algo: md5\n    #   native1:\n    #     type: native\n    #     order: 1\n</code></pre>\n</li>\n<li><p><code>x-pack/roles.yml</code></p>\n<pre><code>  assets_rw:\n    run_as: [ &#39;elastic&#39; ]\n    cluster: [ &#39;all&#39; ]\n    &quot;indices&quot;:\n      - names: [ &#39;*&#39; ]\n        privileges: [ &#39;all&#39; ] \n        \n</code></pre>\n</li>\n<li><p><code>license.json</code></p>\n<ul>\n<li>注册地址：<code>https://www.elastic.co/subscriptions</code>， 获得Basic License后便可使用 Kibana来监控数据</li>\n<li>安装方法：需跑起来Docker Container后，在服务器执行<code>curl -XPUT -u elastic &#39;http://&lt;host&gt;:&lt;port&gt;/_xpack/license&#39; -d @/path/to/license.json</code></li>\n</ul>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"基本概念\"><a href=\"#基本概念\" class=\"headerlink\" title=\"基本概念\"></a>基本概念</h2><ul>\n<li>索引(indix)： 相当于关系型数据库的数据库。</li>\n<li>类型(type)：相当于关系型数据库的表。</li>\n<li>文档(Document)： 相当于关系型数据库中的每一行数据记录。</li>\n<li>字段(field)：相当于数据类型，例如字符串、整数、日期等。</li>\n<li>映射(mapping)： 用于定义文档及其内部属性字段如何被索引及搜索的。</li>\n<li>节点(Node)：单台服务器称为一个节点，默认情况下最好配置2+台保证可用性。</li>\n<li>分片索引(Shard)：Elasticsearch会把数据分发到多台服务器上存储。这个过程成为分片(Sharding)。</li>\n<li>索引副本(Replica)：副本主要是主分片的复制。在搜索请求阻塞在单个节点时，它可以像原来的主分片一样处理用户搜索请求。</li>\n</ul>\n<h2 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h2><h3 id=\"使用-Docker-安装\"><a href=\"#使用-Docker-安装\" class=\"headerlink\" title=\"使用 Docker 安装\"></a>使用 Docker 安装</h3><ul>\n<li><p>文件目录结构：</p>\n<pre><code>  Dockerfile // Docker安装文件\n  config/\n      elasticsearch.yml // Elasticsearch的基本配置\n      license.json // 在官网注册的Basic License\n      x-pack/\n          roles.yml // 定义角色\n</code></pre>\n</li>\n<li><p><code>Dockerfile</code></p>\n<pre><code>  FROM elasticsearch:5.2.0\n  \n  # Define working directory.\n  WORKDIR /tmp\n  \n  # Define default command.\n  # CMD [&quot;/elasticsearch/bin/elasticsearch&quot;]\n  RUN /usr/share/elasticsearch/bin/elasticsearch-plugin install x-pack\n  \n  # 使用IK分词器\n  ENV IK_VERSION 5.2.0\n  RUN wget https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v$IK_VERSION/elasticsearch-analysis-ik-$IK_VERSION.zip\n  RUN unzip elasticsearch-analysis-ik-$IK_VERSION.zip -d /usr/share/elasticsearch/plugins/ik/\n  RUN rm -f elasticsearch-analysis-ik-$IK_VERSION.zip\n  \n  # Mount elasticsearch.yml config\n  # This is a tricky problem, x-pack configuration path is /etc/elasticsearch/ which follow the offical document,\n  # but elasticsearch configuration path is /usr/share/elasticsearch/config. I&#39;ve asked this issue in Github, still waiting for the answer.\n  # for now, just put them under both paths.\n  ADD config /usr/share/elasticsearch/config\n  ADD config /etc/elasticsearch\n  \n  RUN set -ex \\\n      &amp;&amp; for path in \\\n          # /data/elasticsearch \\\n          /etc/elasticsearch \\\n          /data/logs/elasticsearch \\\n      ; do \\\n          mkdir -p &quot;$path&quot;; \\\n          chown -R elasticsearch:elasticsearch &quot;$path&quot;; \\\n      done\n  \n  CMD [&quot;elasticsearch&quot;]\n  \n  # Expose ports.\n  #   - 9200: HTTP\n  #   - 9300: transport\n  EXPOSE 9200\n  EXPOSE 9300\n  \n</code></pre>\n</li>\n<li><p><code>elastcisearch.yml</code></p>\n<pre><code>  network.host: 0.0.0.0\n  path:\n    data: /usr/share/elasticsearch/data\n    logs: /data/logs/elasticsearch\n  \n  node.name:   assets\n  cluster.name: assets-dev-1\n  \n  xpack.security.audit.enabled: true\n  xpack.security.authc:\n  # Gold 以上 license 才支持 realms，所以此处只能使用匿名用户\n    anonymous:\n      username: anonymous_user\n      roles: assets_rw\n      authz_exception: true\n    \n    # realms:\n    #   file1:\n    #     type: file\n    #     order: 0\n    #     cache.hash_algo: md5\n    #   native1:\n    #     type: native\n    #     order: 1\n</code></pre>\n</li>\n<li><p><code>x-pack/roles.yml</code></p>\n<pre><code>  assets_rw:\n    run_as: [ &#39;elastic&#39; ]\n    cluster: [ &#39;all&#39; ]\n    &quot;indices&quot;:\n      - names: [ &#39;*&#39; ]\n        privileges: [ &#39;all&#39; ] \n        \n</code></pre>\n</li>\n<li><p><code>license.json</code></p>\n<ul>\n<li>注册地址：<code>https://www.elastic.co/subscriptions</code>， 获得Basic License后便可使用 Kibana来监控数据</li>\n<li>安装方法：需跑起来Docker Container后，在服务器执行<code>curl -XPUT -u elastic &#39;http://&lt;host&gt;:&lt;port&gt;/_xpack/license&#39; -d @/path/to/license.json</code></li>\n</ul>\n</li>\n</ul>\n"},{"layout":"post","title":"提升生产效率的工具集锦(APP)","date":"2016-12-11T05:00:00.000Z","description":null,"keywords":"Alfred 3, Flycut, Flycut, f.lux, Spectacle, CheatSheets, Homebrew, Aria2, Sublime Text 3, iTerm2, Charles, Dash","_content":"\n## 按键说明\n\n* ⌘ – Command Key\n* ⇥ – Tab Key\n* ⌃ – Control Key\n* ⌥ – Option Key\n* ⇧ – Shift Key\n* ⏎ – Return Key\n* ← Left Arrow Key\n* → Right Arrow Key\n\n## APPS\n\n### Alfred 3\n\n强大的启动器, 拥有各种快捷入口, 不仅仅是用来代替Spotlight。增强的workflow更让繁琐的操作变得简单起来。\n\n* 下载: [官网](https://www.alfredapp.com/)\n* Powerpack 需要付费, £19起\n* 可设置启动命令, 本人使用 `⌥+⌘`, 好像是默认的。\n* 本人会禁用掉Spotlight及其索引功能来提升性能:\n   * 打开 系统设置 - Spotlight\n   * 取消掉所有在Spotlight中的搜索结果，以及建议查找的功能\n   * 左下角选择键盘快捷键, 取消两个已选中两个搜索\n\n### Flycut\n\n剪切板管理器\n\n* 下载: [App Store](http://itunes.apple.com/us/app/flycut-clipboard-manager/id442160987?mt=12) / [Github](https://github.com/TermiT/Flycut)\n* 快捷键：`⇧+⌘+p`, 可以不停地按`p`来切换，或者使用`← →`方向键\n* 注：Alfred 3也提供了剪切板的功能，个人觉得不够便捷，在使用Flycut的时候，可以考虑给关了。\n* 可设置为开机启动\n\n### f.lux\n\n护眼神器。根据一天的时间来调节屏幕的亮度，在晚上屏幕会变成暖色调。\n\n* 下载： [官网](https://justgetflux.com/)\n* 可设置为开机启动\n\n### Spectacle\n\n快捷键调节窗口大小，比如: `⌥+⌘+F`全屏, `⌃+⌘+←` 左三分之一屏\n\n* 下载: [官网](https://www.spectacleapp.com/)\n* 可设置为开机启动\n\n### CheatSheets\n\n按住`⌘`显示当前应用的所有快捷键\n\n* 下载: [官网](https://cheatsheetapp.com/CheatSheet/?lang=en)\n\n### Homebrew\n\n快速安装软件的管理器\n\n* 下载: [官网](http://brew.sh/)\n* 安装: `/usr/bin/ruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\"`\n\n### Aria2\n\n实现百度云, 115, 迅雷离线等满速下载。Aria2是个命令行管理工作，所以默认安装后需要做一些配置才能运行。不想折腾的可直接下载[yangshun1029](https://github.com/yangshun1029)封装好的[Aria2gui](https://github.com/yangshun1029/aria2gui).\n\n以下是各种折腾的方案。\n\n* 下载: [官网](https://aria2.github.io/) ／ 安装: `brew install aria2`\n\n* 使用方法有三种。命令行、Web+命令行、Alfred Workflow。\n   * 命令行方面使用可见[官方文档 ](https://aria2.github.io/)\n   * Web和Alfred Workflow管理见下文介绍\n\n* 嵌入式 Chrome 插件: [`115`](https://github.com/acgotaku/115), [`百度云`](https://github.com/acgotaku/BaiduExporter)。 这两个由[`雪月秋水君`](https://github.com/acgotaku/)开发的插件可以直接嵌入百度云和115网盘网页内，实现点击即可转到Aria2下载，非常方便。\n\n* Web 管理界面:\n    1. 首先命令行启动 `aria2c --enable-rpc --rpc-listen-all`\n    2. http://binux.github.io/yaaw/demo/\n        * 需要设置JSON-RPC Path: `http://localhost:6800/jsonrpc`\n    3. 使用[`雪月秋水君`](https://github.com/acgotaku/)开发的Chrome插件: [YAAW](https://github.com/acgotaku/YAAW-for-Chrome)\n\n* Workflow for Alfred: [https://github.com/Wildog/Ariafred](https://github.com/Wildog/Ariafred)\n    * [官方文档](http://wil.dog/ariafred/)\n    * 注: Workflow 属于powerpack付费功能\n    * 常用命令:\n        * 添加任务: 输入 `add` 然后追加任务地址\n            * BT种子任务需要执行文件动作，然后选择`Add BT do...load to Aria2\n        * 移除任务: 输入 `rm` 然后选择任务后 `回车`\n        * 暂停/恢复任务: 输入 `pause`/`resume` 然后选择任务后 `回车`\n        * 清除所有任务: 输入`clear` 然后 `回车`\n* 配置\n    * 个人觉得本地运行没必要搞太复杂就不再多写了。有兴趣的可参照[`雪月秋水君`](https://github.com/acgotaku/)提供的`aria2.conf`:\n\n            #用户名\n            #rpc-user=user\n            #密码\n            #rpc-passwd=passwd\n            #上面的认证方式不建议使用,建议使用下面的token方式\n            #设置加密的密钥\n            #rpc-secret=token\n            #允许rpc\n            enable-rpc=true\n            #允许所有来源, web界面跨域权限需要\n            rpc-allow-origin-all=true\n            #允许外部访问，false的话只监听本地端口\n            rpc-listen-all=true\n            #RPC端口, 仅当默认端口被占用时修改\n            #rpc-listen-port=6800\n            #最大同时下载数(任务数), 路由建议值: 3\n            max-concurrent-downloads=5\n            #断点续传\n            continue=true\n            #同服务器连接数\n            max-connection-per-server=5\n            #最小文件分片大小, 下载线程数上限取决于能分出多少片, 对于小文件重要\n            min-split-size=10M\n            #单文件最大线程数, 路由建议值: 5\n            split=10\n            #下载速度限制\n            max-overall-download-limit=0\n            #单文件速度限制\n            max-download-limit=0\n            #上传速度限制\n            max-overall-upload-limit=0\n            #单文件速度限制\n            max-upload-limit=0\n            #断开速度过慢的连接\n            #lowest-speed-limit=0\n            #验证用，需要1.16.1之后的release版本\n            #referer=*\n            #文件保存路径, 默认为当前启动位置\n            dir=/Users/xxx/Downloads\n            #文件缓存, 使用内置的文件缓存, 如果你不相信Linux内核文件缓存和磁盘内置缓存时使用, 需要1.16及以上版本\n            #disk-cache=0\n            #另一种Linux文件缓存方式, 使用前确保您使用的内核支持此选项, 需要1.15及以上版本(?)\n            #enable-mmap=true\n            #文件预分配, 能有效降低文件碎片, 提高磁盘性能. 缺点是预分配时间较长\n            #所需时间 none < falloc ? trunc « prealloc, falloc和trunc需要文件系统和内核支持\n            file-allocation=prealloc\n    * 在启动Aria2的时候别忘了加上配置的绝对路径，例: `aria2c --conf-path=\"/Users/username/aria2.conf\"`\n\n### 其他\n* 1Password - 最好用的密码管理软件\n* PDF Expert - PDF编辑阅读器\n* Fantisical2 - 增强版日历，集成了提醒事项\n* MWeb - markdown编辑软件，可实时预览，且支持保存到evernote，导出为pdf、docx等格式。此外还支持直接在Wordpress、Mediun等网站发布。\n* Typora - 超简洁等markdown编辑软件，单一窗口，实时预览。\n* OmniFocus 2 - 最强大的GTD管理工具\n* Pandoc -  命令行文件格式互转工具，格式包括docx,markdown, epub, pdf等，官网：[http://pandoc.org/](http://pandoc.org/)\n\n\n","source":"_posts/2016-12-11-be-productive-for-mac-1.md","raw":"---\nlayout: post\ntitle: 提升生产效率的工具集锦(APP)\ncategory: 生活随想\ntags: [效率工具]\ndate: 2016-12-11\ndescription:\nkeywords: Alfred 3, Flycut, Flycut, f.lux, Spectacle, CheatSheets, Homebrew, Aria2, Sublime Text 3, iTerm2, Charles, Dash\n---\n\n## 按键说明\n\n* ⌘ – Command Key\n* ⇥ – Tab Key\n* ⌃ – Control Key\n* ⌥ – Option Key\n* ⇧ – Shift Key\n* ⏎ – Return Key\n* ← Left Arrow Key\n* → Right Arrow Key\n\n## APPS\n\n### Alfred 3\n\n强大的启动器, 拥有各种快捷入口, 不仅仅是用来代替Spotlight。增强的workflow更让繁琐的操作变得简单起来。\n\n* 下载: [官网](https://www.alfredapp.com/)\n* Powerpack 需要付费, £19起\n* 可设置启动命令, 本人使用 `⌥+⌘`, 好像是默认的。\n* 本人会禁用掉Spotlight及其索引功能来提升性能:\n   * 打开 系统设置 - Spotlight\n   * 取消掉所有在Spotlight中的搜索结果，以及建议查找的功能\n   * 左下角选择键盘快捷键, 取消两个已选中两个搜索\n\n### Flycut\n\n剪切板管理器\n\n* 下载: [App Store](http://itunes.apple.com/us/app/flycut-clipboard-manager/id442160987?mt=12) / [Github](https://github.com/TermiT/Flycut)\n* 快捷键：`⇧+⌘+p`, 可以不停地按`p`来切换，或者使用`← →`方向键\n* 注：Alfred 3也提供了剪切板的功能，个人觉得不够便捷，在使用Flycut的时候，可以考虑给关了。\n* 可设置为开机启动\n\n### f.lux\n\n护眼神器。根据一天的时间来调节屏幕的亮度，在晚上屏幕会变成暖色调。\n\n* 下载： [官网](https://justgetflux.com/)\n* 可设置为开机启动\n\n### Spectacle\n\n快捷键调节窗口大小，比如: `⌥+⌘+F`全屏, `⌃+⌘+←` 左三分之一屏\n\n* 下载: [官网](https://www.spectacleapp.com/)\n* 可设置为开机启动\n\n### CheatSheets\n\n按住`⌘`显示当前应用的所有快捷键\n\n* 下载: [官网](https://cheatsheetapp.com/CheatSheet/?lang=en)\n\n### Homebrew\n\n快速安装软件的管理器\n\n* 下载: [官网](http://brew.sh/)\n* 安装: `/usr/bin/ruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\"`\n\n### Aria2\n\n实现百度云, 115, 迅雷离线等满速下载。Aria2是个命令行管理工作，所以默认安装后需要做一些配置才能运行。不想折腾的可直接下载[yangshun1029](https://github.com/yangshun1029)封装好的[Aria2gui](https://github.com/yangshun1029/aria2gui).\n\n以下是各种折腾的方案。\n\n* 下载: [官网](https://aria2.github.io/) ／ 安装: `brew install aria2`\n\n* 使用方法有三种。命令行、Web+命令行、Alfred Workflow。\n   * 命令行方面使用可见[官方文档 ](https://aria2.github.io/)\n   * Web和Alfred Workflow管理见下文介绍\n\n* 嵌入式 Chrome 插件: [`115`](https://github.com/acgotaku/115), [`百度云`](https://github.com/acgotaku/BaiduExporter)。 这两个由[`雪月秋水君`](https://github.com/acgotaku/)开发的插件可以直接嵌入百度云和115网盘网页内，实现点击即可转到Aria2下载，非常方便。\n\n* Web 管理界面:\n    1. 首先命令行启动 `aria2c --enable-rpc --rpc-listen-all`\n    2. http://binux.github.io/yaaw/demo/\n        * 需要设置JSON-RPC Path: `http://localhost:6800/jsonrpc`\n    3. 使用[`雪月秋水君`](https://github.com/acgotaku/)开发的Chrome插件: [YAAW](https://github.com/acgotaku/YAAW-for-Chrome)\n\n* Workflow for Alfred: [https://github.com/Wildog/Ariafred](https://github.com/Wildog/Ariafred)\n    * [官方文档](http://wil.dog/ariafred/)\n    * 注: Workflow 属于powerpack付费功能\n    * 常用命令:\n        * 添加任务: 输入 `add` 然后追加任务地址\n            * BT种子任务需要执行文件动作，然后选择`Add BT do...load to Aria2\n        * 移除任务: 输入 `rm` 然后选择任务后 `回车`\n        * 暂停/恢复任务: 输入 `pause`/`resume` 然后选择任务后 `回车`\n        * 清除所有任务: 输入`clear` 然后 `回车`\n* 配置\n    * 个人觉得本地运行没必要搞太复杂就不再多写了。有兴趣的可参照[`雪月秋水君`](https://github.com/acgotaku/)提供的`aria2.conf`:\n\n            #用户名\n            #rpc-user=user\n            #密码\n            #rpc-passwd=passwd\n            #上面的认证方式不建议使用,建议使用下面的token方式\n            #设置加密的密钥\n            #rpc-secret=token\n            #允许rpc\n            enable-rpc=true\n            #允许所有来源, web界面跨域权限需要\n            rpc-allow-origin-all=true\n            #允许外部访问，false的话只监听本地端口\n            rpc-listen-all=true\n            #RPC端口, 仅当默认端口被占用时修改\n            #rpc-listen-port=6800\n            #最大同时下载数(任务数), 路由建议值: 3\n            max-concurrent-downloads=5\n            #断点续传\n            continue=true\n            #同服务器连接数\n            max-connection-per-server=5\n            #最小文件分片大小, 下载线程数上限取决于能分出多少片, 对于小文件重要\n            min-split-size=10M\n            #单文件最大线程数, 路由建议值: 5\n            split=10\n            #下载速度限制\n            max-overall-download-limit=0\n            #单文件速度限制\n            max-download-limit=0\n            #上传速度限制\n            max-overall-upload-limit=0\n            #单文件速度限制\n            max-upload-limit=0\n            #断开速度过慢的连接\n            #lowest-speed-limit=0\n            #验证用，需要1.16.1之后的release版本\n            #referer=*\n            #文件保存路径, 默认为当前启动位置\n            dir=/Users/xxx/Downloads\n            #文件缓存, 使用内置的文件缓存, 如果你不相信Linux内核文件缓存和磁盘内置缓存时使用, 需要1.16及以上版本\n            #disk-cache=0\n            #另一种Linux文件缓存方式, 使用前确保您使用的内核支持此选项, 需要1.15及以上版本(?)\n            #enable-mmap=true\n            #文件预分配, 能有效降低文件碎片, 提高磁盘性能. 缺点是预分配时间较长\n            #所需时间 none < falloc ? trunc « prealloc, falloc和trunc需要文件系统和内核支持\n            file-allocation=prealloc\n    * 在启动Aria2的时候别忘了加上配置的绝对路径，例: `aria2c --conf-path=\"/Users/username/aria2.conf\"`\n\n### 其他\n* 1Password - 最好用的密码管理软件\n* PDF Expert - PDF编辑阅读器\n* Fantisical2 - 增强版日历，集成了提醒事项\n* MWeb - markdown编辑软件，可实时预览，且支持保存到evernote，导出为pdf、docx等格式。此外还支持直接在Wordpress、Mediun等网站发布。\n* Typora - 超简洁等markdown编辑软件，单一窗口，实时预览。\n* OmniFocus 2 - 最强大的GTD管理工具\n* Pandoc -  命令行文件格式互转工具，格式包括docx,markdown, epub, pdf等，官网：[http://pandoc.org/](http://pandoc.org/)\n\n\n","slug":"2016-12-11-be-productive-for-mac-1","published":1,"updated":"2022-02-12T20:53:10.505Z","comments":1,"photos":[],"link":"","_id":"ckzkc92xd001eoqoxe9ulaz4h","content":"<h2 id=\"按键说明\"><a href=\"#按键说明\" class=\"headerlink\" title=\"按键说明\"></a>按键说明</h2><ul>\n<li>⌘ – Command Key</li>\n<li>⇥ – Tab Key</li>\n<li>⌃ – Control Key</li>\n<li>⌥ – Option Key</li>\n<li>⇧ – Shift Key</li>\n<li>⏎ – Return Key</li>\n<li>← Left Arrow Key</li>\n<li>→ Right Arrow Key</li>\n</ul>\n<h2 id=\"APPS\"><a href=\"#APPS\" class=\"headerlink\" title=\"APPS\"></a>APPS</h2><h3 id=\"Alfred-3\"><a href=\"#Alfred-3\" class=\"headerlink\" title=\"Alfred 3\"></a>Alfred 3</h3><p>强大的启动器, 拥有各种快捷入口, 不仅仅是用来代替Spotlight。增强的workflow更让繁琐的操作变得简单起来。</p>\n<ul>\n<li>下载: <a href=\"https://www.alfredapp.com/\">官网</a></li>\n<li>Powerpack 需要付费, £19起</li>\n<li>可设置启动命令, 本人使用 <code>⌥+⌘</code>, 好像是默认的。</li>\n<li>本人会禁用掉Spotlight及其索引功能来提升性能:<ul>\n<li>打开 系统设置 - Spotlight</li>\n<li>取消掉所有在Spotlight中的搜索结果，以及建议查找的功能</li>\n<li>左下角选择键盘快捷键, 取消两个已选中两个搜索</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Flycut\"><a href=\"#Flycut\" class=\"headerlink\" title=\"Flycut\"></a>Flycut</h3><p>剪切板管理器</p>\n<ul>\n<li>下载: <a href=\"http://itunes.apple.com/us/app/flycut-clipboard-manager/id442160987?mt=12\">App Store</a> &#x2F; <a href=\"https://github.com/TermiT/Flycut\">Github</a></li>\n<li>快捷键：<code>⇧+⌘+p</code>, 可以不停地按<code>p</code>来切换，或者使用<code>← →</code>方向键</li>\n<li>注：Alfred 3也提供了剪切板的功能，个人觉得不够便捷，在使用Flycut的时候，可以考虑给关了。</li>\n<li>可设置为开机启动</li>\n</ul>\n<h3 id=\"f-lux\"><a href=\"#f-lux\" class=\"headerlink\" title=\"f.lux\"></a>f.lux</h3><p>护眼神器。根据一天的时间来调节屏幕的亮度，在晚上屏幕会变成暖色调。</p>\n<ul>\n<li>下载： <a href=\"https://justgetflux.com/\">官网</a></li>\n<li>可设置为开机启动</li>\n</ul>\n<h3 id=\"Spectacle\"><a href=\"#Spectacle\" class=\"headerlink\" title=\"Spectacle\"></a>Spectacle</h3><p>快捷键调节窗口大小，比如: <code>⌥+⌘+F</code>全屏, <code>⌃+⌘+←</code> 左三分之一屏</p>\n<ul>\n<li>下载: <a href=\"https://www.spectacleapp.com/\">官网</a></li>\n<li>可设置为开机启动</li>\n</ul>\n<h3 id=\"CheatSheets\"><a href=\"#CheatSheets\" class=\"headerlink\" title=\"CheatSheets\"></a>CheatSheets</h3><p>按住<code>⌘</code>显示当前应用的所有快捷键</p>\n<ul>\n<li>下载: <a href=\"https://cheatsheetapp.com/CheatSheet/?lang=en\">官网</a></li>\n</ul>\n<h3 id=\"Homebrew\"><a href=\"#Homebrew\" class=\"headerlink\" title=\"Homebrew\"></a>Homebrew</h3><p>快速安装软件的管理器</p>\n<ul>\n<li>下载: <a href=\"http://brew.sh/\">官网</a></li>\n<li>安装: <code>/usr/bin/ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot;</code></li>\n</ul>\n<h3 id=\"Aria2\"><a href=\"#Aria2\" class=\"headerlink\" title=\"Aria2\"></a>Aria2</h3><p>实现百度云, 115, 迅雷离线等满速下载。Aria2是个命令行管理工作，所以默认安装后需要做一些配置才能运行。不想折腾的可直接下载<a href=\"https://github.com/yangshun1029\">yangshun1029</a>封装好的<a href=\"https://github.com/yangshun1029/aria2gui\">Aria2gui</a>.</p>\n<p>以下是各种折腾的方案。</p>\n<ul>\n<li><p>下载: <a href=\"https://aria2.github.io/\">官网</a> ／ 安装: <code>brew install aria2</code></p>\n</li>\n<li><p>使用方法有三种。命令行、Web+命令行、Alfred Workflow。</p>\n<ul>\n<li>命令行方面使用可见<a href=\"https://aria2.github.io/\">官方文档 </a></li>\n<li>Web和Alfred Workflow管理见下文介绍</li>\n</ul>\n</li>\n<li><p>嵌入式 Chrome 插件: <a href=\"https://github.com/acgotaku/115\"><code>115</code></a>, <a href=\"https://github.com/acgotaku/BaiduExporter\"><code>百度云</code></a>。 这两个由<a href=\"https://github.com/acgotaku/\"><code>雪月秋水君</code></a>开发的插件可以直接嵌入百度云和115网盘网页内，实现点击即可转到Aria2下载，非常方便。</p>\n</li>\n<li><p>Web 管理界面:</p>\n<ol>\n<li>首先命令行启动 <code>aria2c --enable-rpc --rpc-listen-all</code></li>\n<li><a href=\"http://binux.github.io/yaaw/demo/\">http://binux.github.io/yaaw/demo/</a><ul>\n<li>需要设置JSON-RPC Path: <code>http://localhost:6800/jsonrpc</code></li>\n</ul>\n</li>\n<li>使用<a href=\"https://github.com/acgotaku/\"><code>雪月秋水君</code></a>开发的Chrome插件: <a href=\"https://github.com/acgotaku/YAAW-for-Chrome\">YAAW</a></li>\n</ol>\n</li>\n<li><p>Workflow for Alfred: <a href=\"https://github.com/Wildog/Ariafred\">https://github.com/Wildog/Ariafred</a></p>\n<ul>\n<li><a href=\"http://wil.dog/ariafred/\">官方文档</a></li>\n<li>注: Workflow 属于powerpack付费功能</li>\n<li>常用命令:<ul>\n<li>添加任务: 输入 <code>add</code> 然后追加任务地址<ul>\n<li>BT种子任务需要执行文件动作，然后选择&#96;Add BT do…load to Aria2</li>\n</ul>\n</li>\n<li>移除任务: 输入 <code>rm</code> 然后选择任务后 <code>回车</code></li>\n<li>暂停&#x2F;恢复任务: 输入 <code>pause</code>&#x2F;<code>resume</code> 然后选择任务后 <code>回车</code></li>\n<li>清除所有任务: 输入<code>clear</code> 然后 <code>回车</code></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>配置</p>\n<ul>\n<li><p>个人觉得本地运行没必要搞太复杂就不再多写了。有兴趣的可参照<a href=\"https://github.com/acgotaku/\"><code>雪月秋水君</code></a>提供的<code>aria2.conf</code>:</p>\n<pre><code>  #用户名\n  #rpc-user=user\n  #密码\n  #rpc-passwd=passwd\n  #上面的认证方式不建议使用,建议使用下面的token方式\n  #设置加密的密钥\n  #rpc-secret=token\n  #允许rpc\n  enable-rpc=true\n  #允许所有来源, web界面跨域权限需要\n  rpc-allow-origin-all=true\n  #允许外部访问，false的话只监听本地端口\n  rpc-listen-all=true\n  #RPC端口, 仅当默认端口被占用时修改\n  #rpc-listen-port=6800\n  #最大同时下载数(任务数), 路由建议值: 3\n  max-concurrent-downloads=5\n  #断点续传\n  continue=true\n  #同服务器连接数\n  max-connection-per-server=5\n  #最小文件分片大小, 下载线程数上限取决于能分出多少片, 对于小文件重要\n  min-split-size=10M\n  #单文件最大线程数, 路由建议值: 5\n  split=10\n  #下载速度限制\n  max-overall-download-limit=0\n  #单文件速度限制\n  max-download-limit=0\n  #上传速度限制\n  max-overall-upload-limit=0\n  #单文件速度限制\n  max-upload-limit=0\n  #断开速度过慢的连接\n  #lowest-speed-limit=0\n  #验证用，需要1.16.1之后的release版本\n  #referer=*\n  #文件保存路径, 默认为当前启动位置\n  dir=/Users/xxx/Downloads\n  #文件缓存, 使用内置的文件缓存, 如果你不相信Linux内核文件缓存和磁盘内置缓存时使用, 需要1.16及以上版本\n  #disk-cache=0\n  #另一种Linux文件缓存方式, 使用前确保您使用的内核支持此选项, 需要1.15及以上版本(?)\n  #enable-mmap=true\n  #文件预分配, 能有效降低文件碎片, 提高磁盘性能. 缺点是预分配时间较长\n  #所需时间 none &lt; falloc ? trunc « prealloc, falloc和trunc需要文件系统和内核支持\n  file-allocation=prealloc\n</code></pre>\n</li>\n<li><p>在启动Aria2的时候别忘了加上配置的绝对路径，例: <code>aria2c --conf-path=&quot;/Users/username/aria2.conf&quot;</code></p>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"其他\"><a href=\"#其他\" class=\"headerlink\" title=\"其他\"></a>其他</h3><ul>\n<li>1Password - 最好用的密码管理软件</li>\n<li>PDF Expert - PDF编辑阅读器</li>\n<li>Fantisical2 - 增强版日历，集成了提醒事项</li>\n<li>MWeb - markdown编辑软件，可实时预览，且支持保存到evernote，导出为pdf、docx等格式。此外还支持直接在Wordpress、Mediun等网站发布。</li>\n<li>Typora - 超简洁等markdown编辑软件，单一窗口，实时预览。</li>\n<li>OmniFocus 2 - 最强大的GTD管理工具</li>\n<li>Pandoc -  命令行文件格式互转工具，格式包括docx,markdown, epub, pdf等，官网：<a href=\"http://pandoc.org/\">http://pandoc.org/</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"按键说明\"><a href=\"#按键说明\" class=\"headerlink\" title=\"按键说明\"></a>按键说明</h2><ul>\n<li>⌘ – Command Key</li>\n<li>⇥ – Tab Key</li>\n<li>⌃ – Control Key</li>\n<li>⌥ – Option Key</li>\n<li>⇧ – Shift Key</li>\n<li>⏎ – Return Key</li>\n<li>← Left Arrow Key</li>\n<li>→ Right Arrow Key</li>\n</ul>\n<h2 id=\"APPS\"><a href=\"#APPS\" class=\"headerlink\" title=\"APPS\"></a>APPS</h2><h3 id=\"Alfred-3\"><a href=\"#Alfred-3\" class=\"headerlink\" title=\"Alfred 3\"></a>Alfred 3</h3><p>强大的启动器, 拥有各种快捷入口, 不仅仅是用来代替Spotlight。增强的workflow更让繁琐的操作变得简单起来。</p>\n<ul>\n<li>下载: <a href=\"https://www.alfredapp.com/\">官网</a></li>\n<li>Powerpack 需要付费, £19起</li>\n<li>可设置启动命令, 本人使用 <code>⌥+⌘</code>, 好像是默认的。</li>\n<li>本人会禁用掉Spotlight及其索引功能来提升性能:<ul>\n<li>打开 系统设置 - Spotlight</li>\n<li>取消掉所有在Spotlight中的搜索结果，以及建议查找的功能</li>\n<li>左下角选择键盘快捷键, 取消两个已选中两个搜索</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Flycut\"><a href=\"#Flycut\" class=\"headerlink\" title=\"Flycut\"></a>Flycut</h3><p>剪切板管理器</p>\n<ul>\n<li>下载: <a href=\"http://itunes.apple.com/us/app/flycut-clipboard-manager/id442160987?mt=12\">App Store</a> &#x2F; <a href=\"https://github.com/TermiT/Flycut\">Github</a></li>\n<li>快捷键：<code>⇧+⌘+p</code>, 可以不停地按<code>p</code>来切换，或者使用<code>← →</code>方向键</li>\n<li>注：Alfred 3也提供了剪切板的功能，个人觉得不够便捷，在使用Flycut的时候，可以考虑给关了。</li>\n<li>可设置为开机启动</li>\n</ul>\n<h3 id=\"f-lux\"><a href=\"#f-lux\" class=\"headerlink\" title=\"f.lux\"></a>f.lux</h3><p>护眼神器。根据一天的时间来调节屏幕的亮度，在晚上屏幕会变成暖色调。</p>\n<ul>\n<li>下载： <a href=\"https://justgetflux.com/\">官网</a></li>\n<li>可设置为开机启动</li>\n</ul>\n<h3 id=\"Spectacle\"><a href=\"#Spectacle\" class=\"headerlink\" title=\"Spectacle\"></a>Spectacle</h3><p>快捷键调节窗口大小，比如: <code>⌥+⌘+F</code>全屏, <code>⌃+⌘+←</code> 左三分之一屏</p>\n<ul>\n<li>下载: <a href=\"https://www.spectacleapp.com/\">官网</a></li>\n<li>可设置为开机启动</li>\n</ul>\n<h3 id=\"CheatSheets\"><a href=\"#CheatSheets\" class=\"headerlink\" title=\"CheatSheets\"></a>CheatSheets</h3><p>按住<code>⌘</code>显示当前应用的所有快捷键</p>\n<ul>\n<li>下载: <a href=\"https://cheatsheetapp.com/CheatSheet/?lang=en\">官网</a></li>\n</ul>\n<h3 id=\"Homebrew\"><a href=\"#Homebrew\" class=\"headerlink\" title=\"Homebrew\"></a>Homebrew</h3><p>快速安装软件的管理器</p>\n<ul>\n<li>下载: <a href=\"http://brew.sh/\">官网</a></li>\n<li>安装: <code>/usr/bin/ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot;</code></li>\n</ul>\n<h3 id=\"Aria2\"><a href=\"#Aria2\" class=\"headerlink\" title=\"Aria2\"></a>Aria2</h3><p>实现百度云, 115, 迅雷离线等满速下载。Aria2是个命令行管理工作，所以默认安装后需要做一些配置才能运行。不想折腾的可直接下载<a href=\"https://github.com/yangshun1029\">yangshun1029</a>封装好的<a href=\"https://github.com/yangshun1029/aria2gui\">Aria2gui</a>.</p>\n<p>以下是各种折腾的方案。</p>\n<ul>\n<li><p>下载: <a href=\"https://aria2.github.io/\">官网</a> ／ 安装: <code>brew install aria2</code></p>\n</li>\n<li><p>使用方法有三种。命令行、Web+命令行、Alfred Workflow。</p>\n<ul>\n<li>命令行方面使用可见<a href=\"https://aria2.github.io/\">官方文档 </a></li>\n<li>Web和Alfred Workflow管理见下文介绍</li>\n</ul>\n</li>\n<li><p>嵌入式 Chrome 插件: <a href=\"https://github.com/acgotaku/115\"><code>115</code></a>, <a href=\"https://github.com/acgotaku/BaiduExporter\"><code>百度云</code></a>。 这两个由<a href=\"https://github.com/acgotaku/\"><code>雪月秋水君</code></a>开发的插件可以直接嵌入百度云和115网盘网页内，实现点击即可转到Aria2下载，非常方便。</p>\n</li>\n<li><p>Web 管理界面:</p>\n<ol>\n<li>首先命令行启动 <code>aria2c --enable-rpc --rpc-listen-all</code></li>\n<li><a href=\"http://binux.github.io/yaaw/demo/\">http://binux.github.io/yaaw/demo/</a><ul>\n<li>需要设置JSON-RPC Path: <code>http://localhost:6800/jsonrpc</code></li>\n</ul>\n</li>\n<li>使用<a href=\"https://github.com/acgotaku/\"><code>雪月秋水君</code></a>开发的Chrome插件: <a href=\"https://github.com/acgotaku/YAAW-for-Chrome\">YAAW</a></li>\n</ol>\n</li>\n<li><p>Workflow for Alfred: <a href=\"https://github.com/Wildog/Ariafred\">https://github.com/Wildog/Ariafred</a></p>\n<ul>\n<li><a href=\"http://wil.dog/ariafred/\">官方文档</a></li>\n<li>注: Workflow 属于powerpack付费功能</li>\n<li>常用命令:<ul>\n<li>添加任务: 输入 <code>add</code> 然后追加任务地址<ul>\n<li>BT种子任务需要执行文件动作，然后选择&#96;Add BT do…load to Aria2</li>\n</ul>\n</li>\n<li>移除任务: 输入 <code>rm</code> 然后选择任务后 <code>回车</code></li>\n<li>暂停&#x2F;恢复任务: 输入 <code>pause</code>&#x2F;<code>resume</code> 然后选择任务后 <code>回车</code></li>\n<li>清除所有任务: 输入<code>clear</code> 然后 <code>回车</code></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>配置</p>\n<ul>\n<li><p>个人觉得本地运行没必要搞太复杂就不再多写了。有兴趣的可参照<a href=\"https://github.com/acgotaku/\"><code>雪月秋水君</code></a>提供的<code>aria2.conf</code>:</p>\n<pre><code>  #用户名\n  #rpc-user=user\n  #密码\n  #rpc-passwd=passwd\n  #上面的认证方式不建议使用,建议使用下面的token方式\n  #设置加密的密钥\n  #rpc-secret=token\n  #允许rpc\n  enable-rpc=true\n  #允许所有来源, web界面跨域权限需要\n  rpc-allow-origin-all=true\n  #允许外部访问，false的话只监听本地端口\n  rpc-listen-all=true\n  #RPC端口, 仅当默认端口被占用时修改\n  #rpc-listen-port=6800\n  #最大同时下载数(任务数), 路由建议值: 3\n  max-concurrent-downloads=5\n  #断点续传\n  continue=true\n  #同服务器连接数\n  max-connection-per-server=5\n  #最小文件分片大小, 下载线程数上限取决于能分出多少片, 对于小文件重要\n  min-split-size=10M\n  #单文件最大线程数, 路由建议值: 5\n  split=10\n  #下载速度限制\n  max-overall-download-limit=0\n  #单文件速度限制\n  max-download-limit=0\n  #上传速度限制\n  max-overall-upload-limit=0\n  #单文件速度限制\n  max-upload-limit=0\n  #断开速度过慢的连接\n  #lowest-speed-limit=0\n  #验证用，需要1.16.1之后的release版本\n  #referer=*\n  #文件保存路径, 默认为当前启动位置\n  dir=/Users/xxx/Downloads\n  #文件缓存, 使用内置的文件缓存, 如果你不相信Linux内核文件缓存和磁盘内置缓存时使用, 需要1.16及以上版本\n  #disk-cache=0\n  #另一种Linux文件缓存方式, 使用前确保您使用的内核支持此选项, 需要1.15及以上版本(?)\n  #enable-mmap=true\n  #文件预分配, 能有效降低文件碎片, 提高磁盘性能. 缺点是预分配时间较长\n  #所需时间 none &lt; falloc ? trunc « prealloc, falloc和trunc需要文件系统和内核支持\n  file-allocation=prealloc\n</code></pre>\n</li>\n<li><p>在启动Aria2的时候别忘了加上配置的绝对路径，例: <code>aria2c --conf-path=&quot;/Users/username/aria2.conf&quot;</code></p>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"其他\"><a href=\"#其他\" class=\"headerlink\" title=\"其他\"></a>其他</h3><ul>\n<li>1Password - 最好用的密码管理软件</li>\n<li>PDF Expert - PDF编辑阅读器</li>\n<li>Fantisical2 - 增强版日历，集成了提醒事项</li>\n<li>MWeb - markdown编辑软件，可实时预览，且支持保存到evernote，导出为pdf、docx等格式。此外还支持直接在Wordpress、Mediun等网站发布。</li>\n<li>Typora - 超简洁等markdown编辑软件，单一窗口，实时预览。</li>\n<li>OmniFocus 2 - 最强大的GTD管理工具</li>\n<li>Pandoc -  命令行文件格式互转工具，格式包括docx,markdown, epub, pdf等，官网：<a href=\"http://pandoc.org/\">http://pandoc.org/</a></li>\n</ul>\n"},{"layout":"post","title":"Elasticsearch Mapping - Elasticsearch 学习实践 (2)","date":"2016-11-17T05:00:00.000Z","description":"Elasticsearch文档学习实践之路","keywords":"Elasticsearch, Documents, 文档, 全文检索, 搜索","_content":"\n# Mapping\n\n* Mapping是用于定义文档及其内部属性字段如何被索引及搜索的。\n\n## 系统字段\n\n* 首先了解下系统特别制定的字段及其用法。\n\n### 结构定位字段\n\n* _index: 类似数据库的库名\n* _type: 类似数据库的表名\n* _id: 类似数据库中每条数据的ID\n* _uid: 结构是`{type}#{id}`，可用于直接准确查询某条数据\n\n### 文档数据字段\n\n* _source: 原始数据JSON\n* _size: 原始数据JSON的大小\n\n### 可用于索引查询的字段\n\n* _all: 将`_source`数据用空格切分保存后作索引（不建议保存，影响性能）\n* _field_names: 用于是否包含某字段查询\n\n### 路由字段\n\n* _parent: 用于在两种数据类型之间创建父子关系\n* _routing: 用于路由到特定的分片(shard)\n\n### 其他字段\n\n* _meta: 用于存储特定的信息，比如有效版本号、可调用的类函数等\n\n## 用户定义字段\n\n* 定义用户索引的文档字段属性，系统本身是提供动态mapping，也就是说，我们可以在不定义mapping的情况下直接导入，系统会根据用户的第一倒入生成mapping。\n* 但如果文档相对复杂，还是建议完整设置动态mapping来避免异常错误。\n\n* Elasticsearch 为我们提供了常用的字段类型，包括：`text`, `keyword`, `date`, `boolean`, `long`, `integer`, `short`, `byte`, `double`, `float`, `binary`， 复杂点的`array`, `object`, `nested`, 用于定位的`geo_point`, `geo_shape`, 特殊的`ip`, `completion`, `token_count`, `murmur3`, `attachments`, `percolator`。\n\n* 其中需要注意的是\n\n\t* `text`和`keyword`都是string， 前者会被当作文本分析并索引，可用于包含关键词搜索，后者会作为一个整体而被作为完全匹配搜索， 主要用于聚合、排序等功能使用。\n\t* `array` 并非数据类型，仅仅作为数据类型标识。\n\t* `object` 同`array` 仅作为数据类型标识，无任何意义。\n\t* `nested` 等同于`object`数据类型，将数据结构的KEY扁平化如： `\"user.first\" : [ \"alice\", \"john\" ],`\n\n## 常用设置\n\n* `index.mapping.total_fields.limit` 单个索引中字段数量的上限，默认`1000`。\n* `index.mapping.depth.limit` 索引深度， 在数组和对象类型中的层级数量，默认`20`。\n* `index.mapping.nested_fields.limit` 在对象类型中，扁平化的KEY的层级数量，默认`50`。\n\n## 动态mapping\n\n* 系统根据用户的第一次倒入的数据生成mapping。\n\n* `_default_ mapping`: 默认的mapping配置，会被任何新建的mapping继承。\n\n* 以下是JSON字段在保存中默认转换的类型对照： (可配置 `\"{data_type}_detection\": false` 来关闭对应的数据类型检测)\n\n\t\tnull : 不保存\n\t\ttrue／false : boolean\n\t\tfloat : float\n\t\tinteger : long\n\t\tobject : object \n\t\tarray : array\n\t\tdate : 须符合格式 \"yyyy/MM/dd HH:mm:ss Z||yyyy/MM/dd Z\" 的会被自动转换\n\t\tstring : 如果字段不符合date, long, double, text, 会被当作keyword\n\n### 动态模版\n\n* 用户可自定义字段类型检测模版，在倒入数据的时候，根据条件，系统生成对应的mapping配置，示例：\n\n\t\tPUT my_index\n\t\t{\n\t\t  \"mappings\": {\n\t\t    \"my_type\": {\n\t\t      \"dynamic_templates\": [\n\t\t        {\n\t\t          \"integers\": {\n\t\t            \"match_mapping_type\": \"long\",\n\t\t            \"mapping\": {\n\t\t              \"type\": \"integer\"\n\t\t            }\n\t\t          }\n\t\t        },\n\t\t        {\n\t\t          \"strings\": {\n\t\t            \"match_mapping_type\": \"string\",\n\t\t            \"mapping\": {\n\t\t              \"type\": \"text\",\n\t\t              \"fields\": {\n\t\t                \"raw\": {\n\t\t                  \"type\":  \"keyword\",\n\t\t                  \"ignore_above\": 256\n\t\t                }\n\t\t              }\n\t\t            }\n\t\t          }\n\t\t        }\n\t\t      ]\n\t\t    }\n\t\t  }\n\t\t}\n\n\t\tPUT my_index/my_type/1\n\t\t{\n\t\t  \"my_integer\": 5, \n\t\t  \"my_string\": \"Some string\" \n\t\t}\n\n* 示例中，`match_mapping_type` 为条件匹配判断，类型还包含`match`, `match_pattern`, `unmatch`, `path_match`, `path_unmatch`。\n* `mapping` 为匹配字段相应的调整内容。\n* `match`, `unmatch`, `path_match`, `path_unmatch` 可用通配符来作为匹配或排除条件\n* `match_pattern` 可调整`match` 行为来支持正则匹配，如：\n\n\t\"match_pattern\": \"regex\",\n  \t\"match\": \"^profit_\\d+$\"\n\n* 特殊配置\n\n\t* 字段不用于排序的时候可以`\"norms\": false,`来关闭它。\n\t* 字段仅作用于排序聚合而不用于过滤查询的时候可以`\"index\": false`来关闭它。\n\n* 更多示例，可参考官方文档：(dynamic-templates.html) [https://www.elastic.co/guide/en/elasticsearch/reference/current/dynamic-templates.html]\n\n## 另外\n\n* 同一个字段名称的配置在不同的type里边必须包含同样的mapping。除了个别字段，如：`copy_to`, `dynamic`, `enabled`, `ignore_above`, `include_in_all`, `properties`。\n\n官方mapping示例： 没啥好解释的，很简单。具体属性不明白的，查[文档](https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping.html)比较好。\n\n\t\t{\n\t\t  \"mappings\": {\n\t\t    \"user\": { \n\t\t      \"_all\":       { \"enabled\": false  }, \n\t\t      \"properties\": { \n\t\t        \"title\":    { \"type\": \"text\"  }, \n\t\t        \"name\":     { \"type\": \"text\"  }, \n\t\t        \"age\":      { \"type\": \"integer\" }  \n\t\t      }\n\t\t    },\n\t\t    \"blogpost\": { \n\t\t      \"_all\":       { \"enabled\": false  }, \n\t\t      \"properties\": { \n\t\t        \"title\":    { \"type\": \"text\"  }, \n\t\t        \"body\":     { \"type\": \"text\"  }, \n\t\t        \"user_id\":  {\n\t\t          \"type\":   \"keyword\" \n\t\t        },\n\t\t        \"created\":  {\n\t\t          \"type\":   \"date\", \n\t\t          \"format\": \"strict_date_optional_time||epoch_millis\"\n\t\t        }\n\t\t      }\n\t\t    }\n\t\t  }\n\t\t}\n\n\n","source":"_posts/2016-11-17-elasticsearch-02-mapping.md","raw":"---\nlayout: post\ntitle: Elasticsearch Mapping - Elasticsearch 学习实践 (2)\ncategory: 编程学习\ntags: [Elasticsearch]\ndate: 2016-11-17\ndescription: Elasticsearch文档学习实践之路\nkeywords: Elasticsearch, Documents, 文档, 全文检索, 搜索\n---\n\n# Mapping\n\n* Mapping是用于定义文档及其内部属性字段如何被索引及搜索的。\n\n## 系统字段\n\n* 首先了解下系统特别制定的字段及其用法。\n\n### 结构定位字段\n\n* _index: 类似数据库的库名\n* _type: 类似数据库的表名\n* _id: 类似数据库中每条数据的ID\n* _uid: 结构是`{type}#{id}`，可用于直接准确查询某条数据\n\n### 文档数据字段\n\n* _source: 原始数据JSON\n* _size: 原始数据JSON的大小\n\n### 可用于索引查询的字段\n\n* _all: 将`_source`数据用空格切分保存后作索引（不建议保存，影响性能）\n* _field_names: 用于是否包含某字段查询\n\n### 路由字段\n\n* _parent: 用于在两种数据类型之间创建父子关系\n* _routing: 用于路由到特定的分片(shard)\n\n### 其他字段\n\n* _meta: 用于存储特定的信息，比如有效版本号、可调用的类函数等\n\n## 用户定义字段\n\n* 定义用户索引的文档字段属性，系统本身是提供动态mapping，也就是说，我们可以在不定义mapping的情况下直接导入，系统会根据用户的第一倒入生成mapping。\n* 但如果文档相对复杂，还是建议完整设置动态mapping来避免异常错误。\n\n* Elasticsearch 为我们提供了常用的字段类型，包括：`text`, `keyword`, `date`, `boolean`, `long`, `integer`, `short`, `byte`, `double`, `float`, `binary`， 复杂点的`array`, `object`, `nested`, 用于定位的`geo_point`, `geo_shape`, 特殊的`ip`, `completion`, `token_count`, `murmur3`, `attachments`, `percolator`。\n\n* 其中需要注意的是\n\n\t* `text`和`keyword`都是string， 前者会被当作文本分析并索引，可用于包含关键词搜索，后者会作为一个整体而被作为完全匹配搜索， 主要用于聚合、排序等功能使用。\n\t* `array` 并非数据类型，仅仅作为数据类型标识。\n\t* `object` 同`array` 仅作为数据类型标识，无任何意义。\n\t* `nested` 等同于`object`数据类型，将数据结构的KEY扁平化如： `\"user.first\" : [ \"alice\", \"john\" ],`\n\n## 常用设置\n\n* `index.mapping.total_fields.limit` 单个索引中字段数量的上限，默认`1000`。\n* `index.mapping.depth.limit` 索引深度， 在数组和对象类型中的层级数量，默认`20`。\n* `index.mapping.nested_fields.limit` 在对象类型中，扁平化的KEY的层级数量，默认`50`。\n\n## 动态mapping\n\n* 系统根据用户的第一次倒入的数据生成mapping。\n\n* `_default_ mapping`: 默认的mapping配置，会被任何新建的mapping继承。\n\n* 以下是JSON字段在保存中默认转换的类型对照： (可配置 `\"{data_type}_detection\": false` 来关闭对应的数据类型检测)\n\n\t\tnull : 不保存\n\t\ttrue／false : boolean\n\t\tfloat : float\n\t\tinteger : long\n\t\tobject : object \n\t\tarray : array\n\t\tdate : 须符合格式 \"yyyy/MM/dd HH:mm:ss Z||yyyy/MM/dd Z\" 的会被自动转换\n\t\tstring : 如果字段不符合date, long, double, text, 会被当作keyword\n\n### 动态模版\n\n* 用户可自定义字段类型检测模版，在倒入数据的时候，根据条件，系统生成对应的mapping配置，示例：\n\n\t\tPUT my_index\n\t\t{\n\t\t  \"mappings\": {\n\t\t    \"my_type\": {\n\t\t      \"dynamic_templates\": [\n\t\t        {\n\t\t          \"integers\": {\n\t\t            \"match_mapping_type\": \"long\",\n\t\t            \"mapping\": {\n\t\t              \"type\": \"integer\"\n\t\t            }\n\t\t          }\n\t\t        },\n\t\t        {\n\t\t          \"strings\": {\n\t\t            \"match_mapping_type\": \"string\",\n\t\t            \"mapping\": {\n\t\t              \"type\": \"text\",\n\t\t              \"fields\": {\n\t\t                \"raw\": {\n\t\t                  \"type\":  \"keyword\",\n\t\t                  \"ignore_above\": 256\n\t\t                }\n\t\t              }\n\t\t            }\n\t\t          }\n\t\t        }\n\t\t      ]\n\t\t    }\n\t\t  }\n\t\t}\n\n\t\tPUT my_index/my_type/1\n\t\t{\n\t\t  \"my_integer\": 5, \n\t\t  \"my_string\": \"Some string\" \n\t\t}\n\n* 示例中，`match_mapping_type` 为条件匹配判断，类型还包含`match`, `match_pattern`, `unmatch`, `path_match`, `path_unmatch`。\n* `mapping` 为匹配字段相应的调整内容。\n* `match`, `unmatch`, `path_match`, `path_unmatch` 可用通配符来作为匹配或排除条件\n* `match_pattern` 可调整`match` 行为来支持正则匹配，如：\n\n\t\"match_pattern\": \"regex\",\n  \t\"match\": \"^profit_\\d+$\"\n\n* 特殊配置\n\n\t* 字段不用于排序的时候可以`\"norms\": false,`来关闭它。\n\t* 字段仅作用于排序聚合而不用于过滤查询的时候可以`\"index\": false`来关闭它。\n\n* 更多示例，可参考官方文档：(dynamic-templates.html) [https://www.elastic.co/guide/en/elasticsearch/reference/current/dynamic-templates.html]\n\n## 另外\n\n* 同一个字段名称的配置在不同的type里边必须包含同样的mapping。除了个别字段，如：`copy_to`, `dynamic`, `enabled`, `ignore_above`, `include_in_all`, `properties`。\n\n官方mapping示例： 没啥好解释的，很简单。具体属性不明白的，查[文档](https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping.html)比较好。\n\n\t\t{\n\t\t  \"mappings\": {\n\t\t    \"user\": { \n\t\t      \"_all\":       { \"enabled\": false  }, \n\t\t      \"properties\": { \n\t\t        \"title\":    { \"type\": \"text\"  }, \n\t\t        \"name\":     { \"type\": \"text\"  }, \n\t\t        \"age\":      { \"type\": \"integer\" }  \n\t\t      }\n\t\t    },\n\t\t    \"blogpost\": { \n\t\t      \"_all\":       { \"enabled\": false  }, \n\t\t      \"properties\": { \n\t\t        \"title\":    { \"type\": \"text\"  }, \n\t\t        \"body\":     { \"type\": \"text\"  }, \n\t\t        \"user_id\":  {\n\t\t          \"type\":   \"keyword\" \n\t\t        },\n\t\t        \"created\":  {\n\t\t          \"type\":   \"date\", \n\t\t          \"format\": \"strict_date_optional_time||epoch_millis\"\n\t\t        }\n\t\t      }\n\t\t    }\n\t\t  }\n\t\t}\n\n\n","slug":"2016-11-17-elasticsearch-02-mapping","published":1,"updated":"2022-02-12T20:53:10.505Z","comments":1,"photos":[],"link":"","_id":"ckzkc92xe001ioqox4uyk0nnb","content":"<h1 id=\"Mapping\"><a href=\"#Mapping\" class=\"headerlink\" title=\"Mapping\"></a>Mapping</h1><ul>\n<li>Mapping是用于定义文档及其内部属性字段如何被索引及搜索的。</li>\n</ul>\n<h2 id=\"系统字段\"><a href=\"#系统字段\" class=\"headerlink\" title=\"系统字段\"></a>系统字段</h2><ul>\n<li>首先了解下系统特别制定的字段及其用法。</li>\n</ul>\n<h3 id=\"结构定位字段\"><a href=\"#结构定位字段\" class=\"headerlink\" title=\"结构定位字段\"></a>结构定位字段</h3><ul>\n<li>_index: 类似数据库的库名</li>\n<li>_type: 类似数据库的表名</li>\n<li>_id: 类似数据库中每条数据的ID</li>\n<li>_uid: 结构是<code>&#123;type&#125;#&#123;id&#125;</code>，可用于直接准确查询某条数据</li>\n</ul>\n<h3 id=\"文档数据字段\"><a href=\"#文档数据字段\" class=\"headerlink\" title=\"文档数据字段\"></a>文档数据字段</h3><ul>\n<li>_source: 原始数据JSON</li>\n<li>_size: 原始数据JSON的大小</li>\n</ul>\n<h3 id=\"可用于索引查询的字段\"><a href=\"#可用于索引查询的字段\" class=\"headerlink\" title=\"可用于索引查询的字段\"></a>可用于索引查询的字段</h3><ul>\n<li>_all: 将<code>_source</code>数据用空格切分保存后作索引（不建议保存，影响性能）</li>\n<li>_field_names: 用于是否包含某字段查询</li>\n</ul>\n<h3 id=\"路由字段\"><a href=\"#路由字段\" class=\"headerlink\" title=\"路由字段\"></a>路由字段</h3><ul>\n<li>_parent: 用于在两种数据类型之间创建父子关系</li>\n<li>_routing: 用于路由到特定的分片(shard)</li>\n</ul>\n<h3 id=\"其他字段\"><a href=\"#其他字段\" class=\"headerlink\" title=\"其他字段\"></a>其他字段</h3><ul>\n<li>_meta: 用于存储特定的信息，比如有效版本号、可调用的类函数等</li>\n</ul>\n<h2 id=\"用户定义字段\"><a href=\"#用户定义字段\" class=\"headerlink\" title=\"用户定义字段\"></a>用户定义字段</h2><ul>\n<li><p>定义用户索引的文档字段属性，系统本身是提供动态mapping，也就是说，我们可以在不定义mapping的情况下直接导入，系统会根据用户的第一倒入生成mapping。</p>\n</li>\n<li><p>但如果文档相对复杂，还是建议完整设置动态mapping来避免异常错误。</p>\n</li>\n<li><p>Elasticsearch 为我们提供了常用的字段类型，包括：<code>text</code>, <code>keyword</code>, <code>date</code>, <code>boolean</code>, <code>long</code>, <code>integer</code>, <code>short</code>, <code>byte</code>, <code>double</code>, <code>float</code>, <code>binary</code>， 复杂点的<code>array</code>, <code>object</code>, <code>nested</code>, 用于定位的<code>geo_point</code>, <code>geo_shape</code>, 特殊的<code>ip</code>, <code>completion</code>, <code>token_count</code>, <code>murmur3</code>, <code>attachments</code>, <code>percolator</code>。</p>\n</li>\n<li><p>其中需要注意的是</p>\n<ul>\n<li><code>text</code>和<code>keyword</code>都是string， 前者会被当作文本分析并索引，可用于包含关键词搜索，后者会作为一个整体而被作为完全匹配搜索， 主要用于聚合、排序等功能使用。</li>\n<li><code>array</code> 并非数据类型，仅仅作为数据类型标识。</li>\n<li><code>object</code> 同<code>array</code> 仅作为数据类型标识，无任何意义。</li>\n<li><code>nested</code> 等同于<code>object</code>数据类型，将数据结构的KEY扁平化如： <code>&quot;user.first&quot; : [ &quot;alice&quot;, &quot;john&quot; ],</code></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"常用设置\"><a href=\"#常用设置\" class=\"headerlink\" title=\"常用设置\"></a>常用设置</h2><ul>\n<li><code>index.mapping.total_fields.limit</code> 单个索引中字段数量的上限，默认<code>1000</code>。</li>\n<li><code>index.mapping.depth.limit</code> 索引深度， 在数组和对象类型中的层级数量，默认<code>20</code>。</li>\n<li><code>index.mapping.nested_fields.limit</code> 在对象类型中，扁平化的KEY的层级数量，默认<code>50</code>。</li>\n</ul>\n<h2 id=\"动态mapping\"><a href=\"#动态mapping\" class=\"headerlink\" title=\"动态mapping\"></a>动态mapping</h2><ul>\n<li><p>系统根据用户的第一次倒入的数据生成mapping。</p>\n</li>\n<li><p><code>_default_ mapping</code>: 默认的mapping配置，会被任何新建的mapping继承。</p>\n</li>\n<li><p>以下是JSON字段在保存中默认转换的类型对照： (可配置 <code>&quot;&#123;data_type&#125;_detection&quot;: false</code> 来关闭对应的数据类型检测)</p>\n<pre><code>  null : 不保存\n  true／false : boolean\n  float : float\n  integer : long\n  object : object \n  array : array\n  date : 须符合格式 &quot;yyyy/MM/dd HH:mm:ss Z||yyyy/MM/dd Z&quot; 的会被自动转换\n  string : 如果字段不符合date, long, double, text, 会被当作keyword\n</code></pre>\n</li>\n</ul>\n<h3 id=\"动态模版\"><a href=\"#动态模版\" class=\"headerlink\" title=\"动态模版\"></a>动态模版</h3><ul>\n<li><p>用户可自定义字段类型检测模版，在倒入数据的时候，根据条件，系统生成对应的mapping配置，示例：</p>\n<pre><code>  PUT my_index\n  &#123;\n    &quot;mappings&quot;: &#123;\n      &quot;my_type&quot;: &#123;\n        &quot;dynamic_templates&quot;: [\n          &#123;\n            &quot;integers&quot;: &#123;\n              &quot;match_mapping_type&quot;: &quot;long&quot;,\n              &quot;mapping&quot;: &#123;\n                &quot;type&quot;: &quot;integer&quot;\n              &#125;\n            &#125;\n          &#125;,\n          &#123;\n            &quot;strings&quot;: &#123;\n              &quot;match_mapping_type&quot;: &quot;string&quot;,\n              &quot;mapping&quot;: &#123;\n                &quot;type&quot;: &quot;text&quot;,\n                &quot;fields&quot;: &#123;\n                  &quot;raw&quot;: &#123;\n                    &quot;type&quot;:  &quot;keyword&quot;,\n                    &quot;ignore_above&quot;: 256\n                  &#125;\n                &#125;\n              &#125;\n            &#125;\n          &#125;\n        ]\n      &#125;\n    &#125;\n  &#125;\n\n  PUT my_index/my_type/1\n  &#123;\n    &quot;my_integer&quot;: 5, \n    &quot;my_string&quot;: &quot;Some string&quot; \n  &#125;\n</code></pre>\n</li>\n<li><p>示例中，<code>match_mapping_type</code> 为条件匹配判断，类型还包含<code>match</code>, <code>match_pattern</code>, <code>unmatch</code>, <code>path_match</code>, <code>path_unmatch</code>。</p>\n</li>\n<li><p><code>mapping</code> 为匹配字段相应的调整内容。</p>\n</li>\n<li><p><code>match</code>, <code>unmatch</code>, <code>path_match</code>, <code>path_unmatch</code> 可用通配符来作为匹配或排除条件</p>\n</li>\n<li><p><code>match_pattern</code> 可调整<code>match</code> 行为来支持正则匹配，如：</p>\n<p>  “match_pattern”: “regex”,<br>“match”: “^profit_\\d+$”</p>\n</li>\n<li><p>特殊配置</p>\n<ul>\n<li>字段不用于排序的时候可以<code>&quot;norms&quot;: false,</code>来关闭它。</li>\n<li>字段仅作用于排序聚合而不用于过滤查询的时候可以<code>&quot;index&quot;: false</code>来关闭它。</li>\n</ul>\n</li>\n<li><p>更多示例，可参考官方文档：(dynamic-templates.html) [<a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/dynamic-templates.html]\">https://www.elastic.co/guide/en/elasticsearch/reference/current/dynamic-templates.html]</a></p>\n</li>\n</ul>\n<h2 id=\"另外\"><a href=\"#另外\" class=\"headerlink\" title=\"另外\"></a>另外</h2><ul>\n<li>同一个字段名称的配置在不同的type里边必须包含同样的mapping。除了个别字段，如：<code>copy_to</code>, <code>dynamic</code>, <code>enabled</code>, <code>ignore_above</code>, <code>include_in_all</code>, <code>properties</code>。</li>\n</ul>\n<p>官方mapping示例： 没啥好解释的，很简单。具体属性不明白的，查<a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping.html\">文档</a>比较好。</p>\n<pre><code>    &#123;\n      &quot;mappings&quot;: &#123;\n        &quot;user&quot;: &#123; \n          &quot;_all&quot;:       &#123; &quot;enabled&quot;: false  &#125;, \n          &quot;properties&quot;: &#123; \n            &quot;title&quot;:    &#123; &quot;type&quot;: &quot;text&quot;  &#125;, \n            &quot;name&quot;:     &#123; &quot;type&quot;: &quot;text&quot;  &#125;, \n            &quot;age&quot;:      &#123; &quot;type&quot;: &quot;integer&quot; &#125;  \n          &#125;\n        &#125;,\n        &quot;blogpost&quot;: &#123; \n          &quot;_all&quot;:       &#123; &quot;enabled&quot;: false  &#125;, \n          &quot;properties&quot;: &#123; \n            &quot;title&quot;:    &#123; &quot;type&quot;: &quot;text&quot;  &#125;, \n            &quot;body&quot;:     &#123; &quot;type&quot;: &quot;text&quot;  &#125;, \n            &quot;user_id&quot;:  &#123;\n              &quot;type&quot;:   &quot;keyword&quot; \n            &#125;,\n            &quot;created&quot;:  &#123;\n              &quot;type&quot;:   &quot;date&quot;, \n              &quot;format&quot;: &quot;strict_date_optional_time||epoch_millis&quot;\n            &#125;\n          &#125;\n        &#125;\n      &#125;\n    &#125;\n</code></pre>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Mapping\"><a href=\"#Mapping\" class=\"headerlink\" title=\"Mapping\"></a>Mapping</h1><ul>\n<li>Mapping是用于定义文档及其内部属性字段如何被索引及搜索的。</li>\n</ul>\n<h2 id=\"系统字段\"><a href=\"#系统字段\" class=\"headerlink\" title=\"系统字段\"></a>系统字段</h2><ul>\n<li>首先了解下系统特别制定的字段及其用法。</li>\n</ul>\n<h3 id=\"结构定位字段\"><a href=\"#结构定位字段\" class=\"headerlink\" title=\"结构定位字段\"></a>结构定位字段</h3><ul>\n<li>_index: 类似数据库的库名</li>\n<li>_type: 类似数据库的表名</li>\n<li>_id: 类似数据库中每条数据的ID</li>\n<li>_uid: 结构是<code>&#123;type&#125;#&#123;id&#125;</code>，可用于直接准确查询某条数据</li>\n</ul>\n<h3 id=\"文档数据字段\"><a href=\"#文档数据字段\" class=\"headerlink\" title=\"文档数据字段\"></a>文档数据字段</h3><ul>\n<li>_source: 原始数据JSON</li>\n<li>_size: 原始数据JSON的大小</li>\n</ul>\n<h3 id=\"可用于索引查询的字段\"><a href=\"#可用于索引查询的字段\" class=\"headerlink\" title=\"可用于索引查询的字段\"></a>可用于索引查询的字段</h3><ul>\n<li>_all: 将<code>_source</code>数据用空格切分保存后作索引（不建议保存，影响性能）</li>\n<li>_field_names: 用于是否包含某字段查询</li>\n</ul>\n<h3 id=\"路由字段\"><a href=\"#路由字段\" class=\"headerlink\" title=\"路由字段\"></a>路由字段</h3><ul>\n<li>_parent: 用于在两种数据类型之间创建父子关系</li>\n<li>_routing: 用于路由到特定的分片(shard)</li>\n</ul>\n<h3 id=\"其他字段\"><a href=\"#其他字段\" class=\"headerlink\" title=\"其他字段\"></a>其他字段</h3><ul>\n<li>_meta: 用于存储特定的信息，比如有效版本号、可调用的类函数等</li>\n</ul>\n<h2 id=\"用户定义字段\"><a href=\"#用户定义字段\" class=\"headerlink\" title=\"用户定义字段\"></a>用户定义字段</h2><ul>\n<li><p>定义用户索引的文档字段属性，系统本身是提供动态mapping，也就是说，我们可以在不定义mapping的情况下直接导入，系统会根据用户的第一倒入生成mapping。</p>\n</li>\n<li><p>但如果文档相对复杂，还是建议完整设置动态mapping来避免异常错误。</p>\n</li>\n<li><p>Elasticsearch 为我们提供了常用的字段类型，包括：<code>text</code>, <code>keyword</code>, <code>date</code>, <code>boolean</code>, <code>long</code>, <code>integer</code>, <code>short</code>, <code>byte</code>, <code>double</code>, <code>float</code>, <code>binary</code>， 复杂点的<code>array</code>, <code>object</code>, <code>nested</code>, 用于定位的<code>geo_point</code>, <code>geo_shape</code>, 特殊的<code>ip</code>, <code>completion</code>, <code>token_count</code>, <code>murmur3</code>, <code>attachments</code>, <code>percolator</code>。</p>\n</li>\n<li><p>其中需要注意的是</p>\n<ul>\n<li><code>text</code>和<code>keyword</code>都是string， 前者会被当作文本分析并索引，可用于包含关键词搜索，后者会作为一个整体而被作为完全匹配搜索， 主要用于聚合、排序等功能使用。</li>\n<li><code>array</code> 并非数据类型，仅仅作为数据类型标识。</li>\n<li><code>object</code> 同<code>array</code> 仅作为数据类型标识，无任何意义。</li>\n<li><code>nested</code> 等同于<code>object</code>数据类型，将数据结构的KEY扁平化如： <code>&quot;user.first&quot; : [ &quot;alice&quot;, &quot;john&quot; ],</code></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"常用设置\"><a href=\"#常用设置\" class=\"headerlink\" title=\"常用设置\"></a>常用设置</h2><ul>\n<li><code>index.mapping.total_fields.limit</code> 单个索引中字段数量的上限，默认<code>1000</code>。</li>\n<li><code>index.mapping.depth.limit</code> 索引深度， 在数组和对象类型中的层级数量，默认<code>20</code>。</li>\n<li><code>index.mapping.nested_fields.limit</code> 在对象类型中，扁平化的KEY的层级数量，默认<code>50</code>。</li>\n</ul>\n<h2 id=\"动态mapping\"><a href=\"#动态mapping\" class=\"headerlink\" title=\"动态mapping\"></a>动态mapping</h2><ul>\n<li><p>系统根据用户的第一次倒入的数据生成mapping。</p>\n</li>\n<li><p><code>_default_ mapping</code>: 默认的mapping配置，会被任何新建的mapping继承。</p>\n</li>\n<li><p>以下是JSON字段在保存中默认转换的类型对照： (可配置 <code>&quot;&#123;data_type&#125;_detection&quot;: false</code> 来关闭对应的数据类型检测)</p>\n<pre><code>  null : 不保存\n  true／false : boolean\n  float : float\n  integer : long\n  object : object \n  array : array\n  date : 须符合格式 &quot;yyyy/MM/dd HH:mm:ss Z||yyyy/MM/dd Z&quot; 的会被自动转换\n  string : 如果字段不符合date, long, double, text, 会被当作keyword\n</code></pre>\n</li>\n</ul>\n<h3 id=\"动态模版\"><a href=\"#动态模版\" class=\"headerlink\" title=\"动态模版\"></a>动态模版</h3><ul>\n<li><p>用户可自定义字段类型检测模版，在倒入数据的时候，根据条件，系统生成对应的mapping配置，示例：</p>\n<pre><code>  PUT my_index\n  &#123;\n    &quot;mappings&quot;: &#123;\n      &quot;my_type&quot;: &#123;\n        &quot;dynamic_templates&quot;: [\n          &#123;\n            &quot;integers&quot;: &#123;\n              &quot;match_mapping_type&quot;: &quot;long&quot;,\n              &quot;mapping&quot;: &#123;\n                &quot;type&quot;: &quot;integer&quot;\n              &#125;\n            &#125;\n          &#125;,\n          &#123;\n            &quot;strings&quot;: &#123;\n              &quot;match_mapping_type&quot;: &quot;string&quot;,\n              &quot;mapping&quot;: &#123;\n                &quot;type&quot;: &quot;text&quot;,\n                &quot;fields&quot;: &#123;\n                  &quot;raw&quot;: &#123;\n                    &quot;type&quot;:  &quot;keyword&quot;,\n                    &quot;ignore_above&quot;: 256\n                  &#125;\n                &#125;\n              &#125;\n            &#125;\n          &#125;\n        ]\n      &#125;\n    &#125;\n  &#125;\n\n  PUT my_index/my_type/1\n  &#123;\n    &quot;my_integer&quot;: 5, \n    &quot;my_string&quot;: &quot;Some string&quot; \n  &#125;\n</code></pre>\n</li>\n<li><p>示例中，<code>match_mapping_type</code> 为条件匹配判断，类型还包含<code>match</code>, <code>match_pattern</code>, <code>unmatch</code>, <code>path_match</code>, <code>path_unmatch</code>。</p>\n</li>\n<li><p><code>mapping</code> 为匹配字段相应的调整内容。</p>\n</li>\n<li><p><code>match</code>, <code>unmatch</code>, <code>path_match</code>, <code>path_unmatch</code> 可用通配符来作为匹配或排除条件</p>\n</li>\n<li><p><code>match_pattern</code> 可调整<code>match</code> 行为来支持正则匹配，如：</p>\n<p>  “match_pattern”: “regex”,<br>“match”: “^profit_\\d+$”</p>\n</li>\n<li><p>特殊配置</p>\n<ul>\n<li>字段不用于排序的时候可以<code>&quot;norms&quot;: false,</code>来关闭它。</li>\n<li>字段仅作用于排序聚合而不用于过滤查询的时候可以<code>&quot;index&quot;: false</code>来关闭它。</li>\n</ul>\n</li>\n<li><p>更多示例，可参考官方文档：(dynamic-templates.html) [<a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/dynamic-templates.html]\">https://www.elastic.co/guide/en/elasticsearch/reference/current/dynamic-templates.html]</a></p>\n</li>\n</ul>\n<h2 id=\"另外\"><a href=\"#另外\" class=\"headerlink\" title=\"另外\"></a>另外</h2><ul>\n<li>同一个字段名称的配置在不同的type里边必须包含同样的mapping。除了个别字段，如：<code>copy_to</code>, <code>dynamic</code>, <code>enabled</code>, <code>ignore_above</code>, <code>include_in_all</code>, <code>properties</code>。</li>\n</ul>\n<p>官方mapping示例： 没啥好解释的，很简单。具体属性不明白的，查<a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping.html\">文档</a>比较好。</p>\n<pre><code>    &#123;\n      &quot;mappings&quot;: &#123;\n        &quot;user&quot;: &#123; \n          &quot;_all&quot;:       &#123; &quot;enabled&quot;: false  &#125;, \n          &quot;properties&quot;: &#123; \n            &quot;title&quot;:    &#123; &quot;type&quot;: &quot;text&quot;  &#125;, \n            &quot;name&quot;:     &#123; &quot;type&quot;: &quot;text&quot;  &#125;, \n            &quot;age&quot;:      &#123; &quot;type&quot;: &quot;integer&quot; &#125;  \n          &#125;\n        &#125;,\n        &quot;blogpost&quot;: &#123; \n          &quot;_all&quot;:       &#123; &quot;enabled&quot;: false  &#125;, \n          &quot;properties&quot;: &#123; \n            &quot;title&quot;:    &#123; &quot;type&quot;: &quot;text&quot;  &#125;, \n            &quot;body&quot;:     &#123; &quot;type&quot;: &quot;text&quot;  &#125;, \n            &quot;user_id&quot;:  &#123;\n              &quot;type&quot;:   &quot;keyword&quot; \n            &#125;,\n            &quot;created&quot;:  &#123;\n              &quot;type&quot;:   &quot;date&quot;, \n              &quot;format&quot;: &quot;strict_date_optional_time||epoch_millis&quot;\n            &#125;\n          &#125;\n        &#125;\n      &#125;\n    &#125;\n</code></pre>\n"},{"layout":"post","title":"Mac上配置GH60键盘","date":"2016-12-30T05:00:00.000Z","description":"在Mac上编译GH60 RevCHN Firmware","keywords":"Keyboard, Mac, Note","_content":"\n### 安装必要的工具\n\n    brew install Caskroom/cask/crosspack-avr\n    brew install dfu-programmer\n    cd ~\n    git clone --recursive https://github.com/kairyu/tmk_keyboard_custom.git\n    \n* 检查 `avr-gcc` 命令是否可用\n    \n    * 直接在命令行执行 `avr-gcc`, 如果出现command not found, 在命令行执行：\n            \n            PATH=\"/usr/local/CrossPack-AVR/bin:$PATH\"\n            export $PATH\n            \n    * 以上命令是临时把路径 `/usr/local/CrossPack-AVR/bin` 放到 `PATH` 中，关闭Terminal后失效\n\n### 修改配置文件来支持GH60_REV_CHN  \n\n* `cd ./tmk_keyboard_custom/keyboard/gh60`\n* `vi config.h`\n* 找到 `#define CONFIG_H`, 在底下加上 `#define GH60_REV_CHN`\n\n* `vi Makefile`\n* 注释或删掉下面这行代码\n    \n        KEYMAP_IN_EEPROM_ENABLE = yes # Read keymap from eeprom\n    \n### 连接测试键盘\n\n* 连接后输入入下列指令\n\n        system_profiler SPUSBDataType\n\n* 应该会出现：\n\n```\nGH60:\n   Product ID: 0x6060\n   Vendor ID: 0xfeed\n   Version: 0.01\n   Speed: Up to 12 Mb/sec\n   Manufacturer: geekhack\n   Location ID: 0x14400000 / 37\n   Current Available (mA): 500\n   Current Required (mA): 100\n   Extra Operating Current (mA): 0\n```\n* 然后按下键盘背部的按钮\n* 再次执行命令\n    \n        system_profiler SPUSBDataType\n\n* 应该会出现：\n\n```\nATm32U4DFU:\n    Product ID: 0x2ff4\n    Vendor ID: 0x03eb  (Atmel Corporation)\n    Version: 0.00\n    Serial Number: 1.0.0\n    Speed: Up to 12 Mb/sec\n    Manufacturer: ATMEL\n    Location ID: 0x14100000 / 15\n    Current Available (mA): 500\n    Current Required (mA): Unknown (Device has not been configured)\n```\n\n\n\n\n* 可以开始刷配置了，如果没信心，还是先用 poker 的 layout 来试试吧\n\n        poker layout\n\n* 切换到目录 `gh60` 下执行\n\n        make dfu\n\n* 刷出以下内容表示成功\n\n```\nCreating load file for Flash: gh60_lufa.hex\navr-objcopy -O ihex -R .eeprom -R .fuse -R .lock -R .signature gh60_lufa.elf gh60_lufa.hex\ndfu-programmer atmega32u4 erase --force\nErasing flash...  Success\nChecking memory from 0x0 to 0x6FFF...  Empty.\ndfu-programmer atmega32u4 flash gh60_lufa.hex\nChecking memory from 0x0 to 0x61FF...  Empty.\n0%                            100%  Programming 0x6200 bytes...\n[>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>]  Success\n0%                            100%  Reading 0x7000 bytes...\n[>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>]  Success\nValidating...  Success\n0x6200 bytes written into 0x7000 bytes memory (87.50%).\ndfu-programmer atmega32u4 reset\n```\n\n### 开始制作自己的layout\n\n* [http://www.keyboard-layout-editor.com/](http://www.keyboard-layout-editor.com/) 生成raw data\n* [https://yang.hging.net/tkg/](https://yang.hging.net/tkg/) 把raw data生成`.c`文件\n* 参考[dm4](http://blog.dm4.tw/blog/2015/03/17/build-gh60-revchn-on-mac/)设计的layout，觉得不错稍加改了下:\n    \n    * Layer 0 (Default)\n        \n            http://www.keyboard-layout-editor.com/#/gists/907d4f327ee92188cb929044ec186c39\n\n    * Layer 1 (Fn0层)\n\n            http://www.keyboard-layout-editor.com/#/gists/a460aca35c9eedab94433f6c297ef94c\n\n    * keymap generator 的设定\n        \n            Keyboard - GH60 (RevCHN)\n            Layer Mode - Normal\n            Number of Layers - 2\n            Layer0 - Default\n            Layer1 - Function layer\n            Fn - Layer action > Momentary layer 1\n\n    * Fn Momentary layer 1 的意思就是当 fn 按下时是 layer 1 的 keymap 但不按 fn 时就关掉 layer1\n\n    * 下载 `.c` 文件, 把名字改成 `keymap_tkg.c`\n\n    * 放到 `gh60` 目录下边\n\n    * 执行 `make KEYMAP=tkg dfu`\n\n### Done\n\n### 记录下现有的问题\n\n* `Fn+RCommand+Delete 连按几下会导致 Command 键按下事件，每次再按其他键的时候都成了Command+键的效果。现在的解决方案就是重新多按几个那个组合。。。。\n\n### Refer to\n\n* http://blog.dm4.tw/blog/2015/03/17/build-gh60-revchn-on-mac/\n* https://www.ptt.cc/bbs/Key_Mou_Pad/M.1430970988.A.4D9.html\n\n","source":"_posts/2016-12-30-keyboard-conf.md","raw":"---\nlayout: post\ntitle: Mac上配置GH60键盘\ncategory: 生活随想\ntags: [效率工具, Mac, 键盘]\ndate: 2016-12-30\ndescription: 在Mac上编译GH60 RevCHN Firmware\nkeywords: Keyboard, Mac, Note\n---\n\n### 安装必要的工具\n\n    brew install Caskroom/cask/crosspack-avr\n    brew install dfu-programmer\n    cd ~\n    git clone --recursive https://github.com/kairyu/tmk_keyboard_custom.git\n    \n* 检查 `avr-gcc` 命令是否可用\n    \n    * 直接在命令行执行 `avr-gcc`, 如果出现command not found, 在命令行执行：\n            \n            PATH=\"/usr/local/CrossPack-AVR/bin:$PATH\"\n            export $PATH\n            \n    * 以上命令是临时把路径 `/usr/local/CrossPack-AVR/bin` 放到 `PATH` 中，关闭Terminal后失效\n\n### 修改配置文件来支持GH60_REV_CHN  \n\n* `cd ./tmk_keyboard_custom/keyboard/gh60`\n* `vi config.h`\n* 找到 `#define CONFIG_H`, 在底下加上 `#define GH60_REV_CHN`\n\n* `vi Makefile`\n* 注释或删掉下面这行代码\n    \n        KEYMAP_IN_EEPROM_ENABLE = yes # Read keymap from eeprom\n    \n### 连接测试键盘\n\n* 连接后输入入下列指令\n\n        system_profiler SPUSBDataType\n\n* 应该会出现：\n\n```\nGH60:\n   Product ID: 0x6060\n   Vendor ID: 0xfeed\n   Version: 0.01\n   Speed: Up to 12 Mb/sec\n   Manufacturer: geekhack\n   Location ID: 0x14400000 / 37\n   Current Available (mA): 500\n   Current Required (mA): 100\n   Extra Operating Current (mA): 0\n```\n* 然后按下键盘背部的按钮\n* 再次执行命令\n    \n        system_profiler SPUSBDataType\n\n* 应该会出现：\n\n```\nATm32U4DFU:\n    Product ID: 0x2ff4\n    Vendor ID: 0x03eb  (Atmel Corporation)\n    Version: 0.00\n    Serial Number: 1.0.0\n    Speed: Up to 12 Mb/sec\n    Manufacturer: ATMEL\n    Location ID: 0x14100000 / 15\n    Current Available (mA): 500\n    Current Required (mA): Unknown (Device has not been configured)\n```\n\n\n\n\n* 可以开始刷配置了，如果没信心，还是先用 poker 的 layout 来试试吧\n\n        poker layout\n\n* 切换到目录 `gh60` 下执行\n\n        make dfu\n\n* 刷出以下内容表示成功\n\n```\nCreating load file for Flash: gh60_lufa.hex\navr-objcopy -O ihex -R .eeprom -R .fuse -R .lock -R .signature gh60_lufa.elf gh60_lufa.hex\ndfu-programmer atmega32u4 erase --force\nErasing flash...  Success\nChecking memory from 0x0 to 0x6FFF...  Empty.\ndfu-programmer atmega32u4 flash gh60_lufa.hex\nChecking memory from 0x0 to 0x61FF...  Empty.\n0%                            100%  Programming 0x6200 bytes...\n[>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>]  Success\n0%                            100%  Reading 0x7000 bytes...\n[>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>]  Success\nValidating...  Success\n0x6200 bytes written into 0x7000 bytes memory (87.50%).\ndfu-programmer atmega32u4 reset\n```\n\n### 开始制作自己的layout\n\n* [http://www.keyboard-layout-editor.com/](http://www.keyboard-layout-editor.com/) 生成raw data\n* [https://yang.hging.net/tkg/](https://yang.hging.net/tkg/) 把raw data生成`.c`文件\n* 参考[dm4](http://blog.dm4.tw/blog/2015/03/17/build-gh60-revchn-on-mac/)设计的layout，觉得不错稍加改了下:\n    \n    * Layer 0 (Default)\n        \n            http://www.keyboard-layout-editor.com/#/gists/907d4f327ee92188cb929044ec186c39\n\n    * Layer 1 (Fn0层)\n\n            http://www.keyboard-layout-editor.com/#/gists/a460aca35c9eedab94433f6c297ef94c\n\n    * keymap generator 的设定\n        \n            Keyboard - GH60 (RevCHN)\n            Layer Mode - Normal\n            Number of Layers - 2\n            Layer0 - Default\n            Layer1 - Function layer\n            Fn - Layer action > Momentary layer 1\n\n    * Fn Momentary layer 1 的意思就是当 fn 按下时是 layer 1 的 keymap 但不按 fn 时就关掉 layer1\n\n    * 下载 `.c` 文件, 把名字改成 `keymap_tkg.c`\n\n    * 放到 `gh60` 目录下边\n\n    * 执行 `make KEYMAP=tkg dfu`\n\n### Done\n\n### 记录下现有的问题\n\n* `Fn+RCommand+Delete 连按几下会导致 Command 键按下事件，每次再按其他键的时候都成了Command+键的效果。现在的解决方案就是重新多按几个那个组合。。。。\n\n### Refer to\n\n* http://blog.dm4.tw/blog/2015/03/17/build-gh60-revchn-on-mac/\n* https://www.ptt.cc/bbs/Key_Mou_Pad/M.1430970988.A.4D9.html\n\n","slug":"2016-12-30-keyboard-conf","published":1,"updated":"2022-02-12T20:53:10.505Z","comments":1,"photos":[],"link":"","_id":"ckzkc92xf001moqox1ajyd3i1","content":"<h3 id=\"安装必要的工具\"><a href=\"#安装必要的工具\" class=\"headerlink\" title=\"安装必要的工具\"></a>安装必要的工具</h3><pre><code>brew install Caskroom/cask/crosspack-avr\nbrew install dfu-programmer\ncd ~\ngit clone --recursive https://github.com/kairyu/tmk_keyboard_custom.git\n</code></pre>\n<ul>\n<li><p>检查 <code>avr-gcc</code> 命令是否可用</p>\n<ul>\n<li><p>直接在命令行执行 <code>avr-gcc</code>, 如果出现command not found, 在命令行执行：</p>\n<pre><code>  PATH=&quot;/usr/local/CrossPack-AVR/bin:$PATH&quot;\n  export $PATH\n  \n</code></pre>\n</li>\n<li><p>以上命令是临时把路径 <code>/usr/local/CrossPack-AVR/bin</code> 放到 <code>PATH</code> 中，关闭Terminal后失效</p>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"修改配置文件来支持GH60-REV-CHN\"><a href=\"#修改配置文件来支持GH60-REV-CHN\" class=\"headerlink\" title=\"修改配置文件来支持GH60_REV_CHN\"></a>修改配置文件来支持GH60_REV_CHN</h3><ul>\n<li><p><code>cd ./tmk_keyboard_custom/keyboard/gh60</code></p>\n</li>\n<li><p><code>vi config.h</code></p>\n</li>\n<li><p>找到 <code>#define CONFIG_H</code>, 在底下加上 <code>#define GH60_REV_CHN</code></p>\n</li>\n<li><p><code>vi Makefile</code></p>\n</li>\n<li><p>注释或删掉下面这行代码</p>\n<pre><code>  KEYMAP_IN_EEPROM_ENABLE = yes # Read keymap from eeprom\n</code></pre>\n</li>\n</ul>\n<h3 id=\"连接测试键盘\"><a href=\"#连接测试键盘\" class=\"headerlink\" title=\"连接测试键盘\"></a>连接测试键盘</h3><ul>\n<li><p>连接后输入入下列指令</p>\n<pre><code>  system_profiler SPUSBDataType\n</code></pre>\n</li>\n<li><p>应该会出现：</p>\n</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GH60:</span><br><span class=\"line\">   Product ID: 0x6060</span><br><span class=\"line\">   Vendor ID: 0xfeed</span><br><span class=\"line\">   Version: 0.01</span><br><span class=\"line\">   Speed: Up to 12 Mb/sec</span><br><span class=\"line\">   Manufacturer: geekhack</span><br><span class=\"line\">   Location ID: 0x14400000 / 37</span><br><span class=\"line\">   Current Available (mA): 500</span><br><span class=\"line\">   Current Required (mA): 100</span><br><span class=\"line\">   Extra Operating Current (mA): 0</span><br></pre></td></tr></table></figure>\n<ul>\n<li><p>然后按下键盘背部的按钮</p>\n</li>\n<li><p>再次执行命令</p>\n<pre><code>  system_profiler SPUSBDataType\n</code></pre>\n</li>\n<li><p>应该会出现：</p>\n</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ATm32U4DFU:</span><br><span class=\"line\">    Product ID: 0x2ff4</span><br><span class=\"line\">    Vendor ID: 0x03eb  (Atmel Corporation)</span><br><span class=\"line\">    Version: 0.00</span><br><span class=\"line\">    Serial Number: 1.0.0</span><br><span class=\"line\">    Speed: Up to 12 Mb/sec</span><br><span class=\"line\">    Manufacturer: ATMEL</span><br><span class=\"line\">    Location ID: 0x14100000 / 15</span><br><span class=\"line\">    Current Available (mA): 500</span><br><span class=\"line\">    Current Required (mA): Unknown (Device has not been configured)</span><br></pre></td></tr></table></figure>\n\n\n\n\n<ul>\n<li><p>可以开始刷配置了，如果没信心，还是先用 poker 的 layout 来试试吧</p>\n<pre><code>  poker layout\n</code></pre>\n</li>\n<li><p>切换到目录 <code>gh60</code> 下执行</p>\n<pre><code>  make dfu\n</code></pre>\n</li>\n<li><p>刷出以下内容表示成功</p>\n</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Creating load file for Flash: gh60_lufa.hex</span><br><span class=\"line\">avr-objcopy -O ihex -R .eeprom -R .fuse -R .lock -R .signature gh60_lufa.elf gh60_lufa.hex</span><br><span class=\"line\">dfu-programmer atmega32u4 erase --force</span><br><span class=\"line\">Erasing flash...  Success</span><br><span class=\"line\">Checking memory from 0x0 to 0x6FFF...  Empty.</span><br><span class=\"line\">dfu-programmer atmega32u4 flash gh60_lufa.hex</span><br><span class=\"line\">Checking memory from 0x0 to 0x61FF...  Empty.</span><br><span class=\"line\">0%                            100%  Programming 0x6200 bytes...</span><br><span class=\"line\">[&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;]  Success</span><br><span class=\"line\">0%                            100%  Reading 0x7000 bytes...</span><br><span class=\"line\">[&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;]  Success</span><br><span class=\"line\">Validating...  Success</span><br><span class=\"line\">0x6200 bytes written into 0x7000 bytes memory (87.50%).</span><br><span class=\"line\">dfu-programmer atmega32u4 reset</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"开始制作自己的layout\"><a href=\"#开始制作自己的layout\" class=\"headerlink\" title=\"开始制作自己的layout\"></a>开始制作自己的layout</h3><ul>\n<li><p><a href=\"http://www.keyboard-layout-editor.com/\">http://www.keyboard-layout-editor.com/</a> 生成raw data</p>\n</li>\n<li><p><a href=\"https://yang.hging.net/tkg/\">https://yang.hging.net/tkg/</a> 把raw data生成<code>.c</code>文件</p>\n</li>\n<li><p>参考<a href=\"http://blog.dm4.tw/blog/2015/03/17/build-gh60-revchn-on-mac/\">dm4</a>设计的layout，觉得不错稍加改了下:</p>\n<ul>\n<li><p>Layer 0 (Default)</p>\n<pre><code>  http://www.keyboard-layout-editor.com/#/gists/907d4f327ee92188cb929044ec186c39\n</code></pre>\n</li>\n<li><p>Layer 1 (Fn0层)</p>\n<pre><code>  http://www.keyboard-layout-editor.com/#/gists/a460aca35c9eedab94433f6c297ef94c\n</code></pre>\n</li>\n<li><p>keymap generator 的设定</p>\n<pre><code>  Keyboard - GH60 (RevCHN)\n  Layer Mode - Normal\n  Number of Layers - 2\n  Layer0 - Default\n  Layer1 - Function layer\n  Fn - Layer action &gt; Momentary layer 1\n</code></pre>\n</li>\n<li><p>Fn Momentary layer 1 的意思就是当 fn 按下时是 layer 1 的 keymap 但不按 fn 时就关掉 layer1</p>\n</li>\n<li><p>下载 <code>.c</code> 文件, 把名字改成 <code>keymap_tkg.c</code></p>\n</li>\n<li><p>放到 <code>gh60</code> 目录下边</p>\n</li>\n<li><p>执行 <code>make KEYMAP=tkg dfu</code></p>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Done\"><a href=\"#Done\" class=\"headerlink\" title=\"Done\"></a>Done</h3><h3 id=\"记录下现有的问题\"><a href=\"#记录下现有的问题\" class=\"headerlink\" title=\"记录下现有的问题\"></a>记录下现有的问题</h3><ul>\n<li>&#96;Fn+RCommand+Delete 连按几下会导致 Command 键按下事件，每次再按其他键的时候都成了Command+键的效果。现在的解决方案就是重新多按几个那个组合。。。。</li>\n</ul>\n<h3 id=\"Refer-to\"><a href=\"#Refer-to\" class=\"headerlink\" title=\"Refer to\"></a>Refer to</h3><ul>\n<li><a href=\"http://blog.dm4.tw/blog/2015/03/17/build-gh60-revchn-on-mac/\">http://blog.dm4.tw/blog/2015/03/17/build-gh60-revchn-on-mac/</a></li>\n<li><a href=\"https://www.ptt.cc/bbs/Key_Mou_Pad/M.1430970988.A.4D9.html\">https://www.ptt.cc/bbs/Key_Mou_Pad/M.1430970988.A.4D9.html</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"安装必要的工具\"><a href=\"#安装必要的工具\" class=\"headerlink\" title=\"安装必要的工具\"></a>安装必要的工具</h3><pre><code>brew install Caskroom/cask/crosspack-avr\nbrew install dfu-programmer\ncd ~\ngit clone --recursive https://github.com/kairyu/tmk_keyboard_custom.git\n</code></pre>\n<ul>\n<li><p>检查 <code>avr-gcc</code> 命令是否可用</p>\n<ul>\n<li><p>直接在命令行执行 <code>avr-gcc</code>, 如果出现command not found, 在命令行执行：</p>\n<pre><code>  PATH=&quot;/usr/local/CrossPack-AVR/bin:$PATH&quot;\n  export $PATH\n  \n</code></pre>\n</li>\n<li><p>以上命令是临时把路径 <code>/usr/local/CrossPack-AVR/bin</code> 放到 <code>PATH</code> 中，关闭Terminal后失效</p>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"修改配置文件来支持GH60-REV-CHN\"><a href=\"#修改配置文件来支持GH60-REV-CHN\" class=\"headerlink\" title=\"修改配置文件来支持GH60_REV_CHN\"></a>修改配置文件来支持GH60_REV_CHN</h3><ul>\n<li><p><code>cd ./tmk_keyboard_custom/keyboard/gh60</code></p>\n</li>\n<li><p><code>vi config.h</code></p>\n</li>\n<li><p>找到 <code>#define CONFIG_H</code>, 在底下加上 <code>#define GH60_REV_CHN</code></p>\n</li>\n<li><p><code>vi Makefile</code></p>\n</li>\n<li><p>注释或删掉下面这行代码</p>\n<pre><code>  KEYMAP_IN_EEPROM_ENABLE = yes # Read keymap from eeprom\n</code></pre>\n</li>\n</ul>\n<h3 id=\"连接测试键盘\"><a href=\"#连接测试键盘\" class=\"headerlink\" title=\"连接测试键盘\"></a>连接测试键盘</h3><ul>\n<li><p>连接后输入入下列指令</p>\n<pre><code>  system_profiler SPUSBDataType\n</code></pre>\n</li>\n<li><p>应该会出现：</p>\n</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GH60:</span><br><span class=\"line\">   Product ID: 0x6060</span><br><span class=\"line\">   Vendor ID: 0xfeed</span><br><span class=\"line\">   Version: 0.01</span><br><span class=\"line\">   Speed: Up to 12 Mb/sec</span><br><span class=\"line\">   Manufacturer: geekhack</span><br><span class=\"line\">   Location ID: 0x14400000 / 37</span><br><span class=\"line\">   Current Available (mA): 500</span><br><span class=\"line\">   Current Required (mA): 100</span><br><span class=\"line\">   Extra Operating Current (mA): 0</span><br></pre></td></tr></table></figure>\n<ul>\n<li><p>然后按下键盘背部的按钮</p>\n</li>\n<li><p>再次执行命令</p>\n<pre><code>  system_profiler SPUSBDataType\n</code></pre>\n</li>\n<li><p>应该会出现：</p>\n</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ATm32U4DFU:</span><br><span class=\"line\">    Product ID: 0x2ff4</span><br><span class=\"line\">    Vendor ID: 0x03eb  (Atmel Corporation)</span><br><span class=\"line\">    Version: 0.00</span><br><span class=\"line\">    Serial Number: 1.0.0</span><br><span class=\"line\">    Speed: Up to 12 Mb/sec</span><br><span class=\"line\">    Manufacturer: ATMEL</span><br><span class=\"line\">    Location ID: 0x14100000 / 15</span><br><span class=\"line\">    Current Available (mA): 500</span><br><span class=\"line\">    Current Required (mA): Unknown (Device has not been configured)</span><br></pre></td></tr></table></figure>\n\n\n\n\n<ul>\n<li><p>可以开始刷配置了，如果没信心，还是先用 poker 的 layout 来试试吧</p>\n<pre><code>  poker layout\n</code></pre>\n</li>\n<li><p>切换到目录 <code>gh60</code> 下执行</p>\n<pre><code>  make dfu\n</code></pre>\n</li>\n<li><p>刷出以下内容表示成功</p>\n</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Creating load file for Flash: gh60_lufa.hex</span><br><span class=\"line\">avr-objcopy -O ihex -R .eeprom -R .fuse -R .lock -R .signature gh60_lufa.elf gh60_lufa.hex</span><br><span class=\"line\">dfu-programmer atmega32u4 erase --force</span><br><span class=\"line\">Erasing flash...  Success</span><br><span class=\"line\">Checking memory from 0x0 to 0x6FFF...  Empty.</span><br><span class=\"line\">dfu-programmer atmega32u4 flash gh60_lufa.hex</span><br><span class=\"line\">Checking memory from 0x0 to 0x61FF...  Empty.</span><br><span class=\"line\">0%                            100%  Programming 0x6200 bytes...</span><br><span class=\"line\">[&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;]  Success</span><br><span class=\"line\">0%                            100%  Reading 0x7000 bytes...</span><br><span class=\"line\">[&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;]  Success</span><br><span class=\"line\">Validating...  Success</span><br><span class=\"line\">0x6200 bytes written into 0x7000 bytes memory (87.50%).</span><br><span class=\"line\">dfu-programmer atmega32u4 reset</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"开始制作自己的layout\"><a href=\"#开始制作自己的layout\" class=\"headerlink\" title=\"开始制作自己的layout\"></a>开始制作自己的layout</h3><ul>\n<li><p><a href=\"http://www.keyboard-layout-editor.com/\">http://www.keyboard-layout-editor.com/</a> 生成raw data</p>\n</li>\n<li><p><a href=\"https://yang.hging.net/tkg/\">https://yang.hging.net/tkg/</a> 把raw data生成<code>.c</code>文件</p>\n</li>\n<li><p>参考<a href=\"http://blog.dm4.tw/blog/2015/03/17/build-gh60-revchn-on-mac/\">dm4</a>设计的layout，觉得不错稍加改了下:</p>\n<ul>\n<li><p>Layer 0 (Default)</p>\n<pre><code>  http://www.keyboard-layout-editor.com/#/gists/907d4f327ee92188cb929044ec186c39\n</code></pre>\n</li>\n<li><p>Layer 1 (Fn0层)</p>\n<pre><code>  http://www.keyboard-layout-editor.com/#/gists/a460aca35c9eedab94433f6c297ef94c\n</code></pre>\n</li>\n<li><p>keymap generator 的设定</p>\n<pre><code>  Keyboard - GH60 (RevCHN)\n  Layer Mode - Normal\n  Number of Layers - 2\n  Layer0 - Default\n  Layer1 - Function layer\n  Fn - Layer action &gt; Momentary layer 1\n</code></pre>\n</li>\n<li><p>Fn Momentary layer 1 的意思就是当 fn 按下时是 layer 1 的 keymap 但不按 fn 时就关掉 layer1</p>\n</li>\n<li><p>下载 <code>.c</code> 文件, 把名字改成 <code>keymap_tkg.c</code></p>\n</li>\n<li><p>放到 <code>gh60</code> 目录下边</p>\n</li>\n<li><p>执行 <code>make KEYMAP=tkg dfu</code></p>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Done\"><a href=\"#Done\" class=\"headerlink\" title=\"Done\"></a>Done</h3><h3 id=\"记录下现有的问题\"><a href=\"#记录下现有的问题\" class=\"headerlink\" title=\"记录下现有的问题\"></a>记录下现有的问题</h3><ul>\n<li>&#96;Fn+RCommand+Delete 连按几下会导致 Command 键按下事件，每次再按其他键的时候都成了Command+键的效果。现在的解决方案就是重新多按几个那个组合。。。。</li>\n</ul>\n<h3 id=\"Refer-to\"><a href=\"#Refer-to\" class=\"headerlink\" title=\"Refer to\"></a>Refer to</h3><ul>\n<li><a href=\"http://blog.dm4.tw/blog/2015/03/17/build-gh60-revchn-on-mac/\">http://blog.dm4.tw/blog/2015/03/17/build-gh60-revchn-on-mac/</a></li>\n<li><a href=\"https://www.ptt.cc/bbs/Key_Mou_Pad/M.1430970988.A.4D9.html\">https://www.ptt.cc/bbs/Key_Mou_Pad/M.1430970988.A.4D9.html</a></li>\n</ul>\n"},{"layout":"post","title":"VIM的基本命令使用以及插件配置","date":"2017-01-04T05:00:00.000Z","description":"VIM的基本命令使用以及插件配置","keywords":"VIM, Plugin, CtrlSpace, 基本命令, 插件配置","_content":"\n* 好不容易用英语写完了， 懒得翻译了\n\n## Basic Usage\n\n### Normal Mode:\n* First Open file with VIM command, with get into Normal Mode\n* `h``j``k``l` : `←``↓``↑``→`\n* `dd` : delete current line\n* `x` : delete current character\n* `yy` : copy current line\n* `p` : paste. It will paste last copied, cut or deleted texts.\n* `^` : go to first non-blank character in current line, `$` to the end\n* `u` : undo, `<C-r>` : redo. `g-`/`g+` : go to older/newer text state\n* `.` : repeat last action\n* `N<command>` : repeat `Command` `N` times. For example, `2dd` : delete two line\n* `gg`: go to first line, `G` : Go to last line, `NG` : Go to line `N` (`N` stands for a number, for example, `10G`)\n* `w` : move cursor to the beginning of next word, `e` : move cursor to the end of next word\n* `%` : match the closest `{`, `[`, `(`\n* `*` : search forward for the occurrence of the word nearest to the cursor., `#` : search backward.\n\n### Insert Mode:\n* `i` : Get into Insert Mode, `Esc` back to Normal Mode\n* `I` : Start to insert text at the beginning of the current line\n* `o` : Begin a new line below the cursor and insert text\n* `O` : Begin a new line above the cursor and insert text\n\n### Command Mode:\n* Execute command (`:`), search patterns\n(`/` and `?`), and filter commands (`!`)\n* `:wq` : Save then quit, `:q`: Quit, `:w`: Save, `:q!`: Quit current file without saving, `:qa!` Quit all files without saving\n* `:e <path/to/file>` : Open another file\n* `:saveas <path/to/file>` : Save as another file\n\n## Advance Usage\n\n### Insert Mode:\n* `gi` : goto Insert mode where you left it last time\n\n### Normal Mode:\n* `<C-y>`, `<C-e>` : check the text above or below the cursor\n* `<C-w>w` : Switch windows between last one and current one\n* `<C-w><dir>` : `<dir>` can be `h``j``k``l`, switch windows to left, down, up or right.\n* to move at current line\n    * `0` → head\n    * `^` → non-blank head\n    * `$` → end\n    * `g_` → non-blank end\n    * `fa` → to next character `a`\n    * `t,` → to the character right before the next `,`\n    * `3fa` → to the third `a`\n    * `F`, `T` → same as `f`, `t` with reverse direction\n\n        ![line_moves](https://i.imgur.com/mb7T4yD.jpg)\n\n* manipulate a text block `<C-v>`, for example:\n\n    * add prefixes to multi lines\n\n        ![rectangular-blocks](https://i.imgur.com/CpuySci.gif)\n`\n        * `^` → to the head of the line\n        * `<C-v>` → Start to select a block of text\n        * `<C-d>` → to move downward, you also can use `h``j``k``l` or `%` instead\n        * `I--`  → Insert `--`\n        * `[ESC]` → to make effects to every line\n\n    * append text to multi lines\n\n        ![append-to-many-lines](https://i.imgur.com/Lpxw0LC.gif)\n\n        * `<C-v>` → Choose lines (You can also use `j`, `<C-d>`, `/pattern`, `%`, etc.\n        * `$` → move cursor to the end\n        * `A` → start to input text, type press `ESC`\n\n    * indentation\n\n        ![autoindent](https://i.imgur.com/0W9g5UD.gif)\n\n        * `J` → convert multi lines to single line\n        * `<` `>` → indent to left or right\n        * `=` → auto indent\n\n### Visual Mode:\n* Block Choosing `<action>a<object>` or `<action>i<object>`\n    * `<action>` can be any actions, like `d`(delete), `y`(copy), `v`(text selecting).\n    * `<object>` can be `w`(a word), `W`(a phrase), `s`(a sentance), `p`(a paragraph), or a special symbol like `\"`, `'`, `)`, `}`, `]`.\n    * For example:\n\n       ![textobjects](https://i.imgur.com/zSC9HrJ.png)\n\n        * `vi\"` → foo\n        * `va\"` → \"foo\"\n        * `vi)` → \"foo\"\n        * `va)` → (\"foo\")\n        * `v2i)` → map (+) (\"foo\")\n        * `v2a)` → (map (+) (\"foo\"))\n\n### Command Mode:\n* `:split` : split window horizontally, `:vsplit` : split window vertically.\n* `q` : Record typed characters into register, then repeat them.\n    * `qa` : record every action into register `a`\n    * `@a` : replay it\n    * `@@` : to replay the latest register\n    * For example:\n\n        ![macros](https://i.imgur.com/8nCWZLj.gif)\n\n        * In this text file, only have \"1\" in it, start to input: `qaYp<C-a>q`\n\n            * `qa` → start to record\n            * `yyp` → copy current line to next line\n            * `<C-a>` → add 1\n            * `q` → stop recording\n            * `@a` → write down 2 under 1\n            * `@@` → write down 3 under 2\n            * `100@@` → repeat it 100 times.\n* `:[range]s/<pattern>/<replace>/{flags}` : replace text\n    * TODO\n    * `[range]`\n\n## Plugins\n\n### Explanations of Important Keywords\n* `<Leader>`: default is `\\`, you can change it by using `let mapleader = ','` in `.vimrc` file.\n* `<CR>`: equals `<Return>`\t\\& `<Enter>`\n* `<S-...>`\t: shift-key\n* `<C-...>`: control-key\n* `<M-...>` & `<A-...>`: alt-key\n* `<D-...>`: command-key (Mac only)\n* `g:`: means globally. Example:\n    * `let g:last_active_tab = 1` toggle switch between current tab and the last one globally.\n* `remap`: Allows for mappings to work recursively.\n* `noremap`: Only a single entry. Can NOT be remapped.\n* `n` & `v` & `s` & `i`: prefixes, `n` stands for Normal mode, `v` stands for Visual mode, `s` stands for Select Mode, `i` stands for Insert Mode. Example:\n    * `nnoremap <C-t> :tabnew<CR>`: remap `Ctrl + t` to create a new tab\n    * `inoremap <C-t> <Esc>:tabnew<CR>`: same as last one, with an escape action additionally.\n* `<Plug>`: in `.vimrc` file, it has two meanings. First, it's visible out of the plugin scripts. And the second, use structure `<Plug> scriptname mapname` to avoid confliction with other plugins. For example: `<Plug>TypecorrAdd`, `Typecorr` is the script name, and `Add` is the function name.\n* `<SID>`: is the script ID and not visible outside. Compare with `<Plug>`, it's more like `private` function to other scrips. So can't use it out of the script. Example:\n\n  ```vim\n  \" ,en ,ep to jump between errors\n  function! <SID>LocationPrevious()\n    try\n        lprev\n    catch /^Vim\\%((\\a\\+)\\)\\=:E553/\n        llast\n    endtry\n  endfunction\n\n  function! <SID>LocationNext()\n    try\n        lnext\n    catch /^Vim\\%((\\a\\+)\\)\\=:E553/\n        lfirst\n    endtry\n  endfunction\n\n  nnoremap <silent> <Plug>LocationPrevious :<C-u>exe 'call <SID>LocationPrevious()'<CR>\n  nnoremap <silent> <Plug>LocationNext :<C-u>exe 'call <SID>LocationNext()'<CR>\n  nmap <silent> <Leader>ep <Plug>LocationPrevious\n  nmap <silent> <Leader>en <Plug>LocationNext\n  ```\n\n* `<silence>`:  to make a key mapping can`t be echoed on the command line\n* `<expr>` take the argument as expression. For example: `inoremap <expr> <C-L> ListItem()`, ListItem is a function which is mapped with `Ctrl + L`.\n\n### unblevable/quick-scope\n\n* Github Repo: [unblevable/quick-scope](https://github.com/unblevable/quick-scope)\n* Useage: highlights which characters to target for `f`, `F` and family.\n* Key Mapping:\n\n      let g:qs_highlight_on_keys = ['f', 'F', 't', 'T'] //\n\n### ntpeters/vim-better-whitespace\n\n* Github Repo: [ntpeters/vim-better-whitespace](ntpeters/vim-better-whitespace)\n* Useage: clean extra whitespace.\n* Key Mapping:\n\n      nnoremap <silent> <Leader><Space> :StripWhitespace<CR>\n      autocmd FileType c,cpp,java,go,php,javascript,puppet,python,rust,twig,xml,yml,perl autocmd BufWritePre <buffer> StripWhitespace\n      let g:better_whitespace_filetypes_blacklist=['diff', 'gitcommit', 'unite', 'qf', 'help']\n\n### Vim-CtrlSpace\n* Github Repo: [vim-ctrlspace/vim-ctrlspace](https://github.com/vim-ctrlspace/vim-ctrlspace)\n* Useage:\n    * bookmarks for your favorite projects\n    * workspaces (sessions)\n    * tabs / buffers / files management\n    * fast fuzzy searching powered by Go\n* Shortkeys:\n    * `Ctrl + Space` : open ctrl space command line\n    * `b` : bookmark list\n    * `w` : workspace list in current bookmark\n    * `l` : tab list in current workspace\n    * `o` : file list in current workspace\n    * `h` : buffer list in current workspace, this is default list when you hit ctrl + space\n    * `/` : Into Search Mode, type it again will close search mode. Aka,  `B`, `W`, `L`, `O`, `H` with uppercase will open the same list with Search Mode\n    * `i` : switch directory (when you on the buffer list)\n    * `a` : all the files are opend in current workspace\n    * `s` : save current workspace/bookmark, then `<CR>` to confirm\n    * `d` : delete a file from current buffer or file list\n    * `j`,`k` : switch items, then `<CR>` to confirm\n    * `m` : rename bookmark or workspace(when you on the workspace list or bookmark list)\n* Key Mapping:\n\n  ```vim  \n  if has(\"gui_running\")\n  \" Settings for MacVim and Inconsolata font\n    let g:CtrlSpaceSymbols = { \"File\": \"◯\", \"CTab\": \"▣\", \"Tabs\": \"▢\" }\n  endif\n  if executable(\"ag\")\n    let g:CtrlSpaceGlobCommand = 'ag -l --nocolor -g \"\"'\n  endif\n  let g:CtrlSpaceSearchTiming = 500\n  hi link CtrlSpaceNormal   PMenu\n  hi link CtrlSpaceSelected PMenuSel\n  hi link CtrlSpaceSearch   Search\n  hi link CtrlSpaceStatus   StatusLine\n  nnoremap <silent><C-p> :CtrlSpace O<CR>\n  let g:CtrlSpaceLoadLastWorkspaceOnStart = 1\n  let g:CtrlSpaceSaveWorkspaceOnSwitch = 1\n  let g:CtrlSpaceSaveWorkspaceOnExit = 1\n  ```\n\n### scrooloose/nerdtree & jistr/vim-nerdtree-tabs\n* TODO\n\n* Github Repo: [scrooloose/nerdtree](https://github.com/scrooloose/nerdtree) & [jistr/vim-nerdtree-tabs](https://github.com/jistr/vim-nerdtree-tabs)\n* Useage: to explore filesystem and to open files and directories.\n* Key Mapping:\n\n  ```vim\n  \" nerdtree\n  map <C-n> :NERDTreeToggle<CR>\n  let NERDTreeHighlightCursorline=1\n  let NERDTreeIgnore=[ '\\.pyc$', '\\.pyo$', '\\.obj$', '\\.o$', '\\.so$', '\\.egg$', '^\\.git$', '^\\.svn$', '^\\.hg$' ]\n  \"close vim if the only window left open is a NERDTree\n  autocmd bufenter * if (winnr(\"$\") == 1 && exists(\"b:NERDTreeType\") && b:NERDTreeType == \"primary\") | q | end\n  let g:NERDTreeMapOpenSplit = 's'\n  let g:NERDTreeMapOpenVSplit = 'v'\n  let g:NERDTreeWinSize=26\n\n  \" nerdtreetabs\n  map <C-n> <plug>NERDTreeTabsToggle<CR>\n  let g:nerdtree_tabs_synchronize_view=0\n  let g:nerdtree_tabs_synchronize_focus=0\n  let g:nerdtree_tabs_open_on_console_startup=0\n  let g:nerdtree_tabs_open_on_gui_startup=0\n  ```\n\n### syntastic\n\n* Github Repo: [vim-syntastic/syntastic](https://github.com/vim-syntastic/syntastic#introduction)\n* Useage: a syntax checking plugin\n* Key Mapping:\n\n  ```vim\n  execute pathogen#infect()\n\n  let g:syntastic_error_symbol='>>'\n  let g:syntastic_warning_symbol='>'\n  let g:syntastic_check_on_open=1\n  let g:syntastic_check_on_wq=0\n  let g:syntastic_enable_highlighting=1\n\n  \" checkers\n  let g:syntastic_php_checkers = ['php', 'phpcs', 'phpmd']\n  let g:syntastic_python_checkers=['pyflakes', 'pep8'] \" 使用pyflakes,速度比pylint快\n  let g:syntastic_python_pep8_args='--ignore=E501,E225,E124,E712'\n  let g:syntastic_javascript_checkers = ['jsl', 'jshint']\n  \" let g:syntastic_markdown_checkers = ['proselint']\n  let g:syntastic_html_checkers=['tidy', 'jshint']\n\n  set statusline+=%#warningmsg#\n  set statusline+=%{SyntasticStatuslineFlag()}\n  set statusline+=%*\n\n  \" to see error location list\n  let g:syntastic_always_populate_loc_list = 1\n  let g:syntastic_enable_signs = 1\n  let g:syntastic_auto_loc_list = 0\n  let g:syntastic_auto_jump = 0\n\n  highlight SyntasticErrorSign guifg=white guibg=black\n  ```\n\n### YouCompleteMe\n\n* Github Repo: [Valloric/YouCompleteMe](https://github.com/Valloric/YouCompleteMe)\n* Useage: code completion\n* Key Mapping:\n\n  ```vim\n  let g:ycm_key_list_select_completion=['<C-j>']\n  let g:ycm_key_list_previous_completion=['<C-k>']\n  let g:ycm_complete_in_comments = 1\n  let g:ycm_complete_in_strings = 1\n  let g:ycm_use_ultisnips_completer = 1\n  let g:ycm_collect_identifiers_from_comments_and_strings = 1\n  let g:ycm_collect_identifiers_from_tags_files = 1\n  let g:ycm_seed_identifiers_with_syntax=1\n  let g:ycm_goto_buffer_command = 'horizontal-split'\n\n  nnoremap <leader>jd :YcmCompleter GoToDefinitionElseDeclaration<CR>\n  nnoremap <leader>gd :YcmCompleter GoToDeclaration<CR>\n\n  if !empty(glob(\"~/.vim/bundle/YouCompleteMe/third_party/ycmd/cpp/ycm/.ycm_extra_conf.py\"))\n      let g:ycm_global_ycm_extra_conf = \"~/.vim/bundle/YouCompleteMe/third_party/ycmd/cpp/ycm/.ycm_extra_conf.py\"\n  endif\n  ```\n\n### vim-easymotion\n\n* Github Repo: [easymotion/vim-easymotion](https://github.com/easymotion/vim-easymotion)\n* Usage: Provides a much simpler way to use some motions in vim.\n* Keys Mapping:\n\n  ```vim\n  let g:EasyMotion_smartcase = 1\n\n  \" <Leader>f{char} to move to {char}\n  map  <Leader><Leader>f <Plug>(easymotion-bd-f)\n  nmap <Leader><Leader>f <Plug>(easymotion-overwin-f)\n\n  \" s{char}{char} to move to {char}{char}\n  nmap s <Plug>(easymotion-overwin-f2)\n\n  \" Move to line\n  map  <Leader><Leader>l <Plug>(easymotion-bd-jk)\n  nmap <Leader><Leader>l <Plug>(easymotion-overwin-line)\n  ```\n\n### easyalign\n\n* Github Repo: [junegunn/vim-easy-align](https://github.com/junegunn/vim-easy-align)\n* Usage: alignment\n* Keys Mapping:\n\n  ```vim\n  vmap ga <Plug>(EasyAlign)\n  nmap ga <Plug>(EasyAlign)\n  let g:easy_align_ignore_groups = ['Comment', 'String']\n  let g:easy_align_delimiters = {\n     \\ '>': { 'pattern': '>>\\|=>\\|>' },\n     \\ '/': {\n     \\     'pattern':         '//\\+\\|/\\*\\|\\*/',\n     \\     'delimiter_align': 'l',\n     \\     'ignore_groups':   ['!Comment'] },\n     \\ ']': {\n     \\     'pattern':       '[[\\]]',\n     \\     'left_margin':   0,\n     \\     'right_margin':  0,\n     \\     'stick_to_left': 0\n     \\   },\n     \\ ')': {\n     \\     'pattern':       '[()]',\n     \\     'left_margin':   0,\n     \\     'right_margin':  0,\n     \\     'stick_to_left': 0\n     \\   },\n     \\ 'd': {\n     \\     'pattern':      ' \\(\\S\\+\\s*[;=]\\)\\@=',\n     \\     'left_margin':  0,\n     \\     'right_margin': 0\n     \\   }\n     \\ }\n  ```\n\n### NerdTree\n\n* Github Repo: [scrooloose/nerdtree](https://github.com/scrooloose/nerdtree)\n* Usage: to explore your filesystem and to open files and directories.\n* Keys Mapping:\n\n  ```vim\n  map <leader>n :NERDTreeToggle<CR>\n  let NERDTreeShowBookmarks=1\n  let NERDTreeHighlightCursorline=1\n  let NERDTreeIgnore=[ '\\.pyc$', '\\.pyo$', '\\.obj$', '\\.o$', '\\.so$', '\\.egg$', '^\\.git$', '^\\.svn$', '^\\.hg$' ]\n  \"close vim if the only window left open is a NERDTree\n  autocmd bufenter * if (winnr(\"$\") == 1 && exists(\"b:NERDTreeType\") && b:NERDTreeType == \"primary\") | q | end\n  let g:NERDTreeMapOpenSplit = 's'\n  let g:NERDTreeMapOpenVSplit = 'v'\n  let g:NERDTreeWinSize=26\n  ```\n\n### NERDCommenter\n\n* Github Repo: [scrooloose/nerdcommenter](https://github.com/scrooloose/nerdcommenter)\n* Usage: to wrangle your code comments.\n* Shortkeys:\n  * `[count]<leader>cc` : Comment out the current line or text selected in visual mode.\n  * `[count]<leader>c<space>` : Toggles the comment state of the selected line(s). If the topmost selected line is commented, all selected lines are uncommented and vice versa.\n  * `[count]<leader>cs` : Comments out the selected lines with a pretty block formatted layout.\n  * `[count]<leader>ci` : Toggles the comment state of the selected line(s) individually.\n\n* Keys Mapping:\n\n  ```vim    \n  \" Add spaces after comment delimiters by default\n  let g:NERDSpaceDelims = 1\n  \" Use compact syntax for prettified multi-line comments\n  let g:NERDCompactSexyComs = 1\n  \" Align line-wise comment delimiters flush left instead of following code indentation\n  let g:NERDDefaultAlign = 'left'\n  \" Allow commenting and inverting empty lines (useful when commenting a region)\n  let g:NERDCommentEmptyLines = 1\n  ```\n\n### Airline\n\n* Github Repo: [vim-airline/vim-airline](https://github.com/vim-airline/vim-airline)\n* Usage: rich statusbar.\n\n* Keys Mapping:\n\n  ```vim\n  if !exists('g:airline_symbols')\n      let g:airline_symbols = {}\n  endif\n\n  let g:airline_mode_map = {\n      \\ '__' : '-',\n      \\ 'n'  : 'N',\n      \\ 'i'  : 'I',\n      \\ 'R'  : 'R',\n      \\ 'c'  : 'C',\n      \\ 'v'  : 'V',\n      \\ 'V'  : 'V',\n      \\ '\u0016' : 'V',\n      \\ 's'  : 'S',\n      \\ 'S'  : 'S',\n      \\ '\u0013' : 'S',\n      \\ }\n\n  let g:airline_left_sep = '❯'\n  let g:airline_right_sep = '❮'\n  let g:airline_symbols.linenr = '¶'\n  let g:airline_symbols.branch = '⎇'\n  ```\n\n<!---\n### a\n* Github Repo: [b](c)\n* Useage: d\n* Key Mapping:\n\n        e\n-->\n\n[//]: # (hidden text)\n\n\n","source":"_posts/2017-01-04-vim-configuration.md","raw":"---\nlayout: post\ntitle: VIM的基本命令使用以及插件配置\ncategory: 编程学习\ntags: [Mac, VIM]\ndate: 2017-01-04\ndescription: VIM的基本命令使用以及插件配置\nkeywords: VIM, Plugin, CtrlSpace, 基本命令, 插件配置\n---\n\n* 好不容易用英语写完了， 懒得翻译了\n\n## Basic Usage\n\n### Normal Mode:\n* First Open file with VIM command, with get into Normal Mode\n* `h``j``k``l` : `←``↓``↑``→`\n* `dd` : delete current line\n* `x` : delete current character\n* `yy` : copy current line\n* `p` : paste. It will paste last copied, cut or deleted texts.\n* `^` : go to first non-blank character in current line, `$` to the end\n* `u` : undo, `<C-r>` : redo. `g-`/`g+` : go to older/newer text state\n* `.` : repeat last action\n* `N<command>` : repeat `Command` `N` times. For example, `2dd` : delete two line\n* `gg`: go to first line, `G` : Go to last line, `NG` : Go to line `N` (`N` stands for a number, for example, `10G`)\n* `w` : move cursor to the beginning of next word, `e` : move cursor to the end of next word\n* `%` : match the closest `{`, `[`, `(`\n* `*` : search forward for the occurrence of the word nearest to the cursor., `#` : search backward.\n\n### Insert Mode:\n* `i` : Get into Insert Mode, `Esc` back to Normal Mode\n* `I` : Start to insert text at the beginning of the current line\n* `o` : Begin a new line below the cursor and insert text\n* `O` : Begin a new line above the cursor and insert text\n\n### Command Mode:\n* Execute command (`:`), search patterns\n(`/` and `?`), and filter commands (`!`)\n* `:wq` : Save then quit, `:q`: Quit, `:w`: Save, `:q!`: Quit current file without saving, `:qa!` Quit all files without saving\n* `:e <path/to/file>` : Open another file\n* `:saveas <path/to/file>` : Save as another file\n\n## Advance Usage\n\n### Insert Mode:\n* `gi` : goto Insert mode where you left it last time\n\n### Normal Mode:\n* `<C-y>`, `<C-e>` : check the text above or below the cursor\n* `<C-w>w` : Switch windows between last one and current one\n* `<C-w><dir>` : `<dir>` can be `h``j``k``l`, switch windows to left, down, up or right.\n* to move at current line\n    * `0` → head\n    * `^` → non-blank head\n    * `$` → end\n    * `g_` → non-blank end\n    * `fa` → to next character `a`\n    * `t,` → to the character right before the next `,`\n    * `3fa` → to the third `a`\n    * `F`, `T` → same as `f`, `t` with reverse direction\n\n        ![line_moves](https://i.imgur.com/mb7T4yD.jpg)\n\n* manipulate a text block `<C-v>`, for example:\n\n    * add prefixes to multi lines\n\n        ![rectangular-blocks](https://i.imgur.com/CpuySci.gif)\n`\n        * `^` → to the head of the line\n        * `<C-v>` → Start to select a block of text\n        * `<C-d>` → to move downward, you also can use `h``j``k``l` or `%` instead\n        * `I--`  → Insert `--`\n        * `[ESC]` → to make effects to every line\n\n    * append text to multi lines\n\n        ![append-to-many-lines](https://i.imgur.com/Lpxw0LC.gif)\n\n        * `<C-v>` → Choose lines (You can also use `j`, `<C-d>`, `/pattern`, `%`, etc.\n        * `$` → move cursor to the end\n        * `A` → start to input text, type press `ESC`\n\n    * indentation\n\n        ![autoindent](https://i.imgur.com/0W9g5UD.gif)\n\n        * `J` → convert multi lines to single line\n        * `<` `>` → indent to left or right\n        * `=` → auto indent\n\n### Visual Mode:\n* Block Choosing `<action>a<object>` or `<action>i<object>`\n    * `<action>` can be any actions, like `d`(delete), `y`(copy), `v`(text selecting).\n    * `<object>` can be `w`(a word), `W`(a phrase), `s`(a sentance), `p`(a paragraph), or a special symbol like `\"`, `'`, `)`, `}`, `]`.\n    * For example:\n\n       ![textobjects](https://i.imgur.com/zSC9HrJ.png)\n\n        * `vi\"` → foo\n        * `va\"` → \"foo\"\n        * `vi)` → \"foo\"\n        * `va)` → (\"foo\")\n        * `v2i)` → map (+) (\"foo\")\n        * `v2a)` → (map (+) (\"foo\"))\n\n### Command Mode:\n* `:split` : split window horizontally, `:vsplit` : split window vertically.\n* `q` : Record typed characters into register, then repeat them.\n    * `qa` : record every action into register `a`\n    * `@a` : replay it\n    * `@@` : to replay the latest register\n    * For example:\n\n        ![macros](https://i.imgur.com/8nCWZLj.gif)\n\n        * In this text file, only have \"1\" in it, start to input: `qaYp<C-a>q`\n\n            * `qa` → start to record\n            * `yyp` → copy current line to next line\n            * `<C-a>` → add 1\n            * `q` → stop recording\n            * `@a` → write down 2 under 1\n            * `@@` → write down 3 under 2\n            * `100@@` → repeat it 100 times.\n* `:[range]s/<pattern>/<replace>/{flags}` : replace text\n    * TODO\n    * `[range]`\n\n## Plugins\n\n### Explanations of Important Keywords\n* `<Leader>`: default is `\\`, you can change it by using `let mapleader = ','` in `.vimrc` file.\n* `<CR>`: equals `<Return>`\t\\& `<Enter>`\n* `<S-...>`\t: shift-key\n* `<C-...>`: control-key\n* `<M-...>` & `<A-...>`: alt-key\n* `<D-...>`: command-key (Mac only)\n* `g:`: means globally. Example:\n    * `let g:last_active_tab = 1` toggle switch between current tab and the last one globally.\n* `remap`: Allows for mappings to work recursively.\n* `noremap`: Only a single entry. Can NOT be remapped.\n* `n` & `v` & `s` & `i`: prefixes, `n` stands for Normal mode, `v` stands for Visual mode, `s` stands for Select Mode, `i` stands for Insert Mode. Example:\n    * `nnoremap <C-t> :tabnew<CR>`: remap `Ctrl + t` to create a new tab\n    * `inoremap <C-t> <Esc>:tabnew<CR>`: same as last one, with an escape action additionally.\n* `<Plug>`: in `.vimrc` file, it has two meanings. First, it's visible out of the plugin scripts. And the second, use structure `<Plug> scriptname mapname` to avoid confliction with other plugins. For example: `<Plug>TypecorrAdd`, `Typecorr` is the script name, and `Add` is the function name.\n* `<SID>`: is the script ID and not visible outside. Compare with `<Plug>`, it's more like `private` function to other scrips. So can't use it out of the script. Example:\n\n  ```vim\n  \" ,en ,ep to jump between errors\n  function! <SID>LocationPrevious()\n    try\n        lprev\n    catch /^Vim\\%((\\a\\+)\\)\\=:E553/\n        llast\n    endtry\n  endfunction\n\n  function! <SID>LocationNext()\n    try\n        lnext\n    catch /^Vim\\%((\\a\\+)\\)\\=:E553/\n        lfirst\n    endtry\n  endfunction\n\n  nnoremap <silent> <Plug>LocationPrevious :<C-u>exe 'call <SID>LocationPrevious()'<CR>\n  nnoremap <silent> <Plug>LocationNext :<C-u>exe 'call <SID>LocationNext()'<CR>\n  nmap <silent> <Leader>ep <Plug>LocationPrevious\n  nmap <silent> <Leader>en <Plug>LocationNext\n  ```\n\n* `<silence>`:  to make a key mapping can`t be echoed on the command line\n* `<expr>` take the argument as expression. For example: `inoremap <expr> <C-L> ListItem()`, ListItem is a function which is mapped with `Ctrl + L`.\n\n### unblevable/quick-scope\n\n* Github Repo: [unblevable/quick-scope](https://github.com/unblevable/quick-scope)\n* Useage: highlights which characters to target for `f`, `F` and family.\n* Key Mapping:\n\n      let g:qs_highlight_on_keys = ['f', 'F', 't', 'T'] //\n\n### ntpeters/vim-better-whitespace\n\n* Github Repo: [ntpeters/vim-better-whitespace](ntpeters/vim-better-whitespace)\n* Useage: clean extra whitespace.\n* Key Mapping:\n\n      nnoremap <silent> <Leader><Space> :StripWhitespace<CR>\n      autocmd FileType c,cpp,java,go,php,javascript,puppet,python,rust,twig,xml,yml,perl autocmd BufWritePre <buffer> StripWhitespace\n      let g:better_whitespace_filetypes_blacklist=['diff', 'gitcommit', 'unite', 'qf', 'help']\n\n### Vim-CtrlSpace\n* Github Repo: [vim-ctrlspace/vim-ctrlspace](https://github.com/vim-ctrlspace/vim-ctrlspace)\n* Useage:\n    * bookmarks for your favorite projects\n    * workspaces (sessions)\n    * tabs / buffers / files management\n    * fast fuzzy searching powered by Go\n* Shortkeys:\n    * `Ctrl + Space` : open ctrl space command line\n    * `b` : bookmark list\n    * `w` : workspace list in current bookmark\n    * `l` : tab list in current workspace\n    * `o` : file list in current workspace\n    * `h` : buffer list in current workspace, this is default list when you hit ctrl + space\n    * `/` : Into Search Mode, type it again will close search mode. Aka,  `B`, `W`, `L`, `O`, `H` with uppercase will open the same list with Search Mode\n    * `i` : switch directory (when you on the buffer list)\n    * `a` : all the files are opend in current workspace\n    * `s` : save current workspace/bookmark, then `<CR>` to confirm\n    * `d` : delete a file from current buffer or file list\n    * `j`,`k` : switch items, then `<CR>` to confirm\n    * `m` : rename bookmark or workspace(when you on the workspace list or bookmark list)\n* Key Mapping:\n\n  ```vim  \n  if has(\"gui_running\")\n  \" Settings for MacVim and Inconsolata font\n    let g:CtrlSpaceSymbols = { \"File\": \"◯\", \"CTab\": \"▣\", \"Tabs\": \"▢\" }\n  endif\n  if executable(\"ag\")\n    let g:CtrlSpaceGlobCommand = 'ag -l --nocolor -g \"\"'\n  endif\n  let g:CtrlSpaceSearchTiming = 500\n  hi link CtrlSpaceNormal   PMenu\n  hi link CtrlSpaceSelected PMenuSel\n  hi link CtrlSpaceSearch   Search\n  hi link CtrlSpaceStatus   StatusLine\n  nnoremap <silent><C-p> :CtrlSpace O<CR>\n  let g:CtrlSpaceLoadLastWorkspaceOnStart = 1\n  let g:CtrlSpaceSaveWorkspaceOnSwitch = 1\n  let g:CtrlSpaceSaveWorkspaceOnExit = 1\n  ```\n\n### scrooloose/nerdtree & jistr/vim-nerdtree-tabs\n* TODO\n\n* Github Repo: [scrooloose/nerdtree](https://github.com/scrooloose/nerdtree) & [jistr/vim-nerdtree-tabs](https://github.com/jistr/vim-nerdtree-tabs)\n* Useage: to explore filesystem and to open files and directories.\n* Key Mapping:\n\n  ```vim\n  \" nerdtree\n  map <C-n> :NERDTreeToggle<CR>\n  let NERDTreeHighlightCursorline=1\n  let NERDTreeIgnore=[ '\\.pyc$', '\\.pyo$', '\\.obj$', '\\.o$', '\\.so$', '\\.egg$', '^\\.git$', '^\\.svn$', '^\\.hg$' ]\n  \"close vim if the only window left open is a NERDTree\n  autocmd bufenter * if (winnr(\"$\") == 1 && exists(\"b:NERDTreeType\") && b:NERDTreeType == \"primary\") | q | end\n  let g:NERDTreeMapOpenSplit = 's'\n  let g:NERDTreeMapOpenVSplit = 'v'\n  let g:NERDTreeWinSize=26\n\n  \" nerdtreetabs\n  map <C-n> <plug>NERDTreeTabsToggle<CR>\n  let g:nerdtree_tabs_synchronize_view=0\n  let g:nerdtree_tabs_synchronize_focus=0\n  let g:nerdtree_tabs_open_on_console_startup=0\n  let g:nerdtree_tabs_open_on_gui_startup=0\n  ```\n\n### syntastic\n\n* Github Repo: [vim-syntastic/syntastic](https://github.com/vim-syntastic/syntastic#introduction)\n* Useage: a syntax checking plugin\n* Key Mapping:\n\n  ```vim\n  execute pathogen#infect()\n\n  let g:syntastic_error_symbol='>>'\n  let g:syntastic_warning_symbol='>'\n  let g:syntastic_check_on_open=1\n  let g:syntastic_check_on_wq=0\n  let g:syntastic_enable_highlighting=1\n\n  \" checkers\n  let g:syntastic_php_checkers = ['php', 'phpcs', 'phpmd']\n  let g:syntastic_python_checkers=['pyflakes', 'pep8'] \" 使用pyflakes,速度比pylint快\n  let g:syntastic_python_pep8_args='--ignore=E501,E225,E124,E712'\n  let g:syntastic_javascript_checkers = ['jsl', 'jshint']\n  \" let g:syntastic_markdown_checkers = ['proselint']\n  let g:syntastic_html_checkers=['tidy', 'jshint']\n\n  set statusline+=%#warningmsg#\n  set statusline+=%{SyntasticStatuslineFlag()}\n  set statusline+=%*\n\n  \" to see error location list\n  let g:syntastic_always_populate_loc_list = 1\n  let g:syntastic_enable_signs = 1\n  let g:syntastic_auto_loc_list = 0\n  let g:syntastic_auto_jump = 0\n\n  highlight SyntasticErrorSign guifg=white guibg=black\n  ```\n\n### YouCompleteMe\n\n* Github Repo: [Valloric/YouCompleteMe](https://github.com/Valloric/YouCompleteMe)\n* Useage: code completion\n* Key Mapping:\n\n  ```vim\n  let g:ycm_key_list_select_completion=['<C-j>']\n  let g:ycm_key_list_previous_completion=['<C-k>']\n  let g:ycm_complete_in_comments = 1\n  let g:ycm_complete_in_strings = 1\n  let g:ycm_use_ultisnips_completer = 1\n  let g:ycm_collect_identifiers_from_comments_and_strings = 1\n  let g:ycm_collect_identifiers_from_tags_files = 1\n  let g:ycm_seed_identifiers_with_syntax=1\n  let g:ycm_goto_buffer_command = 'horizontal-split'\n\n  nnoremap <leader>jd :YcmCompleter GoToDefinitionElseDeclaration<CR>\n  nnoremap <leader>gd :YcmCompleter GoToDeclaration<CR>\n\n  if !empty(glob(\"~/.vim/bundle/YouCompleteMe/third_party/ycmd/cpp/ycm/.ycm_extra_conf.py\"))\n      let g:ycm_global_ycm_extra_conf = \"~/.vim/bundle/YouCompleteMe/third_party/ycmd/cpp/ycm/.ycm_extra_conf.py\"\n  endif\n  ```\n\n### vim-easymotion\n\n* Github Repo: [easymotion/vim-easymotion](https://github.com/easymotion/vim-easymotion)\n* Usage: Provides a much simpler way to use some motions in vim.\n* Keys Mapping:\n\n  ```vim\n  let g:EasyMotion_smartcase = 1\n\n  \" <Leader>f{char} to move to {char}\n  map  <Leader><Leader>f <Plug>(easymotion-bd-f)\n  nmap <Leader><Leader>f <Plug>(easymotion-overwin-f)\n\n  \" s{char}{char} to move to {char}{char}\n  nmap s <Plug>(easymotion-overwin-f2)\n\n  \" Move to line\n  map  <Leader><Leader>l <Plug>(easymotion-bd-jk)\n  nmap <Leader><Leader>l <Plug>(easymotion-overwin-line)\n  ```\n\n### easyalign\n\n* Github Repo: [junegunn/vim-easy-align](https://github.com/junegunn/vim-easy-align)\n* Usage: alignment\n* Keys Mapping:\n\n  ```vim\n  vmap ga <Plug>(EasyAlign)\n  nmap ga <Plug>(EasyAlign)\n  let g:easy_align_ignore_groups = ['Comment', 'String']\n  let g:easy_align_delimiters = {\n     \\ '>': { 'pattern': '>>\\|=>\\|>' },\n     \\ '/': {\n     \\     'pattern':         '//\\+\\|/\\*\\|\\*/',\n     \\     'delimiter_align': 'l',\n     \\     'ignore_groups':   ['!Comment'] },\n     \\ ']': {\n     \\     'pattern':       '[[\\]]',\n     \\     'left_margin':   0,\n     \\     'right_margin':  0,\n     \\     'stick_to_left': 0\n     \\   },\n     \\ ')': {\n     \\     'pattern':       '[()]',\n     \\     'left_margin':   0,\n     \\     'right_margin':  0,\n     \\     'stick_to_left': 0\n     \\   },\n     \\ 'd': {\n     \\     'pattern':      ' \\(\\S\\+\\s*[;=]\\)\\@=',\n     \\     'left_margin':  0,\n     \\     'right_margin': 0\n     \\   }\n     \\ }\n  ```\n\n### NerdTree\n\n* Github Repo: [scrooloose/nerdtree](https://github.com/scrooloose/nerdtree)\n* Usage: to explore your filesystem and to open files and directories.\n* Keys Mapping:\n\n  ```vim\n  map <leader>n :NERDTreeToggle<CR>\n  let NERDTreeShowBookmarks=1\n  let NERDTreeHighlightCursorline=1\n  let NERDTreeIgnore=[ '\\.pyc$', '\\.pyo$', '\\.obj$', '\\.o$', '\\.so$', '\\.egg$', '^\\.git$', '^\\.svn$', '^\\.hg$' ]\n  \"close vim if the only window left open is a NERDTree\n  autocmd bufenter * if (winnr(\"$\") == 1 && exists(\"b:NERDTreeType\") && b:NERDTreeType == \"primary\") | q | end\n  let g:NERDTreeMapOpenSplit = 's'\n  let g:NERDTreeMapOpenVSplit = 'v'\n  let g:NERDTreeWinSize=26\n  ```\n\n### NERDCommenter\n\n* Github Repo: [scrooloose/nerdcommenter](https://github.com/scrooloose/nerdcommenter)\n* Usage: to wrangle your code comments.\n* Shortkeys:\n  * `[count]<leader>cc` : Comment out the current line or text selected in visual mode.\n  * `[count]<leader>c<space>` : Toggles the comment state of the selected line(s). If the topmost selected line is commented, all selected lines are uncommented and vice versa.\n  * `[count]<leader>cs` : Comments out the selected lines with a pretty block formatted layout.\n  * `[count]<leader>ci` : Toggles the comment state of the selected line(s) individually.\n\n* Keys Mapping:\n\n  ```vim    \n  \" Add spaces after comment delimiters by default\n  let g:NERDSpaceDelims = 1\n  \" Use compact syntax for prettified multi-line comments\n  let g:NERDCompactSexyComs = 1\n  \" Align line-wise comment delimiters flush left instead of following code indentation\n  let g:NERDDefaultAlign = 'left'\n  \" Allow commenting and inverting empty lines (useful when commenting a region)\n  let g:NERDCommentEmptyLines = 1\n  ```\n\n### Airline\n\n* Github Repo: [vim-airline/vim-airline](https://github.com/vim-airline/vim-airline)\n* Usage: rich statusbar.\n\n* Keys Mapping:\n\n  ```vim\n  if !exists('g:airline_symbols')\n      let g:airline_symbols = {}\n  endif\n\n  let g:airline_mode_map = {\n      \\ '__' : '-',\n      \\ 'n'  : 'N',\n      \\ 'i'  : 'I',\n      \\ 'R'  : 'R',\n      \\ 'c'  : 'C',\n      \\ 'v'  : 'V',\n      \\ 'V'  : 'V',\n      \\ '\u0016' : 'V',\n      \\ 's'  : 'S',\n      \\ 'S'  : 'S',\n      \\ '\u0013' : 'S',\n      \\ }\n\n  let g:airline_left_sep = '❯'\n  let g:airline_right_sep = '❮'\n  let g:airline_symbols.linenr = '¶'\n  let g:airline_symbols.branch = '⎇'\n  ```\n\n<!---\n### a\n* Github Repo: [b](c)\n* Useage: d\n* Key Mapping:\n\n        e\n-->\n\n[//]: # (hidden text)\n\n\n","slug":"2017-01-04-vim-configuration","published":1,"updated":"2022-02-12T20:53:10.505Z","comments":1,"photos":[],"link":"","_id":"ckzkc92xg001qoqoxddu0efhp","content":"<ul>\n<li>好不容易用英语写完了， 懒得翻译了</li>\n</ul>\n<h2 id=\"Basic-Usage\"><a href=\"#Basic-Usage\" class=\"headerlink\" title=\"Basic Usage\"></a>Basic Usage</h2><h3 id=\"Normal-Mode\"><a href=\"#Normal-Mode\" class=\"headerlink\" title=\"Normal Mode:\"></a>Normal Mode:</h3><ul>\n<li>First Open file with VIM command, with get into Normal Mode</li>\n<li><code>h``j``k``l</code> : <code>←``↓``↑``→</code></li>\n<li><code>dd</code> : delete current line</li>\n<li><code>x</code> : delete current character</li>\n<li><code>yy</code> : copy current line</li>\n<li><code>p</code> : paste. It will paste last copied, cut or deleted texts.</li>\n<li><code>^</code> : go to first non-blank character in current line, <code>$</code> to the end</li>\n<li><code>u</code> : undo, <code>&lt;C-r&gt;</code> : redo. <code>g-</code>&#x2F;<code>g+</code> : go to older&#x2F;newer text state</li>\n<li><code>.</code> : repeat last action</li>\n<li><code>N&lt;command&gt;</code> : repeat <code>Command</code> <code>N</code> times. For example, <code>2dd</code> : delete two line</li>\n<li><code>gg</code>: go to first line, <code>G</code> : Go to last line, <code>NG</code> : Go to line <code>N</code> (<code>N</code> stands for a number, for example, <code>10G</code>)</li>\n<li><code>w</code> : move cursor to the beginning of next word, <code>e</code> : move cursor to the end of next word</li>\n<li><code>%</code> : match the closest <code>&#123;</code>, <code>[</code>, <code>(</code></li>\n<li><code>*</code> : search forward for the occurrence of the word nearest to the cursor., <code>#</code> : search backward.</li>\n</ul>\n<h3 id=\"Insert-Mode\"><a href=\"#Insert-Mode\" class=\"headerlink\" title=\"Insert Mode:\"></a>Insert Mode:</h3><ul>\n<li><code>i</code> : Get into Insert Mode, <code>Esc</code> back to Normal Mode</li>\n<li><code>I</code> : Start to insert text at the beginning of the current line</li>\n<li><code>o</code> : Begin a new line below the cursor and insert text</li>\n<li><code>O</code> : Begin a new line above the cursor and insert text</li>\n</ul>\n<h3 id=\"Command-Mode\"><a href=\"#Command-Mode\" class=\"headerlink\" title=\"Command Mode:\"></a>Command Mode:</h3><ul>\n<li>Execute command (<code>:</code>), search patterns<br>(<code>/</code> and <code>?</code>), and filter commands (<code>!</code>)</li>\n<li><code>:wq</code> : Save then quit, <code>:q</code>: Quit, <code>:w</code>: Save, <code>:q!</code>: Quit current file without saving, <code>:qa!</code> Quit all files without saving</li>\n<li><code>:e &lt;path/to/file&gt;</code> : Open another file</li>\n<li><code>:saveas &lt;path/to/file&gt;</code> : Save as another file</li>\n</ul>\n<h2 id=\"Advance-Usage\"><a href=\"#Advance-Usage\" class=\"headerlink\" title=\"Advance Usage\"></a>Advance Usage</h2><h3 id=\"Insert-Mode-1\"><a href=\"#Insert-Mode-1\" class=\"headerlink\" title=\"Insert Mode:\"></a>Insert Mode:</h3><ul>\n<li><code>gi</code> : goto Insert mode where you left it last time</li>\n</ul>\n<h3 id=\"Normal-Mode-1\"><a href=\"#Normal-Mode-1\" class=\"headerlink\" title=\"Normal Mode:\"></a>Normal Mode:</h3><ul>\n<li><p><code>&lt;C-y&gt;</code>, <code>&lt;C-e&gt;</code> : check the text above or below the cursor</p>\n</li>\n<li><p><code>&lt;C-w&gt;w</code> : Switch windows between last one and current one</p>\n</li>\n<li><p><code>&lt;C-w&gt;&lt;dir&gt;</code> : <code>&lt;dir&gt;</code> can be <code>h``j``k``l</code>, switch windows to left, down, up or right.</p>\n</li>\n<li><p>to move at current line</p>\n<ul>\n<li><p><code>0</code> → head</p>\n</li>\n<li><p><code>^</code> → non-blank head</p>\n</li>\n<li><p><code>$</code> → end</p>\n</li>\n<li><p><code>g_</code> → non-blank end</p>\n</li>\n<li><p><code>fa</code> → to next character <code>a</code></p>\n</li>\n<li><p><code>t,</code> → to the character right before the next <code>,</code></p>\n</li>\n<li><p><code>3fa</code> → to the third <code>a</code></p>\n</li>\n<li><p><code>F</code>, <code>T</code> → same as <code>f</code>, <code>t</code> with reverse direction</p>\n<p>  <img src=\"https://i.imgur.com/mb7T4yD.jpg\" alt=\"line_moves\"></p>\n</li>\n</ul>\n</li>\n<li><p>manipulate a text block <code>&lt;C-v&gt;</code>, for example:</p>\n<ul>\n<li><p>add prefixes to multi lines</p>\n<p>  <img src=\"https://i.imgur.com/CpuySci.gif\" alt=\"rectangular-blocks\"></p>\n</li>\n</ul>\n</li>\n</ul>\n<p><code>        *</code>^<code>→ to the head of the line         *</code><C-v><code>→ Start to select a block of text         *</code><C-d><code>→ to move downward, you also can use</code>h<code>j</code>k&#96;&#96;l<code>or</code>%<code>instead         *</code>I–<code> → Insert</code>–<code>        *</code>[ESC]&#96; → to make effects to every line</p>\n<pre><code>* append text to multi lines\n\n    ![append-to-many-lines](https://i.imgur.com/Lpxw0LC.gif)\n\n    * `&lt;C-v&gt;` → Choose lines (You can also use `j`, `&lt;C-d&gt;`, `/pattern`, `%`, etc.\n    * `$` → move cursor to the end\n    * `A` → start to input text, type press `ESC`\n\n* indentation\n\n    ![autoindent](https://i.imgur.com/0W9g5UD.gif)\n\n    * `J` → convert multi lines to single line\n    * `&lt;` `&gt;` → indent to left or right\n    * `=` → auto indent\n</code></pre>\n<h3 id=\"Visual-Mode\"><a href=\"#Visual-Mode\" class=\"headerlink\" title=\"Visual Mode:\"></a>Visual Mode:</h3><ul>\n<li>Block Choosing <code>&lt;action&gt;a&lt;object&gt;</code> or <code>&lt;action&gt;i&lt;object&gt;</code><ul>\n<li><p><code>&lt;action&gt;</code> can be any actions, like <code>d</code>(delete), <code>y</code>(copy), <code>v</code>(text selecting).</p>\n</li>\n<li><p><code>&lt;object&gt;</code> can be <code>w</code>(a word), <code>W</code>(a phrase), <code>s</code>(a sentance), <code>p</code>(a paragraph), or a special symbol like <code>&quot;</code>, <code>&#39;</code>, <code>)</code>, <code>&#125;</code>, <code>]</code>.</p>\n</li>\n<li><p>For example:</p>\n<p> <img src=\"https://i.imgur.com/zSC9HrJ.png\" alt=\"textobjects\"></p>\n<ul>\n<li><code>vi&quot;</code> → foo</li>\n<li><code>va&quot;</code> → “foo”</li>\n<li><code>vi)</code> → “foo”</li>\n<li><code>va)</code> → (“foo”)</li>\n<li><code>v2i)</code> → map (+) (“foo”)</li>\n<li><code>v2a)</code> → (map (+) (“foo”))</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Command-Mode-1\"><a href=\"#Command-Mode-1\" class=\"headerlink\" title=\"Command Mode:\"></a>Command Mode:</h3><ul>\n<li><code>:split</code> : split window horizontally, <code>:vsplit</code> : split window vertically.</li>\n<li><code>q</code> : Record typed characters into register, then repeat them.<ul>\n<li><p><code>qa</code> : record every action into register <code>a</code></p>\n</li>\n<li><p><code>@a</code> : replay it</p>\n</li>\n<li><p><code>@@</code> : to replay the latest register</p>\n</li>\n<li><p>For example:</p>\n<p>  <img src=\"https://i.imgur.com/8nCWZLj.gif\" alt=\"macros\"></p>\n<ul>\n<li><p>In this text file, only have “1” in it, start to input: <code>qaYp&lt;C-a&gt;q</code></p>\n<ul>\n<li><code>qa</code> → start to record</li>\n<li><code>yyp</code> → copy current line to next line</li>\n<li><code>&lt;C-a&gt;</code> → add 1</li>\n<li><code>q</code> → stop recording</li>\n<li><code>@a</code> → write down 2 under 1</li>\n<li><code>@@</code> → write down 3 under 2</li>\n<li><code>100@@</code> → repeat it 100 times.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><code>:[range]s/&lt;pattern&gt;/&lt;replace&gt;/&#123;flags&#125;</code> : replace text<ul>\n<li>TODO</li>\n<li><code>[range]</code></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Plugins\"><a href=\"#Plugins\" class=\"headerlink\" title=\"Plugins\"></a>Plugins</h2><h3 id=\"Explanations-of-Important-Keywords\"><a href=\"#Explanations-of-Important-Keywords\" class=\"headerlink\" title=\"Explanations of Important Keywords\"></a>Explanations of Important Keywords</h3><ul>\n<li><p><code>&lt;Leader&gt;</code>: default is <code>\\</code>, you can change it by using <code>let mapleader = &#39;,&#39;</code> in <code>.vimrc</code> file.</p>\n</li>\n<li><p><code>&lt;CR&gt;</code>: equals <code>&lt;Return&gt;</code>    &amp; <code>&lt;Enter&gt;</code></p>\n</li>\n<li><p><code>&lt;S-...&gt;</code>    : shift-key</p>\n</li>\n<li><p><code>&lt;C-...&gt;</code>: control-key</p>\n</li>\n<li><p><code>&lt;M-...&gt;</code> &amp; <code>&lt;A-...&gt;</code>: alt-key</p>\n</li>\n<li><p><code>&lt;D-...&gt;</code>: command-key (Mac only)</p>\n</li>\n<li><p><code>g:</code>: means globally. Example:</p>\n<ul>\n<li><code>let g:last_active_tab = 1</code> toggle switch between current tab and the last one globally.</li>\n</ul>\n</li>\n<li><p><code>remap</code>: Allows for mappings to work recursively.</p>\n</li>\n<li><p><code>noremap</code>: Only a single entry. Can NOT be remapped.</p>\n</li>\n<li><p><code>n</code> &amp; <code>v</code> &amp; <code>s</code> &amp; <code>i</code>: prefixes, <code>n</code> stands for Normal mode, <code>v</code> stands for Visual mode, <code>s</code> stands for Select Mode, <code>i</code> stands for Insert Mode. Example:</p>\n<ul>\n<li><code>nnoremap &lt;C-t&gt; :tabnew&lt;CR&gt;</code>: remap <code>Ctrl + t</code> to create a new tab</li>\n<li><code>inoremap &lt;C-t&gt; &lt;Esc&gt;:tabnew&lt;CR&gt;</code>: same as last one, with an escape action additionally.</li>\n</ul>\n</li>\n<li><p><code>&lt;Plug&gt;</code>: in <code>.vimrc</code> file, it has two meanings. First, it’s visible out of the plugin scripts. And the second, use structure <code>&lt;Plug&gt; scriptname mapname</code> to avoid confliction with other plugins. For example: <code>&lt;Plug&gt;TypecorrAdd</code>, <code>Typecorr</code> is the script name, and <code>Add</code> is the function name.</p>\n</li>\n<li><p><code>&lt;SID&gt;</code>: is the script ID and not visible outside. Compare with <code>&lt;Plug&gt;</code>, it’s more like <code>private</code> function to other scrips. So can’t use it out of the script. Example:</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&quot; ,en ,ep to jump between errors</span></span><br><span class=\"line\">function! <span class=\"symbol\">&lt;SID&gt;</span>LocationPrevious()</span><br><span class=\"line\">  <span class=\"keyword\">try</span></span><br><span class=\"line\">      lprev</span><br><span class=\"line\">  <span class=\"keyword\">catch</span> /^Vim\\%((\\<span class=\"keyword\">a</span>\\+)\\)\\=:E553/</span><br><span class=\"line\">      <span class=\"keyword\">llast</span></span><br><span class=\"line\">  <span class=\"keyword\">endtry</span></span><br><span class=\"line\"><span class=\"keyword\">endfunction</span></span><br><span class=\"line\"></span><br><span class=\"line\">function! <span class=\"symbol\">&lt;SID&gt;</span>LocationNext()</span><br><span class=\"line\">  <span class=\"keyword\">try</span></span><br><span class=\"line\">      <span class=\"keyword\">lnext</span></span><br><span class=\"line\">  <span class=\"keyword\">catch</span> /^Vim\\%((\\<span class=\"keyword\">a</span>\\+)\\)\\=:E553/</span><br><span class=\"line\">      <span class=\"keyword\">lfirst</span></span><br><span class=\"line\">  <span class=\"keyword\">endtry</span></span><br><span class=\"line\"><span class=\"keyword\">endfunction</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">nnoremap</span> <span class=\"symbol\">&lt;silent&gt;</span> <span class=\"symbol\">&lt;Plug&gt;</span>LocationPrevious :<span class=\"symbol\">&lt;C-u&gt;</span><span class=\"keyword\">exe</span> <span class=\"string\">&#x27;call &lt;SID&gt;LocationPrevious()&#x27;</span><span class=\"symbol\">&lt;CR&gt;</span></span><br><span class=\"line\"><span class=\"keyword\">nnoremap</span> <span class=\"symbol\">&lt;silent&gt;</span> <span class=\"symbol\">&lt;Plug&gt;</span>LocationNext :<span class=\"symbol\">&lt;C-u&gt;</span><span class=\"keyword\">exe</span> <span class=\"string\">&#x27;call &lt;SID&gt;LocationNext()&#x27;</span><span class=\"symbol\">&lt;CR&gt;</span></span><br><span class=\"line\"><span class=\"keyword\">nmap</span> <span class=\"symbol\">&lt;silent&gt;</span> <span class=\"symbol\">&lt;Leader&gt;</span>ep <span class=\"symbol\">&lt;Plug&gt;</span>LocationPrevious</span><br><span class=\"line\"><span class=\"keyword\">nmap</span> <span class=\"symbol\">&lt;silent&gt;</span> <span class=\"symbol\">&lt;Leader&gt;</span><span class=\"keyword\">en</span> <span class=\"symbol\">&lt;Plug&gt;</span>LocationNext</span><br></pre></td></tr></table></figure>\n</li>\n<li><p><code>&lt;silence&gt;</code>:  to make a key mapping can&#96;t be echoed on the command line</p>\n</li>\n<li><p><code>&lt;expr&gt;</code> take the argument as expression. For example: <code>inoremap &lt;expr&gt; &lt;C-L&gt; ListItem()</code>, ListItem is a function which is mapped with <code>Ctrl + L</code>.</p>\n</li>\n</ul>\n<h3 id=\"unblevable-x2F-quick-scope\"><a href=\"#unblevable-x2F-quick-scope\" class=\"headerlink\" title=\"unblevable&#x2F;quick-scope\"></a>unblevable&#x2F;quick-scope</h3><ul>\n<li><p>Github Repo: <a href=\"https://github.com/unblevable/quick-scope\">unblevable&#x2F;quick-scope</a></p>\n</li>\n<li><p>Useage: highlights which characters to target for <code>f</code>, <code>F</code> and family.</p>\n</li>\n<li><p>Key Mapping:</p>\n<pre><code>let g:qs_highlight_on_keys = [&#39;f&#39;, &#39;F&#39;, &#39;t&#39;, &#39;T&#39;] //\n</code></pre>\n</li>\n</ul>\n<h3 id=\"ntpeters-x2F-vim-better-whitespace\"><a href=\"#ntpeters-x2F-vim-better-whitespace\" class=\"headerlink\" title=\"ntpeters&#x2F;vim-better-whitespace\"></a>ntpeters&#x2F;vim-better-whitespace</h3><ul>\n<li><p>Github Repo: <a href=\"ntpeters/vim-better-whitespace\">ntpeters&#x2F;vim-better-whitespace</a></p>\n</li>\n<li><p>Useage: clean extra whitespace.</p>\n</li>\n<li><p>Key Mapping:</p>\n<pre><code>nnoremap &lt;silent&gt; &lt;Leader&gt;&lt;Space&gt; :StripWhitespace&lt;CR&gt;\nautocmd FileType c,cpp,java,go,php,javascript,puppet,python,rust,twig,xml,yml,perl autocmd BufWritePre &lt;buffer&gt; StripWhitespace\nlet g:better_whitespace_filetypes_blacklist=[&#39;diff&#39;, &#39;gitcommit&#39;, &#39;unite&#39;, &#39;qf&#39;, &#39;help&#39;]\n</code></pre>\n</li>\n</ul>\n<h3 id=\"Vim-CtrlSpace\"><a href=\"#Vim-CtrlSpace\" class=\"headerlink\" title=\"Vim-CtrlSpace\"></a>Vim-CtrlSpace</h3><ul>\n<li><p>Github Repo: <a href=\"https://github.com/vim-ctrlspace/vim-ctrlspace\">vim-ctrlspace&#x2F;vim-ctrlspace</a></p>\n</li>\n<li><p>Useage:</p>\n<ul>\n<li>bookmarks for your favorite projects</li>\n<li>workspaces (sessions)</li>\n<li>tabs &#x2F; buffers &#x2F; files management</li>\n<li>fast fuzzy searching powered by Go</li>\n</ul>\n</li>\n<li><p>Shortkeys:</p>\n<ul>\n<li><code>Ctrl + Space</code> : open ctrl space command line</li>\n<li><code>b</code> : bookmark list</li>\n<li><code>w</code> : workspace list in current bookmark</li>\n<li><code>l</code> : tab list in current workspace</li>\n<li><code>o</code> : file list in current workspace</li>\n<li><code>h</code> : buffer list in current workspace, this is default list when you hit ctrl + space</li>\n<li><code>/</code> : Into Search Mode, type it again will close search mode. Aka,  <code>B</code>, <code>W</code>, <code>L</code>, <code>O</code>, <code>H</code> with uppercase will open the same list with Search Mode</li>\n<li><code>i</code> : switch directory (when you on the buffer list)</li>\n<li><code>a</code> : all the files are opend in current workspace</li>\n<li><code>s</code> : save current workspace&#x2F;bookmark, then <code>&lt;CR&gt;</code> to confirm</li>\n<li><code>d</code> : delete a file from current buffer or file list</li>\n<li><code>j</code>,<code>k</code> : switch items, then <code>&lt;CR&gt;</code> to confirm</li>\n<li><code>m</code> : rename bookmark or workspace(when you on the workspace list or bookmark list)</li>\n</ul>\n</li>\n<li><p>Key Mapping:</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> <span class=\"built_in\">has</span>(<span class=\"string\">&quot;gui_running&quot;</span>)</span><br><span class=\"line\"><span class=\"comment\">&quot; Settings for MacVim and Inconsolata font</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> <span class=\"variable\">g:CtrlSpaceSymbols</span> = &#123; <span class=\"string\">&quot;File&quot;</span>: <span class=\"string\">&quot;◯&quot;</span>, <span class=\"string\">&quot;CTab&quot;</span>: <span class=\"string\">&quot;▣&quot;</span>, <span class=\"string\">&quot;Tabs&quot;</span>: <span class=\"string\">&quot;▢&quot;</span> &#125;</span><br><span class=\"line\"><span class=\"keyword\">endif</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> <span class=\"built_in\">executable</span>(<span class=\"string\">&quot;ag&quot;</span>)</span><br><span class=\"line\">  <span class=\"keyword\">let</span> <span class=\"variable\">g:CtrlSpaceGlobCommand</span> = <span class=\"string\">&#x27;ag -l --nocolor -g &quot;&quot;&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">endif</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:CtrlSpaceSearchTiming</span> = <span class=\"number\">500</span></span><br><span class=\"line\"><span class=\"keyword\">hi</span> link CtrlSpaceNormal   PMenu</span><br><span class=\"line\"><span class=\"keyword\">hi</span> link CtrlSpaceSelected PMenuSel</span><br><span class=\"line\"><span class=\"keyword\">hi</span> link CtrlSpaceSearch   Search</span><br><span class=\"line\"><span class=\"keyword\">hi</span> link CtrlSpaceStatus   StatusLine</span><br><span class=\"line\"><span class=\"keyword\">nnoremap</span> <span class=\"symbol\">&lt;silent&gt;</span><span class=\"symbol\">&lt;C-p&gt;</span> :CtrlSpace O<span class=\"symbol\">&lt;CR&gt;</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:CtrlSpaceLoadLastWorkspaceOnStart</span> = <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:CtrlSpaceSaveWorkspaceOnSwitch</span> = <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:CtrlSpaceSaveWorkspaceOnExit</span> = <span class=\"number\">1</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"scrooloose-x2F-nerdtree-amp-jistr-x2F-vim-nerdtree-tabs\"><a href=\"#scrooloose-x2F-nerdtree-amp-jistr-x2F-vim-nerdtree-tabs\" class=\"headerlink\" title=\"scrooloose&#x2F;nerdtree &amp; jistr&#x2F;vim-nerdtree-tabs\"></a>scrooloose&#x2F;nerdtree &amp; jistr&#x2F;vim-nerdtree-tabs</h3><ul>\n<li><p>TODO</p>\n</li>\n<li><p>Github Repo: <a href=\"https://github.com/scrooloose/nerdtree\">scrooloose&#x2F;nerdtree</a> &amp; <a href=\"https://github.com/jistr/vim-nerdtree-tabs\">jistr&#x2F;vim-nerdtree-tabs</a></p>\n</li>\n<li><p>Useage: to explore filesystem and to open files and directories.</p>\n</li>\n<li><p>Key Mapping:</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&quot; nerdtree</span></span><br><span class=\"line\"><span class=\"keyword\">map</span> <span class=\"symbol\">&lt;C-n&gt;</span> :NERDTreeToggle<span class=\"symbol\">&lt;CR&gt;</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> NERDTreeHighlightCursorline=<span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> NERDTreeIgnore=[ <span class=\"string\">&#x27;\\.pyc$&#x27;</span>, <span class=\"string\">&#x27;\\.pyo$&#x27;</span>, <span class=\"string\">&#x27;\\.obj$&#x27;</span>, <span class=\"string\">&#x27;\\.o$&#x27;</span>, <span class=\"string\">&#x27;\\.so$&#x27;</span>, <span class=\"string\">&#x27;\\.egg$&#x27;</span>, <span class=\"string\">&#x27;^\\.git$&#x27;</span>, <span class=\"string\">&#x27;^\\.svn$&#x27;</span>, <span class=\"string\">&#x27;^\\.hg$&#x27;</span> ]</span><br><span class=\"line\"><span class=\"comment\">&quot;close vim if the only window left open is a NERDTree</span></span><br><span class=\"line\"><span class=\"keyword\">autocmd</span> bufenter * <span class=\"keyword\">if</span> (<span class=\"built_in\">winnr</span>(<span class=\"string\">&quot;$&quot;</span>) == <span class=\"number\">1</span> &amp;&amp; <span class=\"built_in\">exists</span>(<span class=\"string\">&quot;b:NERDTreeType&quot;</span>) &amp;&amp; <span class=\"variable\">b:NERDTreeType</span> == <span class=\"string\">&quot;primary&quot;</span>) | q | end</span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:NERDTreeMapOpenSplit</span> = <span class=\"string\">&#x27;s&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:NERDTreeMapOpenVSplit</span> = <span class=\"string\">&#x27;v&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:NERDTreeWinSize</span>=<span class=\"number\">26</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&quot; nerdtreetabs</span></span><br><span class=\"line\"><span class=\"keyword\">map</span> <span class=\"symbol\">&lt;C-n&gt;</span> <span class=\"symbol\">&lt;plug&gt;</span>NERDTreeTabsToggle<span class=\"symbol\">&lt;CR&gt;</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:nerdtree_tabs_synchronize_view</span>=<span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:nerdtree_tabs_synchronize_focus</span>=<span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:nerdtree_tabs_open_on_console_startup</span>=<span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:nerdtree_tabs_open_on_gui_startup</span>=<span class=\"number\">0</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"syntastic\"><a href=\"#syntastic\" class=\"headerlink\" title=\"syntastic\"></a>syntastic</h3><ul>\n<li><p>Github Repo: <a href=\"https://github.com/vim-syntastic/syntastic#introduction\">vim-syntastic&#x2F;syntastic</a></p>\n</li>\n<li><p>Useage: a syntax checking plugin</p>\n</li>\n<li><p>Key Mapping:</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">execute</span> pathogen#infect()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:syntastic_error_symbol</span>=<span class=\"string\">&#x27;&gt;&gt;&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:syntastic_warning_symbol</span>=<span class=\"string\">&#x27;&gt;&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:syntastic_check_on_open</span>=<span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:syntastic_check_on_wq</span>=<span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:syntastic_enable_highlighting</span>=<span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&quot; checkers</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:syntastic_php_checkers</span> = [<span class=\"string\">&#x27;php&#x27;</span>, <span class=\"string\">&#x27;phpcs&#x27;</span>, <span class=\"string\">&#x27;phpmd&#x27;</span>]</span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:syntastic_python_checkers</span>=[<span class=\"string\">&#x27;pyflakes&#x27;</span>, <span class=\"string\">&#x27;pep8&#x27;</span>] <span class=\"comment\">&quot; 使用pyflakes,速度比pylint快</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:syntastic_python_pep8_args</span>=<span class=\"string\">&#x27;--ignore=E501,E225,E124,E712&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:syntastic_javascript_checkers</span> = [<span class=\"string\">&#x27;jsl&#x27;</span>, <span class=\"string\">&#x27;jshint&#x27;</span>]</span><br><span class=\"line\"><span class=\"comment\">&quot; let g:syntastic_markdown_checkers = [&#x27;proselint&#x27;]</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:syntastic_html_checkers</span>=[<span class=\"string\">&#x27;tidy&#x27;</span>, <span class=\"string\">&#x27;jshint&#x27;</span>]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">set</span> statusline+=%#warningmsg#</span><br><span class=\"line\"><span class=\"keyword\">set</span> statusline+=%&#123;SyntasticStatuslineFlag()&#125;</span><br><span class=\"line\"><span class=\"keyword\">set</span> statusline+=%*</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&quot; to see error location list</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:syntastic_always_populate_loc_list</span> = <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:syntastic_enable_signs</span> = <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:syntastic_auto_loc_list</span> = <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:syntastic_auto_jump</span> = <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">highlight</span> SyntasticErrorSign guifg=white guibg=black</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"YouCompleteMe\"><a href=\"#YouCompleteMe\" class=\"headerlink\" title=\"YouCompleteMe\"></a>YouCompleteMe</h3><ul>\n<li><p>Github Repo: <a href=\"https://github.com/Valloric/YouCompleteMe\">Valloric&#x2F;YouCompleteMe</a></p>\n</li>\n<li><p>Useage: code completion</p>\n</li>\n<li><p>Key Mapping:</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:ycm_key_list_select_completion</span>=[<span class=\"string\">&#x27;&lt;C-j&gt;&#x27;</span>]</span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:ycm_key_list_previous_completion</span>=[<span class=\"string\">&#x27;&lt;C-k&gt;&#x27;</span>]</span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:ycm_complete_in_comments</span> = <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:ycm_complete_in_strings</span> = <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:ycm_use_ultisnips_completer</span> = <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:ycm_collect_identifiers_from_comments_and_strings</span> = <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:ycm_collect_identifiers_from_tags_files</span> = <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:ycm_seed_identifiers_with_syntax</span>=<span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:ycm_goto_buffer_command</span> = <span class=\"string\">&#x27;horizontal-split&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">nnoremap</span> <span class=\"symbol\">&lt;leader&gt;</span>jd :YcmCompleter GoToDefinitionElseDeclaration<span class=\"symbol\">&lt;CR&gt;</span></span><br><span class=\"line\"><span class=\"keyword\">nnoremap</span> <span class=\"symbol\">&lt;leader&gt;</span>gd :YcmCompleter GoToDeclaration<span class=\"symbol\">&lt;CR&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> !empty(<span class=\"built_in\">glob</span>(<span class=\"string\">&quot;~/.vim/bundle/YouCompleteMe/third_party/ycmd/cpp/ycm/.ycm_extra_conf.py&quot;</span>))</span><br><span class=\"line\">    <span class=\"keyword\">let</span> <span class=\"variable\">g:ycm_global_ycm_extra_conf</span> = <span class=\"string\">&quot;~/.vim/bundle/YouCompleteMe/third_party/ycmd/cpp/ycm/.ycm_extra_conf.py&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">endif</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"vim-easymotion\"><a href=\"#vim-easymotion\" class=\"headerlink\" title=\"vim-easymotion\"></a>vim-easymotion</h3><ul>\n<li><p>Github Repo: <a href=\"https://github.com/easymotion/vim-easymotion\">easymotion&#x2F;vim-easymotion</a></p>\n</li>\n<li><p>Usage: Provides a much simpler way to use some motions in vim.</p>\n</li>\n<li><p>Keys Mapping:</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:EasyMotion_smartcase</span> = <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&quot; &lt;Leader&gt;f&#123;char&#125; to move to &#123;char&#125;</span></span><br><span class=\"line\"><span class=\"keyword\">map</span>  <span class=\"symbol\">&lt;Leader&gt;</span><span class=\"symbol\">&lt;Leader&gt;</span><span class=\"keyword\">f</span> <span class=\"symbol\">&lt;Plug&gt;</span>(easymotion-<span class=\"keyword\">bd</span>-<span class=\"keyword\">f</span>)</span><br><span class=\"line\"><span class=\"keyword\">nmap</span> <span class=\"symbol\">&lt;Leader&gt;</span><span class=\"symbol\">&lt;Leader&gt;</span><span class=\"keyword\">f</span> <span class=\"symbol\">&lt;Plug&gt;</span>(easymotion-overwin-<span class=\"keyword\">f</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&quot; s&#123;char&#125;&#123;char&#125; to move to &#123;char&#125;&#123;char&#125;</span></span><br><span class=\"line\"><span class=\"keyword\">nmap</span> s <span class=\"symbol\">&lt;Plug&gt;</span>(easymotion-overwin-f2)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&quot; Move to line</span></span><br><span class=\"line\"><span class=\"keyword\">map</span>  <span class=\"symbol\">&lt;Leader&gt;</span><span class=\"symbol\">&lt;Leader&gt;</span><span class=\"keyword\">l</span> <span class=\"symbol\">&lt;Plug&gt;</span>(easymotion-<span class=\"keyword\">bd</span>-jk)</span><br><span class=\"line\"><span class=\"keyword\">nmap</span> <span class=\"symbol\">&lt;Leader&gt;</span><span class=\"symbol\">&lt;Leader&gt;</span><span class=\"keyword\">l</span> <span class=\"symbol\">&lt;Plug&gt;</span>(easymotion-overwin-<span class=\"built_in\">line</span>)</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"easyalign\"><a href=\"#easyalign\" class=\"headerlink\" title=\"easyalign\"></a>easyalign</h3><ul>\n<li><p>Github Repo: <a href=\"https://github.com/junegunn/vim-easy-align\">junegunn&#x2F;vim-easy-align</a></p>\n</li>\n<li><p>Usage: alignment</p>\n</li>\n<li><p>Keys Mapping:</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">vmap</span> ga <span class=\"symbol\">&lt;Plug&gt;</span>(EasyAlign)</span><br><span class=\"line\"><span class=\"keyword\">nmap</span> ga <span class=\"symbol\">&lt;Plug&gt;</span>(EasyAlign)</span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:easy_align_ignore_groups</span> = [<span class=\"string\">&#x27;Comment&#x27;</span>, <span class=\"string\">&#x27;String&#x27;</span>]</span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:easy_align_delimiters</span> = &#123;</span><br><span class=\"line\">   \\ <span class=\"string\">&#x27;&gt;&#x27;</span>: &#123; <span class=\"string\">&#x27;pattern&#x27;</span>: <span class=\"string\">&#x27;&gt;&gt;\\|=&gt;\\|&gt;&#x27;</span> &#125;,</span><br><span class=\"line\">   \\ <span class=\"string\">&#x27;/&#x27;</span>: &#123;</span><br><span class=\"line\">   \\     <span class=\"string\">&#x27;pattern&#x27;</span>:         <span class=\"string\">&#x27;//\\+\\|/\\*\\|\\*/&#x27;</span>,</span><br><span class=\"line\">   \\     <span class=\"string\">&#x27;delimiter_align&#x27;</span>: <span class=\"string\">&#x27;l&#x27;</span>,</span><br><span class=\"line\">   \\     <span class=\"string\">&#x27;ignore_groups&#x27;</span>:   [<span class=\"string\">&#x27;!Comment&#x27;</span>] &#125;,</span><br><span class=\"line\">   \\ <span class=\"string\">&#x27;]&#x27;</span>: &#123;</span><br><span class=\"line\">   \\     <span class=\"string\">&#x27;pattern&#x27;</span>:       <span class=\"string\">&#x27;[[\\]]&#x27;</span>,</span><br><span class=\"line\">   \\     <span class=\"string\">&#x27;left_margin&#x27;</span>:   <span class=\"number\">0</span>,</span><br><span class=\"line\">   \\     <span class=\"string\">&#x27;right_margin&#x27;</span>:  <span class=\"number\">0</span>,</span><br><span class=\"line\">   \\     <span class=\"string\">&#x27;stick_to_left&#x27;</span>: <span class=\"number\">0</span></span><br><span class=\"line\">   \\   &#125;,</span><br><span class=\"line\">   \\ <span class=\"string\">&#x27;)&#x27;</span>: &#123;</span><br><span class=\"line\">   \\     <span class=\"string\">&#x27;pattern&#x27;</span>:       <span class=\"string\">&#x27;[()]&#x27;</span>,</span><br><span class=\"line\">   \\     <span class=\"string\">&#x27;left_margin&#x27;</span>:   <span class=\"number\">0</span>,</span><br><span class=\"line\">   \\     <span class=\"string\">&#x27;right_margin&#x27;</span>:  <span class=\"number\">0</span>,</span><br><span class=\"line\">   \\     <span class=\"string\">&#x27;stick_to_left&#x27;</span>: <span class=\"number\">0</span></span><br><span class=\"line\">   \\   &#125;,</span><br><span class=\"line\">   \\ <span class=\"string\">&#x27;d&#x27;</span>: &#123;</span><br><span class=\"line\">   \\     <span class=\"string\">&#x27;pattern&#x27;</span>:      <span class=\"string\">&#x27; \\(\\S\\+\\s*[;=]\\)\\@=&#x27;</span>,</span><br><span class=\"line\">   \\     <span class=\"string\">&#x27;left_margin&#x27;</span>:  <span class=\"number\">0</span>,</span><br><span class=\"line\">   \\     <span class=\"string\">&#x27;right_margin&#x27;</span>: <span class=\"number\">0</span></span><br><span class=\"line\">   \\   &#125;</span><br><span class=\"line\">   \\ &#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"NerdTree\"><a href=\"#NerdTree\" class=\"headerlink\" title=\"NerdTree\"></a>NerdTree</h3><ul>\n<li><p>Github Repo: <a href=\"https://github.com/scrooloose/nerdtree\">scrooloose&#x2F;nerdtree</a></p>\n</li>\n<li><p>Usage: to explore your filesystem and to open files and directories.</p>\n</li>\n<li><p>Keys Mapping:</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">map</span> <span class=\"symbol\">&lt;leader&gt;</span>n :NERDTreeToggle<span class=\"symbol\">&lt;CR&gt;</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> NERDTreeShowBookmarks=<span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> NERDTreeHighlightCursorline=<span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> NERDTreeIgnore=[ <span class=\"string\">&#x27;\\.pyc$&#x27;</span>, <span class=\"string\">&#x27;\\.pyo$&#x27;</span>, <span class=\"string\">&#x27;\\.obj$&#x27;</span>, <span class=\"string\">&#x27;\\.o$&#x27;</span>, <span class=\"string\">&#x27;\\.so$&#x27;</span>, <span class=\"string\">&#x27;\\.egg$&#x27;</span>, <span class=\"string\">&#x27;^\\.git$&#x27;</span>, <span class=\"string\">&#x27;^\\.svn$&#x27;</span>, <span class=\"string\">&#x27;^\\.hg$&#x27;</span> ]</span><br><span class=\"line\"><span class=\"comment\">&quot;close vim if the only window left open is a NERDTree</span></span><br><span class=\"line\"><span class=\"keyword\">autocmd</span> bufenter * <span class=\"keyword\">if</span> (<span class=\"built_in\">winnr</span>(<span class=\"string\">&quot;$&quot;</span>) == <span class=\"number\">1</span> &amp;&amp; <span class=\"built_in\">exists</span>(<span class=\"string\">&quot;b:NERDTreeType&quot;</span>) &amp;&amp; <span class=\"variable\">b:NERDTreeType</span> == <span class=\"string\">&quot;primary&quot;</span>) | q | end</span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:NERDTreeMapOpenSplit</span> = <span class=\"string\">&#x27;s&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:NERDTreeMapOpenVSplit</span> = <span class=\"string\">&#x27;v&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:NERDTreeWinSize</span>=<span class=\"number\">26</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"NERDCommenter\"><a href=\"#NERDCommenter\" class=\"headerlink\" title=\"NERDCommenter\"></a>NERDCommenter</h3><ul>\n<li><p>Github Repo: <a href=\"https://github.com/scrooloose/nerdcommenter\">scrooloose&#x2F;nerdcommenter</a></p>\n</li>\n<li><p>Usage: to wrangle your code comments.</p>\n</li>\n<li><p>Shortkeys:</p>\n<ul>\n<li><code>[count]&lt;leader&gt;cc</code> : Comment out the current line or text selected in visual mode.</li>\n<li><code>[count]&lt;leader&gt;c&lt;space&gt;</code> : Toggles the comment state of the selected line(s). If the topmost selected line is commented, all selected lines are uncommented and vice versa.</li>\n<li><code>[count]&lt;leader&gt;cs</code> : Comments out the selected lines with a pretty block formatted layout.</li>\n<li><code>[count]&lt;leader&gt;ci</code> : Toggles the comment state of the selected line(s) individually.</li>\n</ul>\n</li>\n<li><p>Keys Mapping:</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&quot; Add spaces after comment delimiters by default</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:NERDSpaceDelims</span> = <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"comment\">&quot; Use compact syntax for prettified multi-line comments</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:NERDCompactSexyComs</span> = <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"comment\">&quot; Align line-wise comment delimiters flush left instead of following code indentation</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:NERDDefaultAlign</span> = <span class=\"string\">&#x27;left&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">&quot; Allow commenting and inverting empty lines (useful when commenting a region)</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:NERDCommentEmptyLines</span> = <span class=\"number\">1</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"Airline\"><a href=\"#Airline\" class=\"headerlink\" title=\"Airline\"></a>Airline</h3><ul>\n<li><p>Github Repo: <a href=\"https://github.com/vim-airline/vim-airline\">vim-airline&#x2F;vim-airline</a></p>\n</li>\n<li><p>Usage: rich statusbar.</p>\n</li>\n<li><p>Keys Mapping:</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> !exists(<span class=\"string\">&#x27;g:airline_symbols&#x27;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">let</span> <span class=\"variable\">g:airline_symbols</span> = &#123;&#125;</span><br><span class=\"line\"><span class=\"keyword\">endif</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:airline_mode_map</span> = &#123;</span><br><span class=\"line\">    \\ <span class=\"string\">&#x27;__&#x27;</span> : <span class=\"string\">&#x27;-&#x27;</span>,</span><br><span class=\"line\">    \\ <span class=\"string\">&#x27;n&#x27;</span>  : <span class=\"string\">&#x27;N&#x27;</span>,</span><br><span class=\"line\">    \\ <span class=\"string\">&#x27;i&#x27;</span>  : <span class=\"string\">&#x27;I&#x27;</span>,</span><br><span class=\"line\">    \\ <span class=\"string\">&#x27;R&#x27;</span>  : <span class=\"string\">&#x27;R&#x27;</span>,</span><br><span class=\"line\">    \\ <span class=\"string\">&#x27;c&#x27;</span>  : <span class=\"string\">&#x27;C&#x27;</span>,</span><br><span class=\"line\">    \\ <span class=\"string\">&#x27;v&#x27;</span>  : <span class=\"string\">&#x27;V&#x27;</span>,</span><br><span class=\"line\">    \\ <span class=\"string\">&#x27;V&#x27;</span>  : <span class=\"string\">&#x27;V&#x27;</span>,</span><br><span class=\"line\">    \\ <span class=\"string\">&#x27;\u0016&#x27;</span> : <span class=\"string\">&#x27;V&#x27;</span>,</span><br><span class=\"line\">    \\ <span class=\"string\">&#x27;s&#x27;</span>  : <span class=\"string\">&#x27;S&#x27;</span>,</span><br><span class=\"line\">    \\ <span class=\"string\">&#x27;S&#x27;</span>  : <span class=\"string\">&#x27;S&#x27;</span>,</span><br><span class=\"line\">    \\ <span class=\"string\">&#x27;\u0013&#x27;</span> : <span class=\"string\">&#x27;S&#x27;</span>,</span><br><span class=\"line\">    \\ &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:airline_left_sep</span> = <span class=\"string\">&#x27;❯&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:airline_right_sep</span> = <span class=\"string\">&#x27;❮&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:airline_symbols</span>.linenr = <span class=\"string\">&#x27;¶&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:airline_symbols</span>.branch = <span class=\"string\">&#x27;⎇&#x27;</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n<!---\n### a\n* Github Repo: [b](c)\n* Useage: d\n* Key Mapping:\n\n        e\n-->\n\n","site":{"data":{}},"excerpt":"","more":"<ul>\n<li>好不容易用英语写完了， 懒得翻译了</li>\n</ul>\n<h2 id=\"Basic-Usage\"><a href=\"#Basic-Usage\" class=\"headerlink\" title=\"Basic Usage\"></a>Basic Usage</h2><h3 id=\"Normal-Mode\"><a href=\"#Normal-Mode\" class=\"headerlink\" title=\"Normal Mode:\"></a>Normal Mode:</h3><ul>\n<li>First Open file with VIM command, with get into Normal Mode</li>\n<li><code>h``j``k``l</code> : <code>←``↓``↑``→</code></li>\n<li><code>dd</code> : delete current line</li>\n<li><code>x</code> : delete current character</li>\n<li><code>yy</code> : copy current line</li>\n<li><code>p</code> : paste. It will paste last copied, cut or deleted texts.</li>\n<li><code>^</code> : go to first non-blank character in current line, <code>$</code> to the end</li>\n<li><code>u</code> : undo, <code>&lt;C-r&gt;</code> : redo. <code>g-</code>&#x2F;<code>g+</code> : go to older&#x2F;newer text state</li>\n<li><code>.</code> : repeat last action</li>\n<li><code>N&lt;command&gt;</code> : repeat <code>Command</code> <code>N</code> times. For example, <code>2dd</code> : delete two line</li>\n<li><code>gg</code>: go to first line, <code>G</code> : Go to last line, <code>NG</code> : Go to line <code>N</code> (<code>N</code> stands for a number, for example, <code>10G</code>)</li>\n<li><code>w</code> : move cursor to the beginning of next word, <code>e</code> : move cursor to the end of next word</li>\n<li><code>%</code> : match the closest <code>&#123;</code>, <code>[</code>, <code>(</code></li>\n<li><code>*</code> : search forward for the occurrence of the word nearest to the cursor., <code>#</code> : search backward.</li>\n</ul>\n<h3 id=\"Insert-Mode\"><a href=\"#Insert-Mode\" class=\"headerlink\" title=\"Insert Mode:\"></a>Insert Mode:</h3><ul>\n<li><code>i</code> : Get into Insert Mode, <code>Esc</code> back to Normal Mode</li>\n<li><code>I</code> : Start to insert text at the beginning of the current line</li>\n<li><code>o</code> : Begin a new line below the cursor and insert text</li>\n<li><code>O</code> : Begin a new line above the cursor and insert text</li>\n</ul>\n<h3 id=\"Command-Mode\"><a href=\"#Command-Mode\" class=\"headerlink\" title=\"Command Mode:\"></a>Command Mode:</h3><ul>\n<li>Execute command (<code>:</code>), search patterns<br>(<code>/</code> and <code>?</code>), and filter commands (<code>!</code>)</li>\n<li><code>:wq</code> : Save then quit, <code>:q</code>: Quit, <code>:w</code>: Save, <code>:q!</code>: Quit current file without saving, <code>:qa!</code> Quit all files without saving</li>\n<li><code>:e &lt;path/to/file&gt;</code> : Open another file</li>\n<li><code>:saveas &lt;path/to/file&gt;</code> : Save as another file</li>\n</ul>\n<h2 id=\"Advance-Usage\"><a href=\"#Advance-Usage\" class=\"headerlink\" title=\"Advance Usage\"></a>Advance Usage</h2><h3 id=\"Insert-Mode-1\"><a href=\"#Insert-Mode-1\" class=\"headerlink\" title=\"Insert Mode:\"></a>Insert Mode:</h3><ul>\n<li><code>gi</code> : goto Insert mode where you left it last time</li>\n</ul>\n<h3 id=\"Normal-Mode-1\"><a href=\"#Normal-Mode-1\" class=\"headerlink\" title=\"Normal Mode:\"></a>Normal Mode:</h3><ul>\n<li><p><code>&lt;C-y&gt;</code>, <code>&lt;C-e&gt;</code> : check the text above or below the cursor</p>\n</li>\n<li><p><code>&lt;C-w&gt;w</code> : Switch windows between last one and current one</p>\n</li>\n<li><p><code>&lt;C-w&gt;&lt;dir&gt;</code> : <code>&lt;dir&gt;</code> can be <code>h``j``k``l</code>, switch windows to left, down, up or right.</p>\n</li>\n<li><p>to move at current line</p>\n<ul>\n<li><p><code>0</code> → head</p>\n</li>\n<li><p><code>^</code> → non-blank head</p>\n</li>\n<li><p><code>$</code> → end</p>\n</li>\n<li><p><code>g_</code> → non-blank end</p>\n</li>\n<li><p><code>fa</code> → to next character <code>a</code></p>\n</li>\n<li><p><code>t,</code> → to the character right before the next <code>,</code></p>\n</li>\n<li><p><code>3fa</code> → to the third <code>a</code></p>\n</li>\n<li><p><code>F</code>, <code>T</code> → same as <code>f</code>, <code>t</code> with reverse direction</p>\n<p>  <img src=\"https://i.imgur.com/mb7T4yD.jpg\" alt=\"line_moves\"></p>\n</li>\n</ul>\n</li>\n<li><p>manipulate a text block <code>&lt;C-v&gt;</code>, for example:</p>\n<ul>\n<li><p>add prefixes to multi lines</p>\n<p>  <img src=\"https://i.imgur.com/CpuySci.gif\" alt=\"rectangular-blocks\"></p>\n</li>\n</ul>\n</li>\n</ul>\n<p><code>        *</code>^<code>→ to the head of the line         *</code><C-v><code>→ Start to select a block of text         *</code><C-d><code>→ to move downward, you also can use</code>h<code>j</code>k&#96;&#96;l<code>or</code>%<code>instead         *</code>I–<code> → Insert</code>–<code>        *</code>[ESC]&#96; → to make effects to every line</p>\n<pre><code>* append text to multi lines\n\n    ![append-to-many-lines](https://i.imgur.com/Lpxw0LC.gif)\n\n    * `&lt;C-v&gt;` → Choose lines (You can also use `j`, `&lt;C-d&gt;`, `/pattern`, `%`, etc.\n    * `$` → move cursor to the end\n    * `A` → start to input text, type press `ESC`\n\n* indentation\n\n    ![autoindent](https://i.imgur.com/0W9g5UD.gif)\n\n    * `J` → convert multi lines to single line\n    * `&lt;` `&gt;` → indent to left or right\n    * `=` → auto indent\n</code></pre>\n<h3 id=\"Visual-Mode\"><a href=\"#Visual-Mode\" class=\"headerlink\" title=\"Visual Mode:\"></a>Visual Mode:</h3><ul>\n<li>Block Choosing <code>&lt;action&gt;a&lt;object&gt;</code> or <code>&lt;action&gt;i&lt;object&gt;</code><ul>\n<li><p><code>&lt;action&gt;</code> can be any actions, like <code>d</code>(delete), <code>y</code>(copy), <code>v</code>(text selecting).</p>\n</li>\n<li><p><code>&lt;object&gt;</code> can be <code>w</code>(a word), <code>W</code>(a phrase), <code>s</code>(a sentance), <code>p</code>(a paragraph), or a special symbol like <code>&quot;</code>, <code>&#39;</code>, <code>)</code>, <code>&#125;</code>, <code>]</code>.</p>\n</li>\n<li><p>For example:</p>\n<p> <img src=\"https://i.imgur.com/zSC9HrJ.png\" alt=\"textobjects\"></p>\n<ul>\n<li><code>vi&quot;</code> → foo</li>\n<li><code>va&quot;</code> → “foo”</li>\n<li><code>vi)</code> → “foo”</li>\n<li><code>va)</code> → (“foo”)</li>\n<li><code>v2i)</code> → map (+) (“foo”)</li>\n<li><code>v2a)</code> → (map (+) (“foo”))</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Command-Mode-1\"><a href=\"#Command-Mode-1\" class=\"headerlink\" title=\"Command Mode:\"></a>Command Mode:</h3><ul>\n<li><code>:split</code> : split window horizontally, <code>:vsplit</code> : split window vertically.</li>\n<li><code>q</code> : Record typed characters into register, then repeat them.<ul>\n<li><p><code>qa</code> : record every action into register <code>a</code></p>\n</li>\n<li><p><code>@a</code> : replay it</p>\n</li>\n<li><p><code>@@</code> : to replay the latest register</p>\n</li>\n<li><p>For example:</p>\n<p>  <img src=\"https://i.imgur.com/8nCWZLj.gif\" alt=\"macros\"></p>\n<ul>\n<li><p>In this text file, only have “1” in it, start to input: <code>qaYp&lt;C-a&gt;q</code></p>\n<ul>\n<li><code>qa</code> → start to record</li>\n<li><code>yyp</code> → copy current line to next line</li>\n<li><code>&lt;C-a&gt;</code> → add 1</li>\n<li><code>q</code> → stop recording</li>\n<li><code>@a</code> → write down 2 under 1</li>\n<li><code>@@</code> → write down 3 under 2</li>\n<li><code>100@@</code> → repeat it 100 times.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><code>:[range]s/&lt;pattern&gt;/&lt;replace&gt;/&#123;flags&#125;</code> : replace text<ul>\n<li>TODO</li>\n<li><code>[range]</code></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Plugins\"><a href=\"#Plugins\" class=\"headerlink\" title=\"Plugins\"></a>Plugins</h2><h3 id=\"Explanations-of-Important-Keywords\"><a href=\"#Explanations-of-Important-Keywords\" class=\"headerlink\" title=\"Explanations of Important Keywords\"></a>Explanations of Important Keywords</h3><ul>\n<li><p><code>&lt;Leader&gt;</code>: default is <code>\\</code>, you can change it by using <code>let mapleader = &#39;,&#39;</code> in <code>.vimrc</code> file.</p>\n</li>\n<li><p><code>&lt;CR&gt;</code>: equals <code>&lt;Return&gt;</code>    &amp; <code>&lt;Enter&gt;</code></p>\n</li>\n<li><p><code>&lt;S-...&gt;</code>    : shift-key</p>\n</li>\n<li><p><code>&lt;C-...&gt;</code>: control-key</p>\n</li>\n<li><p><code>&lt;M-...&gt;</code> &amp; <code>&lt;A-...&gt;</code>: alt-key</p>\n</li>\n<li><p><code>&lt;D-...&gt;</code>: command-key (Mac only)</p>\n</li>\n<li><p><code>g:</code>: means globally. Example:</p>\n<ul>\n<li><code>let g:last_active_tab = 1</code> toggle switch between current tab and the last one globally.</li>\n</ul>\n</li>\n<li><p><code>remap</code>: Allows for mappings to work recursively.</p>\n</li>\n<li><p><code>noremap</code>: Only a single entry. Can NOT be remapped.</p>\n</li>\n<li><p><code>n</code> &amp; <code>v</code> &amp; <code>s</code> &amp; <code>i</code>: prefixes, <code>n</code> stands for Normal mode, <code>v</code> stands for Visual mode, <code>s</code> stands for Select Mode, <code>i</code> stands for Insert Mode. Example:</p>\n<ul>\n<li><code>nnoremap &lt;C-t&gt; :tabnew&lt;CR&gt;</code>: remap <code>Ctrl + t</code> to create a new tab</li>\n<li><code>inoremap &lt;C-t&gt; &lt;Esc&gt;:tabnew&lt;CR&gt;</code>: same as last one, with an escape action additionally.</li>\n</ul>\n</li>\n<li><p><code>&lt;Plug&gt;</code>: in <code>.vimrc</code> file, it has two meanings. First, it’s visible out of the plugin scripts. And the second, use structure <code>&lt;Plug&gt; scriptname mapname</code> to avoid confliction with other plugins. For example: <code>&lt;Plug&gt;TypecorrAdd</code>, <code>Typecorr</code> is the script name, and <code>Add</code> is the function name.</p>\n</li>\n<li><p><code>&lt;SID&gt;</code>: is the script ID and not visible outside. Compare with <code>&lt;Plug&gt;</code>, it’s more like <code>private</code> function to other scrips. So can’t use it out of the script. Example:</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&quot; ,en ,ep to jump between errors</span></span><br><span class=\"line\">function! <span class=\"symbol\">&lt;SID&gt;</span>LocationPrevious()</span><br><span class=\"line\">  <span class=\"keyword\">try</span></span><br><span class=\"line\">      lprev</span><br><span class=\"line\">  <span class=\"keyword\">catch</span> /^Vim\\%((\\<span class=\"keyword\">a</span>\\+)\\)\\=:E553/</span><br><span class=\"line\">      <span class=\"keyword\">llast</span></span><br><span class=\"line\">  <span class=\"keyword\">endtry</span></span><br><span class=\"line\"><span class=\"keyword\">endfunction</span></span><br><span class=\"line\"></span><br><span class=\"line\">function! <span class=\"symbol\">&lt;SID&gt;</span>LocationNext()</span><br><span class=\"line\">  <span class=\"keyword\">try</span></span><br><span class=\"line\">      <span class=\"keyword\">lnext</span></span><br><span class=\"line\">  <span class=\"keyword\">catch</span> /^Vim\\%((\\<span class=\"keyword\">a</span>\\+)\\)\\=:E553/</span><br><span class=\"line\">      <span class=\"keyword\">lfirst</span></span><br><span class=\"line\">  <span class=\"keyword\">endtry</span></span><br><span class=\"line\"><span class=\"keyword\">endfunction</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">nnoremap</span> <span class=\"symbol\">&lt;silent&gt;</span> <span class=\"symbol\">&lt;Plug&gt;</span>LocationPrevious :<span class=\"symbol\">&lt;C-u&gt;</span><span class=\"keyword\">exe</span> <span class=\"string\">&#x27;call &lt;SID&gt;LocationPrevious()&#x27;</span><span class=\"symbol\">&lt;CR&gt;</span></span><br><span class=\"line\"><span class=\"keyword\">nnoremap</span> <span class=\"symbol\">&lt;silent&gt;</span> <span class=\"symbol\">&lt;Plug&gt;</span>LocationNext :<span class=\"symbol\">&lt;C-u&gt;</span><span class=\"keyword\">exe</span> <span class=\"string\">&#x27;call &lt;SID&gt;LocationNext()&#x27;</span><span class=\"symbol\">&lt;CR&gt;</span></span><br><span class=\"line\"><span class=\"keyword\">nmap</span> <span class=\"symbol\">&lt;silent&gt;</span> <span class=\"symbol\">&lt;Leader&gt;</span>ep <span class=\"symbol\">&lt;Plug&gt;</span>LocationPrevious</span><br><span class=\"line\"><span class=\"keyword\">nmap</span> <span class=\"symbol\">&lt;silent&gt;</span> <span class=\"symbol\">&lt;Leader&gt;</span><span class=\"keyword\">en</span> <span class=\"symbol\">&lt;Plug&gt;</span>LocationNext</span><br></pre></td></tr></table></figure>\n</li>\n<li><p><code>&lt;silence&gt;</code>:  to make a key mapping can&#96;t be echoed on the command line</p>\n</li>\n<li><p><code>&lt;expr&gt;</code> take the argument as expression. For example: <code>inoremap &lt;expr&gt; &lt;C-L&gt; ListItem()</code>, ListItem is a function which is mapped with <code>Ctrl + L</code>.</p>\n</li>\n</ul>\n<h3 id=\"unblevable-x2F-quick-scope\"><a href=\"#unblevable-x2F-quick-scope\" class=\"headerlink\" title=\"unblevable&#x2F;quick-scope\"></a>unblevable&#x2F;quick-scope</h3><ul>\n<li><p>Github Repo: <a href=\"https://github.com/unblevable/quick-scope\">unblevable&#x2F;quick-scope</a></p>\n</li>\n<li><p>Useage: highlights which characters to target for <code>f</code>, <code>F</code> and family.</p>\n</li>\n<li><p>Key Mapping:</p>\n<pre><code>let g:qs_highlight_on_keys = [&#39;f&#39;, &#39;F&#39;, &#39;t&#39;, &#39;T&#39;] //\n</code></pre>\n</li>\n</ul>\n<h3 id=\"ntpeters-x2F-vim-better-whitespace\"><a href=\"#ntpeters-x2F-vim-better-whitespace\" class=\"headerlink\" title=\"ntpeters&#x2F;vim-better-whitespace\"></a>ntpeters&#x2F;vim-better-whitespace</h3><ul>\n<li><p>Github Repo: <a href=\"ntpeters/vim-better-whitespace\">ntpeters&#x2F;vim-better-whitespace</a></p>\n</li>\n<li><p>Useage: clean extra whitespace.</p>\n</li>\n<li><p>Key Mapping:</p>\n<pre><code>nnoremap &lt;silent&gt; &lt;Leader&gt;&lt;Space&gt; :StripWhitespace&lt;CR&gt;\nautocmd FileType c,cpp,java,go,php,javascript,puppet,python,rust,twig,xml,yml,perl autocmd BufWritePre &lt;buffer&gt; StripWhitespace\nlet g:better_whitespace_filetypes_blacklist=[&#39;diff&#39;, &#39;gitcommit&#39;, &#39;unite&#39;, &#39;qf&#39;, &#39;help&#39;]\n</code></pre>\n</li>\n</ul>\n<h3 id=\"Vim-CtrlSpace\"><a href=\"#Vim-CtrlSpace\" class=\"headerlink\" title=\"Vim-CtrlSpace\"></a>Vim-CtrlSpace</h3><ul>\n<li><p>Github Repo: <a href=\"https://github.com/vim-ctrlspace/vim-ctrlspace\">vim-ctrlspace&#x2F;vim-ctrlspace</a></p>\n</li>\n<li><p>Useage:</p>\n<ul>\n<li>bookmarks for your favorite projects</li>\n<li>workspaces (sessions)</li>\n<li>tabs &#x2F; buffers &#x2F; files management</li>\n<li>fast fuzzy searching powered by Go</li>\n</ul>\n</li>\n<li><p>Shortkeys:</p>\n<ul>\n<li><code>Ctrl + Space</code> : open ctrl space command line</li>\n<li><code>b</code> : bookmark list</li>\n<li><code>w</code> : workspace list in current bookmark</li>\n<li><code>l</code> : tab list in current workspace</li>\n<li><code>o</code> : file list in current workspace</li>\n<li><code>h</code> : buffer list in current workspace, this is default list when you hit ctrl + space</li>\n<li><code>/</code> : Into Search Mode, type it again will close search mode. Aka,  <code>B</code>, <code>W</code>, <code>L</code>, <code>O</code>, <code>H</code> with uppercase will open the same list with Search Mode</li>\n<li><code>i</code> : switch directory (when you on the buffer list)</li>\n<li><code>a</code> : all the files are opend in current workspace</li>\n<li><code>s</code> : save current workspace&#x2F;bookmark, then <code>&lt;CR&gt;</code> to confirm</li>\n<li><code>d</code> : delete a file from current buffer or file list</li>\n<li><code>j</code>,<code>k</code> : switch items, then <code>&lt;CR&gt;</code> to confirm</li>\n<li><code>m</code> : rename bookmark or workspace(when you on the workspace list or bookmark list)</li>\n</ul>\n</li>\n<li><p>Key Mapping:</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> <span class=\"built_in\">has</span>(<span class=\"string\">&quot;gui_running&quot;</span>)</span><br><span class=\"line\"><span class=\"comment\">&quot; Settings for MacVim and Inconsolata font</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> <span class=\"variable\">g:CtrlSpaceSymbols</span> = &#123; <span class=\"string\">&quot;File&quot;</span>: <span class=\"string\">&quot;◯&quot;</span>, <span class=\"string\">&quot;CTab&quot;</span>: <span class=\"string\">&quot;▣&quot;</span>, <span class=\"string\">&quot;Tabs&quot;</span>: <span class=\"string\">&quot;▢&quot;</span> &#125;</span><br><span class=\"line\"><span class=\"keyword\">endif</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> <span class=\"built_in\">executable</span>(<span class=\"string\">&quot;ag&quot;</span>)</span><br><span class=\"line\">  <span class=\"keyword\">let</span> <span class=\"variable\">g:CtrlSpaceGlobCommand</span> = <span class=\"string\">&#x27;ag -l --nocolor -g &quot;&quot;&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">endif</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:CtrlSpaceSearchTiming</span> = <span class=\"number\">500</span></span><br><span class=\"line\"><span class=\"keyword\">hi</span> link CtrlSpaceNormal   PMenu</span><br><span class=\"line\"><span class=\"keyword\">hi</span> link CtrlSpaceSelected PMenuSel</span><br><span class=\"line\"><span class=\"keyword\">hi</span> link CtrlSpaceSearch   Search</span><br><span class=\"line\"><span class=\"keyword\">hi</span> link CtrlSpaceStatus   StatusLine</span><br><span class=\"line\"><span class=\"keyword\">nnoremap</span> <span class=\"symbol\">&lt;silent&gt;</span><span class=\"symbol\">&lt;C-p&gt;</span> :CtrlSpace O<span class=\"symbol\">&lt;CR&gt;</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:CtrlSpaceLoadLastWorkspaceOnStart</span> = <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:CtrlSpaceSaveWorkspaceOnSwitch</span> = <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:CtrlSpaceSaveWorkspaceOnExit</span> = <span class=\"number\">1</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"scrooloose-x2F-nerdtree-amp-jistr-x2F-vim-nerdtree-tabs\"><a href=\"#scrooloose-x2F-nerdtree-amp-jistr-x2F-vim-nerdtree-tabs\" class=\"headerlink\" title=\"scrooloose&#x2F;nerdtree &amp; jistr&#x2F;vim-nerdtree-tabs\"></a>scrooloose&#x2F;nerdtree &amp; jistr&#x2F;vim-nerdtree-tabs</h3><ul>\n<li><p>TODO</p>\n</li>\n<li><p>Github Repo: <a href=\"https://github.com/scrooloose/nerdtree\">scrooloose&#x2F;nerdtree</a> &amp; <a href=\"https://github.com/jistr/vim-nerdtree-tabs\">jistr&#x2F;vim-nerdtree-tabs</a></p>\n</li>\n<li><p>Useage: to explore filesystem and to open files and directories.</p>\n</li>\n<li><p>Key Mapping:</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&quot; nerdtree</span></span><br><span class=\"line\"><span class=\"keyword\">map</span> <span class=\"symbol\">&lt;C-n&gt;</span> :NERDTreeToggle<span class=\"symbol\">&lt;CR&gt;</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> NERDTreeHighlightCursorline=<span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> NERDTreeIgnore=[ <span class=\"string\">&#x27;\\.pyc$&#x27;</span>, <span class=\"string\">&#x27;\\.pyo$&#x27;</span>, <span class=\"string\">&#x27;\\.obj$&#x27;</span>, <span class=\"string\">&#x27;\\.o$&#x27;</span>, <span class=\"string\">&#x27;\\.so$&#x27;</span>, <span class=\"string\">&#x27;\\.egg$&#x27;</span>, <span class=\"string\">&#x27;^\\.git$&#x27;</span>, <span class=\"string\">&#x27;^\\.svn$&#x27;</span>, <span class=\"string\">&#x27;^\\.hg$&#x27;</span> ]</span><br><span class=\"line\"><span class=\"comment\">&quot;close vim if the only window left open is a NERDTree</span></span><br><span class=\"line\"><span class=\"keyword\">autocmd</span> bufenter * <span class=\"keyword\">if</span> (<span class=\"built_in\">winnr</span>(<span class=\"string\">&quot;$&quot;</span>) == <span class=\"number\">1</span> &amp;&amp; <span class=\"built_in\">exists</span>(<span class=\"string\">&quot;b:NERDTreeType&quot;</span>) &amp;&amp; <span class=\"variable\">b:NERDTreeType</span> == <span class=\"string\">&quot;primary&quot;</span>) | q | end</span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:NERDTreeMapOpenSplit</span> = <span class=\"string\">&#x27;s&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:NERDTreeMapOpenVSplit</span> = <span class=\"string\">&#x27;v&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:NERDTreeWinSize</span>=<span class=\"number\">26</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&quot; nerdtreetabs</span></span><br><span class=\"line\"><span class=\"keyword\">map</span> <span class=\"symbol\">&lt;C-n&gt;</span> <span class=\"symbol\">&lt;plug&gt;</span>NERDTreeTabsToggle<span class=\"symbol\">&lt;CR&gt;</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:nerdtree_tabs_synchronize_view</span>=<span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:nerdtree_tabs_synchronize_focus</span>=<span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:nerdtree_tabs_open_on_console_startup</span>=<span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:nerdtree_tabs_open_on_gui_startup</span>=<span class=\"number\">0</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"syntastic\"><a href=\"#syntastic\" class=\"headerlink\" title=\"syntastic\"></a>syntastic</h3><ul>\n<li><p>Github Repo: <a href=\"https://github.com/vim-syntastic/syntastic#introduction\">vim-syntastic&#x2F;syntastic</a></p>\n</li>\n<li><p>Useage: a syntax checking plugin</p>\n</li>\n<li><p>Key Mapping:</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">execute</span> pathogen#infect()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:syntastic_error_symbol</span>=<span class=\"string\">&#x27;&gt;&gt;&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:syntastic_warning_symbol</span>=<span class=\"string\">&#x27;&gt;&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:syntastic_check_on_open</span>=<span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:syntastic_check_on_wq</span>=<span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:syntastic_enable_highlighting</span>=<span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&quot; checkers</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:syntastic_php_checkers</span> = [<span class=\"string\">&#x27;php&#x27;</span>, <span class=\"string\">&#x27;phpcs&#x27;</span>, <span class=\"string\">&#x27;phpmd&#x27;</span>]</span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:syntastic_python_checkers</span>=[<span class=\"string\">&#x27;pyflakes&#x27;</span>, <span class=\"string\">&#x27;pep8&#x27;</span>] <span class=\"comment\">&quot; 使用pyflakes,速度比pylint快</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:syntastic_python_pep8_args</span>=<span class=\"string\">&#x27;--ignore=E501,E225,E124,E712&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:syntastic_javascript_checkers</span> = [<span class=\"string\">&#x27;jsl&#x27;</span>, <span class=\"string\">&#x27;jshint&#x27;</span>]</span><br><span class=\"line\"><span class=\"comment\">&quot; let g:syntastic_markdown_checkers = [&#x27;proselint&#x27;]</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:syntastic_html_checkers</span>=[<span class=\"string\">&#x27;tidy&#x27;</span>, <span class=\"string\">&#x27;jshint&#x27;</span>]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">set</span> statusline+=%#warningmsg#</span><br><span class=\"line\"><span class=\"keyword\">set</span> statusline+=%&#123;SyntasticStatuslineFlag()&#125;</span><br><span class=\"line\"><span class=\"keyword\">set</span> statusline+=%*</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&quot; to see error location list</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:syntastic_always_populate_loc_list</span> = <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:syntastic_enable_signs</span> = <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:syntastic_auto_loc_list</span> = <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:syntastic_auto_jump</span> = <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">highlight</span> SyntasticErrorSign guifg=white guibg=black</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"YouCompleteMe\"><a href=\"#YouCompleteMe\" class=\"headerlink\" title=\"YouCompleteMe\"></a>YouCompleteMe</h3><ul>\n<li><p>Github Repo: <a href=\"https://github.com/Valloric/YouCompleteMe\">Valloric&#x2F;YouCompleteMe</a></p>\n</li>\n<li><p>Useage: code completion</p>\n</li>\n<li><p>Key Mapping:</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:ycm_key_list_select_completion</span>=[<span class=\"string\">&#x27;&lt;C-j&gt;&#x27;</span>]</span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:ycm_key_list_previous_completion</span>=[<span class=\"string\">&#x27;&lt;C-k&gt;&#x27;</span>]</span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:ycm_complete_in_comments</span> = <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:ycm_complete_in_strings</span> = <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:ycm_use_ultisnips_completer</span> = <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:ycm_collect_identifiers_from_comments_and_strings</span> = <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:ycm_collect_identifiers_from_tags_files</span> = <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:ycm_seed_identifiers_with_syntax</span>=<span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:ycm_goto_buffer_command</span> = <span class=\"string\">&#x27;horizontal-split&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">nnoremap</span> <span class=\"symbol\">&lt;leader&gt;</span>jd :YcmCompleter GoToDefinitionElseDeclaration<span class=\"symbol\">&lt;CR&gt;</span></span><br><span class=\"line\"><span class=\"keyword\">nnoremap</span> <span class=\"symbol\">&lt;leader&gt;</span>gd :YcmCompleter GoToDeclaration<span class=\"symbol\">&lt;CR&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> !empty(<span class=\"built_in\">glob</span>(<span class=\"string\">&quot;~/.vim/bundle/YouCompleteMe/third_party/ycmd/cpp/ycm/.ycm_extra_conf.py&quot;</span>))</span><br><span class=\"line\">    <span class=\"keyword\">let</span> <span class=\"variable\">g:ycm_global_ycm_extra_conf</span> = <span class=\"string\">&quot;~/.vim/bundle/YouCompleteMe/third_party/ycmd/cpp/ycm/.ycm_extra_conf.py&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">endif</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"vim-easymotion\"><a href=\"#vim-easymotion\" class=\"headerlink\" title=\"vim-easymotion\"></a>vim-easymotion</h3><ul>\n<li><p>Github Repo: <a href=\"https://github.com/easymotion/vim-easymotion\">easymotion&#x2F;vim-easymotion</a></p>\n</li>\n<li><p>Usage: Provides a much simpler way to use some motions in vim.</p>\n</li>\n<li><p>Keys Mapping:</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:EasyMotion_smartcase</span> = <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&quot; &lt;Leader&gt;f&#123;char&#125; to move to &#123;char&#125;</span></span><br><span class=\"line\"><span class=\"keyword\">map</span>  <span class=\"symbol\">&lt;Leader&gt;</span><span class=\"symbol\">&lt;Leader&gt;</span><span class=\"keyword\">f</span> <span class=\"symbol\">&lt;Plug&gt;</span>(easymotion-<span class=\"keyword\">bd</span>-<span class=\"keyword\">f</span>)</span><br><span class=\"line\"><span class=\"keyword\">nmap</span> <span class=\"symbol\">&lt;Leader&gt;</span><span class=\"symbol\">&lt;Leader&gt;</span><span class=\"keyword\">f</span> <span class=\"symbol\">&lt;Plug&gt;</span>(easymotion-overwin-<span class=\"keyword\">f</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&quot; s&#123;char&#125;&#123;char&#125; to move to &#123;char&#125;&#123;char&#125;</span></span><br><span class=\"line\"><span class=\"keyword\">nmap</span> s <span class=\"symbol\">&lt;Plug&gt;</span>(easymotion-overwin-f2)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&quot; Move to line</span></span><br><span class=\"line\"><span class=\"keyword\">map</span>  <span class=\"symbol\">&lt;Leader&gt;</span><span class=\"symbol\">&lt;Leader&gt;</span><span class=\"keyword\">l</span> <span class=\"symbol\">&lt;Plug&gt;</span>(easymotion-<span class=\"keyword\">bd</span>-jk)</span><br><span class=\"line\"><span class=\"keyword\">nmap</span> <span class=\"symbol\">&lt;Leader&gt;</span><span class=\"symbol\">&lt;Leader&gt;</span><span class=\"keyword\">l</span> <span class=\"symbol\">&lt;Plug&gt;</span>(easymotion-overwin-<span class=\"built_in\">line</span>)</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"easyalign\"><a href=\"#easyalign\" class=\"headerlink\" title=\"easyalign\"></a>easyalign</h3><ul>\n<li><p>Github Repo: <a href=\"https://github.com/junegunn/vim-easy-align\">junegunn&#x2F;vim-easy-align</a></p>\n</li>\n<li><p>Usage: alignment</p>\n</li>\n<li><p>Keys Mapping:</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">vmap</span> ga <span class=\"symbol\">&lt;Plug&gt;</span>(EasyAlign)</span><br><span class=\"line\"><span class=\"keyword\">nmap</span> ga <span class=\"symbol\">&lt;Plug&gt;</span>(EasyAlign)</span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:easy_align_ignore_groups</span> = [<span class=\"string\">&#x27;Comment&#x27;</span>, <span class=\"string\">&#x27;String&#x27;</span>]</span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:easy_align_delimiters</span> = &#123;</span><br><span class=\"line\">   \\ <span class=\"string\">&#x27;&gt;&#x27;</span>: &#123; <span class=\"string\">&#x27;pattern&#x27;</span>: <span class=\"string\">&#x27;&gt;&gt;\\|=&gt;\\|&gt;&#x27;</span> &#125;,</span><br><span class=\"line\">   \\ <span class=\"string\">&#x27;/&#x27;</span>: &#123;</span><br><span class=\"line\">   \\     <span class=\"string\">&#x27;pattern&#x27;</span>:         <span class=\"string\">&#x27;//\\+\\|/\\*\\|\\*/&#x27;</span>,</span><br><span class=\"line\">   \\     <span class=\"string\">&#x27;delimiter_align&#x27;</span>: <span class=\"string\">&#x27;l&#x27;</span>,</span><br><span class=\"line\">   \\     <span class=\"string\">&#x27;ignore_groups&#x27;</span>:   [<span class=\"string\">&#x27;!Comment&#x27;</span>] &#125;,</span><br><span class=\"line\">   \\ <span class=\"string\">&#x27;]&#x27;</span>: &#123;</span><br><span class=\"line\">   \\     <span class=\"string\">&#x27;pattern&#x27;</span>:       <span class=\"string\">&#x27;[[\\]]&#x27;</span>,</span><br><span class=\"line\">   \\     <span class=\"string\">&#x27;left_margin&#x27;</span>:   <span class=\"number\">0</span>,</span><br><span class=\"line\">   \\     <span class=\"string\">&#x27;right_margin&#x27;</span>:  <span class=\"number\">0</span>,</span><br><span class=\"line\">   \\     <span class=\"string\">&#x27;stick_to_left&#x27;</span>: <span class=\"number\">0</span></span><br><span class=\"line\">   \\   &#125;,</span><br><span class=\"line\">   \\ <span class=\"string\">&#x27;)&#x27;</span>: &#123;</span><br><span class=\"line\">   \\     <span class=\"string\">&#x27;pattern&#x27;</span>:       <span class=\"string\">&#x27;[()]&#x27;</span>,</span><br><span class=\"line\">   \\     <span class=\"string\">&#x27;left_margin&#x27;</span>:   <span class=\"number\">0</span>,</span><br><span class=\"line\">   \\     <span class=\"string\">&#x27;right_margin&#x27;</span>:  <span class=\"number\">0</span>,</span><br><span class=\"line\">   \\     <span class=\"string\">&#x27;stick_to_left&#x27;</span>: <span class=\"number\">0</span></span><br><span class=\"line\">   \\   &#125;,</span><br><span class=\"line\">   \\ <span class=\"string\">&#x27;d&#x27;</span>: &#123;</span><br><span class=\"line\">   \\     <span class=\"string\">&#x27;pattern&#x27;</span>:      <span class=\"string\">&#x27; \\(\\S\\+\\s*[;=]\\)\\@=&#x27;</span>,</span><br><span class=\"line\">   \\     <span class=\"string\">&#x27;left_margin&#x27;</span>:  <span class=\"number\">0</span>,</span><br><span class=\"line\">   \\     <span class=\"string\">&#x27;right_margin&#x27;</span>: <span class=\"number\">0</span></span><br><span class=\"line\">   \\   &#125;</span><br><span class=\"line\">   \\ &#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"NerdTree\"><a href=\"#NerdTree\" class=\"headerlink\" title=\"NerdTree\"></a>NerdTree</h3><ul>\n<li><p>Github Repo: <a href=\"https://github.com/scrooloose/nerdtree\">scrooloose&#x2F;nerdtree</a></p>\n</li>\n<li><p>Usage: to explore your filesystem and to open files and directories.</p>\n</li>\n<li><p>Keys Mapping:</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">map</span> <span class=\"symbol\">&lt;leader&gt;</span>n :NERDTreeToggle<span class=\"symbol\">&lt;CR&gt;</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> NERDTreeShowBookmarks=<span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> NERDTreeHighlightCursorline=<span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> NERDTreeIgnore=[ <span class=\"string\">&#x27;\\.pyc$&#x27;</span>, <span class=\"string\">&#x27;\\.pyo$&#x27;</span>, <span class=\"string\">&#x27;\\.obj$&#x27;</span>, <span class=\"string\">&#x27;\\.o$&#x27;</span>, <span class=\"string\">&#x27;\\.so$&#x27;</span>, <span class=\"string\">&#x27;\\.egg$&#x27;</span>, <span class=\"string\">&#x27;^\\.git$&#x27;</span>, <span class=\"string\">&#x27;^\\.svn$&#x27;</span>, <span class=\"string\">&#x27;^\\.hg$&#x27;</span> ]</span><br><span class=\"line\"><span class=\"comment\">&quot;close vim if the only window left open is a NERDTree</span></span><br><span class=\"line\"><span class=\"keyword\">autocmd</span> bufenter * <span class=\"keyword\">if</span> (<span class=\"built_in\">winnr</span>(<span class=\"string\">&quot;$&quot;</span>) == <span class=\"number\">1</span> &amp;&amp; <span class=\"built_in\">exists</span>(<span class=\"string\">&quot;b:NERDTreeType&quot;</span>) &amp;&amp; <span class=\"variable\">b:NERDTreeType</span> == <span class=\"string\">&quot;primary&quot;</span>) | q | end</span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:NERDTreeMapOpenSplit</span> = <span class=\"string\">&#x27;s&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:NERDTreeMapOpenVSplit</span> = <span class=\"string\">&#x27;v&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:NERDTreeWinSize</span>=<span class=\"number\">26</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"NERDCommenter\"><a href=\"#NERDCommenter\" class=\"headerlink\" title=\"NERDCommenter\"></a>NERDCommenter</h3><ul>\n<li><p>Github Repo: <a href=\"https://github.com/scrooloose/nerdcommenter\">scrooloose&#x2F;nerdcommenter</a></p>\n</li>\n<li><p>Usage: to wrangle your code comments.</p>\n</li>\n<li><p>Shortkeys:</p>\n<ul>\n<li><code>[count]&lt;leader&gt;cc</code> : Comment out the current line or text selected in visual mode.</li>\n<li><code>[count]&lt;leader&gt;c&lt;space&gt;</code> : Toggles the comment state of the selected line(s). If the topmost selected line is commented, all selected lines are uncommented and vice versa.</li>\n<li><code>[count]&lt;leader&gt;cs</code> : Comments out the selected lines with a pretty block formatted layout.</li>\n<li><code>[count]&lt;leader&gt;ci</code> : Toggles the comment state of the selected line(s) individually.</li>\n</ul>\n</li>\n<li><p>Keys Mapping:</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&quot; Add spaces after comment delimiters by default</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:NERDSpaceDelims</span> = <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"comment\">&quot; Use compact syntax for prettified multi-line comments</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:NERDCompactSexyComs</span> = <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"comment\">&quot; Align line-wise comment delimiters flush left instead of following code indentation</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:NERDDefaultAlign</span> = <span class=\"string\">&#x27;left&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">&quot; Allow commenting and inverting empty lines (useful when commenting a region)</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:NERDCommentEmptyLines</span> = <span class=\"number\">1</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"Airline\"><a href=\"#Airline\" class=\"headerlink\" title=\"Airline\"></a>Airline</h3><ul>\n<li><p>Github Repo: <a href=\"https://github.com/vim-airline/vim-airline\">vim-airline&#x2F;vim-airline</a></p>\n</li>\n<li><p>Usage: rich statusbar.</p>\n</li>\n<li><p>Keys Mapping:</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> !exists(<span class=\"string\">&#x27;g:airline_symbols&#x27;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">let</span> <span class=\"variable\">g:airline_symbols</span> = &#123;&#125;</span><br><span class=\"line\"><span class=\"keyword\">endif</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:airline_mode_map</span> = &#123;</span><br><span class=\"line\">    \\ <span class=\"string\">&#x27;__&#x27;</span> : <span class=\"string\">&#x27;-&#x27;</span>,</span><br><span class=\"line\">    \\ <span class=\"string\">&#x27;n&#x27;</span>  : <span class=\"string\">&#x27;N&#x27;</span>,</span><br><span class=\"line\">    \\ <span class=\"string\">&#x27;i&#x27;</span>  : <span class=\"string\">&#x27;I&#x27;</span>,</span><br><span class=\"line\">    \\ <span class=\"string\">&#x27;R&#x27;</span>  : <span class=\"string\">&#x27;R&#x27;</span>,</span><br><span class=\"line\">    \\ <span class=\"string\">&#x27;c&#x27;</span>  : <span class=\"string\">&#x27;C&#x27;</span>,</span><br><span class=\"line\">    \\ <span class=\"string\">&#x27;v&#x27;</span>  : <span class=\"string\">&#x27;V&#x27;</span>,</span><br><span class=\"line\">    \\ <span class=\"string\">&#x27;V&#x27;</span>  : <span class=\"string\">&#x27;V&#x27;</span>,</span><br><span class=\"line\">    \\ <span class=\"string\">&#x27;\u0016&#x27;</span> : <span class=\"string\">&#x27;V&#x27;</span>,</span><br><span class=\"line\">    \\ <span class=\"string\">&#x27;s&#x27;</span>  : <span class=\"string\">&#x27;S&#x27;</span>,</span><br><span class=\"line\">    \\ <span class=\"string\">&#x27;S&#x27;</span>  : <span class=\"string\">&#x27;S&#x27;</span>,</span><br><span class=\"line\">    \\ <span class=\"string\">&#x27;\u0013&#x27;</span> : <span class=\"string\">&#x27;S&#x27;</span>,</span><br><span class=\"line\">    \\ &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:airline_left_sep</span> = <span class=\"string\">&#x27;❯&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:airline_right_sep</span> = <span class=\"string\">&#x27;❮&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:airline_symbols</span>.linenr = <span class=\"string\">&#x27;¶&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"variable\">g:airline_symbols</span>.branch = <span class=\"string\">&#x27;⎇&#x27;</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n<!---\n### a\n* Github Repo: [b](c)\n* Useage: d\n* Key Mapping:\n\n        e\n-->\n\n"},{"layout":"post","title":"服务器配置及性能调优 - PHP进阶 (4)","date":"2017-02-25T05:00:00.000Z","description":"服务器配置及性能调优","keywords":"性能调优, PHP, Note, 服务器","_content":"\n### PHP-FPM 配置\n\n#### 全局配置\n* `emergency_restart_threshold = 10`\n    * 如果子进程在 `emergency_restart_interval` 设定的时间内收到该参数设定次数的 `SIGSEGV` 或者 `SIGBUS`退出信息号，则`FPM`会重新启动。0 表示“关闭该功能”。默认值：0（关闭）。\n* `emergency_restart_interval = 1m`\n    * 用于设定平滑重启的间隔时间。这么做有助于解决加速器中共享内存的使用问题。   \n\n#### 进程池配置\n* `pm.max_requests = 1000`\n    * 设置每个子进程重生之前服务的请求数。对于可能存在内存泄漏的第三方模块来说是非常有用的。如果设置为 '0' 则一直接受请求，等同于 `PHP_FCGI_MAX_REQUESTS` 环境变量。默认值：0。\n* `request_slowlog_timeout = 5s`\n    * 当一个请求该设置的超时时间后，就会将对应的 PHP 调用堆栈信息完整写入到慢日志中。设置为 '0' 表示 'Off'。\n\n#### 确定 PHP-FPM 的进程数\n* 首先确定服务器可以分配给PHP的内存大小\n* 其次确定单个PHP进程的内存消耗\n* 最后确定进程数\n* 上线前别忘了使用 Apache Bench 或者 Seige 来做压力测试\n\n### Zend OPcache\n* 通俗来讲，OPcache 是用来预编译PHP的代码到缓存里来加速HTTP的请求。\n\n### Session 处理\n* 由于PHP默认会将session以文件的形式存储在磁盘上，必然会加大磁盘的I/O，拖慢系统。使用内存存储的方式，比如 Memcached 或者 Redis 会是更好的选择。而且这种方式会便于以后扩展分布式系统时保证 Session 共享。\n\n","source":"_posts/2017-02-25-php-advance-4-tuning.md","raw":"---\nlayout: post\ntitle: 服务器配置及性能调优 - PHP进阶 (4)\ncategory: 编程学习\ntags: [PHP]\ndate: 2017-02-25\ndescription: 服务器配置及性能调优\nkeywords: 性能调优, PHP, Note, 服务器\n---\n\n### PHP-FPM 配置\n\n#### 全局配置\n* `emergency_restart_threshold = 10`\n    * 如果子进程在 `emergency_restart_interval` 设定的时间内收到该参数设定次数的 `SIGSEGV` 或者 `SIGBUS`退出信息号，则`FPM`会重新启动。0 表示“关闭该功能”。默认值：0（关闭）。\n* `emergency_restart_interval = 1m`\n    * 用于设定平滑重启的间隔时间。这么做有助于解决加速器中共享内存的使用问题。   \n\n#### 进程池配置\n* `pm.max_requests = 1000`\n    * 设置每个子进程重生之前服务的请求数。对于可能存在内存泄漏的第三方模块来说是非常有用的。如果设置为 '0' 则一直接受请求，等同于 `PHP_FCGI_MAX_REQUESTS` 环境变量。默认值：0。\n* `request_slowlog_timeout = 5s`\n    * 当一个请求该设置的超时时间后，就会将对应的 PHP 调用堆栈信息完整写入到慢日志中。设置为 '0' 表示 'Off'。\n\n#### 确定 PHP-FPM 的进程数\n* 首先确定服务器可以分配给PHP的内存大小\n* 其次确定单个PHP进程的内存消耗\n* 最后确定进程数\n* 上线前别忘了使用 Apache Bench 或者 Seige 来做压力测试\n\n### Zend OPcache\n* 通俗来讲，OPcache 是用来预编译PHP的代码到缓存里来加速HTTP的请求。\n\n### Session 处理\n* 由于PHP默认会将session以文件的形式存储在磁盘上，必然会加大磁盘的I/O，拖慢系统。使用内存存储的方式，比如 Memcached 或者 Redis 会是更好的选择。而且这种方式会便于以后扩展分布式系统时保证 Session 共享。\n\n","slug":"2017-02-25-php-advance-4-tuning","published":1,"updated":"2022-02-12T20:53:10.506Z","comments":1,"photos":[],"link":"","_id":"ckzkc92xg001soqox3hm1f3yi","content":"<h3 id=\"PHP-FPM-配置\"><a href=\"#PHP-FPM-配置\" class=\"headerlink\" title=\"PHP-FPM 配置\"></a>PHP-FPM 配置</h3><h4 id=\"全局配置\"><a href=\"#全局配置\" class=\"headerlink\" title=\"全局配置\"></a>全局配置</h4><ul>\n<li><code>emergency_restart_threshold = 10</code><ul>\n<li>如果子进程在 <code>emergency_restart_interval</code> 设定的时间内收到该参数设定次数的 <code>SIGSEGV</code> 或者 <code>SIGBUS</code>退出信息号，则<code>FPM</code>会重新启动。0 表示“关闭该功能”。默认值：0（关闭）。</li>\n</ul>\n</li>\n<li><code>emergency_restart_interval = 1m</code><ul>\n<li>用于设定平滑重启的间隔时间。这么做有助于解决加速器中共享内存的使用问题。</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"进程池配置\"><a href=\"#进程池配置\" class=\"headerlink\" title=\"进程池配置\"></a>进程池配置</h4><ul>\n<li><code>pm.max_requests = 1000</code><ul>\n<li>设置每个子进程重生之前服务的请求数。对于可能存在内存泄漏的第三方模块来说是非常有用的。如果设置为 ‘0’ 则一直接受请求，等同于 <code>PHP_FCGI_MAX_REQUESTS</code> 环境变量。默认值：0。</li>\n</ul>\n</li>\n<li><code>request_slowlog_timeout = 5s</code><ul>\n<li>当一个请求该设置的超时时间后，就会将对应的 PHP 调用堆栈信息完整写入到慢日志中。设置为 ‘0’ 表示 ‘Off’。</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"确定-PHP-FPM-的进程数\"><a href=\"#确定-PHP-FPM-的进程数\" class=\"headerlink\" title=\"确定 PHP-FPM 的进程数\"></a>确定 PHP-FPM 的进程数</h4><ul>\n<li>首先确定服务器可以分配给PHP的内存大小</li>\n<li>其次确定单个PHP进程的内存消耗</li>\n<li>最后确定进程数</li>\n<li>上线前别忘了使用 Apache Bench 或者 Seige 来做压力测试</li>\n</ul>\n<h3 id=\"Zend-OPcache\"><a href=\"#Zend-OPcache\" class=\"headerlink\" title=\"Zend OPcache\"></a>Zend OPcache</h3><ul>\n<li>通俗来讲，OPcache 是用来预编译PHP的代码到缓存里来加速HTTP的请求。</li>\n</ul>\n<h3 id=\"Session-处理\"><a href=\"#Session-处理\" class=\"headerlink\" title=\"Session 处理\"></a>Session 处理</h3><ul>\n<li>由于PHP默认会将session以文件的形式存储在磁盘上，必然会加大磁盘的I&#x2F;O，拖慢系统。使用内存存储的方式，比如 Memcached 或者 Redis 会是更好的选择。而且这种方式会便于以后扩展分布式系统时保证 Session 共享。</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"PHP-FPM-配置\"><a href=\"#PHP-FPM-配置\" class=\"headerlink\" title=\"PHP-FPM 配置\"></a>PHP-FPM 配置</h3><h4 id=\"全局配置\"><a href=\"#全局配置\" class=\"headerlink\" title=\"全局配置\"></a>全局配置</h4><ul>\n<li><code>emergency_restart_threshold = 10</code><ul>\n<li>如果子进程在 <code>emergency_restart_interval</code> 设定的时间内收到该参数设定次数的 <code>SIGSEGV</code> 或者 <code>SIGBUS</code>退出信息号，则<code>FPM</code>会重新启动。0 表示“关闭该功能”。默认值：0（关闭）。</li>\n</ul>\n</li>\n<li><code>emergency_restart_interval = 1m</code><ul>\n<li>用于设定平滑重启的间隔时间。这么做有助于解决加速器中共享内存的使用问题。</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"进程池配置\"><a href=\"#进程池配置\" class=\"headerlink\" title=\"进程池配置\"></a>进程池配置</h4><ul>\n<li><code>pm.max_requests = 1000</code><ul>\n<li>设置每个子进程重生之前服务的请求数。对于可能存在内存泄漏的第三方模块来说是非常有用的。如果设置为 ‘0’ 则一直接受请求，等同于 <code>PHP_FCGI_MAX_REQUESTS</code> 环境变量。默认值：0。</li>\n</ul>\n</li>\n<li><code>request_slowlog_timeout = 5s</code><ul>\n<li>当一个请求该设置的超时时间后，就会将对应的 PHP 调用堆栈信息完整写入到慢日志中。设置为 ‘0’ 表示 ‘Off’。</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"确定-PHP-FPM-的进程数\"><a href=\"#确定-PHP-FPM-的进程数\" class=\"headerlink\" title=\"确定 PHP-FPM 的进程数\"></a>确定 PHP-FPM 的进程数</h4><ul>\n<li>首先确定服务器可以分配给PHP的内存大小</li>\n<li>其次确定单个PHP进程的内存消耗</li>\n<li>最后确定进程数</li>\n<li>上线前别忘了使用 Apache Bench 或者 Seige 来做压力测试</li>\n</ul>\n<h3 id=\"Zend-OPcache\"><a href=\"#Zend-OPcache\" class=\"headerlink\" title=\"Zend OPcache\"></a>Zend OPcache</h3><ul>\n<li>通俗来讲，OPcache 是用来预编译PHP的代码到缓存里来加速HTTP的请求。</li>\n</ul>\n<h3 id=\"Session-处理\"><a href=\"#Session-处理\" class=\"headerlink\" title=\"Session 处理\"></a>Session 处理</h3><ul>\n<li>由于PHP默认会将session以文件的形式存储在磁盘上，必然会加大磁盘的I&#x2F;O，拖慢系统。使用内存存储的方式，比如 Memcached 或者 Redis 会是更好的选择。而且这种方式会便于以后扩展分布式系统时保证 Session 共享。</li>\n</ul>\n"},{"layout":"post","title":"好的编程习惯 - PHP进阶 (3)","date":"2017-02-20T05:00:00.000Z","description":"PHP 好的编程习惯","keywords":"Modern PHP, PHP, Note","_content":"\n### 净化、验证、转义输入输出\n\n#### 需要注意的几个外部数据源\n\n* $_GET\n* $_POST\n* $_REQUEST\n* $_COOKIE\n* $argv\n* php://stdin\n* php://input\n* file_get_contents()\n* 远程数据库\n* 远程 APIs\n* 远程客户端获取的数据\n\n#### 净化输入\n\n* HTML \n    * 在接触存储层之前，使用 htmlentities() 来净化 HTML 的特殊字符:\n\n            <?php $input = '<p><script>alert(\"You won the Nigerian lottery!\");</script></p>'; \n            echo htmlentities($input, ENT_QUOTES, 'UTF-8');\n            \n    * 避免使用 preg_replace(), preg_replace_all() 和 preg_replace_callback() 等正则函数在HTML代码里。\n* SQL 查询\n    * 使用 PDO prepared statement 的形式，避免SQL注入等问题。\n* 用户信息收集\n    * 使用 filter_var() 和 filter_input() 来净化用户信息数据，如 emails, URL-encoded strings, integers, floats, HTML characters, URLs 等，例：\n            \n            <?php $email = 'john@example.com'; \n            $emailSafe = filter_var($email, FILTER_SANITIZE_EMAIL);\n\n#### 验证数据\n\n* 可以使用内置函数 filter_var() 来做简单的验证：\n\n        <?php \n        $input = 'john@example.com'; \n        $isEmail = filter_var($input, FILTER_VALIDATE_EMAIL); \n        if ($isEmail !== false) {\n            echo \"Success\"; \n        } else {\n            echo \"Fail\"; \n        }\n        \n* 几个推荐的扩展库\n\n    * [aura/filter](https://packagist.org/packages/aura/filter)\n    * [respect/validation](https://packagist.org/packages/respect/validation)\n    * [symfony/validator](https://packagist.org/packages/symfony/validator)\n\n#### 转义输出\n\n* 使用 htmlentities() ：\n    \n        <?php \n        $output = '<p><script>alert(\"NSA backdoor installed\");</script>'; \n        echo htmlentities($output, ENT_QUOTES, 'UTF-8');\n        \n* 使用模板引擎，比如：\n    \n    [twig/twig](https://packagist.org/packages/twig/twig)\n    \n### 密码\n\n#### 几个重要的准则\n* 不要记录用户的密码\n* 不要过多限制用户的密码，仅推荐限制长度即可\n* 不要通过邮件发送用户密码\n* 使用 bcrypt 函数单向加密用户密码，个人推荐 [phpass](http://www.openwall.com/phpass/) 第三方扩展\n\n* 用户注册和登录示例\n    \n    * 注册时使用 password_hash() 来加密用户密码, 源代码: [codeguy/modern-php](https://github.com/codeguy/modern-php/blob/master/05-good-practices/passwords/register.php)\n    * 注：CRYPT_BLOWFISH 加密方式的salt的组成依次是：\n        * (\"$2a$\", \"$2x$\" 或者 \"$2y$\") + \"xx\"(04<xx<31) + \"$\" + \"22个字符\"(\"./0-9A-Za-z\")， \n        * 例如：\"$2a$07$usesomesillystringfor\"\n        * PHP 5.3.7 之后应使用\"$2y$\"作为前缀\n\n                <?php\n                try {\n                    // Validate email\n                    $email = filter_input(INPUT_POST, 'email', FILTER_VALIDATE_EMAIL);\n                    if (!$email) {\n                        throw new Exception('Invalid email');\n                    }\n                    \n                    // Validate password\n                    $password = filter_input(INPUT_POST, 'password');\n                    if (!$password || mb_strlen($password) < 8) {\n                        throw new Exception('Password must contain 8+ characters');\n                    }\n                    \n                    // Create password hash\n                    $passwordHash = password_hash(\n                       $password,\n                       CRYPT_BLOWFISH, // 加密方式\n                       ['cost' => 12] // 递归次数\n                    );\n                    if ($passwordHash === false) {\n                        throw new Exception('Password hash failed');\n                    }\n                    \n                    // Create user account (THIS IS PSUEDO-CODE)\n                    // $user = new User();\n                    // $user->email = $email;\n                    // $user->password_hash = $passwordHash;\n                    // $user->save();\n                    // Redirect to login page\n                    \n                    header('HTTP/1.1 302 Redirect');\n                    header('Location: /login.php');\n                } catch (Exception $e) {\n                    // Report error\n                    header('HTTP/1.1 400 Bad request');\n                    echo $e->getMessage();\n                }\n      \n    * 登录，不要忘了 rehash password ，源代码: [codeguy/modern-php](https://github.com/codeguy/modern-php/blob/master/05-good-practices/passwords/login.php)\n\n            <?php\n            session_start();\n            try {\n                // Get email address from request body\n                $email = filter_input(INPUT_POST, 'email');\n                \n                // Get password from request body\n                $password = filter_input(INPUT_POST, 'password');\n                \n                // Find account with email address (THIS IS PSUEDO-CODE)\n                $user = User::findByEmail($email);\n                \n                // Verify password with account password hash\n                if (password_verify($password, $user->password_hash) === false) {\n                    throw new Exception('Invalid password');\n                }\n                \n                // Re-hash password if necessary (see note below)\n                $currentHashAlgorithm = CRYPT_BLOWFISH;\n                $currentHashOptions = array('cost' => 15);\n                $passwordNeedsRehash = password_needs_rehash(\n                    $user->password_hash,\n                    $currentHashAlgorithm,\n                    $currentHashOptions\n                );\n                if ($passwordNeedsRehash === true) {\n                \n                    // Save new password hash (THIS IS PSUEDO-CODE)\n                    $user->password_hash = password_hash(\n                        $password,\n                        $currentHashAlgorithm,\n                        $currentHashOptions\n                    );\n                    $user->save();\n                }\n                \n                // Save login status to session\n                $_SESSION['user_logged_in'] = 'yes';\n                $_SESSION['user_email'] = $email;\n                \n                // Redirect to profile page\n                header('HTTP/1.1 302 Redirect');\n                header('Location: /user-profile.php');\n            } catch (Exception $e) {\n                header('HTTP/1.1 401 Unauthorized');\n                echo $e->getMessage();\n            }\n\n\n### 流\n* 在源与目的地之间传输数据。源和目的地可以是文件、内存、命令行、标准输入输入等。\n\n#### 封装器\n* 每个流都有协议和目标，格式为`<scheme>://<target>`，协议<scheme>即为封装器，目标<target>为数据源。常用的封装器有：\n    * `file://`. 我们常用的函数如 `file_get_contents()`, `fopen()`, `fwrite()`, `fclose()` 都是流的封装器。\n    * `php://`. 标准输入输出的封装器。比如：`php://stdin`, `php://stdout`, `php://memory`, `php://temp`(类似`php://memory`, 只是这个写入的是临时文件)。\n\n#### 上下文\n* 用于定义流的行为。比如使用`stream_context_create()`可以让`file_get_contents()`发送 POST 请求：\n\n        <?php\n        $requestBody = '{\"username\":\"josh\"}'; \n        $context = stream_context_create(array(\n            'http' => array( \n                'method' => 'POST', \n                    'header' => \"Content-Type: application/json;charset=utf-8;\\r\\n\" . \n                                \"Content-Length: \" . mb_strlen($requestBody), \n                    'content' => $requestBody\n               )\n        )); \n        $response = file_get_contents('https://my-api.com/users', false, $context);\n    \n#### 过滤器\n* 在传输的过程中进行过滤、转换、增加、删除操作。\n* 简单的例子，将传输过来的数据全都大写化：\n\n        <?php \n        $handle = fopen('data.txt', 'rb'); \n        stream_filter_append($handle, 'string.toupper'); \n        while(feof($handle) !== true) { \n            echo fgets($handle); // <-- Outputs all uppercase characters \n        } \n        fclose($handle);\n* 另一个例子：\n\n        <?php \n        $handle = fopen('php://filter/read=string.toupper/resource=data.txt', 'rb');\n        while(feof($handle) !== true) { \n            echo fgets($handle); // <-- Outputs all uppercase characters \n        } \n        fclose($handle);\n        \n   * 过滤器写在`php://`的流封装器里，其标准格式为：`filter/read=<filter_name>/resource=<scheme>://<target>`\n\n* 例子3, 使用bzip分开压缩过去30天的日志文件，每天一个压缩包:\n\n        <?php\n        $dateStart = new \\DateTime();\n        $dateInterval = \\DateInterval::createFromDateString('-1 day');\n        $datePeriod = new \\DatePeriod($dateStart, $dateInterval, 30);\n        foreach ($datePeriod as $date) {\n            $file = 'sftp://USER:PASS@rsync.net/' . $date->format('Y-m-d') . '.log.bz2';\n            if (file_exists($file)) {\n                $handle = fopen($file, 'rb');\n                stream_filter_append($handle, 'bzip2.decompress');\n                while (feof($handle) !== true) {\n                    $line = fgets($handle);\n                    if (strpos($line, 'www.example.com') !== false) {\n                        fwrite(STDOUT, $line);\n                   }\n                }\n                fclose($handle);\n            }\n        }\n   \n* 自定义过滤器。需完成以下三点：(参考实例：[DirtyWordsFilter.php](https://github.com/codeguy/modern-php/blob/master/05-good-practices/streams/DirtyWordsFilter.php))\n    * 继承内置类`php_user_filter`\n    * 实现`filter()`, `onCreate()`, `onClose()`三个方法\n    * 使用`stream_filter_register()`注册自定义的过滤器\n\n### 错误和异常处理\n\n#### 异常处理\n\n* 设置全局性的异常捕获来保证程序中未捕获的异常最后都会被记录下来。\n\n        <?php // Register your exception handler \n        set_exception_handler(function (Exception $e) { \n            // Handle and log exception \n        }); \n       \n        // Your code goes here...\n    \n        // Restore previous exception handler \n        restore_exception_handler();\n        \n* 在开发环境中使用异常捕获以及日志来显示所有的DEBUG信息，在生产环境使用用户友好的提示信息。\n\n#### 错误\n\n* 四个准则\n\n    * 打开错误报告\n    * 在测试环境中显示错误信息\n    * 不在生产环境中显示错误信息\n    * 无论生产还是开发都应该在日志中记录错误\n\n* 生产环境`php.ini`示例：\n\n        ; DO NOT display errors \n        display_startup_errors = Off    \n        display_errors = Off\n\n        ; Report all errors EXCEPT notices \n        error_reporting = E_ALL & ~E_NOTICE\n\n        ; Turn on error logging \n        log_errors = On\n        \n* 开发环境示例：\n        \n        ; Display errors \n        display_startup_errors = On \n        display_errors = On\n\n        ; Report all errors \n        error_reporting = -1\n\n        ; Turn on error logging \n        log_errors = On\n\n\n#### 错误处理\n\n* 等同于异常处理，错误也是可以被捕获的。如果只是临时使用错误捕获，一定不要忘了在自己的代码完成后恢复：\n\n        <?php // Register error handler \n        set_error_handler(function ($errno, $errstr, $errfile, $errline) { \n            if (!(error_reporting() & $errno)) { \n                // Error is not specified in the error_reporting \n                // setting, so we ignore it.\n                return; \n            }\n            throw new ErrorException($errstr, $errno, 0, $errfile, $errline);\n        });\n\n        // Your code goes here...\n\n        // Restore previous error handler \n        restore_error_handler();\n\n#### 第三方扩展推荐\n\n* [filp/whoops](https://github.com/filp/whoops) 是一个错误处理框架，提供一个优雅的错误界面帮助DEBUG。目前很多主流的框架比如Laraval 5, CakePHP 3等都已经内置了。\n* [Seldaek/monolog](https://github.com/Seldaek/monolog) 记录日志的插件\n\n","source":"_posts/2017-02-20-php-advance-3-good-practice.md","raw":"---\nlayout: post\ntitle: 好的编程习惯 - PHP进阶 (3)\ncategory: 编程学习\ntags: [PHP]\ndate: 2017-02-20\ndescription: PHP 好的编程习惯\nkeywords: Modern PHP, PHP, Note\n---\n\n### 净化、验证、转义输入输出\n\n#### 需要注意的几个外部数据源\n\n* $_GET\n* $_POST\n* $_REQUEST\n* $_COOKIE\n* $argv\n* php://stdin\n* php://input\n* file_get_contents()\n* 远程数据库\n* 远程 APIs\n* 远程客户端获取的数据\n\n#### 净化输入\n\n* HTML \n    * 在接触存储层之前，使用 htmlentities() 来净化 HTML 的特殊字符:\n\n            <?php $input = '<p><script>alert(\"You won the Nigerian lottery!\");</script></p>'; \n            echo htmlentities($input, ENT_QUOTES, 'UTF-8');\n            \n    * 避免使用 preg_replace(), preg_replace_all() 和 preg_replace_callback() 等正则函数在HTML代码里。\n* SQL 查询\n    * 使用 PDO prepared statement 的形式，避免SQL注入等问题。\n* 用户信息收集\n    * 使用 filter_var() 和 filter_input() 来净化用户信息数据，如 emails, URL-encoded strings, integers, floats, HTML characters, URLs 等，例：\n            \n            <?php $email = 'john@example.com'; \n            $emailSafe = filter_var($email, FILTER_SANITIZE_EMAIL);\n\n#### 验证数据\n\n* 可以使用内置函数 filter_var() 来做简单的验证：\n\n        <?php \n        $input = 'john@example.com'; \n        $isEmail = filter_var($input, FILTER_VALIDATE_EMAIL); \n        if ($isEmail !== false) {\n            echo \"Success\"; \n        } else {\n            echo \"Fail\"; \n        }\n        \n* 几个推荐的扩展库\n\n    * [aura/filter](https://packagist.org/packages/aura/filter)\n    * [respect/validation](https://packagist.org/packages/respect/validation)\n    * [symfony/validator](https://packagist.org/packages/symfony/validator)\n\n#### 转义输出\n\n* 使用 htmlentities() ：\n    \n        <?php \n        $output = '<p><script>alert(\"NSA backdoor installed\");</script>'; \n        echo htmlentities($output, ENT_QUOTES, 'UTF-8');\n        \n* 使用模板引擎，比如：\n    \n    [twig/twig](https://packagist.org/packages/twig/twig)\n    \n### 密码\n\n#### 几个重要的准则\n* 不要记录用户的密码\n* 不要过多限制用户的密码，仅推荐限制长度即可\n* 不要通过邮件发送用户密码\n* 使用 bcrypt 函数单向加密用户密码，个人推荐 [phpass](http://www.openwall.com/phpass/) 第三方扩展\n\n* 用户注册和登录示例\n    \n    * 注册时使用 password_hash() 来加密用户密码, 源代码: [codeguy/modern-php](https://github.com/codeguy/modern-php/blob/master/05-good-practices/passwords/register.php)\n    * 注：CRYPT_BLOWFISH 加密方式的salt的组成依次是：\n        * (\"$2a$\", \"$2x$\" 或者 \"$2y$\") + \"xx\"(04<xx<31) + \"$\" + \"22个字符\"(\"./0-9A-Za-z\")， \n        * 例如：\"$2a$07$usesomesillystringfor\"\n        * PHP 5.3.7 之后应使用\"$2y$\"作为前缀\n\n                <?php\n                try {\n                    // Validate email\n                    $email = filter_input(INPUT_POST, 'email', FILTER_VALIDATE_EMAIL);\n                    if (!$email) {\n                        throw new Exception('Invalid email');\n                    }\n                    \n                    // Validate password\n                    $password = filter_input(INPUT_POST, 'password');\n                    if (!$password || mb_strlen($password) < 8) {\n                        throw new Exception('Password must contain 8+ characters');\n                    }\n                    \n                    // Create password hash\n                    $passwordHash = password_hash(\n                       $password,\n                       CRYPT_BLOWFISH, // 加密方式\n                       ['cost' => 12] // 递归次数\n                    );\n                    if ($passwordHash === false) {\n                        throw new Exception('Password hash failed');\n                    }\n                    \n                    // Create user account (THIS IS PSUEDO-CODE)\n                    // $user = new User();\n                    // $user->email = $email;\n                    // $user->password_hash = $passwordHash;\n                    // $user->save();\n                    // Redirect to login page\n                    \n                    header('HTTP/1.1 302 Redirect');\n                    header('Location: /login.php');\n                } catch (Exception $e) {\n                    // Report error\n                    header('HTTP/1.1 400 Bad request');\n                    echo $e->getMessage();\n                }\n      \n    * 登录，不要忘了 rehash password ，源代码: [codeguy/modern-php](https://github.com/codeguy/modern-php/blob/master/05-good-practices/passwords/login.php)\n\n            <?php\n            session_start();\n            try {\n                // Get email address from request body\n                $email = filter_input(INPUT_POST, 'email');\n                \n                // Get password from request body\n                $password = filter_input(INPUT_POST, 'password');\n                \n                // Find account with email address (THIS IS PSUEDO-CODE)\n                $user = User::findByEmail($email);\n                \n                // Verify password with account password hash\n                if (password_verify($password, $user->password_hash) === false) {\n                    throw new Exception('Invalid password');\n                }\n                \n                // Re-hash password if necessary (see note below)\n                $currentHashAlgorithm = CRYPT_BLOWFISH;\n                $currentHashOptions = array('cost' => 15);\n                $passwordNeedsRehash = password_needs_rehash(\n                    $user->password_hash,\n                    $currentHashAlgorithm,\n                    $currentHashOptions\n                );\n                if ($passwordNeedsRehash === true) {\n                \n                    // Save new password hash (THIS IS PSUEDO-CODE)\n                    $user->password_hash = password_hash(\n                        $password,\n                        $currentHashAlgorithm,\n                        $currentHashOptions\n                    );\n                    $user->save();\n                }\n                \n                // Save login status to session\n                $_SESSION['user_logged_in'] = 'yes';\n                $_SESSION['user_email'] = $email;\n                \n                // Redirect to profile page\n                header('HTTP/1.1 302 Redirect');\n                header('Location: /user-profile.php');\n            } catch (Exception $e) {\n                header('HTTP/1.1 401 Unauthorized');\n                echo $e->getMessage();\n            }\n\n\n### 流\n* 在源与目的地之间传输数据。源和目的地可以是文件、内存、命令行、标准输入输入等。\n\n#### 封装器\n* 每个流都有协议和目标，格式为`<scheme>://<target>`，协议<scheme>即为封装器，目标<target>为数据源。常用的封装器有：\n    * `file://`. 我们常用的函数如 `file_get_contents()`, `fopen()`, `fwrite()`, `fclose()` 都是流的封装器。\n    * `php://`. 标准输入输出的封装器。比如：`php://stdin`, `php://stdout`, `php://memory`, `php://temp`(类似`php://memory`, 只是这个写入的是临时文件)。\n\n#### 上下文\n* 用于定义流的行为。比如使用`stream_context_create()`可以让`file_get_contents()`发送 POST 请求：\n\n        <?php\n        $requestBody = '{\"username\":\"josh\"}'; \n        $context = stream_context_create(array(\n            'http' => array( \n                'method' => 'POST', \n                    'header' => \"Content-Type: application/json;charset=utf-8;\\r\\n\" . \n                                \"Content-Length: \" . mb_strlen($requestBody), \n                    'content' => $requestBody\n               )\n        )); \n        $response = file_get_contents('https://my-api.com/users', false, $context);\n    \n#### 过滤器\n* 在传输的过程中进行过滤、转换、增加、删除操作。\n* 简单的例子，将传输过来的数据全都大写化：\n\n        <?php \n        $handle = fopen('data.txt', 'rb'); \n        stream_filter_append($handle, 'string.toupper'); \n        while(feof($handle) !== true) { \n            echo fgets($handle); // <-- Outputs all uppercase characters \n        } \n        fclose($handle);\n* 另一个例子：\n\n        <?php \n        $handle = fopen('php://filter/read=string.toupper/resource=data.txt', 'rb');\n        while(feof($handle) !== true) { \n            echo fgets($handle); // <-- Outputs all uppercase characters \n        } \n        fclose($handle);\n        \n   * 过滤器写在`php://`的流封装器里，其标准格式为：`filter/read=<filter_name>/resource=<scheme>://<target>`\n\n* 例子3, 使用bzip分开压缩过去30天的日志文件，每天一个压缩包:\n\n        <?php\n        $dateStart = new \\DateTime();\n        $dateInterval = \\DateInterval::createFromDateString('-1 day');\n        $datePeriod = new \\DatePeriod($dateStart, $dateInterval, 30);\n        foreach ($datePeriod as $date) {\n            $file = 'sftp://USER:PASS@rsync.net/' . $date->format('Y-m-d') . '.log.bz2';\n            if (file_exists($file)) {\n                $handle = fopen($file, 'rb');\n                stream_filter_append($handle, 'bzip2.decompress');\n                while (feof($handle) !== true) {\n                    $line = fgets($handle);\n                    if (strpos($line, 'www.example.com') !== false) {\n                        fwrite(STDOUT, $line);\n                   }\n                }\n                fclose($handle);\n            }\n        }\n   \n* 自定义过滤器。需完成以下三点：(参考实例：[DirtyWordsFilter.php](https://github.com/codeguy/modern-php/blob/master/05-good-practices/streams/DirtyWordsFilter.php))\n    * 继承内置类`php_user_filter`\n    * 实现`filter()`, `onCreate()`, `onClose()`三个方法\n    * 使用`stream_filter_register()`注册自定义的过滤器\n\n### 错误和异常处理\n\n#### 异常处理\n\n* 设置全局性的异常捕获来保证程序中未捕获的异常最后都会被记录下来。\n\n        <?php // Register your exception handler \n        set_exception_handler(function (Exception $e) { \n            // Handle and log exception \n        }); \n       \n        // Your code goes here...\n    \n        // Restore previous exception handler \n        restore_exception_handler();\n        \n* 在开发环境中使用异常捕获以及日志来显示所有的DEBUG信息，在生产环境使用用户友好的提示信息。\n\n#### 错误\n\n* 四个准则\n\n    * 打开错误报告\n    * 在测试环境中显示错误信息\n    * 不在生产环境中显示错误信息\n    * 无论生产还是开发都应该在日志中记录错误\n\n* 生产环境`php.ini`示例：\n\n        ; DO NOT display errors \n        display_startup_errors = Off    \n        display_errors = Off\n\n        ; Report all errors EXCEPT notices \n        error_reporting = E_ALL & ~E_NOTICE\n\n        ; Turn on error logging \n        log_errors = On\n        \n* 开发环境示例：\n        \n        ; Display errors \n        display_startup_errors = On \n        display_errors = On\n\n        ; Report all errors \n        error_reporting = -1\n\n        ; Turn on error logging \n        log_errors = On\n\n\n#### 错误处理\n\n* 等同于异常处理，错误也是可以被捕获的。如果只是临时使用错误捕获，一定不要忘了在自己的代码完成后恢复：\n\n        <?php // Register error handler \n        set_error_handler(function ($errno, $errstr, $errfile, $errline) { \n            if (!(error_reporting() & $errno)) { \n                // Error is not specified in the error_reporting \n                // setting, so we ignore it.\n                return; \n            }\n            throw new ErrorException($errstr, $errno, 0, $errfile, $errline);\n        });\n\n        // Your code goes here...\n\n        // Restore previous error handler \n        restore_error_handler();\n\n#### 第三方扩展推荐\n\n* [filp/whoops](https://github.com/filp/whoops) 是一个错误处理框架，提供一个优雅的错误界面帮助DEBUG。目前很多主流的框架比如Laraval 5, CakePHP 3等都已经内置了。\n* [Seldaek/monolog](https://github.com/Seldaek/monolog) 记录日志的插件\n\n","slug":"2017-02-20-php-advance-3-good-practice","published":1,"updated":"2022-02-12T20:53:10.506Z","comments":1,"photos":[],"link":"","_id":"ckzkc92xh001xoqox3ocueaks","content":"<h3 id=\"净化、验证、转义输入输出\"><a href=\"#净化、验证、转义输入输出\" class=\"headerlink\" title=\"净化、验证、转义输入输出\"></a>净化、验证、转义输入输出</h3><h4 id=\"需要注意的几个外部数据源\"><a href=\"#需要注意的几个外部数据源\" class=\"headerlink\" title=\"需要注意的几个外部数据源\"></a>需要注意的几个外部数据源</h4><ul>\n<li>$_GET</li>\n<li>$_POST</li>\n<li>$_REQUEST</li>\n<li>$_COOKIE</li>\n<li>$argv</li>\n<li>php:&#x2F;&#x2F;stdin</li>\n<li>php:&#x2F;&#x2F;input</li>\n<li>file_get_contents()</li>\n<li>远程数据库</li>\n<li>远程 APIs</li>\n<li>远程客户端获取的数据</li>\n</ul>\n<h4 id=\"净化输入\"><a href=\"#净化输入\" class=\"headerlink\" title=\"净化输入\"></a>净化输入</h4><ul>\n<li>HTML <ul>\n<li><p>在接触存储层之前，使用 htmlentities() 来净化 HTML 的特殊字符:</p>\n<pre><code>  &lt;?php $input = &#39;&lt;p&gt;&lt;script&gt;alert(&quot;You won the Nigerian lottery!&quot;);&lt;/script&gt;&lt;/p&gt;&#39;; \n  echo htmlentities($input, ENT_QUOTES, &#39;UTF-8&#39;);\n  \n</code></pre>\n</li>\n<li><p>避免使用 preg_replace(), preg_replace_all() 和 preg_replace_callback() 等正则函数在HTML代码里。</p>\n</li>\n</ul>\n</li>\n<li>SQL 查询<ul>\n<li>使用 PDO prepared statement 的形式，避免SQL注入等问题。</li>\n</ul>\n</li>\n<li>用户信息收集<ul>\n<li><p>使用 filter_var() 和 filter_input() 来净化用户信息数据，如 emails, URL-encoded strings, integers, floats, HTML characters, URLs 等，例：</p>\n<pre><code>  &lt;?php $email = &#39;john@example.com&#39;; \n  $emailSafe = filter_var($email, FILTER_SANITIZE_EMAIL);\n</code></pre>\n</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"验证数据\"><a href=\"#验证数据\" class=\"headerlink\" title=\"验证数据\"></a>验证数据</h4><ul>\n<li><p>可以使用内置函数 filter_var() 来做简单的验证：</p>\n<pre><code>  &lt;?php \n  $input = &#39;john@example.com&#39;; \n  $isEmail = filter_var($input, FILTER_VALIDATE_EMAIL); \n  if ($isEmail !== false) &#123;\n      echo &quot;Success&quot;; \n  &#125; else &#123;\n      echo &quot;Fail&quot;; \n  &#125;\n  \n</code></pre>\n</li>\n<li><p>几个推荐的扩展库</p>\n<ul>\n<li><a href=\"https://packagist.org/packages/aura/filter\">aura&#x2F;filter</a></li>\n<li><a href=\"https://packagist.org/packages/respect/validation\">respect&#x2F;validation</a></li>\n<li><a href=\"https://packagist.org/packages/symfony/validator\">symfony&#x2F;validator</a></li>\n</ul>\n</li>\n</ul>\n<h4 id=\"转义输出\"><a href=\"#转义输出\" class=\"headerlink\" title=\"转义输出\"></a>转义输出</h4><ul>\n<li><p>使用 htmlentities() ：</p>\n<pre><code>  &lt;?php \n  $output = &#39;&lt;p&gt;&lt;script&gt;alert(&quot;NSA backdoor installed&quot;);&lt;/script&gt;&#39;; \n  echo htmlentities($output, ENT_QUOTES, &#39;UTF-8&#39;);\n  \n</code></pre>\n</li>\n<li><p>使用模板引擎，比如：</p>\n<p>  <a href=\"https://packagist.org/packages/twig/twig\">twig&#x2F;twig</a></p>\n</li>\n</ul>\n<h3 id=\"密码\"><a href=\"#密码\" class=\"headerlink\" title=\"密码\"></a>密码</h3><h4 id=\"几个重要的准则\"><a href=\"#几个重要的准则\" class=\"headerlink\" title=\"几个重要的准则\"></a>几个重要的准则</h4><ul>\n<li><p>不要记录用户的密码</p>\n</li>\n<li><p>不要过多限制用户的密码，仅推荐限制长度即可</p>\n</li>\n<li><p>不要通过邮件发送用户密码</p>\n</li>\n<li><p>使用 bcrypt 函数单向加密用户密码，个人推荐 <a href=\"http://www.openwall.com/phpass/\">phpass</a> 第三方扩展</p>\n</li>\n<li><p>用户注册和登录示例</p>\n<ul>\n<li><p>注册时使用 password_hash() 来加密用户密码, 源代码: <a href=\"https://github.com/codeguy/modern-php/blob/master/05-good-practices/passwords/register.php\">codeguy&#x2F;modern-php</a></p>\n</li>\n<li><p>注：CRYPT_BLOWFISH 加密方式的salt的组成依次是：</p>\n<ul>\n<li><p>(“$2a$”, “$2x$” 或者 “$2y$”) + “xx”(04&lt;xx&lt;31) + “$” + “22个字符”(“.&#x2F;0-9A-Za-z”)， </p>\n</li>\n<li><p>例如：”$2a$07$usesomesillystringfor”</p>\n</li>\n<li><p>PHP 5.3.7 之后应使用”$2y$”作为前缀</p>\n<pre><code>  &lt;?php\n  try &#123;\n      // Validate email\n      $email = filter_input(INPUT_POST, &#39;email&#39;, FILTER_VALIDATE_EMAIL);\n      if (!$email) &#123;\n          throw new Exception(&#39;Invalid email&#39;);\n      &#125;\n      \n      // Validate password\n      $password = filter_input(INPUT_POST, &#39;password&#39;);\n      if (!$password || mb_strlen($password) &lt; 8) &#123;\n          throw new Exception(&#39;Password must contain 8+ characters&#39;);\n      &#125;\n      \n      // Create password hash\n      $passwordHash = password_hash(\n         $password,\n         CRYPT_BLOWFISH, // 加密方式\n         [&#39;cost&#39; =&gt; 12] // 递归次数\n      );\n      if ($passwordHash === false) &#123;\n          throw new Exception(&#39;Password hash failed&#39;);\n      &#125;\n      \n      // Create user account (THIS IS PSUEDO-CODE)\n      // $user = new User();\n      // $user-&gt;email = $email;\n      // $user-&gt;password_hash = $passwordHash;\n      // $user-&gt;save();\n      // Redirect to login page\n      \n      header(&#39;HTTP/1.1 302 Redirect&#39;);\n      header(&#39;Location: /login.php&#39;);\n  &#125; catch (Exception $e) &#123;\n      // Report error\n      header(&#39;HTTP/1.1 400 Bad request&#39;);\n      echo $e-&gt;getMessage();\n  &#125;\n</code></pre>\n</li>\n</ul>\n</li>\n<li><p>登录，不要忘了 rehash password ，源代码: <a href=\"https://github.com/codeguy/modern-php/blob/master/05-good-practices/passwords/login.php\">codeguy&#x2F;modern-php</a></p>\n<pre><code>  &lt;?php\n  session_start();\n  try &#123;\n      // Get email address from request body\n      $email = filter_input(INPUT_POST, &#39;email&#39;);\n      \n      // Get password from request body\n      $password = filter_input(INPUT_POST, &#39;password&#39;);\n      \n      // Find account with email address (THIS IS PSUEDO-CODE)\n      $user = User::findByEmail($email);\n      \n      // Verify password with account password hash\n      if (password_verify($password, $user-&gt;password_hash) === false) &#123;\n          throw new Exception(&#39;Invalid password&#39;);\n      &#125;\n      \n      // Re-hash password if necessary (see note below)\n      $currentHashAlgorithm = CRYPT_BLOWFISH;\n      $currentHashOptions = array(&#39;cost&#39; =&gt; 15);\n      $passwordNeedsRehash = password_needs_rehash(\n          $user-&gt;password_hash,\n          $currentHashAlgorithm,\n          $currentHashOptions\n      );\n      if ($passwordNeedsRehash === true) &#123;\n      \n          // Save new password hash (THIS IS PSUEDO-CODE)\n          $user-&gt;password_hash = password_hash(\n              $password,\n              $currentHashAlgorithm,\n              $currentHashOptions\n          );\n          $user-&gt;save();\n      &#125;\n      \n      // Save login status to session\n      $_SESSION[&#39;user_logged_in&#39;] = &#39;yes&#39;;\n      $_SESSION[&#39;user_email&#39;] = $email;\n      \n      // Redirect to profile page\n      header(&#39;HTTP/1.1 302 Redirect&#39;);\n      header(&#39;Location: /user-profile.php&#39;);\n  &#125; catch (Exception $e) &#123;\n      header(&#39;HTTP/1.1 401 Unauthorized&#39;);\n      echo $e-&gt;getMessage();\n  &#125;\n</code></pre>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"流\"><a href=\"#流\" class=\"headerlink\" title=\"流\"></a>流</h3><ul>\n<li>在源与目的地之间传输数据。源和目的地可以是文件、内存、命令行、标准输入输入等。</li>\n</ul>\n<h4 id=\"封装器\"><a href=\"#封装器\" class=\"headerlink\" title=\"封装器\"></a>封装器</h4><ul>\n<li>每个流都有协议和目标，格式为<code>&lt;scheme&gt;://&lt;target&gt;</code>，协议<scheme>即为封装器，目标<target>为数据源。常用的封装器有：<ul>\n<li><code>file://</code>. 我们常用的函数如 <code>file_get_contents()</code>, <code>fopen()</code>, <code>fwrite()</code>, <code>fclose()</code> 都是流的封装器。</li>\n<li><code>php://</code>. 标准输入输出的封装器。比如：<code>php://stdin</code>, <code>php://stdout</code>, <code>php://memory</code>, <code>php://temp</code>(类似<code>php://memory</code>, 只是这个写入的是临时文件)。</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"上下文\"><a href=\"#上下文\" class=\"headerlink\" title=\"上下文\"></a>上下文</h4><ul>\n<li><p>用于定义流的行为。比如使用<code>stream_context_create()</code>可以让<code>file_get_contents()</code>发送 POST 请求：</p>\n<pre><code>  &lt;?php\n  $requestBody = &#39;&#123;&quot;username&quot;:&quot;josh&quot;&#125;&#39;; \n  $context = stream_context_create(array(\n      &#39;http&#39; =&gt; array( \n          &#39;method&#39; =&gt; &#39;POST&#39;, \n              &#39;header&#39; =&gt; &quot;Content-Type: application/json;charset=utf-8;\\r\\n&quot; . \n                          &quot;Content-Length: &quot; . mb_strlen($requestBody), \n              &#39;content&#39; =&gt; $requestBody\n         )\n  )); \n  $response = file_get_contents(&#39;https://my-api.com/users&#39;, false, $context);\n</code></pre>\n</li>\n</ul>\n<h4 id=\"过滤器\"><a href=\"#过滤器\" class=\"headerlink\" title=\"过滤器\"></a>过滤器</h4><ul>\n<li><p>在传输的过程中进行过滤、转换、增加、删除操作。</p>\n</li>\n<li><p>简单的例子，将传输过来的数据全都大写化：</p>\n<pre><code>  &lt;?php \n  $handle = fopen(&#39;data.txt&#39;, &#39;rb&#39;); \n  stream_filter_append($handle, &#39;string.toupper&#39;); \n  while(feof($handle) !== true) &#123; \n      echo fgets($handle); // &lt;-- Outputs all uppercase characters \n  &#125; \n  fclose($handle);\n</code></pre>\n</li>\n<li><p>另一个例子：</p>\n<pre><code>  &lt;?php \n  $handle = fopen(&#39;php://filter/read=string.toupper/resource=data.txt&#39;, &#39;rb&#39;);\n  while(feof($handle) !== true) &#123; \n      echo fgets($handle); // &lt;-- Outputs all uppercase characters \n  &#125; \n  fclose($handle);\n  \n</code></pre>\n<ul>\n<li>过滤器写在<code>php://</code>的流封装器里，其标准格式为：<code>filter/read=&lt;filter_name&gt;/resource=&lt;scheme&gt;://&lt;target&gt;</code></li>\n</ul>\n</li>\n<li><p>例子3, 使用bzip分开压缩过去30天的日志文件，每天一个压缩包:</p>\n<pre><code>  &lt;?php\n  $dateStart = new \\DateTime();\n  $dateInterval = \\DateInterval::createFromDateString(&#39;-1 day&#39;);\n  $datePeriod = new \\DatePeriod($dateStart, $dateInterval, 30);\n  foreach ($datePeriod as $date) &#123;\n      $file = &#39;sftp://USER:PASS@rsync.net/&#39; . $date-&gt;format(&#39;Y-m-d&#39;) . &#39;.log.bz2&#39;;\n      if (file_exists($file)) &#123;\n          $handle = fopen($file, &#39;rb&#39;);\n          stream_filter_append($handle, &#39;bzip2.decompress&#39;);\n          while (feof($handle) !== true) &#123;\n              $line = fgets($handle);\n              if (strpos($line, &#39;www.example.com&#39;) !== false) &#123;\n                  fwrite(STDOUT, $line);\n             &#125;\n          &#125;\n          fclose($handle);\n      &#125;\n  &#125;\n</code></pre>\n</li>\n<li><p>自定义过滤器。需完成以下三点：(参考实例：<a href=\"https://github.com/codeguy/modern-php/blob/master/05-good-practices/streams/DirtyWordsFilter.php\">DirtyWordsFilter.php</a>)</p>\n<ul>\n<li>继承内置类<code>php_user_filter</code></li>\n<li>实现<code>filter()</code>, <code>onCreate()</code>, <code>onClose()</code>三个方法</li>\n<li>使用<code>stream_filter_register()</code>注册自定义的过滤器</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"错误和异常处理\"><a href=\"#错误和异常处理\" class=\"headerlink\" title=\"错误和异常处理\"></a>错误和异常处理</h3><h4 id=\"异常处理\"><a href=\"#异常处理\" class=\"headerlink\" title=\"异常处理\"></a>异常处理</h4><ul>\n<li><p>设置全局性的异常捕获来保证程序中未捕获的异常最后都会被记录下来。</p>\n<pre><code>  &lt;?php // Register your exception handler \n  set_exception_handler(function (Exception $e) &#123; \n      // Handle and log exception \n  &#125;); \n \n  // Your code goes here...\n\n  // Restore previous exception handler \n  restore_exception_handler();\n  \n</code></pre>\n</li>\n<li><p>在开发环境中使用异常捕获以及日志来显示所有的DEBUG信息，在生产环境使用用户友好的提示信息。</p>\n</li>\n</ul>\n<h4 id=\"错误\"><a href=\"#错误\" class=\"headerlink\" title=\"错误\"></a>错误</h4><ul>\n<li><p>四个准则</p>\n<ul>\n<li>打开错误报告</li>\n<li>在测试环境中显示错误信息</li>\n<li>不在生产环境中显示错误信息</li>\n<li>无论生产还是开发都应该在日志中记录错误</li>\n</ul>\n</li>\n<li><p>生产环境<code>php.ini</code>示例：</p>\n<pre><code>  ; DO NOT display errors \n  display_startup_errors = Off    \n  display_errors = Off\n\n  ; Report all errors EXCEPT notices \n  error_reporting = E_ALL &amp; ~E_NOTICE\n\n  ; Turn on error logging \n  log_errors = On\n  \n</code></pre>\n</li>\n<li><p>开发环境示例：</p>\n<pre><code>  ; Display errors \n  display_startup_errors = On \n  display_errors = On\n\n  ; Report all errors \n  error_reporting = -1\n\n  ; Turn on error logging \n  log_errors = On\n</code></pre>\n</li>\n</ul>\n<h4 id=\"错误处理\"><a href=\"#错误处理\" class=\"headerlink\" title=\"错误处理\"></a>错误处理</h4><ul>\n<li><p>等同于异常处理，错误也是可以被捕获的。如果只是临时使用错误捕获，一定不要忘了在自己的代码完成后恢复：</p>\n<pre><code>  &lt;?php // Register error handler \n  set_error_handler(function ($errno, $errstr, $errfile, $errline) &#123; \n      if (!(error_reporting() &amp; $errno)) &#123; \n          // Error is not specified in the error_reporting \n          // setting, so we ignore it.\n          return; \n      &#125;\n      throw new ErrorException($errstr, $errno, 0, $errfile, $errline);\n  &#125;);\n\n  // Your code goes here...\n\n  // Restore previous error handler \n  restore_error_handler();\n</code></pre>\n</li>\n</ul>\n<h4 id=\"第三方扩展推荐\"><a href=\"#第三方扩展推荐\" class=\"headerlink\" title=\"第三方扩展推荐\"></a>第三方扩展推荐</h4><ul>\n<li><a href=\"https://github.com/filp/whoops\">filp&#x2F;whoops</a> 是一个错误处理框架，提供一个优雅的错误界面帮助DEBUG。目前很多主流的框架比如Laraval 5, CakePHP 3等都已经内置了。</li>\n<li><a href=\"https://github.com/Seldaek/monolog\">Seldaek&#x2F;monolog</a> 记录日志的插件</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"净化、验证、转义输入输出\"><a href=\"#净化、验证、转义输入输出\" class=\"headerlink\" title=\"净化、验证、转义输入输出\"></a>净化、验证、转义输入输出</h3><h4 id=\"需要注意的几个外部数据源\"><a href=\"#需要注意的几个外部数据源\" class=\"headerlink\" title=\"需要注意的几个外部数据源\"></a>需要注意的几个外部数据源</h4><ul>\n<li>$_GET</li>\n<li>$_POST</li>\n<li>$_REQUEST</li>\n<li>$_COOKIE</li>\n<li>$argv</li>\n<li>php:&#x2F;&#x2F;stdin</li>\n<li>php:&#x2F;&#x2F;input</li>\n<li>file_get_contents()</li>\n<li>远程数据库</li>\n<li>远程 APIs</li>\n<li>远程客户端获取的数据</li>\n</ul>\n<h4 id=\"净化输入\"><a href=\"#净化输入\" class=\"headerlink\" title=\"净化输入\"></a>净化输入</h4><ul>\n<li>HTML <ul>\n<li><p>在接触存储层之前，使用 htmlentities() 来净化 HTML 的特殊字符:</p>\n<pre><code>  &lt;?php $input = &#39;&lt;p&gt;&lt;script&gt;alert(&quot;You won the Nigerian lottery!&quot;);&lt;/script&gt;&lt;/p&gt;&#39;; \n  echo htmlentities($input, ENT_QUOTES, &#39;UTF-8&#39;);\n  \n</code></pre>\n</li>\n<li><p>避免使用 preg_replace(), preg_replace_all() 和 preg_replace_callback() 等正则函数在HTML代码里。</p>\n</li>\n</ul>\n</li>\n<li>SQL 查询<ul>\n<li>使用 PDO prepared statement 的形式，避免SQL注入等问题。</li>\n</ul>\n</li>\n<li>用户信息收集<ul>\n<li><p>使用 filter_var() 和 filter_input() 来净化用户信息数据，如 emails, URL-encoded strings, integers, floats, HTML characters, URLs 等，例：</p>\n<pre><code>  &lt;?php $email = &#39;john@example.com&#39;; \n  $emailSafe = filter_var($email, FILTER_SANITIZE_EMAIL);\n</code></pre>\n</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"验证数据\"><a href=\"#验证数据\" class=\"headerlink\" title=\"验证数据\"></a>验证数据</h4><ul>\n<li><p>可以使用内置函数 filter_var() 来做简单的验证：</p>\n<pre><code>  &lt;?php \n  $input = &#39;john@example.com&#39;; \n  $isEmail = filter_var($input, FILTER_VALIDATE_EMAIL); \n  if ($isEmail !== false) &#123;\n      echo &quot;Success&quot;; \n  &#125; else &#123;\n      echo &quot;Fail&quot;; \n  &#125;\n  \n</code></pre>\n</li>\n<li><p>几个推荐的扩展库</p>\n<ul>\n<li><a href=\"https://packagist.org/packages/aura/filter\">aura&#x2F;filter</a></li>\n<li><a href=\"https://packagist.org/packages/respect/validation\">respect&#x2F;validation</a></li>\n<li><a href=\"https://packagist.org/packages/symfony/validator\">symfony&#x2F;validator</a></li>\n</ul>\n</li>\n</ul>\n<h4 id=\"转义输出\"><a href=\"#转义输出\" class=\"headerlink\" title=\"转义输出\"></a>转义输出</h4><ul>\n<li><p>使用 htmlentities() ：</p>\n<pre><code>  &lt;?php \n  $output = &#39;&lt;p&gt;&lt;script&gt;alert(&quot;NSA backdoor installed&quot;);&lt;/script&gt;&#39;; \n  echo htmlentities($output, ENT_QUOTES, &#39;UTF-8&#39;);\n  \n</code></pre>\n</li>\n<li><p>使用模板引擎，比如：</p>\n<p>  <a href=\"https://packagist.org/packages/twig/twig\">twig&#x2F;twig</a></p>\n</li>\n</ul>\n<h3 id=\"密码\"><a href=\"#密码\" class=\"headerlink\" title=\"密码\"></a>密码</h3><h4 id=\"几个重要的准则\"><a href=\"#几个重要的准则\" class=\"headerlink\" title=\"几个重要的准则\"></a>几个重要的准则</h4><ul>\n<li><p>不要记录用户的密码</p>\n</li>\n<li><p>不要过多限制用户的密码，仅推荐限制长度即可</p>\n</li>\n<li><p>不要通过邮件发送用户密码</p>\n</li>\n<li><p>使用 bcrypt 函数单向加密用户密码，个人推荐 <a href=\"http://www.openwall.com/phpass/\">phpass</a> 第三方扩展</p>\n</li>\n<li><p>用户注册和登录示例</p>\n<ul>\n<li><p>注册时使用 password_hash() 来加密用户密码, 源代码: <a href=\"https://github.com/codeguy/modern-php/blob/master/05-good-practices/passwords/register.php\">codeguy&#x2F;modern-php</a></p>\n</li>\n<li><p>注：CRYPT_BLOWFISH 加密方式的salt的组成依次是：</p>\n<ul>\n<li><p>(“$2a$”, “$2x$” 或者 “$2y$”) + “xx”(04&lt;xx&lt;31) + “$” + “22个字符”(“.&#x2F;0-9A-Za-z”)， </p>\n</li>\n<li><p>例如：”$2a$07$usesomesillystringfor”</p>\n</li>\n<li><p>PHP 5.3.7 之后应使用”$2y$”作为前缀</p>\n<pre><code>  &lt;?php\n  try &#123;\n      // Validate email\n      $email = filter_input(INPUT_POST, &#39;email&#39;, FILTER_VALIDATE_EMAIL);\n      if (!$email) &#123;\n          throw new Exception(&#39;Invalid email&#39;);\n      &#125;\n      \n      // Validate password\n      $password = filter_input(INPUT_POST, &#39;password&#39;);\n      if (!$password || mb_strlen($password) &lt; 8) &#123;\n          throw new Exception(&#39;Password must contain 8+ characters&#39;);\n      &#125;\n      \n      // Create password hash\n      $passwordHash = password_hash(\n         $password,\n         CRYPT_BLOWFISH, // 加密方式\n         [&#39;cost&#39; =&gt; 12] // 递归次数\n      );\n      if ($passwordHash === false) &#123;\n          throw new Exception(&#39;Password hash failed&#39;);\n      &#125;\n      \n      // Create user account (THIS IS PSUEDO-CODE)\n      // $user = new User();\n      // $user-&gt;email = $email;\n      // $user-&gt;password_hash = $passwordHash;\n      // $user-&gt;save();\n      // Redirect to login page\n      \n      header(&#39;HTTP/1.1 302 Redirect&#39;);\n      header(&#39;Location: /login.php&#39;);\n  &#125; catch (Exception $e) &#123;\n      // Report error\n      header(&#39;HTTP/1.1 400 Bad request&#39;);\n      echo $e-&gt;getMessage();\n  &#125;\n</code></pre>\n</li>\n</ul>\n</li>\n<li><p>登录，不要忘了 rehash password ，源代码: <a href=\"https://github.com/codeguy/modern-php/blob/master/05-good-practices/passwords/login.php\">codeguy&#x2F;modern-php</a></p>\n<pre><code>  &lt;?php\n  session_start();\n  try &#123;\n      // Get email address from request body\n      $email = filter_input(INPUT_POST, &#39;email&#39;);\n      \n      // Get password from request body\n      $password = filter_input(INPUT_POST, &#39;password&#39;);\n      \n      // Find account with email address (THIS IS PSUEDO-CODE)\n      $user = User::findByEmail($email);\n      \n      // Verify password with account password hash\n      if (password_verify($password, $user-&gt;password_hash) === false) &#123;\n          throw new Exception(&#39;Invalid password&#39;);\n      &#125;\n      \n      // Re-hash password if necessary (see note below)\n      $currentHashAlgorithm = CRYPT_BLOWFISH;\n      $currentHashOptions = array(&#39;cost&#39; =&gt; 15);\n      $passwordNeedsRehash = password_needs_rehash(\n          $user-&gt;password_hash,\n          $currentHashAlgorithm,\n          $currentHashOptions\n      );\n      if ($passwordNeedsRehash === true) &#123;\n      \n          // Save new password hash (THIS IS PSUEDO-CODE)\n          $user-&gt;password_hash = password_hash(\n              $password,\n              $currentHashAlgorithm,\n              $currentHashOptions\n          );\n          $user-&gt;save();\n      &#125;\n      \n      // Save login status to session\n      $_SESSION[&#39;user_logged_in&#39;] = &#39;yes&#39;;\n      $_SESSION[&#39;user_email&#39;] = $email;\n      \n      // Redirect to profile page\n      header(&#39;HTTP/1.1 302 Redirect&#39;);\n      header(&#39;Location: /user-profile.php&#39;);\n  &#125; catch (Exception $e) &#123;\n      header(&#39;HTTP/1.1 401 Unauthorized&#39;);\n      echo $e-&gt;getMessage();\n  &#125;\n</code></pre>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"流\"><a href=\"#流\" class=\"headerlink\" title=\"流\"></a>流</h3><ul>\n<li>在源与目的地之间传输数据。源和目的地可以是文件、内存、命令行、标准输入输入等。</li>\n</ul>\n<h4 id=\"封装器\"><a href=\"#封装器\" class=\"headerlink\" title=\"封装器\"></a>封装器</h4><ul>\n<li>每个流都有协议和目标，格式为<code>&lt;scheme&gt;://&lt;target&gt;</code>，协议<scheme>即为封装器，目标<target>为数据源。常用的封装器有：<ul>\n<li><code>file://</code>. 我们常用的函数如 <code>file_get_contents()</code>, <code>fopen()</code>, <code>fwrite()</code>, <code>fclose()</code> 都是流的封装器。</li>\n<li><code>php://</code>. 标准输入输出的封装器。比如：<code>php://stdin</code>, <code>php://stdout</code>, <code>php://memory</code>, <code>php://temp</code>(类似<code>php://memory</code>, 只是这个写入的是临时文件)。</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"上下文\"><a href=\"#上下文\" class=\"headerlink\" title=\"上下文\"></a>上下文</h4><ul>\n<li><p>用于定义流的行为。比如使用<code>stream_context_create()</code>可以让<code>file_get_contents()</code>发送 POST 请求：</p>\n<pre><code>  &lt;?php\n  $requestBody = &#39;&#123;&quot;username&quot;:&quot;josh&quot;&#125;&#39;; \n  $context = stream_context_create(array(\n      &#39;http&#39; =&gt; array( \n          &#39;method&#39; =&gt; &#39;POST&#39;, \n              &#39;header&#39; =&gt; &quot;Content-Type: application/json;charset=utf-8;\\r\\n&quot; . \n                          &quot;Content-Length: &quot; . mb_strlen($requestBody), \n              &#39;content&#39; =&gt; $requestBody\n         )\n  )); \n  $response = file_get_contents(&#39;https://my-api.com/users&#39;, false, $context);\n</code></pre>\n</li>\n</ul>\n<h4 id=\"过滤器\"><a href=\"#过滤器\" class=\"headerlink\" title=\"过滤器\"></a>过滤器</h4><ul>\n<li><p>在传输的过程中进行过滤、转换、增加、删除操作。</p>\n</li>\n<li><p>简单的例子，将传输过来的数据全都大写化：</p>\n<pre><code>  &lt;?php \n  $handle = fopen(&#39;data.txt&#39;, &#39;rb&#39;); \n  stream_filter_append($handle, &#39;string.toupper&#39;); \n  while(feof($handle) !== true) &#123; \n      echo fgets($handle); // &lt;-- Outputs all uppercase characters \n  &#125; \n  fclose($handle);\n</code></pre>\n</li>\n<li><p>另一个例子：</p>\n<pre><code>  &lt;?php \n  $handle = fopen(&#39;php://filter/read=string.toupper/resource=data.txt&#39;, &#39;rb&#39;);\n  while(feof($handle) !== true) &#123; \n      echo fgets($handle); // &lt;-- Outputs all uppercase characters \n  &#125; \n  fclose($handle);\n  \n</code></pre>\n<ul>\n<li>过滤器写在<code>php://</code>的流封装器里，其标准格式为：<code>filter/read=&lt;filter_name&gt;/resource=&lt;scheme&gt;://&lt;target&gt;</code></li>\n</ul>\n</li>\n<li><p>例子3, 使用bzip分开压缩过去30天的日志文件，每天一个压缩包:</p>\n<pre><code>  &lt;?php\n  $dateStart = new \\DateTime();\n  $dateInterval = \\DateInterval::createFromDateString(&#39;-1 day&#39;);\n  $datePeriod = new \\DatePeriod($dateStart, $dateInterval, 30);\n  foreach ($datePeriod as $date) &#123;\n      $file = &#39;sftp://USER:PASS@rsync.net/&#39; . $date-&gt;format(&#39;Y-m-d&#39;) . &#39;.log.bz2&#39;;\n      if (file_exists($file)) &#123;\n          $handle = fopen($file, &#39;rb&#39;);\n          stream_filter_append($handle, &#39;bzip2.decompress&#39;);\n          while (feof($handle) !== true) &#123;\n              $line = fgets($handle);\n              if (strpos($line, &#39;www.example.com&#39;) !== false) &#123;\n                  fwrite(STDOUT, $line);\n             &#125;\n          &#125;\n          fclose($handle);\n      &#125;\n  &#125;\n</code></pre>\n</li>\n<li><p>自定义过滤器。需完成以下三点：(参考实例：<a href=\"https://github.com/codeguy/modern-php/blob/master/05-good-practices/streams/DirtyWordsFilter.php\">DirtyWordsFilter.php</a>)</p>\n<ul>\n<li>继承内置类<code>php_user_filter</code></li>\n<li>实现<code>filter()</code>, <code>onCreate()</code>, <code>onClose()</code>三个方法</li>\n<li>使用<code>stream_filter_register()</code>注册自定义的过滤器</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"错误和异常处理\"><a href=\"#错误和异常处理\" class=\"headerlink\" title=\"错误和异常处理\"></a>错误和异常处理</h3><h4 id=\"异常处理\"><a href=\"#异常处理\" class=\"headerlink\" title=\"异常处理\"></a>异常处理</h4><ul>\n<li><p>设置全局性的异常捕获来保证程序中未捕获的异常最后都会被记录下来。</p>\n<pre><code>  &lt;?php // Register your exception handler \n  set_exception_handler(function (Exception $e) &#123; \n      // Handle and log exception \n  &#125;); \n \n  // Your code goes here...\n\n  // Restore previous exception handler \n  restore_exception_handler();\n  \n</code></pre>\n</li>\n<li><p>在开发环境中使用异常捕获以及日志来显示所有的DEBUG信息，在生产环境使用用户友好的提示信息。</p>\n</li>\n</ul>\n<h4 id=\"错误\"><a href=\"#错误\" class=\"headerlink\" title=\"错误\"></a>错误</h4><ul>\n<li><p>四个准则</p>\n<ul>\n<li>打开错误报告</li>\n<li>在测试环境中显示错误信息</li>\n<li>不在生产环境中显示错误信息</li>\n<li>无论生产还是开发都应该在日志中记录错误</li>\n</ul>\n</li>\n<li><p>生产环境<code>php.ini</code>示例：</p>\n<pre><code>  ; DO NOT display errors \n  display_startup_errors = Off    \n  display_errors = Off\n\n  ; Report all errors EXCEPT notices \n  error_reporting = E_ALL &amp; ~E_NOTICE\n\n  ; Turn on error logging \n  log_errors = On\n  \n</code></pre>\n</li>\n<li><p>开发环境示例：</p>\n<pre><code>  ; Display errors \n  display_startup_errors = On \n  display_errors = On\n\n  ; Report all errors \n  error_reporting = -1\n\n  ; Turn on error logging \n  log_errors = On\n</code></pre>\n</li>\n</ul>\n<h4 id=\"错误处理\"><a href=\"#错误处理\" class=\"headerlink\" title=\"错误处理\"></a>错误处理</h4><ul>\n<li><p>等同于异常处理，错误也是可以被捕获的。如果只是临时使用错误捕获，一定不要忘了在自己的代码完成后恢复：</p>\n<pre><code>  &lt;?php // Register error handler \n  set_error_handler(function ($errno, $errstr, $errfile, $errline) &#123; \n      if (!(error_reporting() &amp; $errno)) &#123; \n          // Error is not specified in the error_reporting \n          // setting, so we ignore it.\n          return; \n      &#125;\n      throw new ErrorException($errstr, $errno, 0, $errfile, $errline);\n  &#125;);\n\n  // Your code goes here...\n\n  // Restore previous error handler \n  restore_error_handler();\n</code></pre>\n</li>\n</ul>\n<h4 id=\"第三方扩展推荐\"><a href=\"#第三方扩展推荐\" class=\"headerlink\" title=\"第三方扩展推荐\"></a>第三方扩展推荐</h4><ul>\n<li><a href=\"https://github.com/filp/whoops\">filp&#x2F;whoops</a> 是一个错误处理框架，提供一个优雅的错误界面帮助DEBUG。目前很多主流的框架比如Laraval 5, CakePHP 3等都已经内置了。</li>\n<li><a href=\"https://github.com/Seldaek/monolog\">Seldaek&#x2F;monolog</a> 记录日志的插件</li>\n</ul>\n"},{"layout":"post","title":"部署和测试工具 - PHP进阶 (5)","date":"2017-02-26T05:00:00.000Z","description":"部署和测试工具","keywords":"代码部署, 测试, PHP, Note","_content":"\n### 测试\n#### 概念分类\n* 单元测试(Unit Test) - 在项目中独立测试函数、方法、类等。\n* TDD(Test-Driven Development) - 项目开始后，先写一部分测试用例，然后实现，然后继续写测试用例，继续实现，不断循环直至项目完成或终止。\n* BDD(Behavior-Driven Development) - 基于行为流程来描述程序的实现。类似于单元测试，只是在实现上应用了比较友好的表达方式便于理解。\n    * SpecBDD - 面向开发人员。使用编程语言表达。例： [phpspec](http://www.phpspec.net/en/stable/)\n    * StoryBDD - 面向产品经理。基于英语语言表达。例：[behat](http://behat.org/en/latest/)\n\n### 自动化部署工具\n* [capistrano/capistrano](https://github.com/capistrano/capistrano)\n* [magephp](http://magephp.com/)\n* [Rocketeer](http://rocketeer.autopergamene.eu/)\n\n### 代码分析工具\n* [Xdebug](https://xdebug.org/)\n* [blackfire](https://blackfire.io/)\n\n","source":"_posts/2017-02-26-php-advance-5-development-testing.md","raw":"---\nlayout: post\ntitle: 部署和测试工具 - PHP进阶 (5)\ncategory: 编程学习\ntags: [PHP]\ndate: 2017-02-26\ndescription: 部署和测试工具\nkeywords: 代码部署, 测试, PHP, Note\n---\n\n### 测试\n#### 概念分类\n* 单元测试(Unit Test) - 在项目中独立测试函数、方法、类等。\n* TDD(Test-Driven Development) - 项目开始后，先写一部分测试用例，然后实现，然后继续写测试用例，继续实现，不断循环直至项目完成或终止。\n* BDD(Behavior-Driven Development) - 基于行为流程来描述程序的实现。类似于单元测试，只是在实现上应用了比较友好的表达方式便于理解。\n    * SpecBDD - 面向开发人员。使用编程语言表达。例： [phpspec](http://www.phpspec.net/en/stable/)\n    * StoryBDD - 面向产品经理。基于英语语言表达。例：[behat](http://behat.org/en/latest/)\n\n### 自动化部署工具\n* [capistrano/capistrano](https://github.com/capistrano/capistrano)\n* [magephp](http://magephp.com/)\n* [Rocketeer](http://rocketeer.autopergamene.eu/)\n\n### 代码分析工具\n* [Xdebug](https://xdebug.org/)\n* [blackfire](https://blackfire.io/)\n\n","slug":"2017-02-26-php-advance-5-development-testing","published":1,"updated":"2022-02-12T20:53:10.506Z","comments":1,"photos":[],"link":"","_id":"ckzkc92xi001zoqoxelcvh0g5","content":"<h3 id=\"测试\"><a href=\"#测试\" class=\"headerlink\" title=\"测试\"></a>测试</h3><h4 id=\"概念分类\"><a href=\"#概念分类\" class=\"headerlink\" title=\"概念分类\"></a>概念分类</h4><ul>\n<li>单元测试(Unit Test) - 在项目中独立测试函数、方法、类等。</li>\n<li>TDD(Test-Driven Development) - 项目开始后，先写一部分测试用例，然后实现，然后继续写测试用例，继续实现，不断循环直至项目完成或终止。</li>\n<li>BDD(Behavior-Driven Development) - 基于行为流程来描述程序的实现。类似于单元测试，只是在实现上应用了比较友好的表达方式便于理解。<ul>\n<li>SpecBDD - 面向开发人员。使用编程语言表达。例： <a href=\"http://www.phpspec.net/en/stable/\">phpspec</a></li>\n<li>StoryBDD - 面向产品经理。基于英语语言表达。例：<a href=\"http://behat.org/en/latest/\">behat</a></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"自动化部署工具\"><a href=\"#自动化部署工具\" class=\"headerlink\" title=\"自动化部署工具\"></a>自动化部署工具</h3><ul>\n<li><a href=\"https://github.com/capistrano/capistrano\">capistrano&#x2F;capistrano</a></li>\n<li><a href=\"http://magephp.com/\">magephp</a></li>\n<li><a href=\"http://rocketeer.autopergamene.eu/\">Rocketeer</a></li>\n</ul>\n<h3 id=\"代码分析工具\"><a href=\"#代码分析工具\" class=\"headerlink\" title=\"代码分析工具\"></a>代码分析工具</h3><ul>\n<li><a href=\"https://xdebug.org/\">Xdebug</a></li>\n<li><a href=\"https://blackfire.io/\">blackfire</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"测试\"><a href=\"#测试\" class=\"headerlink\" title=\"测试\"></a>测试</h3><h4 id=\"概念分类\"><a href=\"#概念分类\" class=\"headerlink\" title=\"概念分类\"></a>概念分类</h4><ul>\n<li>单元测试(Unit Test) - 在项目中独立测试函数、方法、类等。</li>\n<li>TDD(Test-Driven Development) - 项目开始后，先写一部分测试用例，然后实现，然后继续写测试用例，继续实现，不断循环直至项目完成或终止。</li>\n<li>BDD(Behavior-Driven Development) - 基于行为流程来描述程序的实现。类似于单元测试，只是在实现上应用了比较友好的表达方式便于理解。<ul>\n<li>SpecBDD - 面向开发人员。使用编程语言表达。例： <a href=\"http://www.phpspec.net/en/stable/\">phpspec</a></li>\n<li>StoryBDD - 面向产品经理。基于英语语言表达。例：<a href=\"http://behat.org/en/latest/\">behat</a></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"自动化部署工具\"><a href=\"#自动化部署工具\" class=\"headerlink\" title=\"自动化部署工具\"></a>自动化部署工具</h3><ul>\n<li><a href=\"https://github.com/capistrano/capistrano\">capistrano&#x2F;capistrano</a></li>\n<li><a href=\"http://magephp.com/\">magephp</a></li>\n<li><a href=\"http://rocketeer.autopergamene.eu/\">Rocketeer</a></li>\n</ul>\n<h3 id=\"代码分析工具\"><a href=\"#代码分析工具\" class=\"headerlink\" title=\"代码分析工具\"></a>代码分析工具</h3><ul>\n<li><a href=\"https://xdebug.org/\">Xdebug</a></li>\n<li><a href=\"https://blackfire.io/\">blackfire</a></li>\n</ul>\n"},{"layout":"post","title":"排列组合算法[Python]","date":"2017-03-11T05:00:00.000Z","description":"最新学到的排列组合算法","keywords":"排列组合, Python, 算法, powerset, Algorithms","_content":"\n# 两种排列组合算法\n\n* 一个是在Edx课上看到的，一个是Python的源码\n\n## 通过二进制中“1”所在位置的可能性来确定数组中的索引位置，进而求得所有排列组合\n\n* 首先确定组合的数量是2的N次方个，然后循环2^N， 每个数字即代表一种可能。\n    * 比如数组长度是5的情况下，我们一共有2^5种可能，第 1 种可能 对应的二进制为 `0 0 0 0 1`，第 5 种 对应的是 `0 1 0 0 1`.\n* 其次既是如何把对应位置的二进制转化成对应数组的索引位置，比如上例中 第 5 种可能 即为 5 转换的二进制：`0 1 0 0 1`，那么它对应的数据应该是数组种的 第二位和最后一位\n    * 算法中，通过 `(i >> j) % 2 == 1` 来确定 当前二进制位是否为 1，在此就不赘述了。\n\n```python\ndef powerSet(items):\n    N = len(items)\n    # enumerate the 2**N possible combinations\n    for i in range(2**N):\n        combo = []\n        for j in range(N):\n            # test bit jth of integer i\n            # test bit jth of integer i\n            # >>j. move the bit we want to check to the end\n            # %2. remove all the other bits execpt the last one\n            # check the one we kept if it is 1 not 0,\n            # which means we want to keep the item which on the position\n            # example:  0 1 1 0 1\n            # we want to check the third \"1\"\n            # first move the second bit to the end(>>j), will be \"0 0 0 1 1\"\n            # then remove all the other bits(%2), we got \"0 0 0 0 1\"\n            # compare it with 1, which is true, \n            # so we take the item with the position, which will be item[2]\n            if (i >> j) % 2 == 1:\n                combo.append(items[j])\n        yield combo\n```\n\n## 使用python官方文档提供的`combinations`:\n\n* 为了更好的理解这个算法，我把它单独拿了出来，并没有导入\n* 同上一个算法，这个也是遍历找得所有的索引，然后取出数组中对应的数据\n* 之前很努力的写了英文 不想翻译了，勉强看啦\n\n```python\nfrom itertools import chain\n\ndef powerset_generator(sets):\n    for subset in chain.from_iterable(combinations(sets, r) for r in range(len(sets)+1)):\n        yield subset\n        \n# the logic of this function is \n#   set a new array with length r\n#   loop the last element's index from i to i+n-r(n is the length of pool, r is the length of subsequence). \n#   when hit the maximum which should be n-1, increase the last-1 element's index.\n#   loop until the first element's index hit the maximum, \n#   then increase the previous index, and set the last index to previous index + 1, \n#   then back to the loop until all of the indices hit the maximum\n# For example: iterable = [1,2,3,4,5], r = 3\n#   (1, 2, 3)\n#   (1, 2, 4)\n#   (1, 2, 5) <-- the last index hit the maximum\n#   (1, 3, 4) <-- increase the previous index, and set every one after to previous index + 1,\n#   (1, 3, 5) \n#   (1, 4, 5) <-- the (last-1) index hit the maximum\n#   (2, 3, 4)\n#   (2, 3, 5)\n#   (2, 4, 5)\n#   (3, 4, 5) <-- the (last-2) index hit the maximum\ndef combinations(iterable, r):\n    \n    pool = tuple(iterable)\n    \n    n = len(pool)\n    \n    if r > n:\n        return\n    indices = list(range(r))\n \n    # In the \"while\" circle, we will start to change the indices by adding 1 consistently.\n    # So yield the first permutation before the while start.\n    yield tuple(pool[x] for x in indices)\n    \n    while True:\n    \n        # This 'for' loop is checking whether the index has hit the maximum from the last one to the first one.\n        # if it indices[i] >= its maximum, \n        #   set i = i-1, check the previous one\n        # if all of the indices has hit the maximum, \n        #   stop the `while` loop\n        for i in reversed(range(r)):\n            \n            # let's take an example to explain why using i + n - r\n            # pool indices: [0,1,2,3,4]\n            # subsequence indices: [0,1,2]\n            # so\n            #   indices[2] can be one of [2,3,4],\n            #   indices[1] can be one of [1,2,3],\n            #   indices[0] can be one of [0,1,2],\n            # and the gap of every index is n-r, like here is 5-3=2\n            # then\n            #   indices[2] < 2+2 = i+2 = i+n-r,\n            #   indices[1] < 1+2 = i+2 = i+n-r,\n            #   indices[0] < 0+2 = i+2 = i+n-r,\n            if indices[i] < i + n - r:\n                break\n        else:\n            # loop finished, return\n            return\n        \n        # Add one for current indices[i], \n        # (we already yield the first permutation before the loop)\n        indices[i] += 1\n        # this for loop increases every indices which is after indices[i].\n        # cause, current index has increased, and we need to confirm every one behind is initialized again.\n        # For example: current we got i = 2, indices[i]+1 will be 3, \n        # so the next loop should start with [1, 3, 4], not [1, 3, 3]\n        for j in range(i+1, r):\n            indices[j] = indices[j-1] + 1\n            \n        yield tuple(pool[x] for x in indices)  \n```\n\n## 源地址\n\n* [https://cs.ericyy.me/computational-thinking/lecture-2-powerset.html](https://cs.ericyy.me/computational-thinking/lecture-2-powerset.html)\n\n## 参考\n\n* [按位操作符（Bitwise operators）from MDN](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Bitwise_Operators)\n\n","source":"_posts/2017-03-11-powerset-algorithms.md","raw":"---\nlayout: post\ntitle: 排列组合算法[Python]\ncategory: 编程学习\ntags: [算法, 排列组合]\ndate: 2017-03-11\ndescription: 最新学到的排列组合算法\nkeywords: 排列组合, Python, 算法, powerset, Algorithms\n---\n\n# 两种排列组合算法\n\n* 一个是在Edx课上看到的，一个是Python的源码\n\n## 通过二进制中“1”所在位置的可能性来确定数组中的索引位置，进而求得所有排列组合\n\n* 首先确定组合的数量是2的N次方个，然后循环2^N， 每个数字即代表一种可能。\n    * 比如数组长度是5的情况下，我们一共有2^5种可能，第 1 种可能 对应的二进制为 `0 0 0 0 1`，第 5 种 对应的是 `0 1 0 0 1`.\n* 其次既是如何把对应位置的二进制转化成对应数组的索引位置，比如上例中 第 5 种可能 即为 5 转换的二进制：`0 1 0 0 1`，那么它对应的数据应该是数组种的 第二位和最后一位\n    * 算法中，通过 `(i >> j) % 2 == 1` 来确定 当前二进制位是否为 1，在此就不赘述了。\n\n```python\ndef powerSet(items):\n    N = len(items)\n    # enumerate the 2**N possible combinations\n    for i in range(2**N):\n        combo = []\n        for j in range(N):\n            # test bit jth of integer i\n            # test bit jth of integer i\n            # >>j. move the bit we want to check to the end\n            # %2. remove all the other bits execpt the last one\n            # check the one we kept if it is 1 not 0,\n            # which means we want to keep the item which on the position\n            # example:  0 1 1 0 1\n            # we want to check the third \"1\"\n            # first move the second bit to the end(>>j), will be \"0 0 0 1 1\"\n            # then remove all the other bits(%2), we got \"0 0 0 0 1\"\n            # compare it with 1, which is true, \n            # so we take the item with the position, which will be item[2]\n            if (i >> j) % 2 == 1:\n                combo.append(items[j])\n        yield combo\n```\n\n## 使用python官方文档提供的`combinations`:\n\n* 为了更好的理解这个算法，我把它单独拿了出来，并没有导入\n* 同上一个算法，这个也是遍历找得所有的索引，然后取出数组中对应的数据\n* 之前很努力的写了英文 不想翻译了，勉强看啦\n\n```python\nfrom itertools import chain\n\ndef powerset_generator(sets):\n    for subset in chain.from_iterable(combinations(sets, r) for r in range(len(sets)+1)):\n        yield subset\n        \n# the logic of this function is \n#   set a new array with length r\n#   loop the last element's index from i to i+n-r(n is the length of pool, r is the length of subsequence). \n#   when hit the maximum which should be n-1, increase the last-1 element's index.\n#   loop until the first element's index hit the maximum, \n#   then increase the previous index, and set the last index to previous index + 1, \n#   then back to the loop until all of the indices hit the maximum\n# For example: iterable = [1,2,3,4,5], r = 3\n#   (1, 2, 3)\n#   (1, 2, 4)\n#   (1, 2, 5) <-- the last index hit the maximum\n#   (1, 3, 4) <-- increase the previous index, and set every one after to previous index + 1,\n#   (1, 3, 5) \n#   (1, 4, 5) <-- the (last-1) index hit the maximum\n#   (2, 3, 4)\n#   (2, 3, 5)\n#   (2, 4, 5)\n#   (3, 4, 5) <-- the (last-2) index hit the maximum\ndef combinations(iterable, r):\n    \n    pool = tuple(iterable)\n    \n    n = len(pool)\n    \n    if r > n:\n        return\n    indices = list(range(r))\n \n    # In the \"while\" circle, we will start to change the indices by adding 1 consistently.\n    # So yield the first permutation before the while start.\n    yield tuple(pool[x] for x in indices)\n    \n    while True:\n    \n        # This 'for' loop is checking whether the index has hit the maximum from the last one to the first one.\n        # if it indices[i] >= its maximum, \n        #   set i = i-1, check the previous one\n        # if all of the indices has hit the maximum, \n        #   stop the `while` loop\n        for i in reversed(range(r)):\n            \n            # let's take an example to explain why using i + n - r\n            # pool indices: [0,1,2,3,4]\n            # subsequence indices: [0,1,2]\n            # so\n            #   indices[2] can be one of [2,3,4],\n            #   indices[1] can be one of [1,2,3],\n            #   indices[0] can be one of [0,1,2],\n            # and the gap of every index is n-r, like here is 5-3=2\n            # then\n            #   indices[2] < 2+2 = i+2 = i+n-r,\n            #   indices[1] < 1+2 = i+2 = i+n-r,\n            #   indices[0] < 0+2 = i+2 = i+n-r,\n            if indices[i] < i + n - r:\n                break\n        else:\n            # loop finished, return\n            return\n        \n        # Add one for current indices[i], \n        # (we already yield the first permutation before the loop)\n        indices[i] += 1\n        # this for loop increases every indices which is after indices[i].\n        # cause, current index has increased, and we need to confirm every one behind is initialized again.\n        # For example: current we got i = 2, indices[i]+1 will be 3, \n        # so the next loop should start with [1, 3, 4], not [1, 3, 3]\n        for j in range(i+1, r):\n            indices[j] = indices[j-1] + 1\n            \n        yield tuple(pool[x] for x in indices)  \n```\n\n## 源地址\n\n* [https://cs.ericyy.me/computational-thinking/lecture-2-powerset.html](https://cs.ericyy.me/computational-thinking/lecture-2-powerset.html)\n\n## 参考\n\n* [按位操作符（Bitwise operators）from MDN](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Bitwise_Operators)\n\n","slug":"2017-03-11-powerset-algorithms","published":1,"updated":"2022-02-12T20:53:10.506Z","comments":1,"photos":[],"link":"","_id":"ckzkc92xi0022oqox21899yc9","content":"<h1 id=\"两种排列组合算法\"><a href=\"#两种排列组合算法\" class=\"headerlink\" title=\"两种排列组合算法\"></a>两种排列组合算法</h1><ul>\n<li>一个是在Edx课上看到的，一个是Python的源码</li>\n</ul>\n<h2 id=\"通过二进制中“1”所在位置的可能性来确定数组中的索引位置，进而求得所有排列组合\"><a href=\"#通过二进制中“1”所在位置的可能性来确定数组中的索引位置，进而求得所有排列组合\" class=\"headerlink\" title=\"通过二进制中“1”所在位置的可能性来确定数组中的索引位置，进而求得所有排列组合\"></a>通过二进制中“1”所在位置的可能性来确定数组中的索引位置，进而求得所有排列组合</h2><ul>\n<li>首先确定组合的数量是2的N次方个，然后循环2^N， 每个数字即代表一种可能。<ul>\n<li>比如数组长度是5的情况下，我们一共有2^5种可能，第 1 种可能 对应的二进制为 <code>0 0 0 0 1</code>，第 5 种 对应的是 <code>0 1 0 0 1</code>.</li>\n</ul>\n</li>\n<li>其次既是如何把对应位置的二进制转化成对应数组的索引位置，比如上例中 第 5 种可能 即为 5 转换的二进制：<code>0 1 0 0 1</code>，那么它对应的数据应该是数组种的 第二位和最后一位<ul>\n<li>算法中，通过 <code>(i &gt;&gt; j) % 2 == 1</code> 来确定 当前二进制位是否为 1，在此就不赘述了。</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">powerSet</span>(<span class=\"params\">items</span>):</span><br><span class=\"line\">    N = <span class=\"built_in\">len</span>(items)</span><br><span class=\"line\">    <span class=\"comment\"># enumerate the 2**N possible combinations</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">2</span>**N):</span><br><span class=\"line\">        combo = []</span><br><span class=\"line\">        <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(N):</span><br><span class=\"line\">            <span class=\"comment\"># test bit jth of integer i</span></span><br><span class=\"line\">            <span class=\"comment\"># test bit jth of integer i</span></span><br><span class=\"line\">            <span class=\"comment\"># &gt;&gt;j. move the bit we want to check to the end</span></span><br><span class=\"line\">            <span class=\"comment\"># %2. remove all the other bits execpt the last one</span></span><br><span class=\"line\">            <span class=\"comment\"># check the one we kept if it is 1 not 0,</span></span><br><span class=\"line\">            <span class=\"comment\"># which means we want to keep the item which on the position</span></span><br><span class=\"line\">            <span class=\"comment\"># example:  0 1 1 0 1</span></span><br><span class=\"line\">            <span class=\"comment\"># we want to check the third &quot;1&quot;</span></span><br><span class=\"line\">            <span class=\"comment\"># first move the second bit to the end(&gt;&gt;j), will be &quot;0 0 0 1 1&quot;</span></span><br><span class=\"line\">            <span class=\"comment\"># then remove all the other bits(%2), we got &quot;0 0 0 0 1&quot;</span></span><br><span class=\"line\">            <span class=\"comment\"># compare it with 1, which is true, </span></span><br><span class=\"line\">            <span class=\"comment\"># so we take the item with the position, which will be item[2]</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (i &gt;&gt; j) % <span class=\"number\">2</span> == <span class=\"number\">1</span>:</span><br><span class=\"line\">                combo.append(items[j])</span><br><span class=\"line\">        <span class=\"keyword\">yield</span> combo</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"使用python官方文档提供的combinations\"><a href=\"#使用python官方文档提供的combinations\" class=\"headerlink\" title=\"使用python官方文档提供的combinations:\"></a>使用python官方文档提供的<code>combinations</code>:</h2><ul>\n<li>为了更好的理解这个算法，我把它单独拿了出来，并没有导入</li>\n<li>同上一个算法，这个也是遍历找得所有的索引，然后取出数组中对应的数据</li>\n<li>之前很努力的写了英文 不想翻译了，勉强看啦</li>\n</ul>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> itertools <span class=\"keyword\">import</span> chain</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">powerset_generator</span>(<span class=\"params\">sets</span>):</span><br><span class=\"line\">    <span class=\"keyword\">for</span> subset <span class=\"keyword\">in</span> chain.from_iterable(combinations(sets, r) <span class=\"keyword\">for</span> r <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"built_in\">len</span>(sets)+<span class=\"number\">1</span>)):</span><br><span class=\"line\">        <span class=\"keyword\">yield</span> subset</span><br><span class=\"line\">        </span><br><span class=\"line\"><span class=\"comment\"># the logic of this function is </span></span><br><span class=\"line\"><span class=\"comment\">#   set a new array with length r</span></span><br><span class=\"line\"><span class=\"comment\">#   loop the last element&#x27;s index from i to i+n-r(n is the length of pool, r is the length of subsequence). </span></span><br><span class=\"line\"><span class=\"comment\">#   when hit the maximum which should be n-1, increase the last-1 element&#x27;s index.</span></span><br><span class=\"line\"><span class=\"comment\">#   loop until the first element&#x27;s index hit the maximum, </span></span><br><span class=\"line\"><span class=\"comment\">#   then increase the previous index, and set the last index to previous index + 1, </span></span><br><span class=\"line\"><span class=\"comment\">#   then back to the loop until all of the indices hit the maximum</span></span><br><span class=\"line\"><span class=\"comment\"># For example: iterable = [1,2,3,4,5], r = 3</span></span><br><span class=\"line\"><span class=\"comment\">#   (1, 2, 3)</span></span><br><span class=\"line\"><span class=\"comment\">#   (1, 2, 4)</span></span><br><span class=\"line\"><span class=\"comment\">#   (1, 2, 5) &lt;-- the last index hit the maximum</span></span><br><span class=\"line\"><span class=\"comment\">#   (1, 3, 4) &lt;-- increase the previous index, and set every one after to previous index + 1,</span></span><br><span class=\"line\"><span class=\"comment\">#   (1, 3, 5) </span></span><br><span class=\"line\"><span class=\"comment\">#   (1, 4, 5) &lt;-- the (last-1) index hit the maximum</span></span><br><span class=\"line\"><span class=\"comment\">#   (2, 3, 4)</span></span><br><span class=\"line\"><span class=\"comment\">#   (2, 3, 5)</span></span><br><span class=\"line\"><span class=\"comment\">#   (2, 4, 5)</span></span><br><span class=\"line\"><span class=\"comment\">#   (3, 4, 5) &lt;-- the (last-2) index hit the maximum</span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">combinations</span>(<span class=\"params\">iterable, r</span>):</span><br><span class=\"line\">    </span><br><span class=\"line\">    pool = <span class=\"built_in\">tuple</span>(iterable)</span><br><span class=\"line\">    </span><br><span class=\"line\">    n = <span class=\"built_in\">len</span>(pool)</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">if</span> r &gt; n:</span><br><span class=\"line\">        <span class=\"keyword\">return</span></span><br><span class=\"line\">    indices = <span class=\"built_in\">list</span>(<span class=\"built_in\">range</span>(r))</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\"># In the &quot;while&quot; circle, we will start to change the indices by adding 1 consistently.</span></span><br><span class=\"line\">    <span class=\"comment\"># So yield the first permutation before the while start.</span></span><br><span class=\"line\">    <span class=\"keyword\">yield</span> <span class=\"built_in\">tuple</span>(pool[x] <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> indices)</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">while</span> <span class=\"literal\">True</span>:</span><br><span class=\"line\">    </span><br><span class=\"line\">        <span class=\"comment\"># This &#x27;for&#x27; loop is checking whether the index has hit the maximum from the last one to the first one.</span></span><br><span class=\"line\">        <span class=\"comment\"># if it indices[i] &gt;= its maximum, </span></span><br><span class=\"line\">        <span class=\"comment\">#   set i = i-1, check the previous one</span></span><br><span class=\"line\">        <span class=\"comment\"># if all of the indices has hit the maximum, </span></span><br><span class=\"line\">        <span class=\"comment\">#   stop the `while` loop</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">reversed</span>(<span class=\"built_in\">range</span>(r)):</span><br><span class=\"line\">            </span><br><span class=\"line\">            <span class=\"comment\"># let&#x27;s take an example to explain why using i + n - r</span></span><br><span class=\"line\">            <span class=\"comment\"># pool indices: [0,1,2,3,4]</span></span><br><span class=\"line\">            <span class=\"comment\"># subsequence indices: [0,1,2]</span></span><br><span class=\"line\">            <span class=\"comment\"># so</span></span><br><span class=\"line\">            <span class=\"comment\">#   indices[2] can be one of [2,3,4],</span></span><br><span class=\"line\">            <span class=\"comment\">#   indices[1] can be one of [1,2,3],</span></span><br><span class=\"line\">            <span class=\"comment\">#   indices[0] can be one of [0,1,2],</span></span><br><span class=\"line\">            <span class=\"comment\"># and the gap of every index is n-r, like here is 5-3=2</span></span><br><span class=\"line\">            <span class=\"comment\"># then</span></span><br><span class=\"line\">            <span class=\"comment\">#   indices[2] &lt; 2+2 = i+2 = i+n-r,</span></span><br><span class=\"line\">            <span class=\"comment\">#   indices[1] &lt; 1+2 = i+2 = i+n-r,</span></span><br><span class=\"line\">            <span class=\"comment\">#   indices[0] &lt; 0+2 = i+2 = i+n-r,</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> indices[i] &lt; i + n - r:</span><br><span class=\"line\">                <span class=\"keyword\">break</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            <span class=\"comment\"># loop finished, return</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span></span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\"># Add one for current indices[i], </span></span><br><span class=\"line\">        <span class=\"comment\"># (we already yield the first permutation before the loop)</span></span><br><span class=\"line\">        indices[i] += <span class=\"number\">1</span></span><br><span class=\"line\">        <span class=\"comment\"># this for loop increases every indices which is after indices[i].</span></span><br><span class=\"line\">        <span class=\"comment\"># cause, current index has increased, and we need to confirm every one behind is initialized again.</span></span><br><span class=\"line\">        <span class=\"comment\"># For example: current we got i = 2, indices[i]+1 will be 3, </span></span><br><span class=\"line\">        <span class=\"comment\"># so the next loop should start with [1, 3, 4], not [1, 3, 3]</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(i+<span class=\"number\">1</span>, r):</span><br><span class=\"line\">            indices[j] = indices[j-<span class=\"number\">1</span>] + <span class=\"number\">1</span></span><br><span class=\"line\">            </span><br><span class=\"line\">        <span class=\"keyword\">yield</span> <span class=\"built_in\">tuple</span>(pool[x] <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> indices)  </span><br></pre></td></tr></table></figure>\n\n<h2 id=\"源地址\"><a href=\"#源地址\" class=\"headerlink\" title=\"源地址\"></a>源地址</h2><ul>\n<li><a href=\"https://cs.ericyy.me/computational-thinking/lecture-2-powerset.html\">https://cs.ericyy.me/computational-thinking/lecture-2-powerset.html</a></li>\n</ul>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h2><ul>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Bitwise_Operators\">按位操作符（Bitwise operators）from MDN</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"两种排列组合算法\"><a href=\"#两种排列组合算法\" class=\"headerlink\" title=\"两种排列组合算法\"></a>两种排列组合算法</h1><ul>\n<li>一个是在Edx课上看到的，一个是Python的源码</li>\n</ul>\n<h2 id=\"通过二进制中“1”所在位置的可能性来确定数组中的索引位置，进而求得所有排列组合\"><a href=\"#通过二进制中“1”所在位置的可能性来确定数组中的索引位置，进而求得所有排列组合\" class=\"headerlink\" title=\"通过二进制中“1”所在位置的可能性来确定数组中的索引位置，进而求得所有排列组合\"></a>通过二进制中“1”所在位置的可能性来确定数组中的索引位置，进而求得所有排列组合</h2><ul>\n<li>首先确定组合的数量是2的N次方个，然后循环2^N， 每个数字即代表一种可能。<ul>\n<li>比如数组长度是5的情况下，我们一共有2^5种可能，第 1 种可能 对应的二进制为 <code>0 0 0 0 1</code>，第 5 种 对应的是 <code>0 1 0 0 1</code>.</li>\n</ul>\n</li>\n<li>其次既是如何把对应位置的二进制转化成对应数组的索引位置，比如上例中 第 5 种可能 即为 5 转换的二进制：<code>0 1 0 0 1</code>，那么它对应的数据应该是数组种的 第二位和最后一位<ul>\n<li>算法中，通过 <code>(i &gt;&gt; j) % 2 == 1</code> 来确定 当前二进制位是否为 1，在此就不赘述了。</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">powerSet</span>(<span class=\"params\">items</span>):</span><br><span class=\"line\">    N = <span class=\"built_in\">len</span>(items)</span><br><span class=\"line\">    <span class=\"comment\"># enumerate the 2**N possible combinations</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">2</span>**N):</span><br><span class=\"line\">        combo = []</span><br><span class=\"line\">        <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(N):</span><br><span class=\"line\">            <span class=\"comment\"># test bit jth of integer i</span></span><br><span class=\"line\">            <span class=\"comment\"># test bit jth of integer i</span></span><br><span class=\"line\">            <span class=\"comment\"># &gt;&gt;j. move the bit we want to check to the end</span></span><br><span class=\"line\">            <span class=\"comment\"># %2. remove all the other bits execpt the last one</span></span><br><span class=\"line\">            <span class=\"comment\"># check the one we kept if it is 1 not 0,</span></span><br><span class=\"line\">            <span class=\"comment\"># which means we want to keep the item which on the position</span></span><br><span class=\"line\">            <span class=\"comment\"># example:  0 1 1 0 1</span></span><br><span class=\"line\">            <span class=\"comment\"># we want to check the third &quot;1&quot;</span></span><br><span class=\"line\">            <span class=\"comment\"># first move the second bit to the end(&gt;&gt;j), will be &quot;0 0 0 1 1&quot;</span></span><br><span class=\"line\">            <span class=\"comment\"># then remove all the other bits(%2), we got &quot;0 0 0 0 1&quot;</span></span><br><span class=\"line\">            <span class=\"comment\"># compare it with 1, which is true, </span></span><br><span class=\"line\">            <span class=\"comment\"># so we take the item with the position, which will be item[2]</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (i &gt;&gt; j) % <span class=\"number\">2</span> == <span class=\"number\">1</span>:</span><br><span class=\"line\">                combo.append(items[j])</span><br><span class=\"line\">        <span class=\"keyword\">yield</span> combo</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"使用python官方文档提供的combinations\"><a href=\"#使用python官方文档提供的combinations\" class=\"headerlink\" title=\"使用python官方文档提供的combinations:\"></a>使用python官方文档提供的<code>combinations</code>:</h2><ul>\n<li>为了更好的理解这个算法，我把它单独拿了出来，并没有导入</li>\n<li>同上一个算法，这个也是遍历找得所有的索引，然后取出数组中对应的数据</li>\n<li>之前很努力的写了英文 不想翻译了，勉强看啦</li>\n</ul>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> itertools <span class=\"keyword\">import</span> chain</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">powerset_generator</span>(<span class=\"params\">sets</span>):</span><br><span class=\"line\">    <span class=\"keyword\">for</span> subset <span class=\"keyword\">in</span> chain.from_iterable(combinations(sets, r) <span class=\"keyword\">for</span> r <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"built_in\">len</span>(sets)+<span class=\"number\">1</span>)):</span><br><span class=\"line\">        <span class=\"keyword\">yield</span> subset</span><br><span class=\"line\">        </span><br><span class=\"line\"><span class=\"comment\"># the logic of this function is </span></span><br><span class=\"line\"><span class=\"comment\">#   set a new array with length r</span></span><br><span class=\"line\"><span class=\"comment\">#   loop the last element&#x27;s index from i to i+n-r(n is the length of pool, r is the length of subsequence). </span></span><br><span class=\"line\"><span class=\"comment\">#   when hit the maximum which should be n-1, increase the last-1 element&#x27;s index.</span></span><br><span class=\"line\"><span class=\"comment\">#   loop until the first element&#x27;s index hit the maximum, </span></span><br><span class=\"line\"><span class=\"comment\">#   then increase the previous index, and set the last index to previous index + 1, </span></span><br><span class=\"line\"><span class=\"comment\">#   then back to the loop until all of the indices hit the maximum</span></span><br><span class=\"line\"><span class=\"comment\"># For example: iterable = [1,2,3,4,5], r = 3</span></span><br><span class=\"line\"><span class=\"comment\">#   (1, 2, 3)</span></span><br><span class=\"line\"><span class=\"comment\">#   (1, 2, 4)</span></span><br><span class=\"line\"><span class=\"comment\">#   (1, 2, 5) &lt;-- the last index hit the maximum</span></span><br><span class=\"line\"><span class=\"comment\">#   (1, 3, 4) &lt;-- increase the previous index, and set every one after to previous index + 1,</span></span><br><span class=\"line\"><span class=\"comment\">#   (1, 3, 5) </span></span><br><span class=\"line\"><span class=\"comment\">#   (1, 4, 5) &lt;-- the (last-1) index hit the maximum</span></span><br><span class=\"line\"><span class=\"comment\">#   (2, 3, 4)</span></span><br><span class=\"line\"><span class=\"comment\">#   (2, 3, 5)</span></span><br><span class=\"line\"><span class=\"comment\">#   (2, 4, 5)</span></span><br><span class=\"line\"><span class=\"comment\">#   (3, 4, 5) &lt;-- the (last-2) index hit the maximum</span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">combinations</span>(<span class=\"params\">iterable, r</span>):</span><br><span class=\"line\">    </span><br><span class=\"line\">    pool = <span class=\"built_in\">tuple</span>(iterable)</span><br><span class=\"line\">    </span><br><span class=\"line\">    n = <span class=\"built_in\">len</span>(pool)</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">if</span> r &gt; n:</span><br><span class=\"line\">        <span class=\"keyword\">return</span></span><br><span class=\"line\">    indices = <span class=\"built_in\">list</span>(<span class=\"built_in\">range</span>(r))</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\"># In the &quot;while&quot; circle, we will start to change the indices by adding 1 consistently.</span></span><br><span class=\"line\">    <span class=\"comment\"># So yield the first permutation before the while start.</span></span><br><span class=\"line\">    <span class=\"keyword\">yield</span> <span class=\"built_in\">tuple</span>(pool[x] <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> indices)</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">while</span> <span class=\"literal\">True</span>:</span><br><span class=\"line\">    </span><br><span class=\"line\">        <span class=\"comment\"># This &#x27;for&#x27; loop is checking whether the index has hit the maximum from the last one to the first one.</span></span><br><span class=\"line\">        <span class=\"comment\"># if it indices[i] &gt;= its maximum, </span></span><br><span class=\"line\">        <span class=\"comment\">#   set i = i-1, check the previous one</span></span><br><span class=\"line\">        <span class=\"comment\"># if all of the indices has hit the maximum, </span></span><br><span class=\"line\">        <span class=\"comment\">#   stop the `while` loop</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">reversed</span>(<span class=\"built_in\">range</span>(r)):</span><br><span class=\"line\">            </span><br><span class=\"line\">            <span class=\"comment\"># let&#x27;s take an example to explain why using i + n - r</span></span><br><span class=\"line\">            <span class=\"comment\"># pool indices: [0,1,2,3,4]</span></span><br><span class=\"line\">            <span class=\"comment\"># subsequence indices: [0,1,2]</span></span><br><span class=\"line\">            <span class=\"comment\"># so</span></span><br><span class=\"line\">            <span class=\"comment\">#   indices[2] can be one of [2,3,4],</span></span><br><span class=\"line\">            <span class=\"comment\">#   indices[1] can be one of [1,2,3],</span></span><br><span class=\"line\">            <span class=\"comment\">#   indices[0] can be one of [0,1,2],</span></span><br><span class=\"line\">            <span class=\"comment\"># and the gap of every index is n-r, like here is 5-3=2</span></span><br><span class=\"line\">            <span class=\"comment\"># then</span></span><br><span class=\"line\">            <span class=\"comment\">#   indices[2] &lt; 2+2 = i+2 = i+n-r,</span></span><br><span class=\"line\">            <span class=\"comment\">#   indices[1] &lt; 1+2 = i+2 = i+n-r,</span></span><br><span class=\"line\">            <span class=\"comment\">#   indices[0] &lt; 0+2 = i+2 = i+n-r,</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> indices[i] &lt; i + n - r:</span><br><span class=\"line\">                <span class=\"keyword\">break</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            <span class=\"comment\"># loop finished, return</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span></span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\"># Add one for current indices[i], </span></span><br><span class=\"line\">        <span class=\"comment\"># (we already yield the first permutation before the loop)</span></span><br><span class=\"line\">        indices[i] += <span class=\"number\">1</span></span><br><span class=\"line\">        <span class=\"comment\"># this for loop increases every indices which is after indices[i].</span></span><br><span class=\"line\">        <span class=\"comment\"># cause, current index has increased, and we need to confirm every one behind is initialized again.</span></span><br><span class=\"line\">        <span class=\"comment\"># For example: current we got i = 2, indices[i]+1 will be 3, </span></span><br><span class=\"line\">        <span class=\"comment\"># so the next loop should start with [1, 3, 4], not [1, 3, 3]</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(i+<span class=\"number\">1</span>, r):</span><br><span class=\"line\">            indices[j] = indices[j-<span class=\"number\">1</span>] + <span class=\"number\">1</span></span><br><span class=\"line\">            </span><br><span class=\"line\">        <span class=\"keyword\">yield</span> <span class=\"built_in\">tuple</span>(pool[x] <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> indices)  </span><br></pre></td></tr></table></figure>\n\n<h2 id=\"源地址\"><a href=\"#源地址\" class=\"headerlink\" title=\"源地址\"></a>源地址</h2><ul>\n<li><a href=\"https://cs.ericyy.me/computational-thinking/lecture-2-powerset.html\">https://cs.ericyy.me/computational-thinking/lecture-2-powerset.html</a></li>\n</ul>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h2><ul>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Bitwise_Operators\">按位操作符（Bitwise operators）from MDN</a></li>\n</ul>\n"},{"layout":"post","title":"Notes of The School of Life","date":"2017-04-30T04:00:00.000Z","description":"在 YouTube 的 The School of Life channel 看到的，记下一些有趣的点。","keywords":"The School of Life, 读书","_content":"\n* 在 YouTube 的 The School of Life channel 看到的，记下一些有趣的点。\n\n## Philosophical Meditation\n\n* About twenty minutes every few days.\n* First: \n    * Accumulate a list of concerns you haven't looked at head on, but have glimpsed in the course of the day.\n* Three questions:\n    * what am i currently anxious about? all the detailed.\n    * what am i upset about and whom? like talk to a patient friend.\n        * what other explanations might there be for the hurt they have caused?\n        * if this has happened to a friend, how would you advise him?\n    * what am i currently excited and ambitious about?\n        * what would it be to change your life in the light like this?\n        * what might be missing in your life?\n        * if this thing could change your life, what changes might it advise?\n        * if other parts of your life were more like this, what might they be like?\n* Philosophical Meditation helps us by creating an occasion where we can identify our thoughts, and get them in some kind of order, and to know ourself properly.\n\n## How to be Confident\n\n* Take yourself as a fool, and start to make mistakes\n\n## Self-Esteem\n\n* The result of understanding our past and the dynamic shame, conditionality and humiliation that might lie there. \n* High-Esteem seems largely to be prize of psychology rather than the fruit of anything we might achieve out of the world in relation the economy.\n\n","source":"_posts/2017-04-30-the-school-of-life.md","raw":"---\nlayout: post\ntitle: Notes of The School of Life\ncategory: 生活随想\ntags: [The School of Life]\ndate: 2017-04-30\ndescription: 在 YouTube 的 The School of Life channel 看到的，记下一些有趣的点。\nkeywords: The School of Life, 读书\n---\n\n* 在 YouTube 的 The School of Life channel 看到的，记下一些有趣的点。\n\n## Philosophical Meditation\n\n* About twenty minutes every few days.\n* First: \n    * Accumulate a list of concerns you haven't looked at head on, but have glimpsed in the course of the day.\n* Three questions:\n    * what am i currently anxious about? all the detailed.\n    * what am i upset about and whom? like talk to a patient friend.\n        * what other explanations might there be for the hurt they have caused?\n        * if this has happened to a friend, how would you advise him?\n    * what am i currently excited and ambitious about?\n        * what would it be to change your life in the light like this?\n        * what might be missing in your life?\n        * if this thing could change your life, what changes might it advise?\n        * if other parts of your life were more like this, what might they be like?\n* Philosophical Meditation helps us by creating an occasion where we can identify our thoughts, and get them in some kind of order, and to know ourself properly.\n\n## How to be Confident\n\n* Take yourself as a fool, and start to make mistakes\n\n## Self-Esteem\n\n* The result of understanding our past and the dynamic shame, conditionality and humiliation that might lie there. \n* High-Esteem seems largely to be prize of psychology rather than the fruit of anything we might achieve out of the world in relation the economy.\n\n","slug":"2017-04-30-the-school-of-life","published":1,"updated":"2022-02-12T20:53:10.506Z","comments":1,"photos":[],"link":"","_id":"ckzkc92xj0024oqoxc4cadyko","content":"<ul>\n<li>在 YouTube 的 The School of Life channel 看到的，记下一些有趣的点。</li>\n</ul>\n<h2 id=\"Philosophical-Meditation\"><a href=\"#Philosophical-Meditation\" class=\"headerlink\" title=\"Philosophical Meditation\"></a>Philosophical Meditation</h2><ul>\n<li>About twenty minutes every few days.</li>\n<li>First: <ul>\n<li>Accumulate a list of concerns you haven’t looked at head on, but have glimpsed in the course of the day.</li>\n</ul>\n</li>\n<li>Three questions:<ul>\n<li>what am i currently anxious about? all the detailed.</li>\n<li>what am i upset about and whom? like talk to a patient friend.<ul>\n<li>what other explanations might there be for the hurt they have caused?</li>\n<li>if this has happened to a friend, how would you advise him?</li>\n</ul>\n</li>\n<li>what am i currently excited and ambitious about?<ul>\n<li>what would it be to change your life in the light like this?</li>\n<li>what might be missing in your life?</li>\n<li>if this thing could change your life, what changes might it advise?</li>\n<li>if other parts of your life were more like this, what might they be like?</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Philosophical Meditation helps us by creating an occasion where we can identify our thoughts, and get them in some kind of order, and to know ourself properly.</li>\n</ul>\n<h2 id=\"How-to-be-Confident\"><a href=\"#How-to-be-Confident\" class=\"headerlink\" title=\"How to be Confident\"></a>How to be Confident</h2><ul>\n<li>Take yourself as a fool, and start to make mistakes</li>\n</ul>\n<h2 id=\"Self-Esteem\"><a href=\"#Self-Esteem\" class=\"headerlink\" title=\"Self-Esteem\"></a>Self-Esteem</h2><ul>\n<li>The result of understanding our past and the dynamic shame, conditionality and humiliation that might lie there. </li>\n<li>High-Esteem seems largely to be prize of psychology rather than the fruit of anything we might achieve out of the world in relation the economy.</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<ul>\n<li>在 YouTube 的 The School of Life channel 看到的，记下一些有趣的点。</li>\n</ul>\n<h2 id=\"Philosophical-Meditation\"><a href=\"#Philosophical-Meditation\" class=\"headerlink\" title=\"Philosophical Meditation\"></a>Philosophical Meditation</h2><ul>\n<li>About twenty minutes every few days.</li>\n<li>First: <ul>\n<li>Accumulate a list of concerns you haven’t looked at head on, but have glimpsed in the course of the day.</li>\n</ul>\n</li>\n<li>Three questions:<ul>\n<li>what am i currently anxious about? all the detailed.</li>\n<li>what am i upset about and whom? like talk to a patient friend.<ul>\n<li>what other explanations might there be for the hurt they have caused?</li>\n<li>if this has happened to a friend, how would you advise him?</li>\n</ul>\n</li>\n<li>what am i currently excited and ambitious about?<ul>\n<li>what would it be to change your life in the light like this?</li>\n<li>what might be missing in your life?</li>\n<li>if this thing could change your life, what changes might it advise?</li>\n<li>if other parts of your life were more like this, what might they be like?</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Philosophical Meditation helps us by creating an occasion where we can identify our thoughts, and get them in some kind of order, and to know ourself properly.</li>\n</ul>\n<h2 id=\"How-to-be-Confident\"><a href=\"#How-to-be-Confident\" class=\"headerlink\" title=\"How to be Confident\"></a>How to be Confident</h2><ul>\n<li>Take yourself as a fool, and start to make mistakes</li>\n</ul>\n<h2 id=\"Self-Esteem\"><a href=\"#Self-Esteem\" class=\"headerlink\" title=\"Self-Esteem\"></a>Self-Esteem</h2><ul>\n<li>The result of understanding our past and the dynamic shame, conditionality and humiliation that might lie there. </li>\n<li>High-Esteem seems largely to be prize of psychology rather than the fruit of anything we might achieve out of the world in relation the economy.</li>\n</ul>\n"},{"layout":"post","title":"浙江大学公开课：王阳明心学[董平] 笔记","date":"2017-09-10T04:00:00.000Z","description":"心即理：阳明心学的逻辑起点，知行合一：阳明心学的实践品格 格物致知：知识论域的实践转向 本体与主体性的自我建立 本心的自我开显与自我表达 心外无物：生命境界的无限圆融 天泉证道“四句教”阳明学派的分化 心体的自我澄明与价值实现","keywords":"王阳明, 心学, 心即理, 知行合一, 格物致知","_content":"\n## 第二课 心即理：阳明心学的逻辑起点\n\n* 宋代理学的发生\n    * 陆九渊(象山)提出\n    * 最早可追溯到唐朝韩愈，他提出了道统问题\n        * 佛教过度繁荣使他感到本土文化忧虑\n        * 提出 焚其书 庐其居 人其人\n    * 到了宋朝，北宋五子耗费大量时间研究并领会了佛教和道教的精髓后，对先秦的思想进行了重新构建\n        * 理学 可以说是对儒家思想的重新构建\n        * 突出了很多原本在儒家思想中不突出的观点\n            * 比如对人性的探讨\n        * 理学 借鉴了一些佛教和道教的思想\n            * 比如 静坐 -> 打坐\n    * 南宋(朱熹 乾淳之际)\n        * 理学 思想基本形成\n* 理学的三个基本思想形态\n    * 朱熹一派 主要来自于程颐的思想\n        * 理 是思想的最高范畴\n            * 一本之理\n                * 最根本的是 对理要有终极体认，才能优入圣域\n        * 理 是可以达到的目的\n    * 陆象山\n        * 心即理\n            * 圣人之学 心学也\n    * 浙东学派 吕祖谦 陈亮\n        * 理 在人类的日常生活当中 在历史中\n        * 把道的追寻贯彻到人类的生活当中\n* 朱陆之争\n    * 他们的争论是对最高实在本身存在性的终极预设发生了歧义 \n* 阳明对陆学的基本观点\n    * 大段也是 只是粗了\n    * 并没有很细致的论述\n* “心即理”在阳明心学结构中的地位和作用\n    * 在龙场的艰难困苦生活中 他提出 如果圣人处在这种环境下 圣人会怎么做\n    * **圣人之道 吾性具足** \n    * 思想境界的升华 意味着世界的改变 \n    * 人在社会中生活，行为是受我们的思想和观念主导 观点改变 感觉也就改变了\n    * 龙场悟道最重要一点就是对“心即理”的体悟\n    * “本心” 心之本体 是我们的意识 我们的精神 主宰身体的视听言动\n    * 让心回到它本身的主宰地位 我们的行为就会按照它原本的样子呈现 我们的境界自然高尚\n    * **心之本体 就是至善**\n    * 宇宙的最高真理与我们的本心是纯然一致的 所以人要大其心\n    * 唯有明白了自身的本质和天道原本是一致的 人的本质原本就是天道在人这个层面的实在状态 这叫做本质上的天人合一\n    * 要成为圣人 最重要的是开显本心 使我们的原本与最高之理相符合的本心 以它原本的样子显现出来 一旦达到那个境界 既是人道和天道的最高实现\n    * 所以要**去私欲 心明既是理明** 既是道明 如镜子般 如实地去反映事物 那就是圣人事业的现实开括\n* 总结\n    * 本质上 人的本质和天道的本质是同一的 这就为人道(人的现实生活)转进于圣人境界造成了理论前提\n\n## 第三课 知行合一：阳明心学的实践品格 \n\n* “知” 、“行” 关系问题\n    * 《尚书·说命》：知之非艰 行之惟艰\n    * 孔子《论语》：\n        * 学而时习之不亦乐乎\n        * 不知而行之者 吾无是业： 知是重要行的重要前提\n        * 吾欲托之空言 不如见之行事之深切著明也：实践才是把只是呈现出来 转换价值的根本途径\n    * 《大学》：\n        * 未有学养子而后嫁者也： 亲子之爱是天生的 对子女的慈爱是自然流露的\n    * 佛教 天台宗：\n        * 止观双修 定慧均等修止观\n        * 四明知礼（北宋）：智为行本则行借智生 行能成智则智借行成\n    * 朱熹：\n        * 知行长相须（依附） 强调知与行的并列关系\n        * 知之俞明则行之俞笃 行之俞笃则知之俞明\n    * 吕祖谦：\n        * 致知力行不是两截\n        * 禅宗：磨镜所以明镜\n* “知行合一”的思想渊源\n    * 朱熹：真知必能行\n    * 王阳明：真知既是行：合二为一\n* “知行合一”的具体观点（知就是行 行就是知）\n    * 两个层面\n        * 知识层面\n            * 在事物当中获得知识\n            * 如何了解？\n                * 比如 孝敬父母。知道如何做 然后做是获得知识的过程 也是表达知识的过程\n                * **知和行是同一个完整的过程**\n                    * 知是行的起点 行是知的完成\n                    * 知识的最后形态 是生活的实践\n                * （个人注记：突然想到业内的 talk is cheap, show me the code)\n                    * 比如数学是机器学习的基础 但实践要在学理论的同时进行 而不是数学学完后就行\n            * 一念发动处便既是行了\n                * 意识的流动本身就是行\n        * 良知学说层面\n            * 王阳明经常从 知->良知 的层面上讲\n            * 良知的自知 自己对自己的领悟\n            * 表达自知 通过行来表达\n    * **知之真切笃实处既是行 行之明觉精察处既是知 知行功夫本不可离**\n        * 当对知的了解层度达到真切笃实处便是行 把知作为一个过程\n        * 当行为达到明觉精察 一定是真实只是的直接表达\n* 对所谓明阳“以知代行”说的批评\n    * 王阳明强调知识的过程必定是通过一个实践的过程体现的\n    * 最终的实践才是知识价值获得实现的最后境界\n\n## 第四课 格物致知：知识论域的实践转向\n\n* “格物致知”问题的来源\n    * 来源于《大学》\n        * 三纲：大学之道 在明明德 在亲民 在止于至善\n        * 八条目： 格物 致知 诚意 正心 修身 齐家 治国 平天下\n        * 起点是：格物 致知\n* 朱熹对“格物致知”的理解\n    * 接着二程夫子来讲\n        * 天下任何事物，宏观地看，有天理在 最高的一本之道\n        * 任何事物有它的独特之理 分殊之理\n        * 分殊之理是从一本之理中获得\n        * 一本之理作为大一是完满的 分殊之理为小一也是完满的\n        * 分殊之理的不断地“格”、还原 达到一定状态 才可能获得一本之理把握的前提\n    * 强调 格物致知是还原具体事物之理 既物而穷理\n    * 格物是致知的前提\n    * 理存在于具体事务当中\n* 王阳明的“格物致知”之说\n    * 如果理在事物当中 那与我的诚意正心有何关系？\n    * 物着事也 格者正也\n        * 格君心之非 -> 正君心之非\n        * “物” 作为一个独立的个体存在\n        * “事” 体现了一个过程 与我这个主题相关\n    * 事物之理不在事物本身 在心中\n    * 强调 我作为实践的主题 如何在事物当中正其心\n        * “正” 标准， 是否合乎本心\n            * 合乎本心 既是 合乎正理\n    * 强调 格物和致知是统一的整体\n    * 致知： 致良知\n        * 格物既是正心\n        * 格物致知：致吾心之良知于事事物物 事事物物各得齐正\n    * 意之所在便是物 意在于事亲则事亲为一物\n\n## 第五课 本体与主体性的自我建立\t\n\n* 孟子的“良知良能”\n    * 人不学而能谓之良能 不学而知着谓之良知\n        * 凡人皆有恻隐、羞恶、是非、辞让之心 是不学而知的 是我原本就固有的\n        * 恻隐之心 作为人之端 在人本身存在着固有性\n* 张载对“德性”、“闻见”之知的区别\n    * 德性之知不源于见闻 \n        * 德行：天德良知 超经验的\n        * 但是德性之知是要通过经验表达的\n* 王阳明的“良知”说\n    * 正德十五年 平定朱宸濠之后结合自己的生活经验提出\n    * 与前两位不近相同\n    * 良知： 心之本体（存在本体、德行本体、理性本体）\n        * 是生活中经验知识活动之所以可能的根据\n        * 是知识本身的本体 是理性的根据\n        * 原本就能知是非 是心体自然\n        * 原本就是至善 知善恶的 是德行之本\n        * 天命之所谓性\n    * 正是因为良知的存在 我们才具备存在和德行的本质，以及获得和展现知识的能力\n    * 心的良知是人作为主体的本质依据\n        * 唯有实现了自我建立的人才能称为主体\n        * 通过个体内在的自觉 在自我中建立起来\n    * 良知是为人之本\n    * 人的存在的本质 就是他的德行本质\n        * 生活中 人是如何表达自己？ \n            * 道德实践才能彰显个体的存在\n        * 道德的内在自觉\n            * 因为合乎本性的 所以才去做\n    * 每个个体存在性的表达 是要通过自觉的道德的建立来实现的\n        * 如此 个体的存在 才不仅仅是自然本身状态的 同时是合乎天道的\n* 存在本体、德行本体、理性本体\n    * 理性本源 是一切只是活动之所以可能的根据 是经验生活中是非判断的根据\n        * 是非 不仅仅是对错之分 还有善恶之分\n        * 泯灭良知 是指 良知没有获得表达和体现 在表现的层面上讲 泯灭良知\n    * 德行本源 是道德所以存在的依据\n    * 存在本源 是人的存在本质和最高的天道本质实现同一 并且这种同一性是作为本源的\n\n## 第六课 本心的自我开显与自我表达\n\n* 致良知的现实必要性 阳明对生命现状的忧虑\n    * 人们在利益的追逐当中丧失自我 遮蔽了自我的良知 所以要致良知\n    * 孟子： 求放心 放逸之心\n    * 安身立命的基础\n    * 对与人道相违背的生活现象的反思和批评\n* 致良知的双向展开\n    * 良知的“自知”、“自明”\n        * 呼唤自己的良知 良知才会以原本的状态出现\n        * **反思** 对自我在生活中的观点、意识、行为进行思索、内省\n        * 只有经过自我反思 我们的**主体性才得以建立**\n        * 用王阳明的话来讲 合乎良知叫”诚意“ 也既是”正心“\n        * ”自知“、”自明“ 才能表达自我的主体性建立 必须通过自我实现\n        * 如何对经验现象的实行确切无误的判断\n            * 有境才有心动 心动才会有善恶是非\n            * 动念之际去为善去恶\n    * “致吾心之良知于事事物物”\n        * 良知的自我展开 在事物的处理过程表现出来\n        * 明明德于天下\n        * 任何事物都应该在良知下进行 物得其正 我们存在性的自我表达\n        * 身 心 意 知 物 融为一体\n        * 人只有实践才能把主体的内在世界和客观世界连在一起\n* 致良知于个体意义世界的宏观构建\n    * 对于物质的欲望 本能的具有扩张性 它具有向恶的转化的可能 欲本身即是越界\n    * 孔子讲以礼来节制自我的情感\n        * 这种节制在道德上是好的 更符合公共生活\n        * 良知的恰当表达是具有公共性的\n    * 在自我与他人的事物观察中 人们更多的是用私欲的权衡 而非对他人客观 对自己混沌\n        * 良知首先是在自我中呈现 随之才能对其他事物有正确的理解\n\n## 第七课 心外无物：生命境界的无限圆融\n\n* “心”与“物”的关系\n    * “物”是“事”，“事”是介入了主体活动过程的\n    * 事物的两种存在状态： **“寂”与“显”\n**        \n        * 山中之花自开自落 没看到花的时候 你和花同归于“寂”，当你看到时是“显”\n        * **“寂“并非无，而是事物存在的一种状态**\n            * 是王阳明确认的事物的客观存在性\n        * **”显“ 当你看到花时 在你心中 一时分明起来**\n            * **看到 是”寂“到”显“的转换**\n    * 心的本体的存在 原本是”寂“、是不动的，但却包含着向”显“转换的无限可能，反之亦然 这叫做”寂感神应“ 没前后之分\n    * 看到花时 它由静转化为动，成为主题的对象，关系情景构成\n        * 体用一源 现为无间 无前无后无中间\n        * 任何事物的客观存在状态 只有在特定的情景中 客观物才以它原本的样式显现\n    * 任何客观物 当它以一种纯粹的客观存在时 包含”寂“和”显“两种状态 只不过呈现给主题的状态不同\n    * **王阳明的讨论并不涉及 事物是否可以脱离人的主观意识而存在 也就是并不涉及唯心主义讨论的问题**\n* “心外无物”作为一种生命境界\n    * 心不在焉 -> 听而不闻 视而不见 食而不知其味\n    * “关心”\n        * 一个事物在成为我的对象之前 它的存在跟我是不“关心”的 它的存在对我是无意义的\n        * 王阳明讲的一个真正的仁人是与天下事相关心的 是把世界万物容纳到个人的主体当中\n    * 致良知 通过主体的生活、道德实践 尽可能扩展我们的心灵世界 使一切万物都能够到达、进入的我的主体世界 如此我的心便是和天下万物相关 最后的圆融境界叫“无心外之物”\n    * 做不到 可以**心向往之**\n    * “心外无物” 是仁人的境界\n        * 把“物”作为个人主体的一部分\n* “心外无物”与主题价值世界的构建\n    * 个人主体世界的构建完全取决于我们主体自我的实践及其方式\n    * 个人要尽可能扩充、表达我们的良知 努力进行生活实践 并将实践纳入个人的主体世界\n        * 我们的意义世界 便是在实践当中不断的建立和扩张\n            * 主体的世界和客观世界不断的链接起来后 个人的主体世界也越来越宏达\n    * “心外无物”是生命的最高境界，是人生自我价值不断扩展和实现\n* （个人注记：你的主体世界便是你人生的价值。想到了精致的利己主义。利己没有什么错误，但致良知能够极大的丰富我们的主体世界，无论是从哪个角度的丰富，都会让其更加丰富多彩。即便我们的人生价值是丰富自己的体验或者收获更多的物质，那么致良知也是对其有很大的帮助的。比如丰富了对看待事物的视角，体验自然也就丰富了。如此来讲即便只谈利己也不必排斥“心外无物”。心向往之，实践前行。）\n\n## 第八课 天泉证道“四句教”阳明学派的分化\n\n* “天泉证道”的背景 “四句教”问题\n    * “四句教” 仅出现在《传习录》下卷和年谱中 未出现在王阳明自己的作品中\n        * 无善无恶心之本\n        * 有善有恶意之动\n        * 知善知恶是良知\n        * 为善去恶是格物\n    * 弟子钱德洪和王畿是在天泉桥向王阳明请教这四句话的意思的 所以叫做“天泉证道”\n* 钱德洪关于“四句教”的理解\n    * 认为是王门宗旨 是究竟之说\n    * 良知原本是无善无恶的 对圣人如此 但普通人不免有习心在 不免有私欲 所以 意之动就会有善有恶 于是要求我们在一念发动之动给克制住\n    * 是非善恶良知本是知道的 所以要为善去恶\n* 王畿(jī)（龙溪）关于“四句教”的理解\n    * 认为是权宜之说\n    * 认为\n        * 无心之心则藏秘\n        * 无意之意则应圆\n        * 无知之知则体寂\n        * 无物之物则用神\n    * 认为 心如果是无善无恶的 那么 意、知、物都应该是无善无恶的 不可能突然冒出来有善有恶的意\n* “四句教”与王学分化的关系\n    * “天泉证道”，王阳明认为 人非利根和钝根之人\n        * 利根之人 聪慧 一点就透\n            * 一悟本体既是工夫\n            * 便是王畿所讲\n            * 但此般根基之人很少\n        * 钝根之人 愚笨 需要慢慢学慢慢习\n            * 对于普通人还是要讲为善去恶\n            * 钱德洪之说\n    * 黄宗羲对王钱二人的评价\n        * 因其二人而风行 也因此二人而渐失其传\n* “四句教”的具体分析\n    * 无善无恶心之本\n        * 无善无恶是为至善 \n        * 讲的是本心自身的实在的状态 是未发之中 是无法判断的\n            * 因为善恶是基于经验世界检验价值的相对判断\n            * 而**至善是超经验的 是绝对的价值原点 由此才能对事物进行判断**\n                * 比如称用于权衡他物 眼睛是无色的才可以分辨颜色 镜子本无一物才能照出来事物本身\n    * 有善有恶意之动\n        * 意 是心之动的主动状态 是有境，有原因的\n            * 所以是一种经验状态\n            * 没有对物、境构成关系之前 本体归于本相之寂\n            * 所以它一定会落于某个方面 才有善恶之分\n            * 价值只能在经验的世界当中显现它自己\n        * 心之动合理的方面是讲 心之动是合乎本体 是合乎心本来状态的 所以这样的一动 在价值上会落于善的方面\n    * 知善知恶是良知\n        * 良知本身是自知自明 知善知恶的 心体向经验转换时 它是可以判断善恶的\n    * 为善去恶是格物\n        * 当良知判断出事物的善恶之后 人应该朝着善的方向去做\n        * 而这个过程便是 诚意正心\n\n## 第九课 心体的自我澄明与价值实现\n\n* 四句教是否存在内在“逻辑”关系\n    * 不存在内在逻辑关系\n    * 就四个不同层面来讲的\n* “良知现成”与思相解放\n    * 王龙溪一派虽偏离了王阳明的思想 但是却带来了思想了解放\n    * 正因为人人都诉诸自己的良知 任何事物在经由良知的审慎之前都是值得怀疑的 所以它要求我们对生活进行审查 我们的价值也在这个过程中建立\n    * 未经理性审查的生活是不值得过的 -- 苏格拉底\n    * 但是当我们过度强调良知的审查 就会变成自我的率性而为 陷入以意见为真理的谬误的状态\n* 本体与工夫的关系\n    * 良知是心之本体 如何显现？ 如何到达？\n    * 工夫 相当于方法论\n        * 钱德洪：为善去恶既是工夫 在事上磨炼\n            * 工夫总是相对于本体而言 并且总是相对于本体的开显而言的\n        * 王龙溪：工夫是需要的 但不需要为善去恶 不需要在事上磨炼\n            * 当下悟出无山无恶心之本 即本体工夫\n            * 如果你真正明白这个道理 不需要那么复杂 良知现成\n            * 现成既是本体也是工夫\n            * 良知本顺 致之则逆 不需要致良知\n    * 王阳明还是非常强调事情的磨炼的\n* 董平老师的观点\n    * 良知作为价值原点 是超经验的 在生活中的表达是有可能发生问题的\n    * 心之动发为意 是有善有恶的\n    * 生活中充满各种欲望 我们往往容易偏离自我的心灵指导\n    * 所以反思是很重要的\n    * 人需要了解到自我的良知是浩渺的可以容纳世间万物 可以判断世间一切美丑善恶 这样我们才能在天地间堂堂正正的做人\n    * 王阳明遗言：此心光明 亦复何言\n        * 领会到这点 我们就能对生活稍微超然疏离一点 这样的行为能让我们的精神世界高尚一点\n        * 这种超然和疏离是对欲望的疏离 对利益的看淡 使我们变得高尚\n        * 使我们变得高尚的 不是我们的本能 是我们的德行、良知\n        * 一个懂得致良知的人才会享有崇高的思想境界\n    * 客观事物是脱离自我存在的 但只有进入我的世界 才会对我有意义\n\n## 我的理解\n\n* 心学里的良知和禅学里边讲到的对绝对价值的追求很相似。\n    * 林木大拙讲到禅是超越逻辑的。相对来讲，心学的良知学也是超经验范畴的，讲的也是绝对价值。\n    * 另一方面，禅讲的平常心也对应的“为善去恶”的观念在里边。\n* 而“知行合一”和禅学也都一直在强调思维的一贯性。\n\n## 注记：\n\n* 以上皆为董平老师的观点 由于他提到“这是我个人的观点”的次数太多，我基本全给省略了。所以作为对阳明心学的一个思考角度来看。在今后读过《传习录》、《大学问》等王阳明的著作之后对比来看更有收获。\n* 课程地址: [http://open.163.com/special/cuvocw/wangyangming.html](http://open.163.com/special/cuvocw/wangyangming.html)\n\n\n","source":"_posts/2017-09-10-wang-yangming.md","raw":"---\nlayout: post\ntitle: 浙江大学公开课：王阳明心学[董平] 笔记\ncategory: 阅读笔记\ntags: [笔记]\ndate: 2017-09-10\ndescription: 心即理：阳明心学的逻辑起点，知行合一：阳明心学的实践品格 格物致知：知识论域的实践转向 本体与主体性的自我建立 本心的自我开显与自我表达 心外无物：生命境界的无限圆融 天泉证道“四句教”阳明学派的分化 心体的自我澄明与价值实现\nkeywords: 王阳明, 心学, 心即理, 知行合一, 格物致知\n---\n\n## 第二课 心即理：阳明心学的逻辑起点\n\n* 宋代理学的发生\n    * 陆九渊(象山)提出\n    * 最早可追溯到唐朝韩愈，他提出了道统问题\n        * 佛教过度繁荣使他感到本土文化忧虑\n        * 提出 焚其书 庐其居 人其人\n    * 到了宋朝，北宋五子耗费大量时间研究并领会了佛教和道教的精髓后，对先秦的思想进行了重新构建\n        * 理学 可以说是对儒家思想的重新构建\n        * 突出了很多原本在儒家思想中不突出的观点\n            * 比如对人性的探讨\n        * 理学 借鉴了一些佛教和道教的思想\n            * 比如 静坐 -> 打坐\n    * 南宋(朱熹 乾淳之际)\n        * 理学 思想基本形成\n* 理学的三个基本思想形态\n    * 朱熹一派 主要来自于程颐的思想\n        * 理 是思想的最高范畴\n            * 一本之理\n                * 最根本的是 对理要有终极体认，才能优入圣域\n        * 理 是可以达到的目的\n    * 陆象山\n        * 心即理\n            * 圣人之学 心学也\n    * 浙东学派 吕祖谦 陈亮\n        * 理 在人类的日常生活当中 在历史中\n        * 把道的追寻贯彻到人类的生活当中\n* 朱陆之争\n    * 他们的争论是对最高实在本身存在性的终极预设发生了歧义 \n* 阳明对陆学的基本观点\n    * 大段也是 只是粗了\n    * 并没有很细致的论述\n* “心即理”在阳明心学结构中的地位和作用\n    * 在龙场的艰难困苦生活中 他提出 如果圣人处在这种环境下 圣人会怎么做\n    * **圣人之道 吾性具足** \n    * 思想境界的升华 意味着世界的改变 \n    * 人在社会中生活，行为是受我们的思想和观念主导 观点改变 感觉也就改变了\n    * 龙场悟道最重要一点就是对“心即理”的体悟\n    * “本心” 心之本体 是我们的意识 我们的精神 主宰身体的视听言动\n    * 让心回到它本身的主宰地位 我们的行为就会按照它原本的样子呈现 我们的境界自然高尚\n    * **心之本体 就是至善**\n    * 宇宙的最高真理与我们的本心是纯然一致的 所以人要大其心\n    * 唯有明白了自身的本质和天道原本是一致的 人的本质原本就是天道在人这个层面的实在状态 这叫做本质上的天人合一\n    * 要成为圣人 最重要的是开显本心 使我们的原本与最高之理相符合的本心 以它原本的样子显现出来 一旦达到那个境界 既是人道和天道的最高实现\n    * 所以要**去私欲 心明既是理明** 既是道明 如镜子般 如实地去反映事物 那就是圣人事业的现实开括\n* 总结\n    * 本质上 人的本质和天道的本质是同一的 这就为人道(人的现实生活)转进于圣人境界造成了理论前提\n\n## 第三课 知行合一：阳明心学的实践品格 \n\n* “知” 、“行” 关系问题\n    * 《尚书·说命》：知之非艰 行之惟艰\n    * 孔子《论语》：\n        * 学而时习之不亦乐乎\n        * 不知而行之者 吾无是业： 知是重要行的重要前提\n        * 吾欲托之空言 不如见之行事之深切著明也：实践才是把只是呈现出来 转换价值的根本途径\n    * 《大学》：\n        * 未有学养子而后嫁者也： 亲子之爱是天生的 对子女的慈爱是自然流露的\n    * 佛教 天台宗：\n        * 止观双修 定慧均等修止观\n        * 四明知礼（北宋）：智为行本则行借智生 行能成智则智借行成\n    * 朱熹：\n        * 知行长相须（依附） 强调知与行的并列关系\n        * 知之俞明则行之俞笃 行之俞笃则知之俞明\n    * 吕祖谦：\n        * 致知力行不是两截\n        * 禅宗：磨镜所以明镜\n* “知行合一”的思想渊源\n    * 朱熹：真知必能行\n    * 王阳明：真知既是行：合二为一\n* “知行合一”的具体观点（知就是行 行就是知）\n    * 两个层面\n        * 知识层面\n            * 在事物当中获得知识\n            * 如何了解？\n                * 比如 孝敬父母。知道如何做 然后做是获得知识的过程 也是表达知识的过程\n                * **知和行是同一个完整的过程**\n                    * 知是行的起点 行是知的完成\n                    * 知识的最后形态 是生活的实践\n                * （个人注记：突然想到业内的 talk is cheap, show me the code)\n                    * 比如数学是机器学习的基础 但实践要在学理论的同时进行 而不是数学学完后就行\n            * 一念发动处便既是行了\n                * 意识的流动本身就是行\n        * 良知学说层面\n            * 王阳明经常从 知->良知 的层面上讲\n            * 良知的自知 自己对自己的领悟\n            * 表达自知 通过行来表达\n    * **知之真切笃实处既是行 行之明觉精察处既是知 知行功夫本不可离**\n        * 当对知的了解层度达到真切笃实处便是行 把知作为一个过程\n        * 当行为达到明觉精察 一定是真实只是的直接表达\n* 对所谓明阳“以知代行”说的批评\n    * 王阳明强调知识的过程必定是通过一个实践的过程体现的\n    * 最终的实践才是知识价值获得实现的最后境界\n\n## 第四课 格物致知：知识论域的实践转向\n\n* “格物致知”问题的来源\n    * 来源于《大学》\n        * 三纲：大学之道 在明明德 在亲民 在止于至善\n        * 八条目： 格物 致知 诚意 正心 修身 齐家 治国 平天下\n        * 起点是：格物 致知\n* 朱熹对“格物致知”的理解\n    * 接着二程夫子来讲\n        * 天下任何事物，宏观地看，有天理在 最高的一本之道\n        * 任何事物有它的独特之理 分殊之理\n        * 分殊之理是从一本之理中获得\n        * 一本之理作为大一是完满的 分殊之理为小一也是完满的\n        * 分殊之理的不断地“格”、还原 达到一定状态 才可能获得一本之理把握的前提\n    * 强调 格物致知是还原具体事物之理 既物而穷理\n    * 格物是致知的前提\n    * 理存在于具体事务当中\n* 王阳明的“格物致知”之说\n    * 如果理在事物当中 那与我的诚意正心有何关系？\n    * 物着事也 格者正也\n        * 格君心之非 -> 正君心之非\n        * “物” 作为一个独立的个体存在\n        * “事” 体现了一个过程 与我这个主题相关\n    * 事物之理不在事物本身 在心中\n    * 强调 我作为实践的主题 如何在事物当中正其心\n        * “正” 标准， 是否合乎本心\n            * 合乎本心 既是 合乎正理\n    * 强调 格物和致知是统一的整体\n    * 致知： 致良知\n        * 格物既是正心\n        * 格物致知：致吾心之良知于事事物物 事事物物各得齐正\n    * 意之所在便是物 意在于事亲则事亲为一物\n\n## 第五课 本体与主体性的自我建立\t\n\n* 孟子的“良知良能”\n    * 人不学而能谓之良能 不学而知着谓之良知\n        * 凡人皆有恻隐、羞恶、是非、辞让之心 是不学而知的 是我原本就固有的\n        * 恻隐之心 作为人之端 在人本身存在着固有性\n* 张载对“德性”、“闻见”之知的区别\n    * 德性之知不源于见闻 \n        * 德行：天德良知 超经验的\n        * 但是德性之知是要通过经验表达的\n* 王阳明的“良知”说\n    * 正德十五年 平定朱宸濠之后结合自己的生活经验提出\n    * 与前两位不近相同\n    * 良知： 心之本体（存在本体、德行本体、理性本体）\n        * 是生活中经验知识活动之所以可能的根据\n        * 是知识本身的本体 是理性的根据\n        * 原本就能知是非 是心体自然\n        * 原本就是至善 知善恶的 是德行之本\n        * 天命之所谓性\n    * 正是因为良知的存在 我们才具备存在和德行的本质，以及获得和展现知识的能力\n    * 心的良知是人作为主体的本质依据\n        * 唯有实现了自我建立的人才能称为主体\n        * 通过个体内在的自觉 在自我中建立起来\n    * 良知是为人之本\n    * 人的存在的本质 就是他的德行本质\n        * 生活中 人是如何表达自己？ \n            * 道德实践才能彰显个体的存在\n        * 道德的内在自觉\n            * 因为合乎本性的 所以才去做\n    * 每个个体存在性的表达 是要通过自觉的道德的建立来实现的\n        * 如此 个体的存在 才不仅仅是自然本身状态的 同时是合乎天道的\n* 存在本体、德行本体、理性本体\n    * 理性本源 是一切只是活动之所以可能的根据 是经验生活中是非判断的根据\n        * 是非 不仅仅是对错之分 还有善恶之分\n        * 泯灭良知 是指 良知没有获得表达和体现 在表现的层面上讲 泯灭良知\n    * 德行本源 是道德所以存在的依据\n    * 存在本源 是人的存在本质和最高的天道本质实现同一 并且这种同一性是作为本源的\n\n## 第六课 本心的自我开显与自我表达\n\n* 致良知的现实必要性 阳明对生命现状的忧虑\n    * 人们在利益的追逐当中丧失自我 遮蔽了自我的良知 所以要致良知\n    * 孟子： 求放心 放逸之心\n    * 安身立命的基础\n    * 对与人道相违背的生活现象的反思和批评\n* 致良知的双向展开\n    * 良知的“自知”、“自明”\n        * 呼唤自己的良知 良知才会以原本的状态出现\n        * **反思** 对自我在生活中的观点、意识、行为进行思索、内省\n        * 只有经过自我反思 我们的**主体性才得以建立**\n        * 用王阳明的话来讲 合乎良知叫”诚意“ 也既是”正心“\n        * ”自知“、”自明“ 才能表达自我的主体性建立 必须通过自我实现\n        * 如何对经验现象的实行确切无误的判断\n            * 有境才有心动 心动才会有善恶是非\n            * 动念之际去为善去恶\n    * “致吾心之良知于事事物物”\n        * 良知的自我展开 在事物的处理过程表现出来\n        * 明明德于天下\n        * 任何事物都应该在良知下进行 物得其正 我们存在性的自我表达\n        * 身 心 意 知 物 融为一体\n        * 人只有实践才能把主体的内在世界和客观世界连在一起\n* 致良知于个体意义世界的宏观构建\n    * 对于物质的欲望 本能的具有扩张性 它具有向恶的转化的可能 欲本身即是越界\n    * 孔子讲以礼来节制自我的情感\n        * 这种节制在道德上是好的 更符合公共生活\n        * 良知的恰当表达是具有公共性的\n    * 在自我与他人的事物观察中 人们更多的是用私欲的权衡 而非对他人客观 对自己混沌\n        * 良知首先是在自我中呈现 随之才能对其他事物有正确的理解\n\n## 第七课 心外无物：生命境界的无限圆融\n\n* “心”与“物”的关系\n    * “物”是“事”，“事”是介入了主体活动过程的\n    * 事物的两种存在状态： **“寂”与“显”\n**        \n        * 山中之花自开自落 没看到花的时候 你和花同归于“寂”，当你看到时是“显”\n        * **“寂“并非无，而是事物存在的一种状态**\n            * 是王阳明确认的事物的客观存在性\n        * **”显“ 当你看到花时 在你心中 一时分明起来**\n            * **看到 是”寂“到”显“的转换**\n    * 心的本体的存在 原本是”寂“、是不动的，但却包含着向”显“转换的无限可能，反之亦然 这叫做”寂感神应“ 没前后之分\n    * 看到花时 它由静转化为动，成为主题的对象，关系情景构成\n        * 体用一源 现为无间 无前无后无中间\n        * 任何事物的客观存在状态 只有在特定的情景中 客观物才以它原本的样式显现\n    * 任何客观物 当它以一种纯粹的客观存在时 包含”寂“和”显“两种状态 只不过呈现给主题的状态不同\n    * **王阳明的讨论并不涉及 事物是否可以脱离人的主观意识而存在 也就是并不涉及唯心主义讨论的问题**\n* “心外无物”作为一种生命境界\n    * 心不在焉 -> 听而不闻 视而不见 食而不知其味\n    * “关心”\n        * 一个事物在成为我的对象之前 它的存在跟我是不“关心”的 它的存在对我是无意义的\n        * 王阳明讲的一个真正的仁人是与天下事相关心的 是把世界万物容纳到个人的主体当中\n    * 致良知 通过主体的生活、道德实践 尽可能扩展我们的心灵世界 使一切万物都能够到达、进入的我的主体世界 如此我的心便是和天下万物相关 最后的圆融境界叫“无心外之物”\n    * 做不到 可以**心向往之**\n    * “心外无物” 是仁人的境界\n        * 把“物”作为个人主体的一部分\n* “心外无物”与主题价值世界的构建\n    * 个人主体世界的构建完全取决于我们主体自我的实践及其方式\n    * 个人要尽可能扩充、表达我们的良知 努力进行生活实践 并将实践纳入个人的主体世界\n        * 我们的意义世界 便是在实践当中不断的建立和扩张\n            * 主体的世界和客观世界不断的链接起来后 个人的主体世界也越来越宏达\n    * “心外无物”是生命的最高境界，是人生自我价值不断扩展和实现\n* （个人注记：你的主体世界便是你人生的价值。想到了精致的利己主义。利己没有什么错误，但致良知能够极大的丰富我们的主体世界，无论是从哪个角度的丰富，都会让其更加丰富多彩。即便我们的人生价值是丰富自己的体验或者收获更多的物质，那么致良知也是对其有很大的帮助的。比如丰富了对看待事物的视角，体验自然也就丰富了。如此来讲即便只谈利己也不必排斥“心外无物”。心向往之，实践前行。）\n\n## 第八课 天泉证道“四句教”阳明学派的分化\n\n* “天泉证道”的背景 “四句教”问题\n    * “四句教” 仅出现在《传习录》下卷和年谱中 未出现在王阳明自己的作品中\n        * 无善无恶心之本\n        * 有善有恶意之动\n        * 知善知恶是良知\n        * 为善去恶是格物\n    * 弟子钱德洪和王畿是在天泉桥向王阳明请教这四句话的意思的 所以叫做“天泉证道”\n* 钱德洪关于“四句教”的理解\n    * 认为是王门宗旨 是究竟之说\n    * 良知原本是无善无恶的 对圣人如此 但普通人不免有习心在 不免有私欲 所以 意之动就会有善有恶 于是要求我们在一念发动之动给克制住\n    * 是非善恶良知本是知道的 所以要为善去恶\n* 王畿(jī)（龙溪）关于“四句教”的理解\n    * 认为是权宜之说\n    * 认为\n        * 无心之心则藏秘\n        * 无意之意则应圆\n        * 无知之知则体寂\n        * 无物之物则用神\n    * 认为 心如果是无善无恶的 那么 意、知、物都应该是无善无恶的 不可能突然冒出来有善有恶的意\n* “四句教”与王学分化的关系\n    * “天泉证道”，王阳明认为 人非利根和钝根之人\n        * 利根之人 聪慧 一点就透\n            * 一悟本体既是工夫\n            * 便是王畿所讲\n            * 但此般根基之人很少\n        * 钝根之人 愚笨 需要慢慢学慢慢习\n            * 对于普通人还是要讲为善去恶\n            * 钱德洪之说\n    * 黄宗羲对王钱二人的评价\n        * 因其二人而风行 也因此二人而渐失其传\n* “四句教”的具体分析\n    * 无善无恶心之本\n        * 无善无恶是为至善 \n        * 讲的是本心自身的实在的状态 是未发之中 是无法判断的\n            * 因为善恶是基于经验世界检验价值的相对判断\n            * 而**至善是超经验的 是绝对的价值原点 由此才能对事物进行判断**\n                * 比如称用于权衡他物 眼睛是无色的才可以分辨颜色 镜子本无一物才能照出来事物本身\n    * 有善有恶意之动\n        * 意 是心之动的主动状态 是有境，有原因的\n            * 所以是一种经验状态\n            * 没有对物、境构成关系之前 本体归于本相之寂\n            * 所以它一定会落于某个方面 才有善恶之分\n            * 价值只能在经验的世界当中显现它自己\n        * 心之动合理的方面是讲 心之动是合乎本体 是合乎心本来状态的 所以这样的一动 在价值上会落于善的方面\n    * 知善知恶是良知\n        * 良知本身是自知自明 知善知恶的 心体向经验转换时 它是可以判断善恶的\n    * 为善去恶是格物\n        * 当良知判断出事物的善恶之后 人应该朝着善的方向去做\n        * 而这个过程便是 诚意正心\n\n## 第九课 心体的自我澄明与价值实现\n\n* 四句教是否存在内在“逻辑”关系\n    * 不存在内在逻辑关系\n    * 就四个不同层面来讲的\n* “良知现成”与思相解放\n    * 王龙溪一派虽偏离了王阳明的思想 但是却带来了思想了解放\n    * 正因为人人都诉诸自己的良知 任何事物在经由良知的审慎之前都是值得怀疑的 所以它要求我们对生活进行审查 我们的价值也在这个过程中建立\n    * 未经理性审查的生活是不值得过的 -- 苏格拉底\n    * 但是当我们过度强调良知的审查 就会变成自我的率性而为 陷入以意见为真理的谬误的状态\n* 本体与工夫的关系\n    * 良知是心之本体 如何显现？ 如何到达？\n    * 工夫 相当于方法论\n        * 钱德洪：为善去恶既是工夫 在事上磨炼\n            * 工夫总是相对于本体而言 并且总是相对于本体的开显而言的\n        * 王龙溪：工夫是需要的 但不需要为善去恶 不需要在事上磨炼\n            * 当下悟出无山无恶心之本 即本体工夫\n            * 如果你真正明白这个道理 不需要那么复杂 良知现成\n            * 现成既是本体也是工夫\n            * 良知本顺 致之则逆 不需要致良知\n    * 王阳明还是非常强调事情的磨炼的\n* 董平老师的观点\n    * 良知作为价值原点 是超经验的 在生活中的表达是有可能发生问题的\n    * 心之动发为意 是有善有恶的\n    * 生活中充满各种欲望 我们往往容易偏离自我的心灵指导\n    * 所以反思是很重要的\n    * 人需要了解到自我的良知是浩渺的可以容纳世间万物 可以判断世间一切美丑善恶 这样我们才能在天地间堂堂正正的做人\n    * 王阳明遗言：此心光明 亦复何言\n        * 领会到这点 我们就能对生活稍微超然疏离一点 这样的行为能让我们的精神世界高尚一点\n        * 这种超然和疏离是对欲望的疏离 对利益的看淡 使我们变得高尚\n        * 使我们变得高尚的 不是我们的本能 是我们的德行、良知\n        * 一个懂得致良知的人才会享有崇高的思想境界\n    * 客观事物是脱离自我存在的 但只有进入我的世界 才会对我有意义\n\n## 我的理解\n\n* 心学里的良知和禅学里边讲到的对绝对价值的追求很相似。\n    * 林木大拙讲到禅是超越逻辑的。相对来讲，心学的良知学也是超经验范畴的，讲的也是绝对价值。\n    * 另一方面，禅讲的平常心也对应的“为善去恶”的观念在里边。\n* 而“知行合一”和禅学也都一直在强调思维的一贯性。\n\n## 注记：\n\n* 以上皆为董平老师的观点 由于他提到“这是我个人的观点”的次数太多，我基本全给省略了。所以作为对阳明心学的一个思考角度来看。在今后读过《传习录》、《大学问》等王阳明的著作之后对比来看更有收获。\n* 课程地址: [http://open.163.com/special/cuvocw/wangyangming.html](http://open.163.com/special/cuvocw/wangyangming.html)\n\n\n","slug":"2017-09-10-wang-yangming","published":1,"updated":"2022-02-12T20:53:10.507Z","comments":1,"photos":[],"link":"","_id":"ckzkc92xk0027oqoxd35z353y","content":"<h2 id=\"第二课-心即理：阳明心学的逻辑起点\"><a href=\"#第二课-心即理：阳明心学的逻辑起点\" class=\"headerlink\" title=\"第二课 心即理：阳明心学的逻辑起点\"></a>第二课 心即理：阳明心学的逻辑起点</h2><ul>\n<li>宋代理学的发生<ul>\n<li>陆九渊(象山)提出</li>\n<li>最早可追溯到唐朝韩愈，他提出了道统问题<ul>\n<li>佛教过度繁荣使他感到本土文化忧虑</li>\n<li>提出 焚其书 庐其居 人其人</li>\n</ul>\n</li>\n<li>到了宋朝，北宋五子耗费大量时间研究并领会了佛教和道教的精髓后，对先秦的思想进行了重新构建<ul>\n<li>理学 可以说是对儒家思想的重新构建</li>\n<li>突出了很多原本在儒家思想中不突出的观点<ul>\n<li>比如对人性的探讨</li>\n</ul>\n</li>\n<li>理学 借鉴了一些佛教和道教的思想<ul>\n<li>比如 静坐 -&gt; 打坐</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>南宋(朱熹 乾淳之际)<ul>\n<li>理学 思想基本形成</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>理学的三个基本思想形态<ul>\n<li>朱熹一派 主要来自于程颐的思想<ul>\n<li>理 是思想的最高范畴<ul>\n<li>一本之理<ul>\n<li>最根本的是 对理要有终极体认，才能优入圣域</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>理 是可以达到的目的</li>\n</ul>\n</li>\n<li>陆象山<ul>\n<li>心即理<ul>\n<li>圣人之学 心学也</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>浙东学派 吕祖谦 陈亮<ul>\n<li>理 在人类的日常生活当中 在历史中</li>\n<li>把道的追寻贯彻到人类的生活当中</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>朱陆之争<ul>\n<li>他们的争论是对最高实在本身存在性的终极预设发生了歧义</li>\n</ul>\n</li>\n<li>阳明对陆学的基本观点<ul>\n<li>大段也是 只是粗了</li>\n<li>并没有很细致的论述</li>\n</ul>\n</li>\n<li>“心即理”在阳明心学结构中的地位和作用<ul>\n<li>在龙场的艰难困苦生活中 他提出 如果圣人处在这种环境下 圣人会怎么做</li>\n<li><strong>圣人之道 吾性具足</strong> </li>\n<li>思想境界的升华 意味着世界的改变 </li>\n<li>人在社会中生活，行为是受我们的思想和观念主导 观点改变 感觉也就改变了</li>\n<li>龙场悟道最重要一点就是对“心即理”的体悟</li>\n<li>“本心” 心之本体 是我们的意识 我们的精神 主宰身体的视听言动</li>\n<li>让心回到它本身的主宰地位 我们的行为就会按照它原本的样子呈现 我们的境界自然高尚</li>\n<li><strong>心之本体 就是至善</strong></li>\n<li>宇宙的最高真理与我们的本心是纯然一致的 所以人要大其心</li>\n<li>唯有明白了自身的本质和天道原本是一致的 人的本质原本就是天道在人这个层面的实在状态 这叫做本质上的天人合一</li>\n<li>要成为圣人 最重要的是开显本心 使我们的原本与最高之理相符合的本心 以它原本的样子显现出来 一旦达到那个境界 既是人道和天道的最高实现</li>\n<li>所以要<strong>去私欲 心明既是理明</strong> 既是道明 如镜子般 如实地去反映事物 那就是圣人事业的现实开括</li>\n</ul>\n</li>\n<li>总结<ul>\n<li>本质上 人的本质和天道的本质是同一的 这就为人道(人的现实生活)转进于圣人境界造成了理论前提</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"第三课-知行合一：阳明心学的实践品格\"><a href=\"#第三课-知行合一：阳明心学的实践品格\" class=\"headerlink\" title=\"第三课 知行合一：阳明心学的实践品格\"></a>第三课 知行合一：阳明心学的实践品格</h2><ul>\n<li>“知” 、“行” 关系问题<ul>\n<li>《尚书·说命》：知之非艰 行之惟艰</li>\n<li>孔子《论语》：<ul>\n<li>学而时习之不亦乐乎</li>\n<li>不知而行之者 吾无是业： 知是重要行的重要前提</li>\n<li>吾欲托之空言 不如见之行事之深切著明也：实践才是把只是呈现出来 转换价值的根本途径</li>\n</ul>\n</li>\n<li>《大学》：<ul>\n<li>未有学养子而后嫁者也： 亲子之爱是天生的 对子女的慈爱是自然流露的</li>\n</ul>\n</li>\n<li>佛教 天台宗：<ul>\n<li>止观双修 定慧均等修止观</li>\n<li>四明知礼（北宋）：智为行本则行借智生 行能成智则智借行成</li>\n</ul>\n</li>\n<li>朱熹：<ul>\n<li>知行长相须（依附） 强调知与行的并列关系</li>\n<li>知之俞明则行之俞笃 行之俞笃则知之俞明</li>\n</ul>\n</li>\n<li>吕祖谦：<ul>\n<li>致知力行不是两截</li>\n<li>禅宗：磨镜所以明镜</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>“知行合一”的思想渊源<ul>\n<li>朱熹：真知必能行</li>\n<li>王阳明：真知既是行：合二为一</li>\n</ul>\n</li>\n<li>“知行合一”的具体观点（知就是行 行就是知）<ul>\n<li>两个层面<ul>\n<li>知识层面<ul>\n<li>在事物当中获得知识</li>\n<li>如何了解？<ul>\n<li>比如 孝敬父母。知道如何做 然后做是获得知识的过程 也是表达知识的过程</li>\n<li><strong>知和行是同一个完整的过程</strong><ul>\n<li>知是行的起点 行是知的完成</li>\n<li>知识的最后形态 是生活的实践</li>\n</ul>\n</li>\n<li>（个人注记：突然想到业内的 talk is cheap, show me the code)<ul>\n<li>比如数学是机器学习的基础 但实践要在学理论的同时进行 而不是数学学完后就行</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>一念发动处便既是行了<ul>\n<li>意识的流动本身就是行</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>良知学说层面<ul>\n<li>王阳明经常从 知-&gt;良知 的层面上讲</li>\n<li>良知的自知 自己对自己的领悟</li>\n<li>表达自知 通过行来表达</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><strong>知之真切笃实处既是行 行之明觉精察处既是知 知行功夫本不可离</strong><ul>\n<li>当对知的了解层度达到真切笃实处便是行 把知作为一个过程</li>\n<li>当行为达到明觉精察 一定是真实只是的直接表达</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>对所谓明阳“以知代行”说的批评<ul>\n<li>王阳明强调知识的过程必定是通过一个实践的过程体现的</li>\n<li>最终的实践才是知识价值获得实现的最后境界</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"第四课-格物致知：知识论域的实践转向\"><a href=\"#第四课-格物致知：知识论域的实践转向\" class=\"headerlink\" title=\"第四课 格物致知：知识论域的实践转向\"></a>第四课 格物致知：知识论域的实践转向</h2><ul>\n<li>“格物致知”问题的来源<ul>\n<li>来源于《大学》<ul>\n<li>三纲：大学之道 在明明德 在亲民 在止于至善</li>\n<li>八条目： 格物 致知 诚意 正心 修身 齐家 治国 平天下</li>\n<li>起点是：格物 致知</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>朱熹对“格物致知”的理解<ul>\n<li>接着二程夫子来讲<ul>\n<li>天下任何事物，宏观地看，有天理在 最高的一本之道</li>\n<li>任何事物有它的独特之理 分殊之理</li>\n<li>分殊之理是从一本之理中获得</li>\n<li>一本之理作为大一是完满的 分殊之理为小一也是完满的</li>\n<li>分殊之理的不断地“格”、还原 达到一定状态 才可能获得一本之理把握的前提</li>\n</ul>\n</li>\n<li>强调 格物致知是还原具体事物之理 既物而穷理</li>\n<li>格物是致知的前提</li>\n<li>理存在于具体事务当中</li>\n</ul>\n</li>\n<li>王阳明的“格物致知”之说<ul>\n<li>如果理在事物当中 那与我的诚意正心有何关系？</li>\n<li>物着事也 格者正也<ul>\n<li>格君心之非 -&gt; 正君心之非</li>\n<li>“物” 作为一个独立的个体存在</li>\n<li>“事” 体现了一个过程 与我这个主题相关</li>\n</ul>\n</li>\n<li>事物之理不在事物本身 在心中</li>\n<li>强调 我作为实践的主题 如何在事物当中正其心<ul>\n<li>“正” 标准， 是否合乎本心<ul>\n<li>合乎本心 既是 合乎正理</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>强调 格物和致知是统一的整体</li>\n<li>致知： 致良知<ul>\n<li>格物既是正心</li>\n<li>格物致知：致吾心之良知于事事物物 事事物物各得齐正</li>\n</ul>\n</li>\n<li>意之所在便是物 意在于事亲则事亲为一物</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"第五课-本体与主体性的自我建立\"><a href=\"#第五课-本体与主体性的自我建立\" class=\"headerlink\" title=\"第五课 本体与主体性的自我建立\"></a>第五课 本体与主体性的自我建立</h2><ul>\n<li>孟子的“良知良能”<ul>\n<li>人不学而能谓之良能 不学而知着谓之良知<ul>\n<li>凡人皆有恻隐、羞恶、是非、辞让之心 是不学而知的 是我原本就固有的</li>\n<li>恻隐之心 作为人之端 在人本身存在着固有性</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>张载对“德性”、“闻见”之知的区别<ul>\n<li>德性之知不源于见闻 <ul>\n<li>德行：天德良知 超经验的</li>\n<li>但是德性之知是要通过经验表达的</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>王阳明的“良知”说<ul>\n<li>正德十五年 平定朱宸濠之后结合自己的生活经验提出</li>\n<li>与前两位不近相同</li>\n<li>良知： 心之本体（存在本体、德行本体、理性本体）<ul>\n<li>是生活中经验知识活动之所以可能的根据</li>\n<li>是知识本身的本体 是理性的根据</li>\n<li>原本就能知是非 是心体自然</li>\n<li>原本就是至善 知善恶的 是德行之本</li>\n<li>天命之所谓性</li>\n</ul>\n</li>\n<li>正是因为良知的存在 我们才具备存在和德行的本质，以及获得和展现知识的能力</li>\n<li>心的良知是人作为主体的本质依据<ul>\n<li>唯有实现了自我建立的人才能称为主体</li>\n<li>通过个体内在的自觉 在自我中建立起来</li>\n</ul>\n</li>\n<li>良知是为人之本</li>\n<li>人的存在的本质 就是他的德行本质<ul>\n<li>生活中 人是如何表达自己？ <ul>\n<li>道德实践才能彰显个体的存在</li>\n</ul>\n</li>\n<li>道德的内在自觉<ul>\n<li>因为合乎本性的 所以才去做</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>每个个体存在性的表达 是要通过自觉的道德的建立来实现的<ul>\n<li>如此 个体的存在 才不仅仅是自然本身状态的 同时是合乎天道的</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>存在本体、德行本体、理性本体<ul>\n<li>理性本源 是一切只是活动之所以可能的根据 是经验生活中是非判断的根据<ul>\n<li>是非 不仅仅是对错之分 还有善恶之分</li>\n<li>泯灭良知 是指 良知没有获得表达和体现 在表现的层面上讲 泯灭良知</li>\n</ul>\n</li>\n<li>德行本源 是道德所以存在的依据</li>\n<li>存在本源 是人的存在本质和最高的天道本质实现同一 并且这种同一性是作为本源的</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"第六课-本心的自我开显与自我表达\"><a href=\"#第六课-本心的自我开显与自我表达\" class=\"headerlink\" title=\"第六课 本心的自我开显与自我表达\"></a>第六课 本心的自我开显与自我表达</h2><ul>\n<li>致良知的现实必要性 阳明对生命现状的忧虑<ul>\n<li>人们在利益的追逐当中丧失自我 遮蔽了自我的良知 所以要致良知</li>\n<li>孟子： 求放心 放逸之心</li>\n<li>安身立命的基础</li>\n<li>对与人道相违背的生活现象的反思和批评</li>\n</ul>\n</li>\n<li>致良知的双向展开<ul>\n<li>良知的“自知”、“自明”<ul>\n<li>呼唤自己的良知 良知才会以原本的状态出现</li>\n<li><strong>反思</strong> 对自我在生活中的观点、意识、行为进行思索、内省</li>\n<li>只有经过自我反思 我们的<strong>主体性才得以建立</strong></li>\n<li>用王阳明的话来讲 合乎良知叫”诚意“ 也既是”正心“</li>\n<li>”自知“、”自明“ 才能表达自我的主体性建立 必须通过自我实现</li>\n<li>如何对经验现象的实行确切无误的判断<ul>\n<li>有境才有心动 心动才会有善恶是非</li>\n<li>动念之际去为善去恶</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>“致吾心之良知于事事物物”<ul>\n<li>良知的自我展开 在事物的处理过程表现出来</li>\n<li>明明德于天下</li>\n<li>任何事物都应该在良知下进行 物得其正 我们存在性的自我表达</li>\n<li>身 心 意 知 物 融为一体</li>\n<li>人只有实践才能把主体的内在世界和客观世界连在一起</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>致良知于个体意义世界的宏观构建<ul>\n<li>对于物质的欲望 本能的具有扩张性 它具有向恶的转化的可能 欲本身即是越界</li>\n<li>孔子讲以礼来节制自我的情感<ul>\n<li>这种节制在道德上是好的 更符合公共生活</li>\n<li>良知的恰当表达是具有公共性的</li>\n</ul>\n</li>\n<li>在自我与他人的事物观察中 人们更多的是用私欲的权衡 而非对他人客观 对自己混沌<ul>\n<li>良知首先是在自我中呈现 随之才能对其他事物有正确的理解</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"第七课-心外无物：生命境界的无限圆融\"><a href=\"#第七课-心外无物：生命境界的无限圆融\" class=\"headerlink\" title=\"第七课 心外无物：生命境界的无限圆融\"></a>第七课 心外无物：生命境界的无限圆融</h2><ul>\n<li>“心”与“物”的关系<ul>\n<li>“物”是“事”，“事”是介入了主体活动过程的</li>\n<li>事物的两种存在状态： **“寂”与“显”</li>\n</ul>\n</li>\n</ul>\n<p>**<br>        * 山中之花自开自落 没看到花的时候 你和花同归于“寂”，当你看到时是“显”<br>        * <strong>“寂“并非无，而是事物存在的一种状态</strong><br>            * 是王阳明确认的事物的客观存在性<br>        * <strong>”显“ 当你看到花时 在你心中 一时分明起来</strong><br>            * <strong>看到 是”寂“到”显“的转换</strong><br>    * 心的本体的存在 原本是”寂“、是不动的，但却包含着向”显“转换的无限可能，反之亦然 这叫做”寂感神应“ 没前后之分<br>    * 看到花时 它由静转化为动，成为主题的对象，关系情景构成<br>        * 体用一源 现为无间 无前无后无中间<br>        * 任何事物的客观存在状态 只有在特定的情景中 客观物才以它原本的样式显现<br>    * 任何客观物 当它以一种纯粹的客观存在时 包含”寂“和”显“两种状态 只不过呈现给主题的状态不同<br>    * <strong>王阳明的讨论并不涉及 事物是否可以脱离人的主观意识而存在 也就是并不涉及唯心主义讨论的问题</strong></p>\n<ul>\n<li>“心外无物”作为一种生命境界<ul>\n<li>心不在焉 -&gt; 听而不闻 视而不见 食而不知其味</li>\n<li>“关心”<ul>\n<li>一个事物在成为我的对象之前 它的存在跟我是不“关心”的 它的存在对我是无意义的</li>\n<li>王阳明讲的一个真正的仁人是与天下事相关心的 是把世界万物容纳到个人的主体当中</li>\n</ul>\n</li>\n<li>致良知 通过主体的生活、道德实践 尽可能扩展我们的心灵世界 使一切万物都能够到达、进入的我的主体世界 如此我的心便是和天下万物相关 最后的圆融境界叫“无心外之物”</li>\n<li>做不到 可以<strong>心向往之</strong></li>\n<li>“心外无物” 是仁人的境界<ul>\n<li>把“物”作为个人主体的一部分</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>“心外无物”与主题价值世界的构建<ul>\n<li>个人主体世界的构建完全取决于我们主体自我的实践及其方式</li>\n<li>个人要尽可能扩充、表达我们的良知 努力进行生活实践 并将实践纳入个人的主体世界<ul>\n<li>我们的意义世界 便是在实践当中不断的建立和扩张<ul>\n<li>主体的世界和客观世界不断的链接起来后 个人的主体世界也越来越宏达</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>“心外无物”是生命的最高境界，是人生自我价值不断扩展和实现</li>\n</ul>\n</li>\n<li>（个人注记：你的主体世界便是你人生的价值。想到了精致的利己主义。利己没有什么错误，但致良知能够极大的丰富我们的主体世界，无论是从哪个角度的丰富，都会让其更加丰富多彩。即便我们的人生价值是丰富自己的体验或者收获更多的物质，那么致良知也是对其有很大的帮助的。比如丰富了对看待事物的视角，体验自然也就丰富了。如此来讲即便只谈利己也不必排斥“心外无物”。心向往之，实践前行。）</li>\n</ul>\n<h2 id=\"第八课-天泉证道“四句教”阳明学派的分化\"><a href=\"#第八课-天泉证道“四句教”阳明学派的分化\" class=\"headerlink\" title=\"第八课 天泉证道“四句教”阳明学派的分化\"></a>第八课 天泉证道“四句教”阳明学派的分化</h2><ul>\n<li>“天泉证道”的背景 “四句教”问题<ul>\n<li>“四句教” 仅出现在《传习录》下卷和年谱中 未出现在王阳明自己的作品中<ul>\n<li>无善无恶心之本</li>\n<li>有善有恶意之动</li>\n<li>知善知恶是良知</li>\n<li>为善去恶是格物</li>\n</ul>\n</li>\n<li>弟子钱德洪和王畿是在天泉桥向王阳明请教这四句话的意思的 所以叫做“天泉证道”</li>\n</ul>\n</li>\n<li>钱德洪关于“四句教”的理解<ul>\n<li>认为是王门宗旨 是究竟之说</li>\n<li>良知原本是无善无恶的 对圣人如此 但普通人不免有习心在 不免有私欲 所以 意之动就会有善有恶 于是要求我们在一念发动之动给克制住</li>\n<li>是非善恶良知本是知道的 所以要为善去恶</li>\n</ul>\n</li>\n<li>王畿(jī)（龙溪）关于“四句教”的理解<ul>\n<li>认为是权宜之说</li>\n<li>认为<ul>\n<li>无心之心则藏秘</li>\n<li>无意之意则应圆</li>\n<li>无知之知则体寂</li>\n<li>无物之物则用神</li>\n</ul>\n</li>\n<li>认为 心如果是无善无恶的 那么 意、知、物都应该是无善无恶的 不可能突然冒出来有善有恶的意</li>\n</ul>\n</li>\n<li>“四句教”与王学分化的关系<ul>\n<li>“天泉证道”，王阳明认为 人非利根和钝根之人<ul>\n<li>利根之人 聪慧 一点就透<ul>\n<li>一悟本体既是工夫</li>\n<li>便是王畿所讲</li>\n<li>但此般根基之人很少</li>\n</ul>\n</li>\n<li>钝根之人 愚笨 需要慢慢学慢慢习<ul>\n<li>对于普通人还是要讲为善去恶</li>\n<li>钱德洪之说</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>黄宗羲对王钱二人的评价<ul>\n<li>因其二人而风行 也因此二人而渐失其传</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>“四句教”的具体分析<ul>\n<li>无善无恶心之本<ul>\n<li>无善无恶是为至善 </li>\n<li>讲的是本心自身的实在的状态 是未发之中 是无法判断的<ul>\n<li>因为善恶是基于经验世界检验价值的相对判断</li>\n<li>而<strong>至善是超经验的 是绝对的价值原点 由此才能对事物进行判断</strong><ul>\n<li>比如称用于权衡他物 眼睛是无色的才可以分辨颜色 镜子本无一物才能照出来事物本身</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>有善有恶意之动<ul>\n<li>意 是心之动的主动状态 是有境，有原因的<ul>\n<li>所以是一种经验状态</li>\n<li>没有对物、境构成关系之前 本体归于本相之寂</li>\n<li>所以它一定会落于某个方面 才有善恶之分</li>\n<li>价值只能在经验的世界当中显现它自己</li>\n</ul>\n</li>\n<li>心之动合理的方面是讲 心之动是合乎本体 是合乎心本来状态的 所以这样的一动 在价值上会落于善的方面</li>\n</ul>\n</li>\n<li>知善知恶是良知<ul>\n<li>良知本身是自知自明 知善知恶的 心体向经验转换时 它是可以判断善恶的</li>\n</ul>\n</li>\n<li>为善去恶是格物<ul>\n<li>当良知判断出事物的善恶之后 人应该朝着善的方向去做</li>\n<li>而这个过程便是 诚意正心</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"第九课-心体的自我澄明与价值实现\"><a href=\"#第九课-心体的自我澄明与价值实现\" class=\"headerlink\" title=\"第九课 心体的自我澄明与价值实现\"></a>第九课 心体的自我澄明与价值实现</h2><ul>\n<li>四句教是否存在内在“逻辑”关系<ul>\n<li>不存在内在逻辑关系</li>\n<li>就四个不同层面来讲的</li>\n</ul>\n</li>\n<li>“良知现成”与思相解放<ul>\n<li>王龙溪一派虽偏离了王阳明的思想 但是却带来了思想了解放</li>\n<li>正因为人人都诉诸自己的良知 任何事物在经由良知的审慎之前都是值得怀疑的 所以它要求我们对生活进行审查 我们的价值也在这个过程中建立</li>\n<li>未经理性审查的生活是不值得过的 – 苏格拉底</li>\n<li>但是当我们过度强调良知的审查 就会变成自我的率性而为 陷入以意见为真理的谬误的状态</li>\n</ul>\n</li>\n<li>本体与工夫的关系<ul>\n<li>良知是心之本体 如何显现？ 如何到达？</li>\n<li>工夫 相当于方法论<ul>\n<li>钱德洪：为善去恶既是工夫 在事上磨炼<ul>\n<li>工夫总是相对于本体而言 并且总是相对于本体的开显而言的</li>\n</ul>\n</li>\n<li>王龙溪：工夫是需要的 但不需要为善去恶 不需要在事上磨炼<ul>\n<li>当下悟出无山无恶心之本 即本体工夫</li>\n<li>如果你真正明白这个道理 不需要那么复杂 良知现成</li>\n<li>现成既是本体也是工夫</li>\n<li>良知本顺 致之则逆 不需要致良知</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>王阳明还是非常强调事情的磨炼的</li>\n</ul>\n</li>\n<li>董平老师的观点<ul>\n<li>良知作为价值原点 是超经验的 在生活中的表达是有可能发生问题的</li>\n<li>心之动发为意 是有善有恶的</li>\n<li>生活中充满各种欲望 我们往往容易偏离自我的心灵指导</li>\n<li>所以反思是很重要的</li>\n<li>人需要了解到自我的良知是浩渺的可以容纳世间万物 可以判断世间一切美丑善恶 这样我们才能在天地间堂堂正正的做人</li>\n<li>王阳明遗言：此心光明 亦复何言<ul>\n<li>领会到这点 我们就能对生活稍微超然疏离一点 这样的行为能让我们的精神世界高尚一点</li>\n<li>这种超然和疏离是对欲望的疏离 对利益的看淡 使我们变得高尚</li>\n<li>使我们变得高尚的 不是我们的本能 是我们的德行、良知</li>\n<li>一个懂得致良知的人才会享有崇高的思想境界</li>\n</ul>\n</li>\n<li>客观事物是脱离自我存在的 但只有进入我的世界 才会对我有意义</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"我的理解\"><a href=\"#我的理解\" class=\"headerlink\" title=\"我的理解\"></a>我的理解</h2><ul>\n<li>心学里的良知和禅学里边讲到的对绝对价值的追求很相似。<ul>\n<li>林木大拙讲到禅是超越逻辑的。相对来讲，心学的良知学也是超经验范畴的，讲的也是绝对价值。</li>\n<li>另一方面，禅讲的平常心也对应的“为善去恶”的观念在里边。</li>\n</ul>\n</li>\n<li>而“知行合一”和禅学也都一直在强调思维的一贯性。</li>\n</ul>\n<h2 id=\"注记：\"><a href=\"#注记：\" class=\"headerlink\" title=\"注记：\"></a>注记：</h2><ul>\n<li>以上皆为董平老师的观点 由于他提到“这是我个人的观点”的次数太多，我基本全给省略了。所以作为对阳明心学的一个思考角度来看。在今后读过《传习录》、《大学问》等王阳明的著作之后对比来看更有收获。</li>\n<li>课程地址: <a href=\"http://open.163.com/special/cuvocw/wangyangming.html\">http://open.163.com/special/cuvocw/wangyangming.html</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"第二课-心即理：阳明心学的逻辑起点\"><a href=\"#第二课-心即理：阳明心学的逻辑起点\" class=\"headerlink\" title=\"第二课 心即理：阳明心学的逻辑起点\"></a>第二课 心即理：阳明心学的逻辑起点</h2><ul>\n<li>宋代理学的发生<ul>\n<li>陆九渊(象山)提出</li>\n<li>最早可追溯到唐朝韩愈，他提出了道统问题<ul>\n<li>佛教过度繁荣使他感到本土文化忧虑</li>\n<li>提出 焚其书 庐其居 人其人</li>\n</ul>\n</li>\n<li>到了宋朝，北宋五子耗费大量时间研究并领会了佛教和道教的精髓后，对先秦的思想进行了重新构建<ul>\n<li>理学 可以说是对儒家思想的重新构建</li>\n<li>突出了很多原本在儒家思想中不突出的观点<ul>\n<li>比如对人性的探讨</li>\n</ul>\n</li>\n<li>理学 借鉴了一些佛教和道教的思想<ul>\n<li>比如 静坐 -&gt; 打坐</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>南宋(朱熹 乾淳之际)<ul>\n<li>理学 思想基本形成</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>理学的三个基本思想形态<ul>\n<li>朱熹一派 主要来自于程颐的思想<ul>\n<li>理 是思想的最高范畴<ul>\n<li>一本之理<ul>\n<li>最根本的是 对理要有终极体认，才能优入圣域</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>理 是可以达到的目的</li>\n</ul>\n</li>\n<li>陆象山<ul>\n<li>心即理<ul>\n<li>圣人之学 心学也</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>浙东学派 吕祖谦 陈亮<ul>\n<li>理 在人类的日常生活当中 在历史中</li>\n<li>把道的追寻贯彻到人类的生活当中</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>朱陆之争<ul>\n<li>他们的争论是对最高实在本身存在性的终极预设发生了歧义</li>\n</ul>\n</li>\n<li>阳明对陆学的基本观点<ul>\n<li>大段也是 只是粗了</li>\n<li>并没有很细致的论述</li>\n</ul>\n</li>\n<li>“心即理”在阳明心学结构中的地位和作用<ul>\n<li>在龙场的艰难困苦生活中 他提出 如果圣人处在这种环境下 圣人会怎么做</li>\n<li><strong>圣人之道 吾性具足</strong> </li>\n<li>思想境界的升华 意味着世界的改变 </li>\n<li>人在社会中生活，行为是受我们的思想和观念主导 观点改变 感觉也就改变了</li>\n<li>龙场悟道最重要一点就是对“心即理”的体悟</li>\n<li>“本心” 心之本体 是我们的意识 我们的精神 主宰身体的视听言动</li>\n<li>让心回到它本身的主宰地位 我们的行为就会按照它原本的样子呈现 我们的境界自然高尚</li>\n<li><strong>心之本体 就是至善</strong></li>\n<li>宇宙的最高真理与我们的本心是纯然一致的 所以人要大其心</li>\n<li>唯有明白了自身的本质和天道原本是一致的 人的本质原本就是天道在人这个层面的实在状态 这叫做本质上的天人合一</li>\n<li>要成为圣人 最重要的是开显本心 使我们的原本与最高之理相符合的本心 以它原本的样子显现出来 一旦达到那个境界 既是人道和天道的最高实现</li>\n<li>所以要<strong>去私欲 心明既是理明</strong> 既是道明 如镜子般 如实地去反映事物 那就是圣人事业的现实开括</li>\n</ul>\n</li>\n<li>总结<ul>\n<li>本质上 人的本质和天道的本质是同一的 这就为人道(人的现实生活)转进于圣人境界造成了理论前提</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"第三课-知行合一：阳明心学的实践品格\"><a href=\"#第三课-知行合一：阳明心学的实践品格\" class=\"headerlink\" title=\"第三课 知行合一：阳明心学的实践品格\"></a>第三课 知行合一：阳明心学的实践品格</h2><ul>\n<li>“知” 、“行” 关系问题<ul>\n<li>《尚书·说命》：知之非艰 行之惟艰</li>\n<li>孔子《论语》：<ul>\n<li>学而时习之不亦乐乎</li>\n<li>不知而行之者 吾无是业： 知是重要行的重要前提</li>\n<li>吾欲托之空言 不如见之行事之深切著明也：实践才是把只是呈现出来 转换价值的根本途径</li>\n</ul>\n</li>\n<li>《大学》：<ul>\n<li>未有学养子而后嫁者也： 亲子之爱是天生的 对子女的慈爱是自然流露的</li>\n</ul>\n</li>\n<li>佛教 天台宗：<ul>\n<li>止观双修 定慧均等修止观</li>\n<li>四明知礼（北宋）：智为行本则行借智生 行能成智则智借行成</li>\n</ul>\n</li>\n<li>朱熹：<ul>\n<li>知行长相须（依附） 强调知与行的并列关系</li>\n<li>知之俞明则行之俞笃 行之俞笃则知之俞明</li>\n</ul>\n</li>\n<li>吕祖谦：<ul>\n<li>致知力行不是两截</li>\n<li>禅宗：磨镜所以明镜</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>“知行合一”的思想渊源<ul>\n<li>朱熹：真知必能行</li>\n<li>王阳明：真知既是行：合二为一</li>\n</ul>\n</li>\n<li>“知行合一”的具体观点（知就是行 行就是知）<ul>\n<li>两个层面<ul>\n<li>知识层面<ul>\n<li>在事物当中获得知识</li>\n<li>如何了解？<ul>\n<li>比如 孝敬父母。知道如何做 然后做是获得知识的过程 也是表达知识的过程</li>\n<li><strong>知和行是同一个完整的过程</strong><ul>\n<li>知是行的起点 行是知的完成</li>\n<li>知识的最后形态 是生活的实践</li>\n</ul>\n</li>\n<li>（个人注记：突然想到业内的 talk is cheap, show me the code)<ul>\n<li>比如数学是机器学习的基础 但实践要在学理论的同时进行 而不是数学学完后就行</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>一念发动处便既是行了<ul>\n<li>意识的流动本身就是行</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>良知学说层面<ul>\n<li>王阳明经常从 知-&gt;良知 的层面上讲</li>\n<li>良知的自知 自己对自己的领悟</li>\n<li>表达自知 通过行来表达</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><strong>知之真切笃实处既是行 行之明觉精察处既是知 知行功夫本不可离</strong><ul>\n<li>当对知的了解层度达到真切笃实处便是行 把知作为一个过程</li>\n<li>当行为达到明觉精察 一定是真实只是的直接表达</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>对所谓明阳“以知代行”说的批评<ul>\n<li>王阳明强调知识的过程必定是通过一个实践的过程体现的</li>\n<li>最终的实践才是知识价值获得实现的最后境界</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"第四课-格物致知：知识论域的实践转向\"><a href=\"#第四课-格物致知：知识论域的实践转向\" class=\"headerlink\" title=\"第四课 格物致知：知识论域的实践转向\"></a>第四课 格物致知：知识论域的实践转向</h2><ul>\n<li>“格物致知”问题的来源<ul>\n<li>来源于《大学》<ul>\n<li>三纲：大学之道 在明明德 在亲民 在止于至善</li>\n<li>八条目： 格物 致知 诚意 正心 修身 齐家 治国 平天下</li>\n<li>起点是：格物 致知</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>朱熹对“格物致知”的理解<ul>\n<li>接着二程夫子来讲<ul>\n<li>天下任何事物，宏观地看，有天理在 最高的一本之道</li>\n<li>任何事物有它的独特之理 分殊之理</li>\n<li>分殊之理是从一本之理中获得</li>\n<li>一本之理作为大一是完满的 分殊之理为小一也是完满的</li>\n<li>分殊之理的不断地“格”、还原 达到一定状态 才可能获得一本之理把握的前提</li>\n</ul>\n</li>\n<li>强调 格物致知是还原具体事物之理 既物而穷理</li>\n<li>格物是致知的前提</li>\n<li>理存在于具体事务当中</li>\n</ul>\n</li>\n<li>王阳明的“格物致知”之说<ul>\n<li>如果理在事物当中 那与我的诚意正心有何关系？</li>\n<li>物着事也 格者正也<ul>\n<li>格君心之非 -&gt; 正君心之非</li>\n<li>“物” 作为一个独立的个体存在</li>\n<li>“事” 体现了一个过程 与我这个主题相关</li>\n</ul>\n</li>\n<li>事物之理不在事物本身 在心中</li>\n<li>强调 我作为实践的主题 如何在事物当中正其心<ul>\n<li>“正” 标准， 是否合乎本心<ul>\n<li>合乎本心 既是 合乎正理</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>强调 格物和致知是统一的整体</li>\n<li>致知： 致良知<ul>\n<li>格物既是正心</li>\n<li>格物致知：致吾心之良知于事事物物 事事物物各得齐正</li>\n</ul>\n</li>\n<li>意之所在便是物 意在于事亲则事亲为一物</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"第五课-本体与主体性的自我建立\"><a href=\"#第五课-本体与主体性的自我建立\" class=\"headerlink\" title=\"第五课 本体与主体性的自我建立\"></a>第五课 本体与主体性的自我建立</h2><ul>\n<li>孟子的“良知良能”<ul>\n<li>人不学而能谓之良能 不学而知着谓之良知<ul>\n<li>凡人皆有恻隐、羞恶、是非、辞让之心 是不学而知的 是我原本就固有的</li>\n<li>恻隐之心 作为人之端 在人本身存在着固有性</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>张载对“德性”、“闻见”之知的区别<ul>\n<li>德性之知不源于见闻 <ul>\n<li>德行：天德良知 超经验的</li>\n<li>但是德性之知是要通过经验表达的</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>王阳明的“良知”说<ul>\n<li>正德十五年 平定朱宸濠之后结合自己的生活经验提出</li>\n<li>与前两位不近相同</li>\n<li>良知： 心之本体（存在本体、德行本体、理性本体）<ul>\n<li>是生活中经验知识活动之所以可能的根据</li>\n<li>是知识本身的本体 是理性的根据</li>\n<li>原本就能知是非 是心体自然</li>\n<li>原本就是至善 知善恶的 是德行之本</li>\n<li>天命之所谓性</li>\n</ul>\n</li>\n<li>正是因为良知的存在 我们才具备存在和德行的本质，以及获得和展现知识的能力</li>\n<li>心的良知是人作为主体的本质依据<ul>\n<li>唯有实现了自我建立的人才能称为主体</li>\n<li>通过个体内在的自觉 在自我中建立起来</li>\n</ul>\n</li>\n<li>良知是为人之本</li>\n<li>人的存在的本质 就是他的德行本质<ul>\n<li>生活中 人是如何表达自己？ <ul>\n<li>道德实践才能彰显个体的存在</li>\n</ul>\n</li>\n<li>道德的内在自觉<ul>\n<li>因为合乎本性的 所以才去做</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>每个个体存在性的表达 是要通过自觉的道德的建立来实现的<ul>\n<li>如此 个体的存在 才不仅仅是自然本身状态的 同时是合乎天道的</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>存在本体、德行本体、理性本体<ul>\n<li>理性本源 是一切只是活动之所以可能的根据 是经验生活中是非判断的根据<ul>\n<li>是非 不仅仅是对错之分 还有善恶之分</li>\n<li>泯灭良知 是指 良知没有获得表达和体现 在表现的层面上讲 泯灭良知</li>\n</ul>\n</li>\n<li>德行本源 是道德所以存在的依据</li>\n<li>存在本源 是人的存在本质和最高的天道本质实现同一 并且这种同一性是作为本源的</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"第六课-本心的自我开显与自我表达\"><a href=\"#第六课-本心的自我开显与自我表达\" class=\"headerlink\" title=\"第六课 本心的自我开显与自我表达\"></a>第六课 本心的自我开显与自我表达</h2><ul>\n<li>致良知的现实必要性 阳明对生命现状的忧虑<ul>\n<li>人们在利益的追逐当中丧失自我 遮蔽了自我的良知 所以要致良知</li>\n<li>孟子： 求放心 放逸之心</li>\n<li>安身立命的基础</li>\n<li>对与人道相违背的生活现象的反思和批评</li>\n</ul>\n</li>\n<li>致良知的双向展开<ul>\n<li>良知的“自知”、“自明”<ul>\n<li>呼唤自己的良知 良知才会以原本的状态出现</li>\n<li><strong>反思</strong> 对自我在生活中的观点、意识、行为进行思索、内省</li>\n<li>只有经过自我反思 我们的<strong>主体性才得以建立</strong></li>\n<li>用王阳明的话来讲 合乎良知叫”诚意“ 也既是”正心“</li>\n<li>”自知“、”自明“ 才能表达自我的主体性建立 必须通过自我实现</li>\n<li>如何对经验现象的实行确切无误的判断<ul>\n<li>有境才有心动 心动才会有善恶是非</li>\n<li>动念之际去为善去恶</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>“致吾心之良知于事事物物”<ul>\n<li>良知的自我展开 在事物的处理过程表现出来</li>\n<li>明明德于天下</li>\n<li>任何事物都应该在良知下进行 物得其正 我们存在性的自我表达</li>\n<li>身 心 意 知 物 融为一体</li>\n<li>人只有实践才能把主体的内在世界和客观世界连在一起</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>致良知于个体意义世界的宏观构建<ul>\n<li>对于物质的欲望 本能的具有扩张性 它具有向恶的转化的可能 欲本身即是越界</li>\n<li>孔子讲以礼来节制自我的情感<ul>\n<li>这种节制在道德上是好的 更符合公共生活</li>\n<li>良知的恰当表达是具有公共性的</li>\n</ul>\n</li>\n<li>在自我与他人的事物观察中 人们更多的是用私欲的权衡 而非对他人客观 对自己混沌<ul>\n<li>良知首先是在自我中呈现 随之才能对其他事物有正确的理解</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"第七课-心外无物：生命境界的无限圆融\"><a href=\"#第七课-心外无物：生命境界的无限圆融\" class=\"headerlink\" title=\"第七课 心外无物：生命境界的无限圆融\"></a>第七课 心外无物：生命境界的无限圆融</h2><ul>\n<li>“心”与“物”的关系<ul>\n<li>“物”是“事”，“事”是介入了主体活动过程的</li>\n<li>事物的两种存在状态： **“寂”与“显”</li>\n</ul>\n</li>\n</ul>\n<p>**<br>        * 山中之花自开自落 没看到花的时候 你和花同归于“寂”，当你看到时是“显”<br>        * <strong>“寂“并非无，而是事物存在的一种状态</strong><br>            * 是王阳明确认的事物的客观存在性<br>        * <strong>”显“ 当你看到花时 在你心中 一时分明起来</strong><br>            * <strong>看到 是”寂“到”显“的转换</strong><br>    * 心的本体的存在 原本是”寂“、是不动的，但却包含着向”显“转换的无限可能，反之亦然 这叫做”寂感神应“ 没前后之分<br>    * 看到花时 它由静转化为动，成为主题的对象，关系情景构成<br>        * 体用一源 现为无间 无前无后无中间<br>        * 任何事物的客观存在状态 只有在特定的情景中 客观物才以它原本的样式显现<br>    * 任何客观物 当它以一种纯粹的客观存在时 包含”寂“和”显“两种状态 只不过呈现给主题的状态不同<br>    * <strong>王阳明的讨论并不涉及 事物是否可以脱离人的主观意识而存在 也就是并不涉及唯心主义讨论的问题</strong></p>\n<ul>\n<li>“心外无物”作为一种生命境界<ul>\n<li>心不在焉 -&gt; 听而不闻 视而不见 食而不知其味</li>\n<li>“关心”<ul>\n<li>一个事物在成为我的对象之前 它的存在跟我是不“关心”的 它的存在对我是无意义的</li>\n<li>王阳明讲的一个真正的仁人是与天下事相关心的 是把世界万物容纳到个人的主体当中</li>\n</ul>\n</li>\n<li>致良知 通过主体的生活、道德实践 尽可能扩展我们的心灵世界 使一切万物都能够到达、进入的我的主体世界 如此我的心便是和天下万物相关 最后的圆融境界叫“无心外之物”</li>\n<li>做不到 可以<strong>心向往之</strong></li>\n<li>“心外无物” 是仁人的境界<ul>\n<li>把“物”作为个人主体的一部分</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>“心外无物”与主题价值世界的构建<ul>\n<li>个人主体世界的构建完全取决于我们主体自我的实践及其方式</li>\n<li>个人要尽可能扩充、表达我们的良知 努力进行生活实践 并将实践纳入个人的主体世界<ul>\n<li>我们的意义世界 便是在实践当中不断的建立和扩张<ul>\n<li>主体的世界和客观世界不断的链接起来后 个人的主体世界也越来越宏达</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>“心外无物”是生命的最高境界，是人生自我价值不断扩展和实现</li>\n</ul>\n</li>\n<li>（个人注记：你的主体世界便是你人生的价值。想到了精致的利己主义。利己没有什么错误，但致良知能够极大的丰富我们的主体世界，无论是从哪个角度的丰富，都会让其更加丰富多彩。即便我们的人生价值是丰富自己的体验或者收获更多的物质，那么致良知也是对其有很大的帮助的。比如丰富了对看待事物的视角，体验自然也就丰富了。如此来讲即便只谈利己也不必排斥“心外无物”。心向往之，实践前行。）</li>\n</ul>\n<h2 id=\"第八课-天泉证道“四句教”阳明学派的分化\"><a href=\"#第八课-天泉证道“四句教”阳明学派的分化\" class=\"headerlink\" title=\"第八课 天泉证道“四句教”阳明学派的分化\"></a>第八课 天泉证道“四句教”阳明学派的分化</h2><ul>\n<li>“天泉证道”的背景 “四句教”问题<ul>\n<li>“四句教” 仅出现在《传习录》下卷和年谱中 未出现在王阳明自己的作品中<ul>\n<li>无善无恶心之本</li>\n<li>有善有恶意之动</li>\n<li>知善知恶是良知</li>\n<li>为善去恶是格物</li>\n</ul>\n</li>\n<li>弟子钱德洪和王畿是在天泉桥向王阳明请教这四句话的意思的 所以叫做“天泉证道”</li>\n</ul>\n</li>\n<li>钱德洪关于“四句教”的理解<ul>\n<li>认为是王门宗旨 是究竟之说</li>\n<li>良知原本是无善无恶的 对圣人如此 但普通人不免有习心在 不免有私欲 所以 意之动就会有善有恶 于是要求我们在一念发动之动给克制住</li>\n<li>是非善恶良知本是知道的 所以要为善去恶</li>\n</ul>\n</li>\n<li>王畿(jī)（龙溪）关于“四句教”的理解<ul>\n<li>认为是权宜之说</li>\n<li>认为<ul>\n<li>无心之心则藏秘</li>\n<li>无意之意则应圆</li>\n<li>无知之知则体寂</li>\n<li>无物之物则用神</li>\n</ul>\n</li>\n<li>认为 心如果是无善无恶的 那么 意、知、物都应该是无善无恶的 不可能突然冒出来有善有恶的意</li>\n</ul>\n</li>\n<li>“四句教”与王学分化的关系<ul>\n<li>“天泉证道”，王阳明认为 人非利根和钝根之人<ul>\n<li>利根之人 聪慧 一点就透<ul>\n<li>一悟本体既是工夫</li>\n<li>便是王畿所讲</li>\n<li>但此般根基之人很少</li>\n</ul>\n</li>\n<li>钝根之人 愚笨 需要慢慢学慢慢习<ul>\n<li>对于普通人还是要讲为善去恶</li>\n<li>钱德洪之说</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>黄宗羲对王钱二人的评价<ul>\n<li>因其二人而风行 也因此二人而渐失其传</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>“四句教”的具体分析<ul>\n<li>无善无恶心之本<ul>\n<li>无善无恶是为至善 </li>\n<li>讲的是本心自身的实在的状态 是未发之中 是无法判断的<ul>\n<li>因为善恶是基于经验世界检验价值的相对判断</li>\n<li>而<strong>至善是超经验的 是绝对的价值原点 由此才能对事物进行判断</strong><ul>\n<li>比如称用于权衡他物 眼睛是无色的才可以分辨颜色 镜子本无一物才能照出来事物本身</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>有善有恶意之动<ul>\n<li>意 是心之动的主动状态 是有境，有原因的<ul>\n<li>所以是一种经验状态</li>\n<li>没有对物、境构成关系之前 本体归于本相之寂</li>\n<li>所以它一定会落于某个方面 才有善恶之分</li>\n<li>价值只能在经验的世界当中显现它自己</li>\n</ul>\n</li>\n<li>心之动合理的方面是讲 心之动是合乎本体 是合乎心本来状态的 所以这样的一动 在价值上会落于善的方面</li>\n</ul>\n</li>\n<li>知善知恶是良知<ul>\n<li>良知本身是自知自明 知善知恶的 心体向经验转换时 它是可以判断善恶的</li>\n</ul>\n</li>\n<li>为善去恶是格物<ul>\n<li>当良知判断出事物的善恶之后 人应该朝着善的方向去做</li>\n<li>而这个过程便是 诚意正心</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"第九课-心体的自我澄明与价值实现\"><a href=\"#第九课-心体的自我澄明与价值实现\" class=\"headerlink\" title=\"第九课 心体的自我澄明与价值实现\"></a>第九课 心体的自我澄明与价值实现</h2><ul>\n<li>四句教是否存在内在“逻辑”关系<ul>\n<li>不存在内在逻辑关系</li>\n<li>就四个不同层面来讲的</li>\n</ul>\n</li>\n<li>“良知现成”与思相解放<ul>\n<li>王龙溪一派虽偏离了王阳明的思想 但是却带来了思想了解放</li>\n<li>正因为人人都诉诸自己的良知 任何事物在经由良知的审慎之前都是值得怀疑的 所以它要求我们对生活进行审查 我们的价值也在这个过程中建立</li>\n<li>未经理性审查的生活是不值得过的 – 苏格拉底</li>\n<li>但是当我们过度强调良知的审查 就会变成自我的率性而为 陷入以意见为真理的谬误的状态</li>\n</ul>\n</li>\n<li>本体与工夫的关系<ul>\n<li>良知是心之本体 如何显现？ 如何到达？</li>\n<li>工夫 相当于方法论<ul>\n<li>钱德洪：为善去恶既是工夫 在事上磨炼<ul>\n<li>工夫总是相对于本体而言 并且总是相对于本体的开显而言的</li>\n</ul>\n</li>\n<li>王龙溪：工夫是需要的 但不需要为善去恶 不需要在事上磨炼<ul>\n<li>当下悟出无山无恶心之本 即本体工夫</li>\n<li>如果你真正明白这个道理 不需要那么复杂 良知现成</li>\n<li>现成既是本体也是工夫</li>\n<li>良知本顺 致之则逆 不需要致良知</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>王阳明还是非常强调事情的磨炼的</li>\n</ul>\n</li>\n<li>董平老师的观点<ul>\n<li>良知作为价值原点 是超经验的 在生活中的表达是有可能发生问题的</li>\n<li>心之动发为意 是有善有恶的</li>\n<li>生活中充满各种欲望 我们往往容易偏离自我的心灵指导</li>\n<li>所以反思是很重要的</li>\n<li>人需要了解到自我的良知是浩渺的可以容纳世间万物 可以判断世间一切美丑善恶 这样我们才能在天地间堂堂正正的做人</li>\n<li>王阳明遗言：此心光明 亦复何言<ul>\n<li>领会到这点 我们就能对生活稍微超然疏离一点 这样的行为能让我们的精神世界高尚一点</li>\n<li>这种超然和疏离是对欲望的疏离 对利益的看淡 使我们变得高尚</li>\n<li>使我们变得高尚的 不是我们的本能 是我们的德行、良知</li>\n<li>一个懂得致良知的人才会享有崇高的思想境界</li>\n</ul>\n</li>\n<li>客观事物是脱离自我存在的 但只有进入我的世界 才会对我有意义</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"我的理解\"><a href=\"#我的理解\" class=\"headerlink\" title=\"我的理解\"></a>我的理解</h2><ul>\n<li>心学里的良知和禅学里边讲到的对绝对价值的追求很相似。<ul>\n<li>林木大拙讲到禅是超越逻辑的。相对来讲，心学的良知学也是超经验范畴的，讲的也是绝对价值。</li>\n<li>另一方面，禅讲的平常心也对应的“为善去恶”的观念在里边。</li>\n</ul>\n</li>\n<li>而“知行合一”和禅学也都一直在强调思维的一贯性。</li>\n</ul>\n<h2 id=\"注记：\"><a href=\"#注记：\" class=\"headerlink\" title=\"注记：\"></a>注记：</h2><ul>\n<li>以上皆为董平老师的观点 由于他提到“这是我个人的观点”的次数太多，我基本全给省略了。所以作为对阳明心学的一个思考角度来看。在今后读过《传习录》、《大学问》等王阳明的著作之后对比来看更有收获。</li>\n<li>课程地址: <a href=\"http://open.163.com/special/cuvocw/wangyangming.html\">http://open.163.com/special/cuvocw/wangyangming.html</a></li>\n</ul>\n"},{"layout":"post","title":"《禅学入门》 林木大拙 读书笔记","date":"2017-09-12T04:00:00.000Z","description":"禅学入门 林木大拙 读书笔记","keywords":"禅学, 林木大拙","_content":"\n## 绪论\n\n* 所谓原始佛教，是一粒种子，从这粒种子注定要生出将进一步生长的东方佛教。\n* 在中国、日本发展的佛教诸派中，有一个特殊的僧人集团，它主张直接从佛教创始人那里接受佛教的精髓和精神。它不依靠任何秘密文字，也没有任何神秘仪式，在佛教诸派中占据了最显赫的地位。这不仅是由于它在历史上的重要性，而且由于它是最具独创性的。它倡导的方法是激励人心的。在学术上称它为佛心宗，通常称为禅（梵语 dhyāna）。\n* 禅最大限度地强调了个人经验是必不可少的。没有这种经验，任何深远的能力即使是有用的，也不能有效地被掌握。\n* 佛教徒不承认超自然的作用。禅的精神训练方法是实际的、系统的。\n* 神秘主义性质是拒绝逻辑剖析，而逻辑性又是西方思想最为显著的特征之一。东方的推理方法是综合的，与其对每个事物一一分析，宁愿在直觉中把握它的全体。\n* 佛教精神为了实际的人生修行，舍弃了高高在上的哲学上层结构，其结果就不能不变成禅。\n\n## 禅是什么？\n\n* 禅是人的精神，信奉人的内在的纯洁与善。\n* 禅把依靠洞察达到心的本性，发现心本身，和以自心为主，作为目的。达到此心或精神的真性是禅宗的根本目的。\n    * 个人注记：有点像王阳明知行合一的最高境界\n* 禅强调不受任何拘束，脱离一切非自然的妨害。\n* 禅的基本思想是与我们心内的活动接触，它不依靠任何外部的附加物，尽可能选择最直接的道路。\n* 由于禅只认识日常生活本身的事实，因此它就能在最平凡、最平稳的普通人的生活中表现出来。\n* 但向己求 勿从它觅。\n\n## 禅是虚无主义吗？\n\n* “所谓中道，无中边亦无二边。外敷色声，偏于一边，内生妄念，又偏于另一边。此两边皆无时，中边亦无，即名中道”\n* 禅从它的性质上极为自然地主张“此亦非，彼亦非，一切皆非”。 没有否定，没有肯定，只有简明的事实，**纯粹的经验**，以及我们的实在和思想的基础本身。\n    * 个人注记：纯粹 超越了是非 也超越了虚无的否定一切\n* 在禅中，有某种自我肯定。而且它是自由的，绝对的，不知界限为何物，拒绝抽象的处理方法。\n* 禅的否定不一定是逻辑意义上的否定，肯定也是如此。禅的理解以经验为第一，不能被思想的人为系统法则，“然”、“否”之类常常牵强附会的认识论公式等等所束缚。\n* 不除去“彼此”、“我物”、“汝物”这类最后意识，任何人也不能彻底把握禅，并且“不能见古人来”。\n* 禅的目标是在个人的日常生活现实中，实现超越是非矛盾的统一。\n\n## 非逻辑的禅\n\n* 禅对待的是事实，不是逻辑上和语言上的偏颇的、不完全的表现。\n* 禅经常将心比喻为没有阴翳的明镜。因此跟着禅回到单纯，就要使这明镜经常保持光洁明亮，使来到它面前的东西不依靠任何帮助原原本本地映照在其中。\n* 禅认为我们是语言和逻辑的过于驯服的奴隶。\n* 如果我们希望找到知道某物价值的方法，找到通向精神幸福的道路，就只有努力于断然摆脱一切条件，看看我们是否能够找到既能发现健全的世界，又能内省地理解人生的观察点。\n* “手拿锄头，但事实却没拿” 人们往往认为，逻辑就是人生，逻辑之外没有人生的意义，人们只能顺从它。而事实是大多数人的人生观，都是破坏“思维法则”的。\n    * 个人注记：以为自己掌控着逻辑，实则是被其奴役的。所以手里什么都没有\n* 客观世界的逻辑学和伦理学有着认为努力和操作的痕迹，有着自觉地意识，是不纯的。禅厌恶不纯。\n* 人生是艺术，而且像真正的艺术那样，必须忘却自己。\n* 禅要求发自内心的生活，要求不受规范束缚，各自创造自己的规范。\n\n## 大肯定的禅\n\n* 精神不断地呼唤自由，通过达到没有否定与肯定的对立差别的更高的肯定形态，就可以很容易地得到这种自由。禅就在这种更高的肯定中。\n* 听从我们内在生命的要求，禅提倡任何对立也不能存在的绝对的领域。\n* 禅师们努力除掉弟子们与生俱来所有的立足点，而代之以完全不是立足点的立足点。\n* 禅的训练方法是让人一下陷入两难境地。我们必须不运用逻辑，依靠更高迈的心灵，自己找到从这种两难境地中脱身的办法。\n    * 比如瓶中养鹅的故事\n* 人生是事实，任何说明也不需要，也不能切中肯綮(qìng)。说明就是证明。难道我们活着这件事还需要什么证明吗？活着，仅仅是活着，还不够吗？我们在活着，在肯定，在这里就是纯粹的禅，赤裸裸的禅。\n* 模仿就是奴隶，不要被文字所束缚，必须抓住的是精神。大肯定就活在精神中。然而，精神在何处？这就必须向每日的经验中寻求。在哪里，有我们需要的充足的证据。\n\n## 实际的禅\n\n* “平常心是道” 自己有着沉稳自信的存在，就是禅的真理。\n* 禅的要旨在于捕捉流动的生命。\n* 理解禅要避免抽象、表现和华丽的辞藻。\n* 禅籍中有很多古怪的对“如何是禅”的回答，看似不沾边。然而重要的是，要领会禅，必须深入参透禅师们的内心状态。比如“看，水出高源”，“莫言语”，“此处四面皆山”等 皆为自然的描述，没有高深的意思在里边。\n    * 个人注记：我的理解是生活的每个细微之处都有意识的到往，不可以追求，也不刻意忽视，以平常心视之既是禅。\n        * 超越是非、对错？\n* 禅是自然的，是不能人为制造的，是生命本身的表现，并且是创造性的，这些都是禅的本质特征。因此要抓住禅的真正核心，就要时常注意不为表面的标志所迷惑。\n* “心无形相，非离言语，非不离言语。心常湛然，应用自在。”\n* 禅并非是泛神论，并没有把山川草木看做泛神的表象\n* 禅也不是自然主义或自由主义\n    * 自然主义听从人的自然倾向，不追究它的起源和价值，是一种盲从。\n\n## 悟\n\n* 禅修行的目的在于获得观察事物的新见解。\n* 禅的生活是从这种获得新见解的“悟”开始的。\n* 悟，可以定义为与知或逻辑的理解相对的直觉的洞察。\n* 当人的心在悟中成熟起来时，它们在各处自行降临。\n* 悟的所有原因、条件在内心，只等待着成熟的时机。一旦内心做好准备，世间万物都可使自己直接返回到自己的根源所在，也即是**真我的觉醒**。\n* 禅与思考无关，悟是一种内在的知觉 ---- 但不是对某个单一物的知觉，而是对存在的根本事实的知觉。悟的最终目的地是其自身，除其自身外任何目的都不存在。\n* 悟的心的开启研究的几个要点：\n    1. 悟不是由强烈思念而产生的某种假想状态。它是对物的看法获得的新见解。禅的训练是将意识构建的方法论一举扫荡，重新得到心的整体。\n    2. 悟指向未曾梦到的真理的崭新意识。它是在知的或者表现的事类多重积累后，忽然产生的一种心的激动或爆发。\n    3. 悟是禅存在的理由，没有它，禅就不成其为禅。但悟本身没有方法论。\n    4. 禅必须有至今未曾想过的知觉的独立，有从全新的角度观察旧有事物的新意识的觉醒。\n        1. 禅那，一般认为是指向某种固定思想的一种冥想或静思，并非是禅。\n    5. 禅要求的是绝对自由，连神也要脱离的独立。”应无所住，而生其心“。\n        1. 不同于被神秘主义称为神的东西。因为它有明显的目的物追求，而且得到神时，就要拒绝非神。\n    6. 禅是健全的心理状态。\n\n## 公案\n\n* 禅的独到之处在于公案和坐禅的存在。\n* 坐禅，梵语的禅那，是佛教训练中的三学，即尸罗（戒）、禅那（静虑）、般若（智慧）中的一种。佛教善徒用其全部的诚心诚意恪守佛的垂训，通晓将自己放纵的激情完全抑制住的方法，最后则期望得到足以领会高深的佛教哲理的一切复杂逻辑的智慧。\n* 禅那有“知觉”、“反省”、“凝心”等意义，把精神集中于思想的唯一目的物上。因此，从事禅的修行，是在将外界一切琐事调整为最佳状态时来支配意识，在这种状态中，精神逐渐能够超越于它的烦恼动乱之上。\n* 禅那是指保持心的安静的一般方法，Samādhi（三昧）用以表示作为禅那修行结果所得的心的状态。\n* 禅修行的坐禅与一般佛教徒实行的坐禅，在心的目的上是不同的。在禅中，禅那或坐禅是用以达到解明公案的手段，在禅中，禅那本身不是目的。要了解公案，如果没有彻底的坐禅修行，这种深远的精神真理就不能牢牢扎根于禅学徒的心中。\n* 公案在字面上的意义是指公文或权威法规，是流行于宋代末期的语言。现在指古代禅师的逸话，或是禅师与弟子间的问答，以及禅师提出的命题、提问，禅运用它作为开启人心，达到禅的真理的方法。\n* 虽然心依靠自身也能长大，但人不能无休止等待，无论对善对恶。为了达到自身的目的，总喜欢干涉。在得大于失的情况下，人们欢迎别人的干涉。把它成为改良或进步。因此在纯粹、自然、本质性的禅中导入公案体系，虽是对禅的冒渎，但在某种意义上也是一种进步。\n* 禅师们很清楚，禅如果不是产生于人的内在要求，就不是本然纯粹病充满创造活力的，而公案的手段和技术却在相当程度上是人工的产物。但是，在很难并很少能得到真物本身的情况下，既是是类似物，也是天之恩赐。\n* 现在的学生确实常常接受必要之外、有用之外的帮助。这种软弱教育的缺少，才使过去的禅师们成为具有更为雄大气魄的人物。\n* 心在收到某种束缚、失去自由、听不到声音的情况下，公案只能被看做受限制并被分割的东西。在心从束缚中被解放出来之前，人是不能在此世安住的。\n* 赵州：”庭前柏树子“。柏树子永远是柏树子本身，与泛神论或其他的”论“没有任何关系。人们大概会认为，努力通过逻辑的锁链了解其中包含的意义，就可以解开这一难题。然而，禅已远离我们在三千里之外。公案就象在逻辑分析所不能达到的我们心灵的最深处培育起来那样而得以运用。\n* 公案一般是这段了通向合理性的一切道路。也就是说，当我们几次三番向禅师提出自己的见解（用术语来说叫做”参禅“）时，必须宣告自己的知的摸索已经走入穷途，而这正是禅的研究的真正的出发点。\n* 为了帮助一般读者理解禅，用简便的语言来说，在我们心中，在相对构造的意识的”域外“，存在着未知的秘密。将它成为潜意识或超意识，是不妥的。这只是便利之举。事实上，”域外“也好，潜意识、超意识等等也好，都不存在。**心是全一，不能将其分割。**\n    * 个人注记： 王阳明的心外无物也提到了心作为一个整体，不可分割。\n* 耳司听，目司明，这是理所当然的。但得到悟的，却是整体的心，或者应当说是心之深处之心。当然，它只是知觉的一种行为，但它是最高级的知觉。\n* 曾被想象为横亘于远方的原野，就是我们每日走过的原野。\n* 禅必须除去一切带有经过、组织、训练色彩的内容，而止于单纯绝对的经验。\n\n## 禅堂与僧侣生活\n\n* 在禅堂中，通常被认为是男子工作的劳动，特别成为禅僧生活的主要部分。劳动的大部分是手工劳作，主要是扫除、洗濯(zhào)、烧饭、拾柴，或者到远近村落去化缘。\n* 大多数宗教隐者的苦行，并不是身心一致的活动。他们想的是身体被心所截断，或者心被身体所截断，好像身体是身体、心是心似的，而忘了这种截断仅仅存在于观念中或假说中。禅修行的目的就是不承认这种最基本的区分，时常注意避免只强调身心某一方面的习惯。\n* 在此世上诱发不幸的最为常见的原因，就是对所有欲的追求。然而，也不能把禁欲主义当做禅僧生活的理想。僧侣生活的中心思想，是要求对被给予的物加以最好的利用。并非表面所看到的，对抑制或超脱教义的鼓吹。\n* 禅堂生活的基本原则是“依靠行为的生活”。所以禅僧们都是健康地生活着的、使劲干着粗苯工作的普通人。 他们很快活，富于诙谐，并互相帮助。\n* 禅院的规则极为严厉，是用以打消我们心中固执的傲慢，让我们饮净谦恭杯中的最后一滴酒。\n* 所谓参禅，就是弟子到师傅那里讲述对于公案的意见，接受师傅的批评检查。\n* 为了让弟子们达到最深的自我，真正获得禅的知识，禅师们往往诉诸于这种咋看起来不近人情的方法。\n* 僧侣的生命必须从内至外，于知识完全合一。\n* **隐德**是指，在对待物时要尽其所能，充分实现物本身的德。依旧是说它意味着，对被给予的所有东西，要充分完全地、经济地加以利用。\n* 放弃一切索报和自我克制之心，为善而行善。云飘走了，天空还象原来那样晴朗。\n* “竹影扫阶尘不动，月穿潭底水无痕。” 不管怎么说，禅归根到底只是个人的内在经验。\n\n","source":"_posts/2017-09-12-chan-xue-ru-men-lin-mu-da-zhuo.md","raw":"---\nlayout: post\ntitle: 《禅学入门》 林木大拙 读书笔记\ncategory: 阅读笔记\ntags: [笔记]\ndate: 2017-09-12\ndescription: 禅学入门 林木大拙 读书笔记\nkeywords: 禅学, 林木大拙\n---\n\n## 绪论\n\n* 所谓原始佛教，是一粒种子，从这粒种子注定要生出将进一步生长的东方佛教。\n* 在中国、日本发展的佛教诸派中，有一个特殊的僧人集团，它主张直接从佛教创始人那里接受佛教的精髓和精神。它不依靠任何秘密文字，也没有任何神秘仪式，在佛教诸派中占据了最显赫的地位。这不仅是由于它在历史上的重要性，而且由于它是最具独创性的。它倡导的方法是激励人心的。在学术上称它为佛心宗，通常称为禅（梵语 dhyāna）。\n* 禅最大限度地强调了个人经验是必不可少的。没有这种经验，任何深远的能力即使是有用的，也不能有效地被掌握。\n* 佛教徒不承认超自然的作用。禅的精神训练方法是实际的、系统的。\n* 神秘主义性质是拒绝逻辑剖析，而逻辑性又是西方思想最为显著的特征之一。东方的推理方法是综合的，与其对每个事物一一分析，宁愿在直觉中把握它的全体。\n* 佛教精神为了实际的人生修行，舍弃了高高在上的哲学上层结构，其结果就不能不变成禅。\n\n## 禅是什么？\n\n* 禅是人的精神，信奉人的内在的纯洁与善。\n* 禅把依靠洞察达到心的本性，发现心本身，和以自心为主，作为目的。达到此心或精神的真性是禅宗的根本目的。\n    * 个人注记：有点像王阳明知行合一的最高境界\n* 禅强调不受任何拘束，脱离一切非自然的妨害。\n* 禅的基本思想是与我们心内的活动接触，它不依靠任何外部的附加物，尽可能选择最直接的道路。\n* 由于禅只认识日常生活本身的事实，因此它就能在最平凡、最平稳的普通人的生活中表现出来。\n* 但向己求 勿从它觅。\n\n## 禅是虚无主义吗？\n\n* “所谓中道，无中边亦无二边。外敷色声，偏于一边，内生妄念，又偏于另一边。此两边皆无时，中边亦无，即名中道”\n* 禅从它的性质上极为自然地主张“此亦非，彼亦非，一切皆非”。 没有否定，没有肯定，只有简明的事实，**纯粹的经验**，以及我们的实在和思想的基础本身。\n    * 个人注记：纯粹 超越了是非 也超越了虚无的否定一切\n* 在禅中，有某种自我肯定。而且它是自由的，绝对的，不知界限为何物，拒绝抽象的处理方法。\n* 禅的否定不一定是逻辑意义上的否定，肯定也是如此。禅的理解以经验为第一，不能被思想的人为系统法则，“然”、“否”之类常常牵强附会的认识论公式等等所束缚。\n* 不除去“彼此”、“我物”、“汝物”这类最后意识，任何人也不能彻底把握禅，并且“不能见古人来”。\n* 禅的目标是在个人的日常生活现实中，实现超越是非矛盾的统一。\n\n## 非逻辑的禅\n\n* 禅对待的是事实，不是逻辑上和语言上的偏颇的、不完全的表现。\n* 禅经常将心比喻为没有阴翳的明镜。因此跟着禅回到单纯，就要使这明镜经常保持光洁明亮，使来到它面前的东西不依靠任何帮助原原本本地映照在其中。\n* 禅认为我们是语言和逻辑的过于驯服的奴隶。\n* 如果我们希望找到知道某物价值的方法，找到通向精神幸福的道路，就只有努力于断然摆脱一切条件，看看我们是否能够找到既能发现健全的世界，又能内省地理解人生的观察点。\n* “手拿锄头，但事实却没拿” 人们往往认为，逻辑就是人生，逻辑之外没有人生的意义，人们只能顺从它。而事实是大多数人的人生观，都是破坏“思维法则”的。\n    * 个人注记：以为自己掌控着逻辑，实则是被其奴役的。所以手里什么都没有\n* 客观世界的逻辑学和伦理学有着认为努力和操作的痕迹，有着自觉地意识，是不纯的。禅厌恶不纯。\n* 人生是艺术，而且像真正的艺术那样，必须忘却自己。\n* 禅要求发自内心的生活，要求不受规范束缚，各自创造自己的规范。\n\n## 大肯定的禅\n\n* 精神不断地呼唤自由，通过达到没有否定与肯定的对立差别的更高的肯定形态，就可以很容易地得到这种自由。禅就在这种更高的肯定中。\n* 听从我们内在生命的要求，禅提倡任何对立也不能存在的绝对的领域。\n* 禅师们努力除掉弟子们与生俱来所有的立足点，而代之以完全不是立足点的立足点。\n* 禅的训练方法是让人一下陷入两难境地。我们必须不运用逻辑，依靠更高迈的心灵，自己找到从这种两难境地中脱身的办法。\n    * 比如瓶中养鹅的故事\n* 人生是事实，任何说明也不需要，也不能切中肯綮(qìng)。说明就是证明。难道我们活着这件事还需要什么证明吗？活着，仅仅是活着，还不够吗？我们在活着，在肯定，在这里就是纯粹的禅，赤裸裸的禅。\n* 模仿就是奴隶，不要被文字所束缚，必须抓住的是精神。大肯定就活在精神中。然而，精神在何处？这就必须向每日的经验中寻求。在哪里，有我们需要的充足的证据。\n\n## 实际的禅\n\n* “平常心是道” 自己有着沉稳自信的存在，就是禅的真理。\n* 禅的要旨在于捕捉流动的生命。\n* 理解禅要避免抽象、表现和华丽的辞藻。\n* 禅籍中有很多古怪的对“如何是禅”的回答，看似不沾边。然而重要的是，要领会禅，必须深入参透禅师们的内心状态。比如“看，水出高源”，“莫言语”，“此处四面皆山”等 皆为自然的描述，没有高深的意思在里边。\n    * 个人注记：我的理解是生活的每个细微之处都有意识的到往，不可以追求，也不刻意忽视，以平常心视之既是禅。\n        * 超越是非、对错？\n* 禅是自然的，是不能人为制造的，是生命本身的表现，并且是创造性的，这些都是禅的本质特征。因此要抓住禅的真正核心，就要时常注意不为表面的标志所迷惑。\n* “心无形相，非离言语，非不离言语。心常湛然，应用自在。”\n* 禅并非是泛神论，并没有把山川草木看做泛神的表象\n* 禅也不是自然主义或自由主义\n    * 自然主义听从人的自然倾向，不追究它的起源和价值，是一种盲从。\n\n## 悟\n\n* 禅修行的目的在于获得观察事物的新见解。\n* 禅的生活是从这种获得新见解的“悟”开始的。\n* 悟，可以定义为与知或逻辑的理解相对的直觉的洞察。\n* 当人的心在悟中成熟起来时，它们在各处自行降临。\n* 悟的所有原因、条件在内心，只等待着成熟的时机。一旦内心做好准备，世间万物都可使自己直接返回到自己的根源所在，也即是**真我的觉醒**。\n* 禅与思考无关，悟是一种内在的知觉 ---- 但不是对某个单一物的知觉，而是对存在的根本事实的知觉。悟的最终目的地是其自身，除其自身外任何目的都不存在。\n* 悟的心的开启研究的几个要点：\n    1. 悟不是由强烈思念而产生的某种假想状态。它是对物的看法获得的新见解。禅的训练是将意识构建的方法论一举扫荡，重新得到心的整体。\n    2. 悟指向未曾梦到的真理的崭新意识。它是在知的或者表现的事类多重积累后，忽然产生的一种心的激动或爆发。\n    3. 悟是禅存在的理由，没有它，禅就不成其为禅。但悟本身没有方法论。\n    4. 禅必须有至今未曾想过的知觉的独立，有从全新的角度观察旧有事物的新意识的觉醒。\n        1. 禅那，一般认为是指向某种固定思想的一种冥想或静思，并非是禅。\n    5. 禅要求的是绝对自由，连神也要脱离的独立。”应无所住，而生其心“。\n        1. 不同于被神秘主义称为神的东西。因为它有明显的目的物追求，而且得到神时，就要拒绝非神。\n    6. 禅是健全的心理状态。\n\n## 公案\n\n* 禅的独到之处在于公案和坐禅的存在。\n* 坐禅，梵语的禅那，是佛教训练中的三学，即尸罗（戒）、禅那（静虑）、般若（智慧）中的一种。佛教善徒用其全部的诚心诚意恪守佛的垂训，通晓将自己放纵的激情完全抑制住的方法，最后则期望得到足以领会高深的佛教哲理的一切复杂逻辑的智慧。\n* 禅那有“知觉”、“反省”、“凝心”等意义，把精神集中于思想的唯一目的物上。因此，从事禅的修行，是在将外界一切琐事调整为最佳状态时来支配意识，在这种状态中，精神逐渐能够超越于它的烦恼动乱之上。\n* 禅那是指保持心的安静的一般方法，Samādhi（三昧）用以表示作为禅那修行结果所得的心的状态。\n* 禅修行的坐禅与一般佛教徒实行的坐禅，在心的目的上是不同的。在禅中，禅那或坐禅是用以达到解明公案的手段，在禅中，禅那本身不是目的。要了解公案，如果没有彻底的坐禅修行，这种深远的精神真理就不能牢牢扎根于禅学徒的心中。\n* 公案在字面上的意义是指公文或权威法规，是流行于宋代末期的语言。现在指古代禅师的逸话，或是禅师与弟子间的问答，以及禅师提出的命题、提问，禅运用它作为开启人心，达到禅的真理的方法。\n* 虽然心依靠自身也能长大，但人不能无休止等待，无论对善对恶。为了达到自身的目的，总喜欢干涉。在得大于失的情况下，人们欢迎别人的干涉。把它成为改良或进步。因此在纯粹、自然、本质性的禅中导入公案体系，虽是对禅的冒渎，但在某种意义上也是一种进步。\n* 禅师们很清楚，禅如果不是产生于人的内在要求，就不是本然纯粹病充满创造活力的，而公案的手段和技术却在相当程度上是人工的产物。但是，在很难并很少能得到真物本身的情况下，既是是类似物，也是天之恩赐。\n* 现在的学生确实常常接受必要之外、有用之外的帮助。这种软弱教育的缺少，才使过去的禅师们成为具有更为雄大气魄的人物。\n* 心在收到某种束缚、失去自由、听不到声音的情况下，公案只能被看做受限制并被分割的东西。在心从束缚中被解放出来之前，人是不能在此世安住的。\n* 赵州：”庭前柏树子“。柏树子永远是柏树子本身，与泛神论或其他的”论“没有任何关系。人们大概会认为，努力通过逻辑的锁链了解其中包含的意义，就可以解开这一难题。然而，禅已远离我们在三千里之外。公案就象在逻辑分析所不能达到的我们心灵的最深处培育起来那样而得以运用。\n* 公案一般是这段了通向合理性的一切道路。也就是说，当我们几次三番向禅师提出自己的见解（用术语来说叫做”参禅“）时，必须宣告自己的知的摸索已经走入穷途，而这正是禅的研究的真正的出发点。\n* 为了帮助一般读者理解禅，用简便的语言来说，在我们心中，在相对构造的意识的”域外“，存在着未知的秘密。将它成为潜意识或超意识，是不妥的。这只是便利之举。事实上，”域外“也好，潜意识、超意识等等也好，都不存在。**心是全一，不能将其分割。**\n    * 个人注记： 王阳明的心外无物也提到了心作为一个整体，不可分割。\n* 耳司听，目司明，这是理所当然的。但得到悟的，却是整体的心，或者应当说是心之深处之心。当然，它只是知觉的一种行为，但它是最高级的知觉。\n* 曾被想象为横亘于远方的原野，就是我们每日走过的原野。\n* 禅必须除去一切带有经过、组织、训练色彩的内容，而止于单纯绝对的经验。\n\n## 禅堂与僧侣生活\n\n* 在禅堂中，通常被认为是男子工作的劳动，特别成为禅僧生活的主要部分。劳动的大部分是手工劳作，主要是扫除、洗濯(zhào)、烧饭、拾柴，或者到远近村落去化缘。\n* 大多数宗教隐者的苦行，并不是身心一致的活动。他们想的是身体被心所截断，或者心被身体所截断，好像身体是身体、心是心似的，而忘了这种截断仅仅存在于观念中或假说中。禅修行的目的就是不承认这种最基本的区分，时常注意避免只强调身心某一方面的习惯。\n* 在此世上诱发不幸的最为常见的原因，就是对所有欲的追求。然而，也不能把禁欲主义当做禅僧生活的理想。僧侣生活的中心思想，是要求对被给予的物加以最好的利用。并非表面所看到的，对抑制或超脱教义的鼓吹。\n* 禅堂生活的基本原则是“依靠行为的生活”。所以禅僧们都是健康地生活着的、使劲干着粗苯工作的普通人。 他们很快活，富于诙谐，并互相帮助。\n* 禅院的规则极为严厉，是用以打消我们心中固执的傲慢，让我们饮净谦恭杯中的最后一滴酒。\n* 所谓参禅，就是弟子到师傅那里讲述对于公案的意见，接受师傅的批评检查。\n* 为了让弟子们达到最深的自我，真正获得禅的知识，禅师们往往诉诸于这种咋看起来不近人情的方法。\n* 僧侣的生命必须从内至外，于知识完全合一。\n* **隐德**是指，在对待物时要尽其所能，充分实现物本身的德。依旧是说它意味着，对被给予的所有东西，要充分完全地、经济地加以利用。\n* 放弃一切索报和自我克制之心，为善而行善。云飘走了，天空还象原来那样晴朗。\n* “竹影扫阶尘不动，月穿潭底水无痕。” 不管怎么说，禅归根到底只是个人的内在经验。\n\n","slug":"2017-09-12-chan-xue-ru-men-lin-mu-da-zhuo","published":1,"updated":"2022-02-12T20:53:10.508Z","comments":1,"photos":[],"link":"","_id":"ckzkc92xk0029oqox2uqu5iwt","content":"<h2 id=\"绪论\"><a href=\"#绪论\" class=\"headerlink\" title=\"绪论\"></a>绪论</h2><ul>\n<li>所谓原始佛教，是一粒种子，从这粒种子注定要生出将进一步生长的东方佛教。</li>\n<li>在中国、日本发展的佛教诸派中，有一个特殊的僧人集团，它主张直接从佛教创始人那里接受佛教的精髓和精神。它不依靠任何秘密文字，也没有任何神秘仪式，在佛教诸派中占据了最显赫的地位。这不仅是由于它在历史上的重要性，而且由于它是最具独创性的。它倡导的方法是激励人心的。在学术上称它为佛心宗，通常称为禅（梵语 dhyāna）。</li>\n<li>禅最大限度地强调了个人经验是必不可少的。没有这种经验，任何深远的能力即使是有用的，也不能有效地被掌握。</li>\n<li>佛教徒不承认超自然的作用。禅的精神训练方法是实际的、系统的。</li>\n<li>神秘主义性质是拒绝逻辑剖析，而逻辑性又是西方思想最为显著的特征之一。东方的推理方法是综合的，与其对每个事物一一分析，宁愿在直觉中把握它的全体。</li>\n<li>佛教精神为了实际的人生修行，舍弃了高高在上的哲学上层结构，其结果就不能不变成禅。</li>\n</ul>\n<h2 id=\"禅是什么？\"><a href=\"#禅是什么？\" class=\"headerlink\" title=\"禅是什么？\"></a>禅是什么？</h2><ul>\n<li>禅是人的精神，信奉人的内在的纯洁与善。</li>\n<li>禅把依靠洞察达到心的本性，发现心本身，和以自心为主，作为目的。达到此心或精神的真性是禅宗的根本目的。<ul>\n<li>个人注记：有点像王阳明知行合一的最高境界</li>\n</ul>\n</li>\n<li>禅强调不受任何拘束，脱离一切非自然的妨害。</li>\n<li>禅的基本思想是与我们心内的活动接触，它不依靠任何外部的附加物，尽可能选择最直接的道路。</li>\n<li>由于禅只认识日常生活本身的事实，因此它就能在最平凡、最平稳的普通人的生活中表现出来。</li>\n<li>但向己求 勿从它觅。</li>\n</ul>\n<h2 id=\"禅是虚无主义吗？\"><a href=\"#禅是虚无主义吗？\" class=\"headerlink\" title=\"禅是虚无主义吗？\"></a>禅是虚无主义吗？</h2><ul>\n<li>“所谓中道，无中边亦无二边。外敷色声，偏于一边，内生妄念，又偏于另一边。此两边皆无时，中边亦无，即名中道”</li>\n<li>禅从它的性质上极为自然地主张“此亦非，彼亦非，一切皆非”。 没有否定，没有肯定，只有简明的事实，<strong>纯粹的经验</strong>，以及我们的实在和思想的基础本身。<ul>\n<li>个人注记：纯粹 超越了是非 也超越了虚无的否定一切</li>\n</ul>\n</li>\n<li>在禅中，有某种自我肯定。而且它是自由的，绝对的，不知界限为何物，拒绝抽象的处理方法。</li>\n<li>禅的否定不一定是逻辑意义上的否定，肯定也是如此。禅的理解以经验为第一，不能被思想的人为系统法则，“然”、“否”之类常常牵强附会的认识论公式等等所束缚。</li>\n<li>不除去“彼此”、“我物”、“汝物”这类最后意识，任何人也不能彻底把握禅，并且“不能见古人来”。</li>\n<li>禅的目标是在个人的日常生活现实中，实现超越是非矛盾的统一。</li>\n</ul>\n<h2 id=\"非逻辑的禅\"><a href=\"#非逻辑的禅\" class=\"headerlink\" title=\"非逻辑的禅\"></a>非逻辑的禅</h2><ul>\n<li>禅对待的是事实，不是逻辑上和语言上的偏颇的、不完全的表现。</li>\n<li>禅经常将心比喻为没有阴翳的明镜。因此跟着禅回到单纯，就要使这明镜经常保持光洁明亮，使来到它面前的东西不依靠任何帮助原原本本地映照在其中。</li>\n<li>禅认为我们是语言和逻辑的过于驯服的奴隶。</li>\n<li>如果我们希望找到知道某物价值的方法，找到通向精神幸福的道路，就只有努力于断然摆脱一切条件，看看我们是否能够找到既能发现健全的世界，又能内省地理解人生的观察点。</li>\n<li>“手拿锄头，但事实却没拿” 人们往往认为，逻辑就是人生，逻辑之外没有人生的意义，人们只能顺从它。而事实是大多数人的人生观，都是破坏“思维法则”的。<ul>\n<li>个人注记：以为自己掌控着逻辑，实则是被其奴役的。所以手里什么都没有</li>\n</ul>\n</li>\n<li>客观世界的逻辑学和伦理学有着认为努力和操作的痕迹，有着自觉地意识，是不纯的。禅厌恶不纯。</li>\n<li>人生是艺术，而且像真正的艺术那样，必须忘却自己。</li>\n<li>禅要求发自内心的生活，要求不受规范束缚，各自创造自己的规范。</li>\n</ul>\n<h2 id=\"大肯定的禅\"><a href=\"#大肯定的禅\" class=\"headerlink\" title=\"大肯定的禅\"></a>大肯定的禅</h2><ul>\n<li>精神不断地呼唤自由，通过达到没有否定与肯定的对立差别的更高的肯定形态，就可以很容易地得到这种自由。禅就在这种更高的肯定中。</li>\n<li>听从我们内在生命的要求，禅提倡任何对立也不能存在的绝对的领域。</li>\n<li>禅师们努力除掉弟子们与生俱来所有的立足点，而代之以完全不是立足点的立足点。</li>\n<li>禅的训练方法是让人一下陷入两难境地。我们必须不运用逻辑，依靠更高迈的心灵，自己找到从这种两难境地中脱身的办法。<ul>\n<li>比如瓶中养鹅的故事</li>\n</ul>\n</li>\n<li>人生是事实，任何说明也不需要，也不能切中肯綮(qìng)。说明就是证明。难道我们活着这件事还需要什么证明吗？活着，仅仅是活着，还不够吗？我们在活着，在肯定，在这里就是纯粹的禅，赤裸裸的禅。</li>\n<li>模仿就是奴隶，不要被文字所束缚，必须抓住的是精神。大肯定就活在精神中。然而，精神在何处？这就必须向每日的经验中寻求。在哪里，有我们需要的充足的证据。</li>\n</ul>\n<h2 id=\"实际的禅\"><a href=\"#实际的禅\" class=\"headerlink\" title=\"实际的禅\"></a>实际的禅</h2><ul>\n<li>“平常心是道” 自己有着沉稳自信的存在，就是禅的真理。</li>\n<li>禅的要旨在于捕捉流动的生命。</li>\n<li>理解禅要避免抽象、表现和华丽的辞藻。</li>\n<li>禅籍中有很多古怪的对“如何是禅”的回答，看似不沾边。然而重要的是，要领会禅，必须深入参透禅师们的内心状态。比如“看，水出高源”，“莫言语”，“此处四面皆山”等 皆为自然的描述，没有高深的意思在里边。<ul>\n<li>个人注记：我的理解是生活的每个细微之处都有意识的到往，不可以追求，也不刻意忽视，以平常心视之既是禅。<ul>\n<li>超越是非、对错？</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>禅是自然的，是不能人为制造的，是生命本身的表现，并且是创造性的，这些都是禅的本质特征。因此要抓住禅的真正核心，就要时常注意不为表面的标志所迷惑。</li>\n<li>“心无形相，非离言语，非不离言语。心常湛然，应用自在。”</li>\n<li>禅并非是泛神论，并没有把山川草木看做泛神的表象</li>\n<li>禅也不是自然主义或自由主义<ul>\n<li>自然主义听从人的自然倾向，不追究它的起源和价值，是一种盲从。</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"悟\"><a href=\"#悟\" class=\"headerlink\" title=\"悟\"></a>悟</h2><ul>\n<li>禅修行的目的在于获得观察事物的新见解。</li>\n<li>禅的生活是从这种获得新见解的“悟”开始的。</li>\n<li>悟，可以定义为与知或逻辑的理解相对的直觉的洞察。</li>\n<li>当人的心在悟中成熟起来时，它们在各处自行降临。</li>\n<li>悟的所有原因、条件在内心，只等待着成熟的时机。一旦内心做好准备，世间万物都可使自己直接返回到自己的根源所在，也即是<strong>真我的觉醒</strong>。</li>\n<li>禅与思考无关，悟是一种内在的知觉 —- 但不是对某个单一物的知觉，而是对存在的根本事实的知觉。悟的最终目的地是其自身，除其自身外任何目的都不存在。</li>\n<li>悟的心的开启研究的几个要点：<ol>\n<li>悟不是由强烈思念而产生的某种假想状态。它是对物的看法获得的新见解。禅的训练是将意识构建的方法论一举扫荡，重新得到心的整体。</li>\n<li>悟指向未曾梦到的真理的崭新意识。它是在知的或者表现的事类多重积累后，忽然产生的一种心的激动或爆发。</li>\n<li>悟是禅存在的理由，没有它，禅就不成其为禅。但悟本身没有方法论。</li>\n<li>禅必须有至今未曾想过的知觉的独立，有从全新的角度观察旧有事物的新意识的觉醒。<ol>\n<li>禅那，一般认为是指向某种固定思想的一种冥想或静思，并非是禅。</li>\n</ol>\n</li>\n<li>禅要求的是绝对自由，连神也要脱离的独立。”应无所住，而生其心“。<ol>\n<li>不同于被神秘主义称为神的东西。因为它有明显的目的物追求，而且得到神时，就要拒绝非神。</li>\n</ol>\n</li>\n<li>禅是健全的心理状态。</li>\n</ol>\n</li>\n</ul>\n<h2 id=\"公案\"><a href=\"#公案\" class=\"headerlink\" title=\"公案\"></a>公案</h2><ul>\n<li>禅的独到之处在于公案和坐禅的存在。</li>\n<li>坐禅，梵语的禅那，是佛教训练中的三学，即尸罗（戒）、禅那（静虑）、般若（智慧）中的一种。佛教善徒用其全部的诚心诚意恪守佛的垂训，通晓将自己放纵的激情完全抑制住的方法，最后则期望得到足以领会高深的佛教哲理的一切复杂逻辑的智慧。</li>\n<li>禅那有“知觉”、“反省”、“凝心”等意义，把精神集中于思想的唯一目的物上。因此，从事禅的修行，是在将外界一切琐事调整为最佳状态时来支配意识，在这种状态中，精神逐渐能够超越于它的烦恼动乱之上。</li>\n<li>禅那是指保持心的安静的一般方法，Samādhi（三昧）用以表示作为禅那修行结果所得的心的状态。</li>\n<li>禅修行的坐禅与一般佛教徒实行的坐禅，在心的目的上是不同的。在禅中，禅那或坐禅是用以达到解明公案的手段，在禅中，禅那本身不是目的。要了解公案，如果没有彻底的坐禅修行，这种深远的精神真理就不能牢牢扎根于禅学徒的心中。</li>\n<li>公案在字面上的意义是指公文或权威法规，是流行于宋代末期的语言。现在指古代禅师的逸话，或是禅师与弟子间的问答，以及禅师提出的命题、提问，禅运用它作为开启人心，达到禅的真理的方法。</li>\n<li>虽然心依靠自身也能长大，但人不能无休止等待，无论对善对恶。为了达到自身的目的，总喜欢干涉。在得大于失的情况下，人们欢迎别人的干涉。把它成为改良或进步。因此在纯粹、自然、本质性的禅中导入公案体系，虽是对禅的冒渎，但在某种意义上也是一种进步。</li>\n<li>禅师们很清楚，禅如果不是产生于人的内在要求，就不是本然纯粹病充满创造活力的，而公案的手段和技术却在相当程度上是人工的产物。但是，在很难并很少能得到真物本身的情况下，既是是类似物，也是天之恩赐。</li>\n<li>现在的学生确实常常接受必要之外、有用之外的帮助。这种软弱教育的缺少，才使过去的禅师们成为具有更为雄大气魄的人物。</li>\n<li>心在收到某种束缚、失去自由、听不到声音的情况下，公案只能被看做受限制并被分割的东西。在心从束缚中被解放出来之前，人是不能在此世安住的。</li>\n<li>赵州：”庭前柏树子“。柏树子永远是柏树子本身，与泛神论或其他的”论“没有任何关系。人们大概会认为，努力通过逻辑的锁链了解其中包含的意义，就可以解开这一难题。然而，禅已远离我们在三千里之外。公案就象在逻辑分析所不能达到的我们心灵的最深处培育起来那样而得以运用。</li>\n<li>公案一般是这段了通向合理性的一切道路。也就是说，当我们几次三番向禅师提出自己的见解（用术语来说叫做”参禅“）时，必须宣告自己的知的摸索已经走入穷途，而这正是禅的研究的真正的出发点。</li>\n<li>为了帮助一般读者理解禅，用简便的语言来说，在我们心中，在相对构造的意识的”域外“，存在着未知的秘密。将它成为潜意识或超意识，是不妥的。这只是便利之举。事实上，”域外“也好，潜意识、超意识等等也好，都不存在。<strong>心是全一，不能将其分割。</strong><ul>\n<li>个人注记： 王阳明的心外无物也提到了心作为一个整体，不可分割。</li>\n</ul>\n</li>\n<li>耳司听，目司明，这是理所当然的。但得到悟的，却是整体的心，或者应当说是心之深处之心。当然，它只是知觉的一种行为，但它是最高级的知觉。</li>\n<li>曾被想象为横亘于远方的原野，就是我们每日走过的原野。</li>\n<li>禅必须除去一切带有经过、组织、训练色彩的内容，而止于单纯绝对的经验。</li>\n</ul>\n<h2 id=\"禅堂与僧侣生活\"><a href=\"#禅堂与僧侣生活\" class=\"headerlink\" title=\"禅堂与僧侣生活\"></a>禅堂与僧侣生活</h2><ul>\n<li>在禅堂中，通常被认为是男子工作的劳动，特别成为禅僧生活的主要部分。劳动的大部分是手工劳作，主要是扫除、洗濯(zhào)、烧饭、拾柴，或者到远近村落去化缘。</li>\n<li>大多数宗教隐者的苦行，并不是身心一致的活动。他们想的是身体被心所截断，或者心被身体所截断，好像身体是身体、心是心似的，而忘了这种截断仅仅存在于观念中或假说中。禅修行的目的就是不承认这种最基本的区分，时常注意避免只强调身心某一方面的习惯。</li>\n<li>在此世上诱发不幸的最为常见的原因，就是对所有欲的追求。然而，也不能把禁欲主义当做禅僧生活的理想。僧侣生活的中心思想，是要求对被给予的物加以最好的利用。并非表面所看到的，对抑制或超脱教义的鼓吹。</li>\n<li>禅堂生活的基本原则是“依靠行为的生活”。所以禅僧们都是健康地生活着的、使劲干着粗苯工作的普通人。 他们很快活，富于诙谐，并互相帮助。</li>\n<li>禅院的规则极为严厉，是用以打消我们心中固执的傲慢，让我们饮净谦恭杯中的最后一滴酒。</li>\n<li>所谓参禅，就是弟子到师傅那里讲述对于公案的意见，接受师傅的批评检查。</li>\n<li>为了让弟子们达到最深的自我，真正获得禅的知识，禅师们往往诉诸于这种咋看起来不近人情的方法。</li>\n<li>僧侣的生命必须从内至外，于知识完全合一。</li>\n<li><strong>隐德</strong>是指，在对待物时要尽其所能，充分实现物本身的德。依旧是说它意味着，对被给予的所有东西，要充分完全地、经济地加以利用。</li>\n<li>放弃一切索报和自我克制之心，为善而行善。云飘走了，天空还象原来那样晴朗。</li>\n<li>“竹影扫阶尘不动，月穿潭底水无痕。” 不管怎么说，禅归根到底只是个人的内在经验。</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"绪论\"><a href=\"#绪论\" class=\"headerlink\" title=\"绪论\"></a>绪论</h2><ul>\n<li>所谓原始佛教，是一粒种子，从这粒种子注定要生出将进一步生长的东方佛教。</li>\n<li>在中国、日本发展的佛教诸派中，有一个特殊的僧人集团，它主张直接从佛教创始人那里接受佛教的精髓和精神。它不依靠任何秘密文字，也没有任何神秘仪式，在佛教诸派中占据了最显赫的地位。这不仅是由于它在历史上的重要性，而且由于它是最具独创性的。它倡导的方法是激励人心的。在学术上称它为佛心宗，通常称为禅（梵语 dhyāna）。</li>\n<li>禅最大限度地强调了个人经验是必不可少的。没有这种经验，任何深远的能力即使是有用的，也不能有效地被掌握。</li>\n<li>佛教徒不承认超自然的作用。禅的精神训练方法是实际的、系统的。</li>\n<li>神秘主义性质是拒绝逻辑剖析，而逻辑性又是西方思想最为显著的特征之一。东方的推理方法是综合的，与其对每个事物一一分析，宁愿在直觉中把握它的全体。</li>\n<li>佛教精神为了实际的人生修行，舍弃了高高在上的哲学上层结构，其结果就不能不变成禅。</li>\n</ul>\n<h2 id=\"禅是什么？\"><a href=\"#禅是什么？\" class=\"headerlink\" title=\"禅是什么？\"></a>禅是什么？</h2><ul>\n<li>禅是人的精神，信奉人的内在的纯洁与善。</li>\n<li>禅把依靠洞察达到心的本性，发现心本身，和以自心为主，作为目的。达到此心或精神的真性是禅宗的根本目的。<ul>\n<li>个人注记：有点像王阳明知行合一的最高境界</li>\n</ul>\n</li>\n<li>禅强调不受任何拘束，脱离一切非自然的妨害。</li>\n<li>禅的基本思想是与我们心内的活动接触，它不依靠任何外部的附加物，尽可能选择最直接的道路。</li>\n<li>由于禅只认识日常生活本身的事实，因此它就能在最平凡、最平稳的普通人的生活中表现出来。</li>\n<li>但向己求 勿从它觅。</li>\n</ul>\n<h2 id=\"禅是虚无主义吗？\"><a href=\"#禅是虚无主义吗？\" class=\"headerlink\" title=\"禅是虚无主义吗？\"></a>禅是虚无主义吗？</h2><ul>\n<li>“所谓中道，无中边亦无二边。外敷色声，偏于一边，内生妄念，又偏于另一边。此两边皆无时，中边亦无，即名中道”</li>\n<li>禅从它的性质上极为自然地主张“此亦非，彼亦非，一切皆非”。 没有否定，没有肯定，只有简明的事实，<strong>纯粹的经验</strong>，以及我们的实在和思想的基础本身。<ul>\n<li>个人注记：纯粹 超越了是非 也超越了虚无的否定一切</li>\n</ul>\n</li>\n<li>在禅中，有某种自我肯定。而且它是自由的，绝对的，不知界限为何物，拒绝抽象的处理方法。</li>\n<li>禅的否定不一定是逻辑意义上的否定，肯定也是如此。禅的理解以经验为第一，不能被思想的人为系统法则，“然”、“否”之类常常牵强附会的认识论公式等等所束缚。</li>\n<li>不除去“彼此”、“我物”、“汝物”这类最后意识，任何人也不能彻底把握禅，并且“不能见古人来”。</li>\n<li>禅的目标是在个人的日常生活现实中，实现超越是非矛盾的统一。</li>\n</ul>\n<h2 id=\"非逻辑的禅\"><a href=\"#非逻辑的禅\" class=\"headerlink\" title=\"非逻辑的禅\"></a>非逻辑的禅</h2><ul>\n<li>禅对待的是事实，不是逻辑上和语言上的偏颇的、不完全的表现。</li>\n<li>禅经常将心比喻为没有阴翳的明镜。因此跟着禅回到单纯，就要使这明镜经常保持光洁明亮，使来到它面前的东西不依靠任何帮助原原本本地映照在其中。</li>\n<li>禅认为我们是语言和逻辑的过于驯服的奴隶。</li>\n<li>如果我们希望找到知道某物价值的方法，找到通向精神幸福的道路，就只有努力于断然摆脱一切条件，看看我们是否能够找到既能发现健全的世界，又能内省地理解人生的观察点。</li>\n<li>“手拿锄头，但事实却没拿” 人们往往认为，逻辑就是人生，逻辑之外没有人生的意义，人们只能顺从它。而事实是大多数人的人生观，都是破坏“思维法则”的。<ul>\n<li>个人注记：以为自己掌控着逻辑，实则是被其奴役的。所以手里什么都没有</li>\n</ul>\n</li>\n<li>客观世界的逻辑学和伦理学有着认为努力和操作的痕迹，有着自觉地意识，是不纯的。禅厌恶不纯。</li>\n<li>人生是艺术，而且像真正的艺术那样，必须忘却自己。</li>\n<li>禅要求发自内心的生活，要求不受规范束缚，各自创造自己的规范。</li>\n</ul>\n<h2 id=\"大肯定的禅\"><a href=\"#大肯定的禅\" class=\"headerlink\" title=\"大肯定的禅\"></a>大肯定的禅</h2><ul>\n<li>精神不断地呼唤自由，通过达到没有否定与肯定的对立差别的更高的肯定形态，就可以很容易地得到这种自由。禅就在这种更高的肯定中。</li>\n<li>听从我们内在生命的要求，禅提倡任何对立也不能存在的绝对的领域。</li>\n<li>禅师们努力除掉弟子们与生俱来所有的立足点，而代之以完全不是立足点的立足点。</li>\n<li>禅的训练方法是让人一下陷入两难境地。我们必须不运用逻辑，依靠更高迈的心灵，自己找到从这种两难境地中脱身的办法。<ul>\n<li>比如瓶中养鹅的故事</li>\n</ul>\n</li>\n<li>人生是事实，任何说明也不需要，也不能切中肯綮(qìng)。说明就是证明。难道我们活着这件事还需要什么证明吗？活着，仅仅是活着，还不够吗？我们在活着，在肯定，在这里就是纯粹的禅，赤裸裸的禅。</li>\n<li>模仿就是奴隶，不要被文字所束缚，必须抓住的是精神。大肯定就活在精神中。然而，精神在何处？这就必须向每日的经验中寻求。在哪里，有我们需要的充足的证据。</li>\n</ul>\n<h2 id=\"实际的禅\"><a href=\"#实际的禅\" class=\"headerlink\" title=\"实际的禅\"></a>实际的禅</h2><ul>\n<li>“平常心是道” 自己有着沉稳自信的存在，就是禅的真理。</li>\n<li>禅的要旨在于捕捉流动的生命。</li>\n<li>理解禅要避免抽象、表现和华丽的辞藻。</li>\n<li>禅籍中有很多古怪的对“如何是禅”的回答，看似不沾边。然而重要的是，要领会禅，必须深入参透禅师们的内心状态。比如“看，水出高源”，“莫言语”，“此处四面皆山”等 皆为自然的描述，没有高深的意思在里边。<ul>\n<li>个人注记：我的理解是生活的每个细微之处都有意识的到往，不可以追求，也不刻意忽视，以平常心视之既是禅。<ul>\n<li>超越是非、对错？</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>禅是自然的，是不能人为制造的，是生命本身的表现，并且是创造性的，这些都是禅的本质特征。因此要抓住禅的真正核心，就要时常注意不为表面的标志所迷惑。</li>\n<li>“心无形相，非离言语，非不离言语。心常湛然，应用自在。”</li>\n<li>禅并非是泛神论，并没有把山川草木看做泛神的表象</li>\n<li>禅也不是自然主义或自由主义<ul>\n<li>自然主义听从人的自然倾向，不追究它的起源和价值，是一种盲从。</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"悟\"><a href=\"#悟\" class=\"headerlink\" title=\"悟\"></a>悟</h2><ul>\n<li>禅修行的目的在于获得观察事物的新见解。</li>\n<li>禅的生活是从这种获得新见解的“悟”开始的。</li>\n<li>悟，可以定义为与知或逻辑的理解相对的直觉的洞察。</li>\n<li>当人的心在悟中成熟起来时，它们在各处自行降临。</li>\n<li>悟的所有原因、条件在内心，只等待着成熟的时机。一旦内心做好准备，世间万物都可使自己直接返回到自己的根源所在，也即是<strong>真我的觉醒</strong>。</li>\n<li>禅与思考无关，悟是一种内在的知觉 —- 但不是对某个单一物的知觉，而是对存在的根本事实的知觉。悟的最终目的地是其自身，除其自身外任何目的都不存在。</li>\n<li>悟的心的开启研究的几个要点：<ol>\n<li>悟不是由强烈思念而产生的某种假想状态。它是对物的看法获得的新见解。禅的训练是将意识构建的方法论一举扫荡，重新得到心的整体。</li>\n<li>悟指向未曾梦到的真理的崭新意识。它是在知的或者表现的事类多重积累后，忽然产生的一种心的激动或爆发。</li>\n<li>悟是禅存在的理由，没有它，禅就不成其为禅。但悟本身没有方法论。</li>\n<li>禅必须有至今未曾想过的知觉的独立，有从全新的角度观察旧有事物的新意识的觉醒。<ol>\n<li>禅那，一般认为是指向某种固定思想的一种冥想或静思，并非是禅。</li>\n</ol>\n</li>\n<li>禅要求的是绝对自由，连神也要脱离的独立。”应无所住，而生其心“。<ol>\n<li>不同于被神秘主义称为神的东西。因为它有明显的目的物追求，而且得到神时，就要拒绝非神。</li>\n</ol>\n</li>\n<li>禅是健全的心理状态。</li>\n</ol>\n</li>\n</ul>\n<h2 id=\"公案\"><a href=\"#公案\" class=\"headerlink\" title=\"公案\"></a>公案</h2><ul>\n<li>禅的独到之处在于公案和坐禅的存在。</li>\n<li>坐禅，梵语的禅那，是佛教训练中的三学，即尸罗（戒）、禅那（静虑）、般若（智慧）中的一种。佛教善徒用其全部的诚心诚意恪守佛的垂训，通晓将自己放纵的激情完全抑制住的方法，最后则期望得到足以领会高深的佛教哲理的一切复杂逻辑的智慧。</li>\n<li>禅那有“知觉”、“反省”、“凝心”等意义，把精神集中于思想的唯一目的物上。因此，从事禅的修行，是在将外界一切琐事调整为最佳状态时来支配意识，在这种状态中，精神逐渐能够超越于它的烦恼动乱之上。</li>\n<li>禅那是指保持心的安静的一般方法，Samādhi（三昧）用以表示作为禅那修行结果所得的心的状态。</li>\n<li>禅修行的坐禅与一般佛教徒实行的坐禅，在心的目的上是不同的。在禅中，禅那或坐禅是用以达到解明公案的手段，在禅中，禅那本身不是目的。要了解公案，如果没有彻底的坐禅修行，这种深远的精神真理就不能牢牢扎根于禅学徒的心中。</li>\n<li>公案在字面上的意义是指公文或权威法规，是流行于宋代末期的语言。现在指古代禅师的逸话，或是禅师与弟子间的问答，以及禅师提出的命题、提问，禅运用它作为开启人心，达到禅的真理的方法。</li>\n<li>虽然心依靠自身也能长大，但人不能无休止等待，无论对善对恶。为了达到自身的目的，总喜欢干涉。在得大于失的情况下，人们欢迎别人的干涉。把它成为改良或进步。因此在纯粹、自然、本质性的禅中导入公案体系，虽是对禅的冒渎，但在某种意义上也是一种进步。</li>\n<li>禅师们很清楚，禅如果不是产生于人的内在要求，就不是本然纯粹病充满创造活力的，而公案的手段和技术却在相当程度上是人工的产物。但是，在很难并很少能得到真物本身的情况下，既是是类似物，也是天之恩赐。</li>\n<li>现在的学生确实常常接受必要之外、有用之外的帮助。这种软弱教育的缺少，才使过去的禅师们成为具有更为雄大气魄的人物。</li>\n<li>心在收到某种束缚、失去自由、听不到声音的情况下，公案只能被看做受限制并被分割的东西。在心从束缚中被解放出来之前，人是不能在此世安住的。</li>\n<li>赵州：”庭前柏树子“。柏树子永远是柏树子本身，与泛神论或其他的”论“没有任何关系。人们大概会认为，努力通过逻辑的锁链了解其中包含的意义，就可以解开这一难题。然而，禅已远离我们在三千里之外。公案就象在逻辑分析所不能达到的我们心灵的最深处培育起来那样而得以运用。</li>\n<li>公案一般是这段了通向合理性的一切道路。也就是说，当我们几次三番向禅师提出自己的见解（用术语来说叫做”参禅“）时，必须宣告自己的知的摸索已经走入穷途，而这正是禅的研究的真正的出发点。</li>\n<li>为了帮助一般读者理解禅，用简便的语言来说，在我们心中，在相对构造的意识的”域外“，存在着未知的秘密。将它成为潜意识或超意识，是不妥的。这只是便利之举。事实上，”域外“也好，潜意识、超意识等等也好，都不存在。<strong>心是全一，不能将其分割。</strong><ul>\n<li>个人注记： 王阳明的心外无物也提到了心作为一个整体，不可分割。</li>\n</ul>\n</li>\n<li>耳司听，目司明，这是理所当然的。但得到悟的，却是整体的心，或者应当说是心之深处之心。当然，它只是知觉的一种行为，但它是最高级的知觉。</li>\n<li>曾被想象为横亘于远方的原野，就是我们每日走过的原野。</li>\n<li>禅必须除去一切带有经过、组织、训练色彩的内容，而止于单纯绝对的经验。</li>\n</ul>\n<h2 id=\"禅堂与僧侣生活\"><a href=\"#禅堂与僧侣生活\" class=\"headerlink\" title=\"禅堂与僧侣生活\"></a>禅堂与僧侣生活</h2><ul>\n<li>在禅堂中，通常被认为是男子工作的劳动，特别成为禅僧生活的主要部分。劳动的大部分是手工劳作，主要是扫除、洗濯(zhào)、烧饭、拾柴，或者到远近村落去化缘。</li>\n<li>大多数宗教隐者的苦行，并不是身心一致的活动。他们想的是身体被心所截断，或者心被身体所截断，好像身体是身体、心是心似的，而忘了这种截断仅仅存在于观念中或假说中。禅修行的目的就是不承认这种最基本的区分，时常注意避免只强调身心某一方面的习惯。</li>\n<li>在此世上诱发不幸的最为常见的原因，就是对所有欲的追求。然而，也不能把禁欲主义当做禅僧生活的理想。僧侣生活的中心思想，是要求对被给予的物加以最好的利用。并非表面所看到的，对抑制或超脱教义的鼓吹。</li>\n<li>禅堂生活的基本原则是“依靠行为的生活”。所以禅僧们都是健康地生活着的、使劲干着粗苯工作的普通人。 他们很快活，富于诙谐，并互相帮助。</li>\n<li>禅院的规则极为严厉，是用以打消我们心中固执的傲慢，让我们饮净谦恭杯中的最后一滴酒。</li>\n<li>所谓参禅，就是弟子到师傅那里讲述对于公案的意见，接受师傅的批评检查。</li>\n<li>为了让弟子们达到最深的自我，真正获得禅的知识，禅师们往往诉诸于这种咋看起来不近人情的方法。</li>\n<li>僧侣的生命必须从内至外，于知识完全合一。</li>\n<li><strong>隐德</strong>是指，在对待物时要尽其所能，充分实现物本身的德。依旧是说它意味着，对被给予的所有东西，要充分完全地、经济地加以利用。</li>\n<li>放弃一切索报和自我克制之心，为善而行善。云飘走了，天空还象原来那样晴朗。</li>\n<li>“竹影扫阶尘不动，月穿潭底水无痕。” 不管怎么说，禅归根到底只是个人的内在经验。</li>\n</ul>\n"},{"layout":"post","title":"加拿大个税以及注册退休金计划(RRSP)和免税储蓄账户(TFSA)","date":"2019-03-23T04:00:00.000Z","description":"如何理解加拿大个税以及注册退休金计划（RRSP）和免税储蓄账户（TFSA）","keywords":"加拿大个税, 注册退休金计划, RRSP, 免税储蓄账户, TFSA","katex":true,"_content":"\n* 在加拿大开始工作几个月了，一直对注册退休金计划（RRSP）和免税储蓄账户（TFSA）不是特别了解。最近在搜索引擎和同事还有银行顾问的帮助下终于弄明白了这几个概念。记录一下，以免自己以后忘了。\n\n## 个人税率制度\n\n* 加拿大实施的阶梯税率制度，以2018年在安大略省收入为10W/年为例，平均税率（Average Tax Rate）是24.63%, 边际税率（Marginal Tax Rate）是43.41%。也就是说，收入缴纳的税款是10W*24.63%=24,626，其他任何新增加的收入需要缴纳的税率是43.41%。\n  * 个人收入不单单是工资收入，还包含银行利息、理财收益、房屋出租等。\n* 可以在 [2019 Personal tax calculator](https://www.ey.com/ca/en/services/tax/tax-calculators-2019-personal-tax) 查询不同收入的交税比例。\n\n## 免税储蓄账户（TFSA）\n\n* 加拿大每年会给每个人提供5000-6000的免税额度。每个人可以把自己的钱存到TSFA账号里做理财，盈利不用交税。具体额度需要到加拿大政府官网 [CRA(Canada Revenue Agency)](https://www.canada.ca/en/revenue-agency.html) 登陆后查询。\n* 我们是去年（2018年）来加国的，所以每人有11500的免税额度。（2018年是5500，2019年是6000）\n* 银行和其他金融机构都可开设TSFA账户，随便在哪儿开都行，也可以开多个，但注意总额不超过自己的免税额度，超过会被罚款。\n* 在哪儿开设TSFA账户，主要是考虑需要购买什么理财产品，管理费和交易费（MER）等\n\n## 注册退休金计划（RRSP）\n\n* 这个计划的意思是年轻的时候存钱理财，退休了可以从这个账户里取钱花。注意，RRSP不是养老金计划（CPP），也不是政府发的福利。钱是你自己的，政府只是政策鼓励你做退休计划。\n* 每年报税的时候，政府会计算每个人收入，给每个人分配相应的RRSP储蓄上限额度（全年收入18%）。比如你当年收入是10W，那么来年你可以向自己的RRSP账户存1.8W。每个人可以根据自己的情况在金融机构开设RRSP账号存不超过相应额度的钱用于理财。同TFSA账户一样，超存会罚款。\n* 优势是什么呢？避税。不同于TFSA支配税后收入，RRSP支配的是税前收入。怎么理解呢？比如，你当年税前收入10W，但是你当年存了1W到RRSP账户中，那么政府就会按9W收入来扣税，那1W不算收入。但是当年政府是不知道你存了多少钱到RRSP账户的，所以要等到来年报税季，你报告给政府，它再把多收税款返还。\n    * 我们来计算下：以安大略省为例，10W年薪的平均税率是24.63%=24,626，9W年薪的平均税率是22.73%=20,461。然后你存了1W到RRSP账户。那么来年政府应该返还你24,626-20,461=4165。\n    * 当然，怎么可能全是好处呢。从RRSP账户里取钱是算当年收入的。比如你年薪9W，然后你当年又从RRSP账户取了1W，那么你的平均税率，边际税率就会按照9W+1W=10W来算。所以存到RRSP里的钱，要在合适的时候取用。最好是不挣钱的时候，比如退休的时候。你没收入了，然后每年取3W，那么政府就按你3W收入计税。超低。\n    * 所以这个账户叫做退休金计划，也就是说，只有在你收入低或者没收入的时候去取这部分钱才最划算。或者，回国工作了。收入一下子降下来了，也可以慢慢取。\n* 同样跟TFSA一样，RRSP也是随便你在哪儿开，怎么理财都是你自己说了算。\n* RRSP还有一种特别的账户，就是雇主合作的金融机构开设的，叫做\"雇主注册退休金计划\"(瞎翻译的)。这种账户可以通过每月发放工资的时候直接帮你存放定额比例到你的RRSP账户中去，然后剩余部分再计算税款。也就是说，政府会直接按照扣除RRSP存款部分后再计税。但是这种账户的弊端是管理费相对较贵，而且不是所有雇主都提供。\n* RRSP还有另外两个优势：助学贷款和购房贷款。\n    - 比方说，你的RRSP账户总额（你可以在不同的机构开设多个RRSP账户）有10W，当你需要买房的时候，你可以向政府申请10W等额免息贷款。购房15年/助学10年还清。\n\n## 理财的渠道\n\n* 同事给推荐了[WealthSimple](https://wealthsimple.com/) 和 [Questrade](https://www.questrade.com/home) 两个平台\n  * WealthSimple 是自动托管平台，注册后会让你完整问卷调查，之后给你推荐适合的理财方式，你只需要往里边存钱就可以了。这是我的邀请链接：[https://wealthsimple.com/invite/OBEKGW](https://wealthsimple.com/invite/OBEKGW)，通过邀请注册的新账户有1W免托管费额度。邀请者也会增加1W的免托管额度。\n  * Questrade 是有两种模式，一种是类似WealthSimple的自动托管模式，叫做 Questwealth。另一种是国人熟知的自己管理，叫做Self-directed。在self-directed下开设的账户包括RRSP、TFSA等都是自己去购买和售出理财产品的。\n  * 当然还有各家银行，网上看到很多人推荐TD家，没了解过，就不多说了。\n* 我在网上也搜到了这一篇文章讲投资组合的，有兴趣的可以看看：[https://canadiancouchpotato.com/model-portfolios/](https://canadiancouchpotato.com/model-portfolios/) \n* 另外 reddit 也有一个channel叫做：[#PersonalFinanceCanada](https://www.reddit.com/r/PersonalFinanceCanada), 也可多关注下。\n\n## 如何合理避税\n\n* 如果是刚开始工作第一年，基本上只有5000-6000的TFSA免税额度。所以没啥可做的。\n* 第二年开始就可以开始利用RRSP的额度，尽量多的往里存。当然，前提是没有大额开销，且有多余的钱。读书和买房是可以利用RRSP的免息额度贷款，比自己花钱买房和读书要划算的多，但是额度不一定够，所以这两项要仔细研究很多细节，比如大概几年后会买房，预留多少首付，多少额度的贷款等等。另外，在加拿大待得越久，信用越好，买车的商业贷款税率也是可以是极低的。\n  * 具体优先级：\n    * 如果是夫妻两人，那么先存满高收入一方的RRSP，优先降低边际税率高的一方的税。然后存低收入一方的RRSP，接着是双方的TFSA账户。如果还有结余，把钱转到收入低的一方的理财账户进行理财，因为低收入方的边际税率相对较低，收益部分缴纳的税款也相对较少。\n    * 单身的话，RRSP优先，然后TFSA，最后再用其他账户理财。\n\n## 其他\n\n* 不管是RRSP还是TFSA都是可以称作理财账户，公民可以用来买理财产品或定期存款等用途。加拿大政府还提供了其他账户类型，但目前我只了解了这两个较常用的。\n* 还有一点需要知道的是，所有政府主导的项目，RRSP、TFSA或者其他的计划账户都是受政府监管的，如果你开设RRSP账户的那家公司倒闭了，不用担心你的钱没了。那些计划的钱都在一个池子里。公司没了，你只需要把钱转移到另一家公司管理就好了。在一家公司开设账户，只是让他们帮忙管理，并不是给他们了。\n","source":"_posts/2019-03-23-canada-personal-tax-rrsp-and-tfsa.md","raw":"---\nlayout: post\ntitle: 加拿大个税以及注册退休金计划(RRSP)和免税储蓄账户(TFSA)\ncategory: 生活随想\ntags: [加拿大税务]\ndate: 2019-03-23\ndescription: 如何理解加拿大个税以及注册退休金计划（RRSP）和免税储蓄账户（TFSA）\nkeywords: 加拿大个税, 注册退休金计划, RRSP, 免税储蓄账户, TFSA\nkatex: true\n---\n\n* 在加拿大开始工作几个月了，一直对注册退休金计划（RRSP）和免税储蓄账户（TFSA）不是特别了解。最近在搜索引擎和同事还有银行顾问的帮助下终于弄明白了这几个概念。记录一下，以免自己以后忘了。\n\n## 个人税率制度\n\n* 加拿大实施的阶梯税率制度，以2018年在安大略省收入为10W/年为例，平均税率（Average Tax Rate）是24.63%, 边际税率（Marginal Tax Rate）是43.41%。也就是说，收入缴纳的税款是10W*24.63%=24,626，其他任何新增加的收入需要缴纳的税率是43.41%。\n  * 个人收入不单单是工资收入，还包含银行利息、理财收益、房屋出租等。\n* 可以在 [2019 Personal tax calculator](https://www.ey.com/ca/en/services/tax/tax-calculators-2019-personal-tax) 查询不同收入的交税比例。\n\n## 免税储蓄账户（TFSA）\n\n* 加拿大每年会给每个人提供5000-6000的免税额度。每个人可以把自己的钱存到TSFA账号里做理财，盈利不用交税。具体额度需要到加拿大政府官网 [CRA(Canada Revenue Agency)](https://www.canada.ca/en/revenue-agency.html) 登陆后查询。\n* 我们是去年（2018年）来加国的，所以每人有11500的免税额度。（2018年是5500，2019年是6000）\n* 银行和其他金融机构都可开设TSFA账户，随便在哪儿开都行，也可以开多个，但注意总额不超过自己的免税额度，超过会被罚款。\n* 在哪儿开设TSFA账户，主要是考虑需要购买什么理财产品，管理费和交易费（MER）等\n\n## 注册退休金计划（RRSP）\n\n* 这个计划的意思是年轻的时候存钱理财，退休了可以从这个账户里取钱花。注意，RRSP不是养老金计划（CPP），也不是政府发的福利。钱是你自己的，政府只是政策鼓励你做退休计划。\n* 每年报税的时候，政府会计算每个人收入，给每个人分配相应的RRSP储蓄上限额度（全年收入18%）。比如你当年收入是10W，那么来年你可以向自己的RRSP账户存1.8W。每个人可以根据自己的情况在金融机构开设RRSP账号存不超过相应额度的钱用于理财。同TFSA账户一样，超存会罚款。\n* 优势是什么呢？避税。不同于TFSA支配税后收入，RRSP支配的是税前收入。怎么理解呢？比如，你当年税前收入10W，但是你当年存了1W到RRSP账户中，那么政府就会按9W收入来扣税，那1W不算收入。但是当年政府是不知道你存了多少钱到RRSP账户的，所以要等到来年报税季，你报告给政府，它再把多收税款返还。\n    * 我们来计算下：以安大略省为例，10W年薪的平均税率是24.63%=24,626，9W年薪的平均税率是22.73%=20,461。然后你存了1W到RRSP账户。那么来年政府应该返还你24,626-20,461=4165。\n    * 当然，怎么可能全是好处呢。从RRSP账户里取钱是算当年收入的。比如你年薪9W，然后你当年又从RRSP账户取了1W，那么你的平均税率，边际税率就会按照9W+1W=10W来算。所以存到RRSP里的钱，要在合适的时候取用。最好是不挣钱的时候，比如退休的时候。你没收入了，然后每年取3W，那么政府就按你3W收入计税。超低。\n    * 所以这个账户叫做退休金计划，也就是说，只有在你收入低或者没收入的时候去取这部分钱才最划算。或者，回国工作了。收入一下子降下来了，也可以慢慢取。\n* 同样跟TFSA一样，RRSP也是随便你在哪儿开，怎么理财都是你自己说了算。\n* RRSP还有一种特别的账户，就是雇主合作的金融机构开设的，叫做\"雇主注册退休金计划\"(瞎翻译的)。这种账户可以通过每月发放工资的时候直接帮你存放定额比例到你的RRSP账户中去，然后剩余部分再计算税款。也就是说，政府会直接按照扣除RRSP存款部分后再计税。但是这种账户的弊端是管理费相对较贵，而且不是所有雇主都提供。\n* RRSP还有另外两个优势：助学贷款和购房贷款。\n    - 比方说，你的RRSP账户总额（你可以在不同的机构开设多个RRSP账户）有10W，当你需要买房的时候，你可以向政府申请10W等额免息贷款。购房15年/助学10年还清。\n\n## 理财的渠道\n\n* 同事给推荐了[WealthSimple](https://wealthsimple.com/) 和 [Questrade](https://www.questrade.com/home) 两个平台\n  * WealthSimple 是自动托管平台，注册后会让你完整问卷调查，之后给你推荐适合的理财方式，你只需要往里边存钱就可以了。这是我的邀请链接：[https://wealthsimple.com/invite/OBEKGW](https://wealthsimple.com/invite/OBEKGW)，通过邀请注册的新账户有1W免托管费额度。邀请者也会增加1W的免托管额度。\n  * Questrade 是有两种模式，一种是类似WealthSimple的自动托管模式，叫做 Questwealth。另一种是国人熟知的自己管理，叫做Self-directed。在self-directed下开设的账户包括RRSP、TFSA等都是自己去购买和售出理财产品的。\n  * 当然还有各家银行，网上看到很多人推荐TD家，没了解过，就不多说了。\n* 我在网上也搜到了这一篇文章讲投资组合的，有兴趣的可以看看：[https://canadiancouchpotato.com/model-portfolios/](https://canadiancouchpotato.com/model-portfolios/) \n* 另外 reddit 也有一个channel叫做：[#PersonalFinanceCanada](https://www.reddit.com/r/PersonalFinanceCanada), 也可多关注下。\n\n## 如何合理避税\n\n* 如果是刚开始工作第一年，基本上只有5000-6000的TFSA免税额度。所以没啥可做的。\n* 第二年开始就可以开始利用RRSP的额度，尽量多的往里存。当然，前提是没有大额开销，且有多余的钱。读书和买房是可以利用RRSP的免息额度贷款，比自己花钱买房和读书要划算的多，但是额度不一定够，所以这两项要仔细研究很多细节，比如大概几年后会买房，预留多少首付，多少额度的贷款等等。另外，在加拿大待得越久，信用越好，买车的商业贷款税率也是可以是极低的。\n  * 具体优先级：\n    * 如果是夫妻两人，那么先存满高收入一方的RRSP，优先降低边际税率高的一方的税。然后存低收入一方的RRSP，接着是双方的TFSA账户。如果还有结余，把钱转到收入低的一方的理财账户进行理财，因为低收入方的边际税率相对较低，收益部分缴纳的税款也相对较少。\n    * 单身的话，RRSP优先，然后TFSA，最后再用其他账户理财。\n\n## 其他\n\n* 不管是RRSP还是TFSA都是可以称作理财账户，公民可以用来买理财产品或定期存款等用途。加拿大政府还提供了其他账户类型，但目前我只了解了这两个较常用的。\n* 还有一点需要知道的是，所有政府主导的项目，RRSP、TFSA或者其他的计划账户都是受政府监管的，如果你开设RRSP账户的那家公司倒闭了，不用担心你的钱没了。那些计划的钱都在一个池子里。公司没了，你只需要把钱转移到另一家公司管理就好了。在一家公司开设账户，只是让他们帮忙管理，并不是给他们了。\n","slug":"2019-03-23-canada-personal-tax-rrsp-and-tfsa","published":1,"updated":"2022-02-12T20:53:10.508Z","comments":1,"photos":[],"link":"","_id":"ckzkc92xl002doqoxb5yyh4hr","content":"<ul>\n<li>在加拿大开始工作几个月了，一直对注册退休金计划（RRSP）和免税储蓄账户（TFSA）不是特别了解。最近在搜索引擎和同事还有银行顾问的帮助下终于弄明白了这几个概念。记录一下，以免自己以后忘了。</li>\n</ul>\n<h2 id=\"个人税率制度\"><a href=\"#个人税率制度\" class=\"headerlink\" title=\"个人税率制度\"></a>个人税率制度</h2><ul>\n<li>加拿大实施的阶梯税率制度，以2018年在安大略省收入为10W&#x2F;年为例，平均税率（Average Tax Rate）是24.63%, 边际税率（Marginal Tax Rate）是43.41%。也就是说，收入缴纳的税款是10W*24.63%&#x3D;24,626，其他任何新增加的收入需要缴纳的税率是43.41%。<ul>\n<li>个人收入不单单是工资收入，还包含银行利息、理财收益、房屋出租等。</li>\n</ul>\n</li>\n<li>可以在 <a href=\"https://www.ey.com/ca/en/services/tax/tax-calculators-2019-personal-tax\">2019 Personal tax calculator</a> 查询不同收入的交税比例。</li>\n</ul>\n<h2 id=\"免税储蓄账户（TFSA）\"><a href=\"#免税储蓄账户（TFSA）\" class=\"headerlink\" title=\"免税储蓄账户（TFSA）\"></a>免税储蓄账户（TFSA）</h2><ul>\n<li>加拿大每年会给每个人提供5000-6000的免税额度。每个人可以把自己的钱存到TSFA账号里做理财，盈利不用交税。具体额度需要到加拿大政府官网 <a href=\"https://www.canada.ca/en/revenue-agency.html\">CRA(Canada Revenue Agency)</a> 登陆后查询。</li>\n<li>我们是去年（2018年）来加国的，所以每人有11500的免税额度。（2018年是5500，2019年是6000）</li>\n<li>银行和其他金融机构都可开设TSFA账户，随便在哪儿开都行，也可以开多个，但注意总额不超过自己的免税额度，超过会被罚款。</li>\n<li>在哪儿开设TSFA账户，主要是考虑需要购买什么理财产品，管理费和交易费（MER）等</li>\n</ul>\n<h2 id=\"注册退休金计划（RRSP）\"><a href=\"#注册退休金计划（RRSP）\" class=\"headerlink\" title=\"注册退休金计划（RRSP）\"></a>注册退休金计划（RRSP）</h2><ul>\n<li>这个计划的意思是年轻的时候存钱理财，退休了可以从这个账户里取钱花。注意，RRSP不是养老金计划（CPP），也不是政府发的福利。钱是你自己的，政府只是政策鼓励你做退休计划。</li>\n<li>每年报税的时候，政府会计算每个人收入，给每个人分配相应的RRSP储蓄上限额度（全年收入18%）。比如你当年收入是10W，那么来年你可以向自己的RRSP账户存1.8W。每个人可以根据自己的情况在金融机构开设RRSP账号存不超过相应额度的钱用于理财。同TFSA账户一样，超存会罚款。</li>\n<li>优势是什么呢？避税。不同于TFSA支配税后收入，RRSP支配的是税前收入。怎么理解呢？比如，你当年税前收入10W，但是你当年存了1W到RRSP账户中，那么政府就会按9W收入来扣税，那1W不算收入。但是当年政府是不知道你存了多少钱到RRSP账户的，所以要等到来年报税季，你报告给政府，它再把多收税款返还。<ul>\n<li>我们来计算下：以安大略省为例，10W年薪的平均税率是24.63%&#x3D;24,626，9W年薪的平均税率是22.73%&#x3D;20,461。然后你存了1W到RRSP账户。那么来年政府应该返还你24,626-20,461&#x3D;4165。</li>\n<li>当然，怎么可能全是好处呢。从RRSP账户里取钱是算当年收入的。比如你年薪9W，然后你当年又从RRSP账户取了1W，那么你的平均税率，边际税率就会按照9W+1W&#x3D;10W来算。所以存到RRSP里的钱，要在合适的时候取用。最好是不挣钱的时候，比如退休的时候。你没收入了，然后每年取3W，那么政府就按你3W收入计税。超低。</li>\n<li>所以这个账户叫做退休金计划，也就是说，只有在你收入低或者没收入的时候去取这部分钱才最划算。或者，回国工作了。收入一下子降下来了，也可以慢慢取。</li>\n</ul>\n</li>\n<li>同样跟TFSA一样，RRSP也是随便你在哪儿开，怎么理财都是你自己说了算。</li>\n<li>RRSP还有一种特别的账户，就是雇主合作的金融机构开设的，叫做”雇主注册退休金计划”(瞎翻译的)。这种账户可以通过每月发放工资的时候直接帮你存放定额比例到你的RRSP账户中去，然后剩余部分再计算税款。也就是说，政府会直接按照扣除RRSP存款部分后再计税。但是这种账户的弊端是管理费相对较贵，而且不是所有雇主都提供。</li>\n<li>RRSP还有另外两个优势：助学贷款和购房贷款。<ul>\n<li>比方说，你的RRSP账户总额（你可以在不同的机构开设多个RRSP账户）有10W，当你需要买房的时候，你可以向政府申请10W等额免息贷款。购房15年&#x2F;助学10年还清。</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"理财的渠道\"><a href=\"#理财的渠道\" class=\"headerlink\" title=\"理财的渠道\"></a>理财的渠道</h2><ul>\n<li>同事给推荐了<a href=\"https://wealthsimple.com/\">WealthSimple</a> 和 <a href=\"https://www.questrade.com/home\">Questrade</a> 两个平台<ul>\n<li>WealthSimple 是自动托管平台，注册后会让你完整问卷调查，之后给你推荐适合的理财方式，你只需要往里边存钱就可以了。这是我的邀请链接：<a href=\"https://wealthsimple.com/invite/OBEKGW\">https://wealthsimple.com/invite/OBEKGW</a>，通过邀请注册的新账户有1W免托管费额度。邀请者也会增加1W的免托管额度。</li>\n<li>Questrade 是有两种模式，一种是类似WealthSimple的自动托管模式，叫做 Questwealth。另一种是国人熟知的自己管理，叫做Self-directed。在self-directed下开设的账户包括RRSP、TFSA等都是自己去购买和售出理财产品的。</li>\n<li>当然还有各家银行，网上看到很多人推荐TD家，没了解过，就不多说了。</li>\n</ul>\n</li>\n<li>我在网上也搜到了这一篇文章讲投资组合的，有兴趣的可以看看：<a href=\"https://canadiancouchpotato.com/model-portfolios/\">https://canadiancouchpotato.com/model-portfolios/</a> </li>\n<li>另外 reddit 也有一个channel叫做：<a href=\"https://www.reddit.com/r/PersonalFinanceCanada\">#PersonalFinanceCanada</a>, 也可多关注下。</li>\n</ul>\n<h2 id=\"如何合理避税\"><a href=\"#如何合理避税\" class=\"headerlink\" title=\"如何合理避税\"></a>如何合理避税</h2><ul>\n<li>如果是刚开始工作第一年，基本上只有5000-6000的TFSA免税额度。所以没啥可做的。</li>\n<li>第二年开始就可以开始利用RRSP的额度，尽量多的往里存。当然，前提是没有大额开销，且有多余的钱。读书和买房是可以利用RRSP的免息额度贷款，比自己花钱买房和读书要划算的多，但是额度不一定够，所以这两项要仔细研究很多细节，比如大概几年后会买房，预留多少首付，多少额度的贷款等等。另外，在加拿大待得越久，信用越好，买车的商业贷款税率也是可以是极低的。<ul>\n<li>具体优先级：<ul>\n<li>如果是夫妻两人，那么先存满高收入一方的RRSP，优先降低边际税率高的一方的税。然后存低收入一方的RRSP，接着是双方的TFSA账户。如果还有结余，把钱转到收入低的一方的理财账户进行理财，因为低收入方的边际税率相对较低，收益部分缴纳的税款也相对较少。</li>\n<li>单身的话，RRSP优先，然后TFSA，最后再用其他账户理财。</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"其他\"><a href=\"#其他\" class=\"headerlink\" title=\"其他\"></a>其他</h2><ul>\n<li>不管是RRSP还是TFSA都是可以称作理财账户，公民可以用来买理财产品或定期存款等用途。加拿大政府还提供了其他账户类型，但目前我只了解了这两个较常用的。</li>\n<li>还有一点需要知道的是，所有政府主导的项目，RRSP、TFSA或者其他的计划账户都是受政府监管的，如果你开设RRSP账户的那家公司倒闭了，不用担心你的钱没了。那些计划的钱都在一个池子里。公司没了，你只需要把钱转移到另一家公司管理就好了。在一家公司开设账户，只是让他们帮忙管理，并不是给他们了。</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<ul>\n<li>在加拿大开始工作几个月了，一直对注册退休金计划（RRSP）和免税储蓄账户（TFSA）不是特别了解。最近在搜索引擎和同事还有银行顾问的帮助下终于弄明白了这几个概念。记录一下，以免自己以后忘了。</li>\n</ul>\n<h2 id=\"个人税率制度\"><a href=\"#个人税率制度\" class=\"headerlink\" title=\"个人税率制度\"></a>个人税率制度</h2><ul>\n<li>加拿大实施的阶梯税率制度，以2018年在安大略省收入为10W&#x2F;年为例，平均税率（Average Tax Rate）是24.63%, 边际税率（Marginal Tax Rate）是43.41%。也就是说，收入缴纳的税款是10W*24.63%&#x3D;24,626，其他任何新增加的收入需要缴纳的税率是43.41%。<ul>\n<li>个人收入不单单是工资收入，还包含银行利息、理财收益、房屋出租等。</li>\n</ul>\n</li>\n<li>可以在 <a href=\"https://www.ey.com/ca/en/services/tax/tax-calculators-2019-personal-tax\">2019 Personal tax calculator</a> 查询不同收入的交税比例。</li>\n</ul>\n<h2 id=\"免税储蓄账户（TFSA）\"><a href=\"#免税储蓄账户（TFSA）\" class=\"headerlink\" title=\"免税储蓄账户（TFSA）\"></a>免税储蓄账户（TFSA）</h2><ul>\n<li>加拿大每年会给每个人提供5000-6000的免税额度。每个人可以把自己的钱存到TSFA账号里做理财，盈利不用交税。具体额度需要到加拿大政府官网 <a href=\"https://www.canada.ca/en/revenue-agency.html\">CRA(Canada Revenue Agency)</a> 登陆后查询。</li>\n<li>我们是去年（2018年）来加国的，所以每人有11500的免税额度。（2018年是5500，2019年是6000）</li>\n<li>银行和其他金融机构都可开设TSFA账户，随便在哪儿开都行，也可以开多个，但注意总额不超过自己的免税额度，超过会被罚款。</li>\n<li>在哪儿开设TSFA账户，主要是考虑需要购买什么理财产品，管理费和交易费（MER）等</li>\n</ul>\n<h2 id=\"注册退休金计划（RRSP）\"><a href=\"#注册退休金计划（RRSP）\" class=\"headerlink\" title=\"注册退休金计划（RRSP）\"></a>注册退休金计划（RRSP）</h2><ul>\n<li>这个计划的意思是年轻的时候存钱理财，退休了可以从这个账户里取钱花。注意，RRSP不是养老金计划（CPP），也不是政府发的福利。钱是你自己的，政府只是政策鼓励你做退休计划。</li>\n<li>每年报税的时候，政府会计算每个人收入，给每个人分配相应的RRSP储蓄上限额度（全年收入18%）。比如你当年收入是10W，那么来年你可以向自己的RRSP账户存1.8W。每个人可以根据自己的情况在金融机构开设RRSP账号存不超过相应额度的钱用于理财。同TFSA账户一样，超存会罚款。</li>\n<li>优势是什么呢？避税。不同于TFSA支配税后收入，RRSP支配的是税前收入。怎么理解呢？比如，你当年税前收入10W，但是你当年存了1W到RRSP账户中，那么政府就会按9W收入来扣税，那1W不算收入。但是当年政府是不知道你存了多少钱到RRSP账户的，所以要等到来年报税季，你报告给政府，它再把多收税款返还。<ul>\n<li>我们来计算下：以安大略省为例，10W年薪的平均税率是24.63%&#x3D;24,626，9W年薪的平均税率是22.73%&#x3D;20,461。然后你存了1W到RRSP账户。那么来年政府应该返还你24,626-20,461&#x3D;4165。</li>\n<li>当然，怎么可能全是好处呢。从RRSP账户里取钱是算当年收入的。比如你年薪9W，然后你当年又从RRSP账户取了1W，那么你的平均税率，边际税率就会按照9W+1W&#x3D;10W来算。所以存到RRSP里的钱，要在合适的时候取用。最好是不挣钱的时候，比如退休的时候。你没收入了，然后每年取3W，那么政府就按你3W收入计税。超低。</li>\n<li>所以这个账户叫做退休金计划，也就是说，只有在你收入低或者没收入的时候去取这部分钱才最划算。或者，回国工作了。收入一下子降下来了，也可以慢慢取。</li>\n</ul>\n</li>\n<li>同样跟TFSA一样，RRSP也是随便你在哪儿开，怎么理财都是你自己说了算。</li>\n<li>RRSP还有一种特别的账户，就是雇主合作的金融机构开设的，叫做”雇主注册退休金计划”(瞎翻译的)。这种账户可以通过每月发放工资的时候直接帮你存放定额比例到你的RRSP账户中去，然后剩余部分再计算税款。也就是说，政府会直接按照扣除RRSP存款部分后再计税。但是这种账户的弊端是管理费相对较贵，而且不是所有雇主都提供。</li>\n<li>RRSP还有另外两个优势：助学贷款和购房贷款。<ul>\n<li>比方说，你的RRSP账户总额（你可以在不同的机构开设多个RRSP账户）有10W，当你需要买房的时候，你可以向政府申请10W等额免息贷款。购房15年&#x2F;助学10年还清。</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"理财的渠道\"><a href=\"#理财的渠道\" class=\"headerlink\" title=\"理财的渠道\"></a>理财的渠道</h2><ul>\n<li>同事给推荐了<a href=\"https://wealthsimple.com/\">WealthSimple</a> 和 <a href=\"https://www.questrade.com/home\">Questrade</a> 两个平台<ul>\n<li>WealthSimple 是自动托管平台，注册后会让你完整问卷调查，之后给你推荐适合的理财方式，你只需要往里边存钱就可以了。这是我的邀请链接：<a href=\"https://wealthsimple.com/invite/OBEKGW\">https://wealthsimple.com/invite/OBEKGW</a>，通过邀请注册的新账户有1W免托管费额度。邀请者也会增加1W的免托管额度。</li>\n<li>Questrade 是有两种模式，一种是类似WealthSimple的自动托管模式，叫做 Questwealth。另一种是国人熟知的自己管理，叫做Self-directed。在self-directed下开设的账户包括RRSP、TFSA等都是自己去购买和售出理财产品的。</li>\n<li>当然还有各家银行，网上看到很多人推荐TD家，没了解过，就不多说了。</li>\n</ul>\n</li>\n<li>我在网上也搜到了这一篇文章讲投资组合的，有兴趣的可以看看：<a href=\"https://canadiancouchpotato.com/model-portfolios/\">https://canadiancouchpotato.com/model-portfolios/</a> </li>\n<li>另外 reddit 也有一个channel叫做：<a href=\"https://www.reddit.com/r/PersonalFinanceCanada\">#PersonalFinanceCanada</a>, 也可多关注下。</li>\n</ul>\n<h2 id=\"如何合理避税\"><a href=\"#如何合理避税\" class=\"headerlink\" title=\"如何合理避税\"></a>如何合理避税</h2><ul>\n<li>如果是刚开始工作第一年，基本上只有5000-6000的TFSA免税额度。所以没啥可做的。</li>\n<li>第二年开始就可以开始利用RRSP的额度，尽量多的往里存。当然，前提是没有大额开销，且有多余的钱。读书和买房是可以利用RRSP的免息额度贷款，比自己花钱买房和读书要划算的多，但是额度不一定够，所以这两项要仔细研究很多细节，比如大概几年后会买房，预留多少首付，多少额度的贷款等等。另外，在加拿大待得越久，信用越好，买车的商业贷款税率也是可以是极低的。<ul>\n<li>具体优先级：<ul>\n<li>如果是夫妻两人，那么先存满高收入一方的RRSP，优先降低边际税率高的一方的税。然后存低收入一方的RRSP，接着是双方的TFSA账户。如果还有结余，把钱转到收入低的一方的理财账户进行理财，因为低收入方的边际税率相对较低，收益部分缴纳的税款也相对较少。</li>\n<li>单身的话，RRSP优先，然后TFSA，最后再用其他账户理财。</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"其他\"><a href=\"#其他\" class=\"headerlink\" title=\"其他\"></a>其他</h2><ul>\n<li>不管是RRSP还是TFSA都是可以称作理财账户，公民可以用来买理财产品或定期存款等用途。加拿大政府还提供了其他账户类型，但目前我只了解了这两个较常用的。</li>\n<li>还有一点需要知道的是，所有政府主导的项目，RRSP、TFSA或者其他的计划账户都是受政府监管的，如果你开设RRSP账户的那家公司倒闭了，不用担心你的钱没了。那些计划的钱都在一个池子里。公司没了，你只需要把钱转移到另一家公司管理就好了。在一家公司开设账户，只是让他们帮忙管理，并不是给他们了。</li>\n</ul>\n"},{"layout":"post","title":"我是如何管理工作和生活日常的？敏捷开发+GTD","date":"2020-04-26T04:00:00.000Z","description":"我是如何管理工作和生活日常的？敏捷开发+GTD","keywords":"GTD, Fantastical 2, OmniFocus, Trello, 敏捷开发","_content":"\n工具：OmniFocus + Trello + 邮箱 + 日历\n\n## 设计\n\n- 我的初衷是把生活和工作中的琐事和短期长期目标管理起来，让每天做事情的效率更高点。不过如何在效率和压力之间找到平衡是一直困扰我的事情。想做的事情太多，时间太少，效率太低，没法儿做到尽善尽美。所以我还在不断探索中。\n- 是否需要把所有事情都管理起来？David Allen的那本书是推荐这么做的。目的是让自己更可能的信任整个系统。我并不打算怎么做。因为我并不觉得所有事情都需要“管理”，管理的目的是**规划**、**效率**和**提醒**。所以无论怎么设计，能够帮助到我做到那三点，我都认为是成功的。\n- 工具的选择？其实现在市场上GTD类的工具不要太多。我用OmniFocus来管理日常的唯一原因是，我很早就购买了。其他的，比如Trello、日历、邮箱都是免费的。\n\n### 怎么规划自己的事情？\n\n这个要谈到 David Allen 的方法了。 如果真的打算用GTD的方法来管理自己的时间，最好先找个没事儿做的一天早上，准备2-3个小时的事情规划。David Allen 的方法一共分五步：**收集** -> **处理** -> **整理** -> **回顾** -> **执行**。\n\n1. 收集\n    * 目的是清空大脑，让自己可以每天什么都不用**惦记**着。所有的事情都列出来，不用很细，比如想学画画、想读老舍的四世同堂、明天要去剪头发、后天要给女朋友挑礼物等等。事无巨细，一直列到再也想不出来什么事情为止。\n2. 处理\n    * 逐条分析自己的清单，目的是分清什么是能做的，什么不能做的，什么是最近要做的，什么是未来要做的，还有什么是无意义的事情。我们每天都会有很多念头和想做的事情，如何让自己的精力集中在有意义的事情上并不是一件容易的事情，需要长期的训练自己的大脑。(说实话，我还没有做到。) 二八定律讲到，我们80%的成果，是从20%的努力得到的。处理的目的就是让自己明白什么是重要的事情，而且在自己精力好的时候做重要的事情。最大化自己的成果。\n3. 整理\n    * 目的是让自己的清单具有**可行性**且**合理**。比如学画画这件事，需要收集学画画的资料、工具以及具体时间规划。那么这一步就是要将这些事情拆分整理分类。第一天做什么、第二天做什么一直到完成这个事情。需要注意的是，这并非是在今天做什么和明天做什么，因为每天都在变化，我们不能把事情计划得那么绝对，除非是考试等有deadline的事情。\n    * 在这一步，我们还需要区分事情本身需要的精力和时间。在一天中，人的精力不会一直是饱满的，事情也是。在精力好的时候做需要高度集中精力的，精力不好的时候做不太需要精力的事情是最有效的利用时间的方法。\n4. 回顾\n    * 每周花时间对自己的所有事情进行 回顾 并做调整是很重要的。目的在于修正我们对自己时间安排的合理性以及调整接下来要做的事情。我们总会或高或低的估计自己的能力。每周的回顾可以让我们不断的调整，找到最适合自己的方式。\n5. 执行\n    * 这点看上去有点废话。所有的计划没有执行等于零。不过如何有效率地执行就是个有意思的问题了。GTD中提到，我们可以从四个维度分析我们此时此刻应该做什么--情境、时间、精力和重要性。我们现在在处在什么状态，有多长时间、精力是否充沛以及哪件事情更重要。说白了就是对的时间做对的事情。这其实也是个探索和自我认知的过程，需要不断的尝试去发现最适合自己的。\n\n## 几个工具如何一起使用？\n\n### 日历\n\n* 我用的是Fantasical 2 客户端。但真正用起来发现Apple自带的日历其实已经够了。\n* 日历对我来说，是一个被动提醒工具。需要特定的时间/地点需要的事情，比如换雪胎、买卖大头菜（最近在玩动森）、交房租等等，我都会放到日历里边。这也是GTD那本书推荐的方法。工作方面，所有的会议邀请也都会在日历里。所以一天中必须做的事情都在里边了。\n* 日历有个好处是可以邀请其他人。有些事情需要其他人一起完成的。通知别人用日历再方便不过了。\n\n### 邮箱\n\n* 我工作和个人的邮箱都是**Gmail**为主，所以不用来会切换邮件客户端。即便有好几个不同的邮箱，Spark、Airmail等等都是很好的聚合工具。每天早上我会例行清空收件箱。需要以后处理的，工作的放Trello，个人的放OmniFocus的Inbox或者日历里。\n\n### Trello\n\n* 由于我工作需要定期评估，我需要整理自己一年内做的所有事情。公司在用Jira，但对我来说太笨重了，而且我的任务分布在好几个项目里，没法儿在一个Kanban里看到，很麻烦。所以我选择全部放到**Trello**里来管理。\n* 具体的管理就是敏捷开发的那一套。很多人都很熟悉。我分了Todo、Backlog、Doing、Review、Done、Abandoned几个list，基本也代表了我的整个工作流。任务出现的时候，就先放到Todo里（如果紧急，直接跳过Backlog到Doing里去）。然后分析任务的时间需求、紧急性，选择接下来要做的放到Backlog。开始做的时候，就放到Doing里。完成的时候放到回顾里等待。最后进入Done里。其中：\n    * Backlog和Doing里一般不会超过三个card。太多就丧失了敏捷开发的意义。\n    * 回顾不单单是Code Review、Peer Review，我把部署也算作回顾的一部分。\n    * Done 我会每半年创建一个新的list。比如`Done[2020](01/01-)`是我现在在用的。`Done[2019](07/01-12/31)` 是去年下半年所有完成的任务。因为做的事情太多，全放在一个`Done`里太长了。\n    * Abandoned 是本来计划做，最后由于各种原因中止或者撤销的。对我来说，它类似日志的作用，做个记录而已。\n\n### OmniFocus\n\n- 任务按照以下维度切分：\n    - 项目类别 -- 生活日常、想学的、必须学的、英语考试\n        - 英语是特殊需求，单独做了分类\n    - 精力需求指数 -- 高、中、低\n    - 优先级 -- 高、低。即有没有加 flag\n- 这是我的 OmniFocus 打开后的默认界面：\n    - ![](https://i.imgur.com/o6hwvwr.jpg)\n- 每天早晨起来后打开 OmniFocus 查看 `Next` 即可知道接下来需要做的事情。\n\n#### 透视图配置\n\n* 除了OmniFocus自带的 Inbox、Projects、Tags、Forecast、Flagged、Review和Completed 外，我创建了`Next`和`Waiting`两个自定义的透视图。\n* `Next` 是用来查看今天接下来能做的事情。\n    * 配置很简单： 只选择First Available就够了。\n* `Waiting` 是用来记录接下来一段时间内选择做的事情。在每周回顾的时候把所有希望接下来做的事情都加上`Picked`的标签。\n    * <img src=\"https://i.imgur.com/8nyvah0.jpg\" style=\"width: 300px\" />\n\n#### 标签配置\n\n* <img src=\"https://i.imgur.com/CweaNRb.jpg\" style=\"width: 200px\" />\n* 我给每个标签都加上emoji，这样所有任务看起来更直观一点。比如`High Energy` 是🐝， `Low Energy` 是🐢。\n\n#### 项目配置\n\n* <img src=\"https://i.imgur.com/LwWEBhX.jpg\" style=\"width: 300px\" />\n* 项目本身是包含了短期和长期目标以及整体规划的地方。我现在是软件工程师，未来的目标是成为机器学习工程师，然后还希望能够培养弹钢琴和阅读的爱好。那么\n    * `生活日常` 就是日常的琐事。比如拖地、给狗狗剪指甲啥的。需要完成一次，defer下一次。\n    * `想学的`就是钢琴、哲学和阅读感兴趣的书,\n    * `必须学的`就是机器学习相关的课程以及工作相关的知识。\n\n## 流程规划\n\n* 早上起来花十分钟查看邮件，需要记录的事情扔到 Trello 的 Todo 或者 OmniFocus 的 Inbox 里待进一步处理。\n* 如果是工作日，从Trello开始计划今天的安排。如果是休息时间，直接略过 Trello，只看OmniFocus。一天结束后，不管进展怎么样，我都会花几分钟再 回顾 下这两个地方，保持更新。\n* 在日常生活工作中，会遇到三类任务：1）已经规划好的任务；2）突然出现的任务；3）新的任务。\n    * 正常情况下按计划好的时间安排进行即可。\n    * 当有突然出现的任务时，考虑其紧急程度和需要完成的时间。如果2分钟内可完成，马上去做。如果不能，那么分析任务的复杂程度，用标签管理起来。Trello 和 OmniFocus 都有很好用的额标签功能。如果是未来某天需要做的事情，放到日历里。\n    * 当有新的任务出现时，放到 Trello 的 Todo 或者 OmniFocus 的 Inbox 里，等到时间允许或周末 回顾 时进行分类整理。\n* 每周进行 回顾。\n    * 每周周一回顾 Trello 。搞清楚任务的优先级、是否需要其他资源、是否在等待其他人的进度等等。我习惯自己脑子里有个大概的规划，这样做起事情来会更有效率。\n    * 每周周末回顾 OmniFocus。将接下来计划做的事情加上`Picked`标签。 这样当天能做的任务，会出现在`Next`透视图里。接下来能做的事情会出现在`Waiting`透视图里。\n\n## 总结\n\n* 我参考了 David Allen 的那本 GTD 的书，但是并没有完全按照他的设计来做。原因是，我已经有了一些对我有效的时间管理经验，不希望完全照搬别人的想法。当然我其实也没有那么多的任务需要管理，使用工具管理的目的是让自己不要有太大的压力工作和学习，以及优化自己的效率。整本书对我影响最大的是，所有任务的目标都要明确。这样在整理和细化任务的时候思路能够清晰明了。\n","source":"_posts/2020-04-26-gtd-plan.md","raw":"---\nlayout: post\ntitle: 我是如何管理工作和生活日常的？敏捷开发+GTD\ncategory: 生活随想\ntags: [GTD]\ndate: 2020-04-26\ndescription: 我是如何管理工作和生活日常的？敏捷开发+GTD\nkeywords: GTD, Fantastical 2, OmniFocus, Trello, 敏捷开发\n---\n\n工具：OmniFocus + Trello + 邮箱 + 日历\n\n## 设计\n\n- 我的初衷是把生活和工作中的琐事和短期长期目标管理起来，让每天做事情的效率更高点。不过如何在效率和压力之间找到平衡是一直困扰我的事情。想做的事情太多，时间太少，效率太低，没法儿做到尽善尽美。所以我还在不断探索中。\n- 是否需要把所有事情都管理起来？David Allen的那本书是推荐这么做的。目的是让自己更可能的信任整个系统。我并不打算怎么做。因为我并不觉得所有事情都需要“管理”，管理的目的是**规划**、**效率**和**提醒**。所以无论怎么设计，能够帮助到我做到那三点，我都认为是成功的。\n- 工具的选择？其实现在市场上GTD类的工具不要太多。我用OmniFocus来管理日常的唯一原因是，我很早就购买了。其他的，比如Trello、日历、邮箱都是免费的。\n\n### 怎么规划自己的事情？\n\n这个要谈到 David Allen 的方法了。 如果真的打算用GTD的方法来管理自己的时间，最好先找个没事儿做的一天早上，准备2-3个小时的事情规划。David Allen 的方法一共分五步：**收集** -> **处理** -> **整理** -> **回顾** -> **执行**。\n\n1. 收集\n    * 目的是清空大脑，让自己可以每天什么都不用**惦记**着。所有的事情都列出来，不用很细，比如想学画画、想读老舍的四世同堂、明天要去剪头发、后天要给女朋友挑礼物等等。事无巨细，一直列到再也想不出来什么事情为止。\n2. 处理\n    * 逐条分析自己的清单，目的是分清什么是能做的，什么不能做的，什么是最近要做的，什么是未来要做的，还有什么是无意义的事情。我们每天都会有很多念头和想做的事情，如何让自己的精力集中在有意义的事情上并不是一件容易的事情，需要长期的训练自己的大脑。(说实话，我还没有做到。) 二八定律讲到，我们80%的成果，是从20%的努力得到的。处理的目的就是让自己明白什么是重要的事情，而且在自己精力好的时候做重要的事情。最大化自己的成果。\n3. 整理\n    * 目的是让自己的清单具有**可行性**且**合理**。比如学画画这件事，需要收集学画画的资料、工具以及具体时间规划。那么这一步就是要将这些事情拆分整理分类。第一天做什么、第二天做什么一直到完成这个事情。需要注意的是，这并非是在今天做什么和明天做什么，因为每天都在变化，我们不能把事情计划得那么绝对，除非是考试等有deadline的事情。\n    * 在这一步，我们还需要区分事情本身需要的精力和时间。在一天中，人的精力不会一直是饱满的，事情也是。在精力好的时候做需要高度集中精力的，精力不好的时候做不太需要精力的事情是最有效的利用时间的方法。\n4. 回顾\n    * 每周花时间对自己的所有事情进行 回顾 并做调整是很重要的。目的在于修正我们对自己时间安排的合理性以及调整接下来要做的事情。我们总会或高或低的估计自己的能力。每周的回顾可以让我们不断的调整，找到最适合自己的方式。\n5. 执行\n    * 这点看上去有点废话。所有的计划没有执行等于零。不过如何有效率地执行就是个有意思的问题了。GTD中提到，我们可以从四个维度分析我们此时此刻应该做什么--情境、时间、精力和重要性。我们现在在处在什么状态，有多长时间、精力是否充沛以及哪件事情更重要。说白了就是对的时间做对的事情。这其实也是个探索和自我认知的过程，需要不断的尝试去发现最适合自己的。\n\n## 几个工具如何一起使用？\n\n### 日历\n\n* 我用的是Fantasical 2 客户端。但真正用起来发现Apple自带的日历其实已经够了。\n* 日历对我来说，是一个被动提醒工具。需要特定的时间/地点需要的事情，比如换雪胎、买卖大头菜（最近在玩动森）、交房租等等，我都会放到日历里边。这也是GTD那本书推荐的方法。工作方面，所有的会议邀请也都会在日历里。所以一天中必须做的事情都在里边了。\n* 日历有个好处是可以邀请其他人。有些事情需要其他人一起完成的。通知别人用日历再方便不过了。\n\n### 邮箱\n\n* 我工作和个人的邮箱都是**Gmail**为主，所以不用来会切换邮件客户端。即便有好几个不同的邮箱，Spark、Airmail等等都是很好的聚合工具。每天早上我会例行清空收件箱。需要以后处理的，工作的放Trello，个人的放OmniFocus的Inbox或者日历里。\n\n### Trello\n\n* 由于我工作需要定期评估，我需要整理自己一年内做的所有事情。公司在用Jira，但对我来说太笨重了，而且我的任务分布在好几个项目里，没法儿在一个Kanban里看到，很麻烦。所以我选择全部放到**Trello**里来管理。\n* 具体的管理就是敏捷开发的那一套。很多人都很熟悉。我分了Todo、Backlog、Doing、Review、Done、Abandoned几个list，基本也代表了我的整个工作流。任务出现的时候，就先放到Todo里（如果紧急，直接跳过Backlog到Doing里去）。然后分析任务的时间需求、紧急性，选择接下来要做的放到Backlog。开始做的时候，就放到Doing里。完成的时候放到回顾里等待。最后进入Done里。其中：\n    * Backlog和Doing里一般不会超过三个card。太多就丧失了敏捷开发的意义。\n    * 回顾不单单是Code Review、Peer Review，我把部署也算作回顾的一部分。\n    * Done 我会每半年创建一个新的list。比如`Done[2020](01/01-)`是我现在在用的。`Done[2019](07/01-12/31)` 是去年下半年所有完成的任务。因为做的事情太多，全放在一个`Done`里太长了。\n    * Abandoned 是本来计划做，最后由于各种原因中止或者撤销的。对我来说，它类似日志的作用，做个记录而已。\n\n### OmniFocus\n\n- 任务按照以下维度切分：\n    - 项目类别 -- 生活日常、想学的、必须学的、英语考试\n        - 英语是特殊需求，单独做了分类\n    - 精力需求指数 -- 高、中、低\n    - 优先级 -- 高、低。即有没有加 flag\n- 这是我的 OmniFocus 打开后的默认界面：\n    - ![](https://i.imgur.com/o6hwvwr.jpg)\n- 每天早晨起来后打开 OmniFocus 查看 `Next` 即可知道接下来需要做的事情。\n\n#### 透视图配置\n\n* 除了OmniFocus自带的 Inbox、Projects、Tags、Forecast、Flagged、Review和Completed 外，我创建了`Next`和`Waiting`两个自定义的透视图。\n* `Next` 是用来查看今天接下来能做的事情。\n    * 配置很简单： 只选择First Available就够了。\n* `Waiting` 是用来记录接下来一段时间内选择做的事情。在每周回顾的时候把所有希望接下来做的事情都加上`Picked`的标签。\n    * <img src=\"https://i.imgur.com/8nyvah0.jpg\" style=\"width: 300px\" />\n\n#### 标签配置\n\n* <img src=\"https://i.imgur.com/CweaNRb.jpg\" style=\"width: 200px\" />\n* 我给每个标签都加上emoji，这样所有任务看起来更直观一点。比如`High Energy` 是🐝， `Low Energy` 是🐢。\n\n#### 项目配置\n\n* <img src=\"https://i.imgur.com/LwWEBhX.jpg\" style=\"width: 300px\" />\n* 项目本身是包含了短期和长期目标以及整体规划的地方。我现在是软件工程师，未来的目标是成为机器学习工程师，然后还希望能够培养弹钢琴和阅读的爱好。那么\n    * `生活日常` 就是日常的琐事。比如拖地、给狗狗剪指甲啥的。需要完成一次，defer下一次。\n    * `想学的`就是钢琴、哲学和阅读感兴趣的书,\n    * `必须学的`就是机器学习相关的课程以及工作相关的知识。\n\n## 流程规划\n\n* 早上起来花十分钟查看邮件，需要记录的事情扔到 Trello 的 Todo 或者 OmniFocus 的 Inbox 里待进一步处理。\n* 如果是工作日，从Trello开始计划今天的安排。如果是休息时间，直接略过 Trello，只看OmniFocus。一天结束后，不管进展怎么样，我都会花几分钟再 回顾 下这两个地方，保持更新。\n* 在日常生活工作中，会遇到三类任务：1）已经规划好的任务；2）突然出现的任务；3）新的任务。\n    * 正常情况下按计划好的时间安排进行即可。\n    * 当有突然出现的任务时，考虑其紧急程度和需要完成的时间。如果2分钟内可完成，马上去做。如果不能，那么分析任务的复杂程度，用标签管理起来。Trello 和 OmniFocus 都有很好用的额标签功能。如果是未来某天需要做的事情，放到日历里。\n    * 当有新的任务出现时，放到 Trello 的 Todo 或者 OmniFocus 的 Inbox 里，等到时间允许或周末 回顾 时进行分类整理。\n* 每周进行 回顾。\n    * 每周周一回顾 Trello 。搞清楚任务的优先级、是否需要其他资源、是否在等待其他人的进度等等。我习惯自己脑子里有个大概的规划，这样做起事情来会更有效率。\n    * 每周周末回顾 OmniFocus。将接下来计划做的事情加上`Picked`标签。 这样当天能做的任务，会出现在`Next`透视图里。接下来能做的事情会出现在`Waiting`透视图里。\n\n## 总结\n\n* 我参考了 David Allen 的那本 GTD 的书，但是并没有完全按照他的设计来做。原因是，我已经有了一些对我有效的时间管理经验，不希望完全照搬别人的想法。当然我其实也没有那么多的任务需要管理，使用工具管理的目的是让自己不要有太大的压力工作和学习，以及优化自己的效率。整本书对我影响最大的是，所有任务的目标都要明确。这样在整理和细化任务的时候思路能够清晰明了。\n","slug":"2020-04-26-gtd-plan","published":1,"updated":"2022-02-12T20:53:10.509Z","comments":1,"photos":[],"link":"","_id":"ckzkc92xl002goqox044133ng","content":"<p>工具：OmniFocus + Trello + 邮箱 + 日历</p>\n<h2 id=\"设计\"><a href=\"#设计\" class=\"headerlink\" title=\"设计\"></a>设计</h2><ul>\n<li>我的初衷是把生活和工作中的琐事和短期长期目标管理起来，让每天做事情的效率更高点。不过如何在效率和压力之间找到平衡是一直困扰我的事情。想做的事情太多，时间太少，效率太低，没法儿做到尽善尽美。所以我还在不断探索中。</li>\n<li>是否需要把所有事情都管理起来？David Allen的那本书是推荐这么做的。目的是让自己更可能的信任整个系统。我并不打算怎么做。因为我并不觉得所有事情都需要“管理”，管理的目的是<strong>规划</strong>、<strong>效率</strong>和<strong>提醒</strong>。所以无论怎么设计，能够帮助到我做到那三点，我都认为是成功的。</li>\n<li>工具的选择？其实现在市场上GTD类的工具不要太多。我用OmniFocus来管理日常的唯一原因是，我很早就购买了。其他的，比如Trello、日历、邮箱都是免费的。</li>\n</ul>\n<h3 id=\"怎么规划自己的事情？\"><a href=\"#怎么规划自己的事情？\" class=\"headerlink\" title=\"怎么规划自己的事情？\"></a>怎么规划自己的事情？</h3><p>这个要谈到 David Allen 的方法了。 如果真的打算用GTD的方法来管理自己的时间，最好先找个没事儿做的一天早上，准备2-3个小时的事情规划。David Allen 的方法一共分五步：<strong>收集</strong> -&gt; <strong>处理</strong> -&gt; <strong>整理</strong> -&gt; <strong>回顾</strong> -&gt; <strong>执行</strong>。</p>\n<ol>\n<li>收集<ul>\n<li>目的是清空大脑，让自己可以每天什么都不用<strong>惦记</strong>着。所有的事情都列出来，不用很细，比如想学画画、想读老舍的四世同堂、明天要去剪头发、后天要给女朋友挑礼物等等。事无巨细，一直列到再也想不出来什么事情为止。</li>\n</ul>\n</li>\n<li>处理<ul>\n<li>逐条分析自己的清单，目的是分清什么是能做的，什么不能做的，什么是最近要做的，什么是未来要做的，还有什么是无意义的事情。我们每天都会有很多念头和想做的事情，如何让自己的精力集中在有意义的事情上并不是一件容易的事情，需要长期的训练自己的大脑。(说实话，我还没有做到。) 二八定律讲到，我们80%的成果，是从20%的努力得到的。处理的目的就是让自己明白什么是重要的事情，而且在自己精力好的时候做重要的事情。最大化自己的成果。</li>\n</ul>\n</li>\n<li>整理<ul>\n<li>目的是让自己的清单具有<strong>可行性</strong>且<strong>合理</strong>。比如学画画这件事，需要收集学画画的资料、工具以及具体时间规划。那么这一步就是要将这些事情拆分整理分类。第一天做什么、第二天做什么一直到完成这个事情。需要注意的是，这并非是在今天做什么和明天做什么，因为每天都在变化，我们不能把事情计划得那么绝对，除非是考试等有deadline的事情。</li>\n<li>在这一步，我们还需要区分事情本身需要的精力和时间。在一天中，人的精力不会一直是饱满的，事情也是。在精力好的时候做需要高度集中精力的，精力不好的时候做不太需要精力的事情是最有效的利用时间的方法。</li>\n</ul>\n</li>\n<li>回顾<ul>\n<li>每周花时间对自己的所有事情进行 回顾 并做调整是很重要的。目的在于修正我们对自己时间安排的合理性以及调整接下来要做的事情。我们总会或高或低的估计自己的能力。每周的回顾可以让我们不断的调整，找到最适合自己的方式。</li>\n</ul>\n</li>\n<li>执行<ul>\n<li>这点看上去有点废话。所有的计划没有执行等于零。不过如何有效率地执行就是个有意思的问题了。GTD中提到，我们可以从四个维度分析我们此时此刻应该做什么–情境、时间、精力和重要性。我们现在在处在什么状态，有多长时间、精力是否充沛以及哪件事情更重要。说白了就是对的时间做对的事情。这其实也是个探索和自我认知的过程，需要不断的尝试去发现最适合自己的。</li>\n</ul>\n</li>\n</ol>\n<h2 id=\"几个工具如何一起使用？\"><a href=\"#几个工具如何一起使用？\" class=\"headerlink\" title=\"几个工具如何一起使用？\"></a>几个工具如何一起使用？</h2><h3 id=\"日历\"><a href=\"#日历\" class=\"headerlink\" title=\"日历\"></a>日历</h3><ul>\n<li>我用的是Fantasical 2 客户端。但真正用起来发现Apple自带的日历其实已经够了。</li>\n<li>日历对我来说，是一个被动提醒工具。需要特定的时间&#x2F;地点需要的事情，比如换雪胎、买卖大头菜（最近在玩动森）、交房租等等，我都会放到日历里边。这也是GTD那本书推荐的方法。工作方面，所有的会议邀请也都会在日历里。所以一天中必须做的事情都在里边了。</li>\n<li>日历有个好处是可以邀请其他人。有些事情需要其他人一起完成的。通知别人用日历再方便不过了。</li>\n</ul>\n<h3 id=\"邮箱\"><a href=\"#邮箱\" class=\"headerlink\" title=\"邮箱\"></a>邮箱</h3><ul>\n<li>我工作和个人的邮箱都是<strong>Gmail</strong>为主，所以不用来会切换邮件客户端。即便有好几个不同的邮箱，Spark、Airmail等等都是很好的聚合工具。每天早上我会例行清空收件箱。需要以后处理的，工作的放Trello，个人的放OmniFocus的Inbox或者日历里。</li>\n</ul>\n<h3 id=\"Trello\"><a href=\"#Trello\" class=\"headerlink\" title=\"Trello\"></a>Trello</h3><ul>\n<li>由于我工作需要定期评估，我需要整理自己一年内做的所有事情。公司在用Jira，但对我来说太笨重了，而且我的任务分布在好几个项目里，没法儿在一个Kanban里看到，很麻烦。所以我选择全部放到<strong>Trello</strong>里来管理。</li>\n<li>具体的管理就是敏捷开发的那一套。很多人都很熟悉。我分了Todo、Backlog、Doing、Review、Done、Abandoned几个list，基本也代表了我的整个工作流。任务出现的时候，就先放到Todo里（如果紧急，直接跳过Backlog到Doing里去）。然后分析任务的时间需求、紧急性，选择接下来要做的放到Backlog。开始做的时候，就放到Doing里。完成的时候放到回顾里等待。最后进入Done里。其中：<ul>\n<li>Backlog和Doing里一般不会超过三个card。太多就丧失了敏捷开发的意义。</li>\n<li>回顾不单单是Code Review、Peer Review，我把部署也算作回顾的一部分。</li>\n<li>Done 我会每半年创建一个新的list。比如<code>Done[2020](01/01-)</code>是我现在在用的。<code>Done[2019](07/01-12/31)</code> 是去年下半年所有完成的任务。因为做的事情太多，全放在一个<code>Done</code>里太长了。</li>\n<li>Abandoned 是本来计划做，最后由于各种原因中止或者撤销的。对我来说，它类似日志的作用，做个记录而已。</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"OmniFocus\"><a href=\"#OmniFocus\" class=\"headerlink\" title=\"OmniFocus\"></a>OmniFocus</h3><ul>\n<li>任务按照以下维度切分：<ul>\n<li>项目类别 – 生活日常、想学的、必须学的、英语考试<ul>\n<li>英语是特殊需求，单独做了分类</li>\n</ul>\n</li>\n<li>精力需求指数 – 高、中、低</li>\n<li>优先级 – 高、低。即有没有加 flag</li>\n</ul>\n</li>\n<li>这是我的 OmniFocus 打开后的默认界面：<ul>\n<li><img src=\"https://i.imgur.com/o6hwvwr.jpg\"></li>\n</ul>\n</li>\n<li>每天早晨起来后打开 OmniFocus 查看 <code>Next</code> 即可知道接下来需要做的事情。</li>\n</ul>\n<h4 id=\"透视图配置\"><a href=\"#透视图配置\" class=\"headerlink\" title=\"透视图配置\"></a>透视图配置</h4><ul>\n<li>除了OmniFocus自带的 Inbox、Projects、Tags、Forecast、Flagged、Review和Completed 外，我创建了<code>Next</code>和<code>Waiting</code>两个自定义的透视图。</li>\n<li><code>Next</code> 是用来查看今天接下来能做的事情。<ul>\n<li>配置很简单： 只选择First Available就够了。</li>\n</ul>\n</li>\n<li><code>Waiting</code> 是用来记录接下来一段时间内选择做的事情。在每周回顾的时候把所有希望接下来做的事情都加上<code>Picked</code>的标签。<ul>\n<li><img src=\"https://i.imgur.com/8nyvah0.jpg\" style=\"width: 300px\" /></li>\n</ul>\n</li>\n</ul>\n<h4 id=\"标签配置\"><a href=\"#标签配置\" class=\"headerlink\" title=\"标签配置\"></a>标签配置</h4><ul>\n<li><img src=\"https://i.imgur.com/CweaNRb.jpg\" style=\"width: 200px\" /></li>\n<li>我给每个标签都加上emoji，这样所有任务看起来更直观一点。比如<code>High Energy</code> 是🐝， <code>Low Energy</code> 是🐢。</li>\n</ul>\n<h4 id=\"项目配置\"><a href=\"#项目配置\" class=\"headerlink\" title=\"项目配置\"></a>项目配置</h4><ul>\n<li><img src=\"https://i.imgur.com/LwWEBhX.jpg\" style=\"width: 300px\" /></li>\n<li>项目本身是包含了短期和长期目标以及整体规划的地方。我现在是软件工程师，未来的目标是成为机器学习工程师，然后还希望能够培养弹钢琴和阅读的爱好。那么<ul>\n<li><code>生活日常</code> 就是日常的琐事。比如拖地、给狗狗剪指甲啥的。需要完成一次，defer下一次。</li>\n<li><code>想学的</code>就是钢琴、哲学和阅读感兴趣的书,</li>\n<li><code>必须学的</code>就是机器学习相关的课程以及工作相关的知识。</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"流程规划\"><a href=\"#流程规划\" class=\"headerlink\" title=\"流程规划\"></a>流程规划</h2><ul>\n<li>早上起来花十分钟查看邮件，需要记录的事情扔到 Trello 的 Todo 或者 OmniFocus 的 Inbox 里待进一步处理。</li>\n<li>如果是工作日，从Trello开始计划今天的安排。如果是休息时间，直接略过 Trello，只看OmniFocus。一天结束后，不管进展怎么样，我都会花几分钟再 回顾 下这两个地方，保持更新。</li>\n<li>在日常生活工作中，会遇到三类任务：1）已经规划好的任务；2）突然出现的任务；3）新的任务。<ul>\n<li>正常情况下按计划好的时间安排进行即可。</li>\n<li>当有突然出现的任务时，考虑其紧急程度和需要完成的时间。如果2分钟内可完成，马上去做。如果不能，那么分析任务的复杂程度，用标签管理起来。Trello 和 OmniFocus 都有很好用的额标签功能。如果是未来某天需要做的事情，放到日历里。</li>\n<li>当有新的任务出现时，放到 Trello 的 Todo 或者 OmniFocus 的 Inbox 里，等到时间允许或周末 回顾 时进行分类整理。</li>\n</ul>\n</li>\n<li>每周进行 回顾。<ul>\n<li>每周周一回顾 Trello 。搞清楚任务的优先级、是否需要其他资源、是否在等待其他人的进度等等。我习惯自己脑子里有个大概的规划，这样做起事情来会更有效率。</li>\n<li>每周周末回顾 OmniFocus。将接下来计划做的事情加上<code>Picked</code>标签。 这样当天能做的任务，会出现在<code>Next</code>透视图里。接下来能做的事情会出现在<code>Waiting</code>透视图里。</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h2><ul>\n<li>我参考了 David Allen 的那本 GTD 的书，但是并没有完全按照他的设计来做。原因是，我已经有了一些对我有效的时间管理经验，不希望完全照搬别人的想法。当然我其实也没有那么多的任务需要管理，使用工具管理的目的是让自己不要有太大的压力工作和学习，以及优化自己的效率。整本书对我影响最大的是，所有任务的目标都要明确。这样在整理和细化任务的时候思路能够清晰明了。</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<p>工具：OmniFocus + Trello + 邮箱 + 日历</p>\n<h2 id=\"设计\"><a href=\"#设计\" class=\"headerlink\" title=\"设计\"></a>设计</h2><ul>\n<li>我的初衷是把生活和工作中的琐事和短期长期目标管理起来，让每天做事情的效率更高点。不过如何在效率和压力之间找到平衡是一直困扰我的事情。想做的事情太多，时间太少，效率太低，没法儿做到尽善尽美。所以我还在不断探索中。</li>\n<li>是否需要把所有事情都管理起来？David Allen的那本书是推荐这么做的。目的是让自己更可能的信任整个系统。我并不打算怎么做。因为我并不觉得所有事情都需要“管理”，管理的目的是<strong>规划</strong>、<strong>效率</strong>和<strong>提醒</strong>。所以无论怎么设计，能够帮助到我做到那三点，我都认为是成功的。</li>\n<li>工具的选择？其实现在市场上GTD类的工具不要太多。我用OmniFocus来管理日常的唯一原因是，我很早就购买了。其他的，比如Trello、日历、邮箱都是免费的。</li>\n</ul>\n<h3 id=\"怎么规划自己的事情？\"><a href=\"#怎么规划自己的事情？\" class=\"headerlink\" title=\"怎么规划自己的事情？\"></a>怎么规划自己的事情？</h3><p>这个要谈到 David Allen 的方法了。 如果真的打算用GTD的方法来管理自己的时间，最好先找个没事儿做的一天早上，准备2-3个小时的事情规划。David Allen 的方法一共分五步：<strong>收集</strong> -&gt; <strong>处理</strong> -&gt; <strong>整理</strong> -&gt; <strong>回顾</strong> -&gt; <strong>执行</strong>。</p>\n<ol>\n<li>收集<ul>\n<li>目的是清空大脑，让自己可以每天什么都不用<strong>惦记</strong>着。所有的事情都列出来，不用很细，比如想学画画、想读老舍的四世同堂、明天要去剪头发、后天要给女朋友挑礼物等等。事无巨细，一直列到再也想不出来什么事情为止。</li>\n</ul>\n</li>\n<li>处理<ul>\n<li>逐条分析自己的清单，目的是分清什么是能做的，什么不能做的，什么是最近要做的，什么是未来要做的，还有什么是无意义的事情。我们每天都会有很多念头和想做的事情，如何让自己的精力集中在有意义的事情上并不是一件容易的事情，需要长期的训练自己的大脑。(说实话，我还没有做到。) 二八定律讲到，我们80%的成果，是从20%的努力得到的。处理的目的就是让自己明白什么是重要的事情，而且在自己精力好的时候做重要的事情。最大化自己的成果。</li>\n</ul>\n</li>\n<li>整理<ul>\n<li>目的是让自己的清单具有<strong>可行性</strong>且<strong>合理</strong>。比如学画画这件事，需要收集学画画的资料、工具以及具体时间规划。那么这一步就是要将这些事情拆分整理分类。第一天做什么、第二天做什么一直到完成这个事情。需要注意的是，这并非是在今天做什么和明天做什么，因为每天都在变化，我们不能把事情计划得那么绝对，除非是考试等有deadline的事情。</li>\n<li>在这一步，我们还需要区分事情本身需要的精力和时间。在一天中，人的精力不会一直是饱满的，事情也是。在精力好的时候做需要高度集中精力的，精力不好的时候做不太需要精力的事情是最有效的利用时间的方法。</li>\n</ul>\n</li>\n<li>回顾<ul>\n<li>每周花时间对自己的所有事情进行 回顾 并做调整是很重要的。目的在于修正我们对自己时间安排的合理性以及调整接下来要做的事情。我们总会或高或低的估计自己的能力。每周的回顾可以让我们不断的调整，找到最适合自己的方式。</li>\n</ul>\n</li>\n<li>执行<ul>\n<li>这点看上去有点废话。所有的计划没有执行等于零。不过如何有效率地执行就是个有意思的问题了。GTD中提到，我们可以从四个维度分析我们此时此刻应该做什么–情境、时间、精力和重要性。我们现在在处在什么状态，有多长时间、精力是否充沛以及哪件事情更重要。说白了就是对的时间做对的事情。这其实也是个探索和自我认知的过程，需要不断的尝试去发现最适合自己的。</li>\n</ul>\n</li>\n</ol>\n<h2 id=\"几个工具如何一起使用？\"><a href=\"#几个工具如何一起使用？\" class=\"headerlink\" title=\"几个工具如何一起使用？\"></a>几个工具如何一起使用？</h2><h3 id=\"日历\"><a href=\"#日历\" class=\"headerlink\" title=\"日历\"></a>日历</h3><ul>\n<li>我用的是Fantasical 2 客户端。但真正用起来发现Apple自带的日历其实已经够了。</li>\n<li>日历对我来说，是一个被动提醒工具。需要特定的时间&#x2F;地点需要的事情，比如换雪胎、买卖大头菜（最近在玩动森）、交房租等等，我都会放到日历里边。这也是GTD那本书推荐的方法。工作方面，所有的会议邀请也都会在日历里。所以一天中必须做的事情都在里边了。</li>\n<li>日历有个好处是可以邀请其他人。有些事情需要其他人一起完成的。通知别人用日历再方便不过了。</li>\n</ul>\n<h3 id=\"邮箱\"><a href=\"#邮箱\" class=\"headerlink\" title=\"邮箱\"></a>邮箱</h3><ul>\n<li>我工作和个人的邮箱都是<strong>Gmail</strong>为主，所以不用来会切换邮件客户端。即便有好几个不同的邮箱，Spark、Airmail等等都是很好的聚合工具。每天早上我会例行清空收件箱。需要以后处理的，工作的放Trello，个人的放OmniFocus的Inbox或者日历里。</li>\n</ul>\n<h3 id=\"Trello\"><a href=\"#Trello\" class=\"headerlink\" title=\"Trello\"></a>Trello</h3><ul>\n<li>由于我工作需要定期评估，我需要整理自己一年内做的所有事情。公司在用Jira，但对我来说太笨重了，而且我的任务分布在好几个项目里，没法儿在一个Kanban里看到，很麻烦。所以我选择全部放到<strong>Trello</strong>里来管理。</li>\n<li>具体的管理就是敏捷开发的那一套。很多人都很熟悉。我分了Todo、Backlog、Doing、Review、Done、Abandoned几个list，基本也代表了我的整个工作流。任务出现的时候，就先放到Todo里（如果紧急，直接跳过Backlog到Doing里去）。然后分析任务的时间需求、紧急性，选择接下来要做的放到Backlog。开始做的时候，就放到Doing里。完成的时候放到回顾里等待。最后进入Done里。其中：<ul>\n<li>Backlog和Doing里一般不会超过三个card。太多就丧失了敏捷开发的意义。</li>\n<li>回顾不单单是Code Review、Peer Review，我把部署也算作回顾的一部分。</li>\n<li>Done 我会每半年创建一个新的list。比如<code>Done[2020](01/01-)</code>是我现在在用的。<code>Done[2019](07/01-12/31)</code> 是去年下半年所有完成的任务。因为做的事情太多，全放在一个<code>Done</code>里太长了。</li>\n<li>Abandoned 是本来计划做，最后由于各种原因中止或者撤销的。对我来说，它类似日志的作用，做个记录而已。</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"OmniFocus\"><a href=\"#OmniFocus\" class=\"headerlink\" title=\"OmniFocus\"></a>OmniFocus</h3><ul>\n<li>任务按照以下维度切分：<ul>\n<li>项目类别 – 生活日常、想学的、必须学的、英语考试<ul>\n<li>英语是特殊需求，单独做了分类</li>\n</ul>\n</li>\n<li>精力需求指数 – 高、中、低</li>\n<li>优先级 – 高、低。即有没有加 flag</li>\n</ul>\n</li>\n<li>这是我的 OmniFocus 打开后的默认界面：<ul>\n<li><img src=\"https://i.imgur.com/o6hwvwr.jpg\"></li>\n</ul>\n</li>\n<li>每天早晨起来后打开 OmniFocus 查看 <code>Next</code> 即可知道接下来需要做的事情。</li>\n</ul>\n<h4 id=\"透视图配置\"><a href=\"#透视图配置\" class=\"headerlink\" title=\"透视图配置\"></a>透视图配置</h4><ul>\n<li>除了OmniFocus自带的 Inbox、Projects、Tags、Forecast、Flagged、Review和Completed 外，我创建了<code>Next</code>和<code>Waiting</code>两个自定义的透视图。</li>\n<li><code>Next</code> 是用来查看今天接下来能做的事情。<ul>\n<li>配置很简单： 只选择First Available就够了。</li>\n</ul>\n</li>\n<li><code>Waiting</code> 是用来记录接下来一段时间内选择做的事情。在每周回顾的时候把所有希望接下来做的事情都加上<code>Picked</code>的标签。<ul>\n<li><img src=\"https://i.imgur.com/8nyvah0.jpg\" style=\"width: 300px\" /></li>\n</ul>\n</li>\n</ul>\n<h4 id=\"标签配置\"><a href=\"#标签配置\" class=\"headerlink\" title=\"标签配置\"></a>标签配置</h4><ul>\n<li><img src=\"https://i.imgur.com/CweaNRb.jpg\" style=\"width: 200px\" /></li>\n<li>我给每个标签都加上emoji，这样所有任务看起来更直观一点。比如<code>High Energy</code> 是🐝， <code>Low Energy</code> 是🐢。</li>\n</ul>\n<h4 id=\"项目配置\"><a href=\"#项目配置\" class=\"headerlink\" title=\"项目配置\"></a>项目配置</h4><ul>\n<li><img src=\"https://i.imgur.com/LwWEBhX.jpg\" style=\"width: 300px\" /></li>\n<li>项目本身是包含了短期和长期目标以及整体规划的地方。我现在是软件工程师，未来的目标是成为机器学习工程师，然后还希望能够培养弹钢琴和阅读的爱好。那么<ul>\n<li><code>生活日常</code> 就是日常的琐事。比如拖地、给狗狗剪指甲啥的。需要完成一次，defer下一次。</li>\n<li><code>想学的</code>就是钢琴、哲学和阅读感兴趣的书,</li>\n<li><code>必须学的</code>就是机器学习相关的课程以及工作相关的知识。</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"流程规划\"><a href=\"#流程规划\" class=\"headerlink\" title=\"流程规划\"></a>流程规划</h2><ul>\n<li>早上起来花十分钟查看邮件，需要记录的事情扔到 Trello 的 Todo 或者 OmniFocus 的 Inbox 里待进一步处理。</li>\n<li>如果是工作日，从Trello开始计划今天的安排。如果是休息时间，直接略过 Trello，只看OmniFocus。一天结束后，不管进展怎么样，我都会花几分钟再 回顾 下这两个地方，保持更新。</li>\n<li>在日常生活工作中，会遇到三类任务：1）已经规划好的任务；2）突然出现的任务；3）新的任务。<ul>\n<li>正常情况下按计划好的时间安排进行即可。</li>\n<li>当有突然出现的任务时，考虑其紧急程度和需要完成的时间。如果2分钟内可完成，马上去做。如果不能，那么分析任务的复杂程度，用标签管理起来。Trello 和 OmniFocus 都有很好用的额标签功能。如果是未来某天需要做的事情，放到日历里。</li>\n<li>当有新的任务出现时，放到 Trello 的 Todo 或者 OmniFocus 的 Inbox 里，等到时间允许或周末 回顾 时进行分类整理。</li>\n</ul>\n</li>\n<li>每周进行 回顾。<ul>\n<li>每周周一回顾 Trello 。搞清楚任务的优先级、是否需要其他资源、是否在等待其他人的进度等等。我习惯自己脑子里有个大概的规划，这样做起事情来会更有效率。</li>\n<li>每周周末回顾 OmniFocus。将接下来计划做的事情加上<code>Picked</code>标签。 这样当天能做的任务，会出现在<code>Next</code>透视图里。接下来能做的事情会出现在<code>Waiting</code>透视图里。</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h2><ul>\n<li>我参考了 David Allen 的那本 GTD 的书，但是并没有完全按照他的设计来做。原因是，我已经有了一些对我有效的时间管理经验，不希望完全照搬别人的想法。当然我其实也没有那么多的任务需要管理，使用工具管理的目的是让自己不要有太大的压力工作和学习，以及优化自己的效率。整本书对我影响最大的是，所有任务的目标都要明确。这样在整理和细化任务的时候思路能够清晰明了。</li>\n</ul>\n"},{"layout":"post","title":"Linux 常用命令(2) - 重定向输出和输入, 查看网络端口, 压缩和解压缩","date":"2021-03-10T05:00:00.000Z","description":"Linux 常用命令, netcat, tar, gzip","keywords":"netcat, tar, gzip, stdout, stdin, stderr","_content":"\n## 重定向输出和输入\n\n在 Bash 或者其他Linux shell里，标准的I/O流分为：\n\n* `0` - `stdin` 标准输入\n* `1` - `stdout` 标准输出\n* `2` - `stderr` 标准错误\n\n从标准输出开始。标准输出是程序正常输出的内容。默认情况下，所有信息都会输出到屏幕上。重定向输出就是捕获程序的输出然后重定向到另一个程序或者文件中。一般用 `n>` 来实现。`n` 可以是 `0`, `1`, 或者 `2`。 省略`n` 默认为 `1` 即标准输出。\n\n举个例子， `command > file` 就是将命令 `command` 执行的结果输出到文件 `file` 里。 这个命令也等同于 `command 1> file`。 同理，`command 2> file` 就是将命令执行输出到错误重定向到文件里。 如果希望过滤输出，可以重定向到 `/dev/null` 来实现。比如， `command 2> /dev/null`，命令执行结果中的错误信息就会被过滤掉。\n\n那么如何将标准输出和标准错误重定向到一个文件里呢？ `command &> file`，`&` 表示同时将 `1` 和 `2` 输出到文件里。 还有一种方式可以实现同样的效果：`command > file 2>&1`，追加 `2>&1` 是将命令中的输出错误重定向到标准输出中。\n\n在日常使用中，我们也经常碰到 `>>` 。不同于 `> file` 每次执行都会覆盖整个文件， `>>` 会以追加的方式输出内容到文件。\n\n最后来说说标准输入 `<`。用法：`command < input-file`，是将 `input-file` 中的内容作为输入提供给 `command`。这个命令等同于 `command 0< input-file`。举个例子，`grep \"ERROR\" < /var/log/messages`，将文件 `/var/log/messages` 作为命令 `grep` 的输入。其效果类似于 `cat /var/log/message | grep \"ERROR\"`。\n\n## 查看网络端口\n\n### netcat(nc)\n\nnetcat 是一个使用TCP或者UDP协议读写数据的工具。可以用来检测IP地址或域名端口是否开放。\n\n* `nc -z -v 10.10.8.8 20-80`\n    * 扫描 10.10.8.8 的TCP端口 20-80，查看哪些是开放的。\n    * `-v` verbose，输出更多的信息\n    * `-z` 仅检测开放端口\n* `nc -z -v 10.10.8.8 20-80 2>&1 | grep succeeded`\n    * 2>&1 重定向标准输出的错误信息到标准输出中。\n    * 然后通过 grep succeeded来过滤失败的信息。\n\n* `nc -z -v -u 10.10.8.8 80`\n    * `-u` 仅检测UDP协议\n\n## 压缩和解压缩\n\n### tar\n\n* 压缩\n    * `tar -czf archive-name.tar.gz file1 file2 dir1...`\n        * `-c` - 表明创建压缩文件\n        * `-z` - 压缩方式为 gzip\n        * `-f` - 指定压缩包文件名\n        * `file1 file2 dir1...` - 被压缩的文件列表或文件目录\n* 解压缩\n    * `tar -xvf archive.tar.gz -C /home/linuxize/files`\n        * `-x` - 表明解压缩\n        * `-v` - 打印更多的详细信息\n        * `-f archive.tar.gz` - 压缩包文件名\n        * `-C /home/linuxize/files` - 解压到指定目录\n    * `tar -xf archive.tar.gz file1 file2`\n        * 仅解压文件 file1 和file2\n    * `tar -xf archive.tar.gz --wildcards '*.js'`\n        * 用通配符来需要指定解压的文件\n* 列出压缩包里的文件名\n    * `tar -tf archive.tar.gz`\n\n### gzip\n\n* `gzip -d file.gz`\n    * 解压到当前目录，并删掉压缩包\n    * 指定 `-k` 可以避免压缩包被删除\n\n## 参考\n\n* https://linuxize.com/post/bash-redirect-stderr-stdout/\n* https://tldp.org/LDP/abs/html/io-redirection.html\n* https://linuxize.com/post/tcpdump-command-in-linux/\n* https://linuxize.com/post/how-to-create-tar-gz-file/\n* https://linuxize.com/post/netcat-nc-command-with-examples/","source":"_posts/2021-03-10-linux-common-commands-2.md","raw":"---\nlayout: post\ntitle: Linux 常用命令(2) - 重定向输出和输入, 查看网络端口, 压缩和解压缩\ncategory: 编程学习\ntags: [Linux, stdin, stdout, stderr, netcat, tar, gzip]\ndate: 2021-03-10\ndescription: Linux 常用命令, netcat, tar, gzip\nkeywords: netcat, tar, gzip, stdout, stdin, stderr\n---\n\n## 重定向输出和输入\n\n在 Bash 或者其他Linux shell里，标准的I/O流分为：\n\n* `0` - `stdin` 标准输入\n* `1` - `stdout` 标准输出\n* `2` - `stderr` 标准错误\n\n从标准输出开始。标准输出是程序正常输出的内容。默认情况下，所有信息都会输出到屏幕上。重定向输出就是捕获程序的输出然后重定向到另一个程序或者文件中。一般用 `n>` 来实现。`n` 可以是 `0`, `1`, 或者 `2`。 省略`n` 默认为 `1` 即标准输出。\n\n举个例子， `command > file` 就是将命令 `command` 执行的结果输出到文件 `file` 里。 这个命令也等同于 `command 1> file`。 同理，`command 2> file` 就是将命令执行输出到错误重定向到文件里。 如果希望过滤输出，可以重定向到 `/dev/null` 来实现。比如， `command 2> /dev/null`，命令执行结果中的错误信息就会被过滤掉。\n\n那么如何将标准输出和标准错误重定向到一个文件里呢？ `command &> file`，`&` 表示同时将 `1` 和 `2` 输出到文件里。 还有一种方式可以实现同样的效果：`command > file 2>&1`，追加 `2>&1` 是将命令中的输出错误重定向到标准输出中。\n\n在日常使用中，我们也经常碰到 `>>` 。不同于 `> file` 每次执行都会覆盖整个文件， `>>` 会以追加的方式输出内容到文件。\n\n最后来说说标准输入 `<`。用法：`command < input-file`，是将 `input-file` 中的内容作为输入提供给 `command`。这个命令等同于 `command 0< input-file`。举个例子，`grep \"ERROR\" < /var/log/messages`，将文件 `/var/log/messages` 作为命令 `grep` 的输入。其效果类似于 `cat /var/log/message | grep \"ERROR\"`。\n\n## 查看网络端口\n\n### netcat(nc)\n\nnetcat 是一个使用TCP或者UDP协议读写数据的工具。可以用来检测IP地址或域名端口是否开放。\n\n* `nc -z -v 10.10.8.8 20-80`\n    * 扫描 10.10.8.8 的TCP端口 20-80，查看哪些是开放的。\n    * `-v` verbose，输出更多的信息\n    * `-z` 仅检测开放端口\n* `nc -z -v 10.10.8.8 20-80 2>&1 | grep succeeded`\n    * 2>&1 重定向标准输出的错误信息到标准输出中。\n    * 然后通过 grep succeeded来过滤失败的信息。\n\n* `nc -z -v -u 10.10.8.8 80`\n    * `-u` 仅检测UDP协议\n\n## 压缩和解压缩\n\n### tar\n\n* 压缩\n    * `tar -czf archive-name.tar.gz file1 file2 dir1...`\n        * `-c` - 表明创建压缩文件\n        * `-z` - 压缩方式为 gzip\n        * `-f` - 指定压缩包文件名\n        * `file1 file2 dir1...` - 被压缩的文件列表或文件目录\n* 解压缩\n    * `tar -xvf archive.tar.gz -C /home/linuxize/files`\n        * `-x` - 表明解压缩\n        * `-v` - 打印更多的详细信息\n        * `-f archive.tar.gz` - 压缩包文件名\n        * `-C /home/linuxize/files` - 解压到指定目录\n    * `tar -xf archive.tar.gz file1 file2`\n        * 仅解压文件 file1 和file2\n    * `tar -xf archive.tar.gz --wildcards '*.js'`\n        * 用通配符来需要指定解压的文件\n* 列出压缩包里的文件名\n    * `tar -tf archive.tar.gz`\n\n### gzip\n\n* `gzip -d file.gz`\n    * 解压到当前目录，并删掉压缩包\n    * 指定 `-k` 可以避免压缩包被删除\n\n## 参考\n\n* https://linuxize.com/post/bash-redirect-stderr-stdout/\n* https://tldp.org/LDP/abs/html/io-redirection.html\n* https://linuxize.com/post/tcpdump-command-in-linux/\n* https://linuxize.com/post/how-to-create-tar-gz-file/\n* https://linuxize.com/post/netcat-nc-command-with-examples/","slug":"2021-03-10-linux-common-commands-2","published":1,"updated":"2022-02-12T20:53:10.509Z","comments":1,"photos":[],"link":"","_id":"ckzkc92xm002koqox7o0b4oks","content":"<h2 id=\"重定向输出和输入\"><a href=\"#重定向输出和输入\" class=\"headerlink\" title=\"重定向输出和输入\"></a>重定向输出和输入</h2><p>在 Bash 或者其他Linux shell里，标准的I&#x2F;O流分为：</p>\n<ul>\n<li><code>0</code> - <code>stdin</code> 标准输入</li>\n<li><code>1</code> - <code>stdout</code> 标准输出</li>\n<li><code>2</code> - <code>stderr</code> 标准错误</li>\n</ul>\n<p>从标准输出开始。标准输出是程序正常输出的内容。默认情况下，所有信息都会输出到屏幕上。重定向输出就是捕获程序的输出然后重定向到另一个程序或者文件中。一般用 <code>n&gt;</code> 来实现。<code>n</code> 可以是 <code>0</code>, <code>1</code>, 或者 <code>2</code>。 省略<code>n</code> 默认为 <code>1</code> 即标准输出。</p>\n<p>举个例子， <code>command &gt; file</code> 就是将命令 <code>command</code> 执行的结果输出到文件 <code>file</code> 里。 这个命令也等同于 <code>command 1&gt; file</code>。 同理，<code>command 2&gt; file</code> 就是将命令执行输出到错误重定向到文件里。 如果希望过滤输出，可以重定向到 <code>/dev/null</code> 来实现。比如， <code>command 2&gt; /dev/null</code>，命令执行结果中的错误信息就会被过滤掉。</p>\n<p>那么如何将标准输出和标准错误重定向到一个文件里呢？ <code>command &amp;&gt; file</code>，<code>&amp;</code> 表示同时将 <code>1</code> 和 <code>2</code> 输出到文件里。 还有一种方式可以实现同样的效果：<code>command &gt; file 2&gt;&amp;1</code>，追加 <code>2&gt;&amp;1</code> 是将命令中的输出错误重定向到标准输出中。</p>\n<p>在日常使用中，我们也经常碰到 <code>&gt;&gt;</code> 。不同于 <code>&gt; file</code> 每次执行都会覆盖整个文件， <code>&gt;&gt;</code> 会以追加的方式输出内容到文件。</p>\n<p>最后来说说标准输入 <code>&lt;</code>。用法：<code>command &lt; input-file</code>，是将 <code>input-file</code> 中的内容作为输入提供给 <code>command</code>。这个命令等同于 <code>command 0&lt; input-file</code>。举个例子，<code>grep &quot;ERROR&quot; &lt; /var/log/messages</code>，将文件 <code>/var/log/messages</code> 作为命令 <code>grep</code> 的输入。其效果类似于 <code>cat /var/log/message | grep &quot;ERROR&quot;</code>。</p>\n<h2 id=\"查看网络端口\"><a href=\"#查看网络端口\" class=\"headerlink\" title=\"查看网络端口\"></a>查看网络端口</h2><h3 id=\"netcat-nc\"><a href=\"#netcat-nc\" class=\"headerlink\" title=\"netcat(nc)\"></a>netcat(nc)</h3><p>netcat 是一个使用TCP或者UDP协议读写数据的工具。可以用来检测IP地址或域名端口是否开放。</p>\n<ul>\n<li><p><code>nc -z -v 10.10.8.8 20-80</code></p>\n<ul>\n<li>扫描 10.10.8.8 的TCP端口 20-80，查看哪些是开放的。</li>\n<li><code>-v</code> verbose，输出更多的信息</li>\n<li><code>-z</code> 仅检测开放端口</li>\n</ul>\n</li>\n<li><p><code>nc -z -v 10.10.8.8 20-80 2&gt;&amp;1 | grep succeeded</code></p>\n<ul>\n<li>2&gt;&amp;1 重定向标准输出的错误信息到标准输出中。</li>\n<li>然后通过 grep succeeded来过滤失败的信息。</li>\n</ul>\n</li>\n<li><p><code>nc -z -v -u 10.10.8.8 80</code></p>\n<ul>\n<li><code>-u</code> 仅检测UDP协议</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"压缩和解压缩\"><a href=\"#压缩和解压缩\" class=\"headerlink\" title=\"压缩和解压缩\"></a>压缩和解压缩</h2><h3 id=\"tar\"><a href=\"#tar\" class=\"headerlink\" title=\"tar\"></a>tar</h3><ul>\n<li>压缩<ul>\n<li><code>tar -czf archive-name.tar.gz file1 file2 dir1...</code><ul>\n<li><code>-c</code> - 表明创建压缩文件</li>\n<li><code>-z</code> - 压缩方式为 gzip</li>\n<li><code>-f</code> - 指定压缩包文件名</li>\n<li><code>file1 file2 dir1...</code> - 被压缩的文件列表或文件目录</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>解压缩<ul>\n<li><code>tar -xvf archive.tar.gz -C /home/linuxize/files</code><ul>\n<li><code>-x</code> - 表明解压缩</li>\n<li><code>-v</code> - 打印更多的详细信息</li>\n<li><code>-f archive.tar.gz</code> - 压缩包文件名</li>\n<li><code>-C /home/linuxize/files</code> - 解压到指定目录</li>\n</ul>\n</li>\n<li><code>tar -xf archive.tar.gz file1 file2</code><ul>\n<li>仅解压文件 file1 和file2</li>\n</ul>\n</li>\n<li><code>tar -xf archive.tar.gz --wildcards &#39;*.js&#39;</code><ul>\n<li>用通配符来需要指定解压的文件</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>列出压缩包里的文件名<ul>\n<li><code>tar -tf archive.tar.gz</code></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"gzip\"><a href=\"#gzip\" class=\"headerlink\" title=\"gzip\"></a>gzip</h3><ul>\n<li><code>gzip -d file.gz</code><ul>\n<li>解压到当前目录，并删掉压缩包</li>\n<li>指定 <code>-k</code> 可以避免压缩包被删除</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h2><ul>\n<li><a href=\"https://linuxize.com/post/bash-redirect-stderr-stdout/\">https://linuxize.com/post/bash-redirect-stderr-stdout/</a></li>\n<li><a href=\"https://tldp.org/LDP/abs/html/io-redirection.html\">https://tldp.org/LDP/abs/html/io-redirection.html</a></li>\n<li><a href=\"https://linuxize.com/post/tcpdump-command-in-linux/\">https://linuxize.com/post/tcpdump-command-in-linux/</a></li>\n<li><a href=\"https://linuxize.com/post/how-to-create-tar-gz-file/\">https://linuxize.com/post/how-to-create-tar-gz-file/</a></li>\n<li><a href=\"https://linuxize.com/post/netcat-nc-command-with-examples/\">https://linuxize.com/post/netcat-nc-command-with-examples/</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"重定向输出和输入\"><a href=\"#重定向输出和输入\" class=\"headerlink\" title=\"重定向输出和输入\"></a>重定向输出和输入</h2><p>在 Bash 或者其他Linux shell里，标准的I&#x2F;O流分为：</p>\n<ul>\n<li><code>0</code> - <code>stdin</code> 标准输入</li>\n<li><code>1</code> - <code>stdout</code> 标准输出</li>\n<li><code>2</code> - <code>stderr</code> 标准错误</li>\n</ul>\n<p>从标准输出开始。标准输出是程序正常输出的内容。默认情况下，所有信息都会输出到屏幕上。重定向输出就是捕获程序的输出然后重定向到另一个程序或者文件中。一般用 <code>n&gt;</code> 来实现。<code>n</code> 可以是 <code>0</code>, <code>1</code>, 或者 <code>2</code>。 省略<code>n</code> 默认为 <code>1</code> 即标准输出。</p>\n<p>举个例子， <code>command &gt; file</code> 就是将命令 <code>command</code> 执行的结果输出到文件 <code>file</code> 里。 这个命令也等同于 <code>command 1&gt; file</code>。 同理，<code>command 2&gt; file</code> 就是将命令执行输出到错误重定向到文件里。 如果希望过滤输出，可以重定向到 <code>/dev/null</code> 来实现。比如， <code>command 2&gt; /dev/null</code>，命令执行结果中的错误信息就会被过滤掉。</p>\n<p>那么如何将标准输出和标准错误重定向到一个文件里呢？ <code>command &amp;&gt; file</code>，<code>&amp;</code> 表示同时将 <code>1</code> 和 <code>2</code> 输出到文件里。 还有一种方式可以实现同样的效果：<code>command &gt; file 2&gt;&amp;1</code>，追加 <code>2&gt;&amp;1</code> 是将命令中的输出错误重定向到标准输出中。</p>\n<p>在日常使用中，我们也经常碰到 <code>&gt;&gt;</code> 。不同于 <code>&gt; file</code> 每次执行都会覆盖整个文件， <code>&gt;&gt;</code> 会以追加的方式输出内容到文件。</p>\n<p>最后来说说标准输入 <code>&lt;</code>。用法：<code>command &lt; input-file</code>，是将 <code>input-file</code> 中的内容作为输入提供给 <code>command</code>。这个命令等同于 <code>command 0&lt; input-file</code>。举个例子，<code>grep &quot;ERROR&quot; &lt; /var/log/messages</code>，将文件 <code>/var/log/messages</code> 作为命令 <code>grep</code> 的输入。其效果类似于 <code>cat /var/log/message | grep &quot;ERROR&quot;</code>。</p>\n<h2 id=\"查看网络端口\"><a href=\"#查看网络端口\" class=\"headerlink\" title=\"查看网络端口\"></a>查看网络端口</h2><h3 id=\"netcat-nc\"><a href=\"#netcat-nc\" class=\"headerlink\" title=\"netcat(nc)\"></a>netcat(nc)</h3><p>netcat 是一个使用TCP或者UDP协议读写数据的工具。可以用来检测IP地址或域名端口是否开放。</p>\n<ul>\n<li><p><code>nc -z -v 10.10.8.8 20-80</code></p>\n<ul>\n<li>扫描 10.10.8.8 的TCP端口 20-80，查看哪些是开放的。</li>\n<li><code>-v</code> verbose，输出更多的信息</li>\n<li><code>-z</code> 仅检测开放端口</li>\n</ul>\n</li>\n<li><p><code>nc -z -v 10.10.8.8 20-80 2&gt;&amp;1 | grep succeeded</code></p>\n<ul>\n<li>2&gt;&amp;1 重定向标准输出的错误信息到标准输出中。</li>\n<li>然后通过 grep succeeded来过滤失败的信息。</li>\n</ul>\n</li>\n<li><p><code>nc -z -v -u 10.10.8.8 80</code></p>\n<ul>\n<li><code>-u</code> 仅检测UDP协议</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"压缩和解压缩\"><a href=\"#压缩和解压缩\" class=\"headerlink\" title=\"压缩和解压缩\"></a>压缩和解压缩</h2><h3 id=\"tar\"><a href=\"#tar\" class=\"headerlink\" title=\"tar\"></a>tar</h3><ul>\n<li>压缩<ul>\n<li><code>tar -czf archive-name.tar.gz file1 file2 dir1...</code><ul>\n<li><code>-c</code> - 表明创建压缩文件</li>\n<li><code>-z</code> - 压缩方式为 gzip</li>\n<li><code>-f</code> - 指定压缩包文件名</li>\n<li><code>file1 file2 dir1...</code> - 被压缩的文件列表或文件目录</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>解压缩<ul>\n<li><code>tar -xvf archive.tar.gz -C /home/linuxize/files</code><ul>\n<li><code>-x</code> - 表明解压缩</li>\n<li><code>-v</code> - 打印更多的详细信息</li>\n<li><code>-f archive.tar.gz</code> - 压缩包文件名</li>\n<li><code>-C /home/linuxize/files</code> - 解压到指定目录</li>\n</ul>\n</li>\n<li><code>tar -xf archive.tar.gz file1 file2</code><ul>\n<li>仅解压文件 file1 和file2</li>\n</ul>\n</li>\n<li><code>tar -xf archive.tar.gz --wildcards &#39;*.js&#39;</code><ul>\n<li>用通配符来需要指定解压的文件</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>列出压缩包里的文件名<ul>\n<li><code>tar -tf archive.tar.gz</code></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"gzip\"><a href=\"#gzip\" class=\"headerlink\" title=\"gzip\"></a>gzip</h3><ul>\n<li><code>gzip -d file.gz</code><ul>\n<li>解压到当前目录，并删掉压缩包</li>\n<li>指定 <code>-k</code> 可以避免压缩包被删除</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h2><ul>\n<li><a href=\"https://linuxize.com/post/bash-redirect-stderr-stdout/\">https://linuxize.com/post/bash-redirect-stderr-stdout/</a></li>\n<li><a href=\"https://tldp.org/LDP/abs/html/io-redirection.html\">https://tldp.org/LDP/abs/html/io-redirection.html</a></li>\n<li><a href=\"https://linuxize.com/post/tcpdump-command-in-linux/\">https://linuxize.com/post/tcpdump-command-in-linux/</a></li>\n<li><a href=\"https://linuxize.com/post/how-to-create-tar-gz-file/\">https://linuxize.com/post/how-to-create-tar-gz-file/</a></li>\n<li><a href=\"https://linuxize.com/post/netcat-nc-command-with-examples/\">https://linuxize.com/post/netcat-nc-command-with-examples/</a></li>\n</ul>\n"},{"layout":"post","title":"如何使用 Tmux","date":"2021-02-28T05:00:00.000Z","description":"如何使用 Tmux","keywords":"tmux, linux","_content":"\n## Tmux 是什么？\n\nTmux 是终端的多窗口工具，跟 screen 的功能差不多，能够将当前所有窗口的状态保存到session (会话)里并挂起，之后可以用 reattach session 的方式重新恢复。不同于 screen 的是，tmux能够在一个窗口添加多个面板。比较常用的场景比如，开两个面板，一个打开 vim， 一个用来运行命令；再比如，需要同时操作多个服务器的时候，打开多个面板，同步输入到所有面板上去。这样就能在多个服务器上同时执行同一条命令。\n\n* 安装：\n    * Ubuntu & Debian: `sudo apt install tmux`\n    * CentOS: `sudo yum install tmux`\n    * macOS: `brew install tmux`\n        * 需要先安装 [HomeBrew](https://brew.sh/index_zh-cn)\n\n## 什么是 session 以及如何管理 session ？\n\n* 在终端输入`tmux` 后，窗口会自动创建一个session 。所有的操作都会在这个 session 中进行。比如创建多个面板，在面板之间切换等等。session 可以被保存和恢复。比如你在一个 session 中打开了很多窗口，但是需要重启电脑，这个时候就可把 session 保存起来，然后重启之后恢复 session 来继续工作。\n\n* 新建 session\n    * `tmux` 或者 `tmux new`\n    * `tmux new -s <session_name> [-n <window_name]` 指定 session 的名字和窗口的名字\n* 离开 session\n    * `Ctrl+b d`: 挂起session，可以随时恢复\n* 恢复 session\n    * `tmux a`: 恢复最近的session\n    * `tmux a -t <session_name>`: 恢复制定的session\n* 删除 session\n    * 删除当前的session 只需要 exit 即可\n    * 删除挂起的session: `tmux kill-session -t <session_name>`\n\n## 常用的管理窗口/面板快捷键\n\n刚开始使用tmux的时候，快捷键有点不太适应。比如`Ctrl+b c`，我们正常情况下是按下`Ctrl`和`b`的同时按`c`。但是在tmux的session里，是按下`Ctrl+b`松开，然后按c。`Ctrl+b`用来激活命令模式。（以下用 `<prefix>` 代替 `Ctrl+b`）\n\n* `<prefix> c`: 创建新的窗口\n* `<prefix> w`: 打开窗口列表\n* `<prefix> 1`: 切换至窗口 1 （或任意数字）\n* `<prefix> ,`: 重命名当前窗口\n* `<prefix> %`: 水平切分当前面板\n* `<prefix> \"`: 垂直切分当前面板\n* `<prefix> o`: 切换到下一个面板\n* `<prefix> ;`: 在上一个和下一个面板之间切换\n* `<prefix> x`: 关闭当前面板\n\n说实话，我并没有记住所有的快捷键。对我来说，这些快捷键都太奇怪了。所以我做了很多自定义配置。\n\n## 其他更有趣的用法\n\n`.tmux.conf` 是tmux的配置文件，默认放在`~`目录下。Github上有很多人分享自己的配置。我大概搜了下做了下调整，写了个自己的：https://github.com/erictt/dotfiles/blob/master/tmux/.tmux.conf\n\n* 激活快捷键修改成了`Ctrl+a`\n    ```\n    unbind C-b\n    set -g prefix C-a\n    bind a send-prefix\n    ```\n* visual mode里用`v`来选中文字， `y`用来复制。比较可惜的是，不知道怎么把`p`配置成粘贴。好像和默认快捷键有冲突。\n\n    ```\n    # Use vi mode to copy\n    bind-key -T copy-mode-vi v send-keys -X begin-selection\n    bind-key -T copy-mode-vi y send-keys -X copy-selection\n    bind-key -T copy-mode-vi r send-keys -X rectangle-toggle\n    ```\n\n* `<prefix> + e` 同时操控所有pane, `<prefix> + E` 取消\n\n    ```\n    # easily toggle synchronization (mnemonic: e is for echo)\n    # sends input to all panes in a given window.\n    bind e setw synchronize-panes on\n    bind E setw synchronize-panes off\n    ```\n\n* `<prefix> + v` 垂直切分窗口，`<prefix> + s` 水平切分窗口\n\n    ```\n    # Create splits and vertical splits\n    bind-key v split-window -h -p 50 -c \"#{pane_current_path}\"\n    bind-key ^V split-window -h -p 50 -c \"#{pane_current_path}\"\n    bind-key s split-window -p 50 -c \"#{pane_current_path}\"\n    bind-key ^S split-window -p 50 -c \"#{pane_current_path}\"\n    ```\n\n* 用鼠标来调整窗口大小、切换window/pane\n\n    ```\n    # mouse behavior\n    set-window-option -g mouse on\n    # Using set -gq instead of set -g will silence the unknown option error, while still setting it on old versions of tmux\n    setw -gq mode-mouse on\n    set -gq mouse-select-pane on\n    set -gq mouse-resize-pane on\n    set -gq mouse-select-window on\n    ```\n\n* 插件 `christoomey/vim-tmux-navigator`。可以直接使用快捷键`Ctrl + hjkl` 来切换pane\n\n## CheatSheet\n\n忘记按键的话，可以在这个网站上搜索。\n\n* https://tmuxcheatsheet.com/\n\n## 参考\n\n* https://github.com/tmux/tmux/wiki/Getting-Started\n* https://linuxize.com/post/getting-started-with-tmux/\n","source":"_posts/2021-02-28-get-start-with-tmux.md","raw":"---\nlayout: post\ntitle: 如何使用 Tmux\ncategory: 编程学习\ntags: [Linux, Tmux]\ndate: 2021-02-28\ndescription: 如何使用 Tmux\nkeywords: tmux, linux\n---\n\n## Tmux 是什么？\n\nTmux 是终端的多窗口工具，跟 screen 的功能差不多，能够将当前所有窗口的状态保存到session (会话)里并挂起，之后可以用 reattach session 的方式重新恢复。不同于 screen 的是，tmux能够在一个窗口添加多个面板。比较常用的场景比如，开两个面板，一个打开 vim， 一个用来运行命令；再比如，需要同时操作多个服务器的时候，打开多个面板，同步输入到所有面板上去。这样就能在多个服务器上同时执行同一条命令。\n\n* 安装：\n    * Ubuntu & Debian: `sudo apt install tmux`\n    * CentOS: `sudo yum install tmux`\n    * macOS: `brew install tmux`\n        * 需要先安装 [HomeBrew](https://brew.sh/index_zh-cn)\n\n## 什么是 session 以及如何管理 session ？\n\n* 在终端输入`tmux` 后，窗口会自动创建一个session 。所有的操作都会在这个 session 中进行。比如创建多个面板，在面板之间切换等等。session 可以被保存和恢复。比如你在一个 session 中打开了很多窗口，但是需要重启电脑，这个时候就可把 session 保存起来，然后重启之后恢复 session 来继续工作。\n\n* 新建 session\n    * `tmux` 或者 `tmux new`\n    * `tmux new -s <session_name> [-n <window_name]` 指定 session 的名字和窗口的名字\n* 离开 session\n    * `Ctrl+b d`: 挂起session，可以随时恢复\n* 恢复 session\n    * `tmux a`: 恢复最近的session\n    * `tmux a -t <session_name>`: 恢复制定的session\n* 删除 session\n    * 删除当前的session 只需要 exit 即可\n    * 删除挂起的session: `tmux kill-session -t <session_name>`\n\n## 常用的管理窗口/面板快捷键\n\n刚开始使用tmux的时候，快捷键有点不太适应。比如`Ctrl+b c`，我们正常情况下是按下`Ctrl`和`b`的同时按`c`。但是在tmux的session里，是按下`Ctrl+b`松开，然后按c。`Ctrl+b`用来激活命令模式。（以下用 `<prefix>` 代替 `Ctrl+b`）\n\n* `<prefix> c`: 创建新的窗口\n* `<prefix> w`: 打开窗口列表\n* `<prefix> 1`: 切换至窗口 1 （或任意数字）\n* `<prefix> ,`: 重命名当前窗口\n* `<prefix> %`: 水平切分当前面板\n* `<prefix> \"`: 垂直切分当前面板\n* `<prefix> o`: 切换到下一个面板\n* `<prefix> ;`: 在上一个和下一个面板之间切换\n* `<prefix> x`: 关闭当前面板\n\n说实话，我并没有记住所有的快捷键。对我来说，这些快捷键都太奇怪了。所以我做了很多自定义配置。\n\n## 其他更有趣的用法\n\n`.tmux.conf` 是tmux的配置文件，默认放在`~`目录下。Github上有很多人分享自己的配置。我大概搜了下做了下调整，写了个自己的：https://github.com/erictt/dotfiles/blob/master/tmux/.tmux.conf\n\n* 激活快捷键修改成了`Ctrl+a`\n    ```\n    unbind C-b\n    set -g prefix C-a\n    bind a send-prefix\n    ```\n* visual mode里用`v`来选中文字， `y`用来复制。比较可惜的是，不知道怎么把`p`配置成粘贴。好像和默认快捷键有冲突。\n\n    ```\n    # Use vi mode to copy\n    bind-key -T copy-mode-vi v send-keys -X begin-selection\n    bind-key -T copy-mode-vi y send-keys -X copy-selection\n    bind-key -T copy-mode-vi r send-keys -X rectangle-toggle\n    ```\n\n* `<prefix> + e` 同时操控所有pane, `<prefix> + E` 取消\n\n    ```\n    # easily toggle synchronization (mnemonic: e is for echo)\n    # sends input to all panes in a given window.\n    bind e setw synchronize-panes on\n    bind E setw synchronize-panes off\n    ```\n\n* `<prefix> + v` 垂直切分窗口，`<prefix> + s` 水平切分窗口\n\n    ```\n    # Create splits and vertical splits\n    bind-key v split-window -h -p 50 -c \"#{pane_current_path}\"\n    bind-key ^V split-window -h -p 50 -c \"#{pane_current_path}\"\n    bind-key s split-window -p 50 -c \"#{pane_current_path}\"\n    bind-key ^S split-window -p 50 -c \"#{pane_current_path}\"\n    ```\n\n* 用鼠标来调整窗口大小、切换window/pane\n\n    ```\n    # mouse behavior\n    set-window-option -g mouse on\n    # Using set -gq instead of set -g will silence the unknown option error, while still setting it on old versions of tmux\n    setw -gq mode-mouse on\n    set -gq mouse-select-pane on\n    set -gq mouse-resize-pane on\n    set -gq mouse-select-window on\n    ```\n\n* 插件 `christoomey/vim-tmux-navigator`。可以直接使用快捷键`Ctrl + hjkl` 来切换pane\n\n## CheatSheet\n\n忘记按键的话，可以在这个网站上搜索。\n\n* https://tmuxcheatsheet.com/\n\n## 参考\n\n* https://github.com/tmux/tmux/wiki/Getting-Started\n* https://linuxize.com/post/getting-started-with-tmux/\n","slug":"2021-02-28-get-start-with-tmux","published":1,"updated":"2022-02-12T20:53:10.509Z","comments":1,"photos":[],"link":"","_id":"ckzkc92xn002noqoxfrwq2fl6","content":"<h2 id=\"Tmux-是什么？\"><a href=\"#Tmux-是什么？\" class=\"headerlink\" title=\"Tmux 是什么？\"></a>Tmux 是什么？</h2><p>Tmux 是终端的多窗口工具，跟 screen 的功能差不多，能够将当前所有窗口的状态保存到session (会话)里并挂起，之后可以用 reattach session 的方式重新恢复。不同于 screen 的是，tmux能够在一个窗口添加多个面板。比较常用的场景比如，开两个面板，一个打开 vim， 一个用来运行命令；再比如，需要同时操作多个服务器的时候，打开多个面板，同步输入到所有面板上去。这样就能在多个服务器上同时执行同一条命令。</p>\n<ul>\n<li>安装：<ul>\n<li>Ubuntu &amp; Debian: <code>sudo apt install tmux</code></li>\n<li>CentOS: <code>sudo yum install tmux</code></li>\n<li>macOS: <code>brew install tmux</code><ul>\n<li>需要先安装 <a href=\"https://brew.sh/index_zh-cn\">HomeBrew</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"什么是-session-以及如何管理-session-？\"><a href=\"#什么是-session-以及如何管理-session-？\" class=\"headerlink\" title=\"什么是 session 以及如何管理 session ？\"></a>什么是 session 以及如何管理 session ？</h2><ul>\n<li><p>在终端输入<code>tmux</code> 后，窗口会自动创建一个session 。所有的操作都会在这个 session 中进行。比如创建多个面板，在面板之间切换等等。session 可以被保存和恢复。比如你在一个 session 中打开了很多窗口，但是需要重启电脑，这个时候就可把 session 保存起来，然后重启之后恢复 session 来继续工作。</p>\n</li>\n<li><p>新建 session</p>\n<ul>\n<li><code>tmux</code> 或者 <code>tmux new</code></li>\n<li><code>tmux new -s &lt;session_name&gt; [-n &lt;window_name]</code> 指定 session 的名字和窗口的名字</li>\n</ul>\n</li>\n<li><p>离开 session</p>\n<ul>\n<li><code>Ctrl+b d</code>: 挂起session，可以随时恢复</li>\n</ul>\n</li>\n<li><p>恢复 session</p>\n<ul>\n<li><code>tmux a</code>: 恢复最近的session</li>\n<li><code>tmux a -t &lt;session_name&gt;</code>: 恢复制定的session</li>\n</ul>\n</li>\n<li><p>删除 session</p>\n<ul>\n<li>删除当前的session 只需要 exit 即可</li>\n<li>删除挂起的session: <code>tmux kill-session -t &lt;session_name&gt;</code></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"常用的管理窗口-x2F-面板快捷键\"><a href=\"#常用的管理窗口-x2F-面板快捷键\" class=\"headerlink\" title=\"常用的管理窗口&#x2F;面板快捷键\"></a>常用的管理窗口&#x2F;面板快捷键</h2><p>刚开始使用tmux的时候，快捷键有点不太适应。比如<code>Ctrl+b c</code>，我们正常情况下是按下<code>Ctrl</code>和<code>b</code>的同时按<code>c</code>。但是在tmux的session里，是按下<code>Ctrl+b</code>松开，然后按c。<code>Ctrl+b</code>用来激活命令模式。（以下用 <code>&lt;prefix&gt;</code> 代替 <code>Ctrl+b</code>）</p>\n<ul>\n<li><code>&lt;prefix&gt; c</code>: 创建新的窗口</li>\n<li><code>&lt;prefix&gt; w</code>: 打开窗口列表</li>\n<li><code>&lt;prefix&gt; 1</code>: 切换至窗口 1 （或任意数字）</li>\n<li><code>&lt;prefix&gt; ,</code>: 重命名当前窗口</li>\n<li><code>&lt;prefix&gt; %</code>: 水平切分当前面板</li>\n<li><code>&lt;prefix&gt; &quot;</code>: 垂直切分当前面板</li>\n<li><code>&lt;prefix&gt; o</code>: 切换到下一个面板</li>\n<li><code>&lt;prefix&gt; ;</code>: 在上一个和下一个面板之间切换</li>\n<li><code>&lt;prefix&gt; x</code>: 关闭当前面板</li>\n</ul>\n<p>说实话，我并没有记住所有的快捷键。对我来说，这些快捷键都太奇怪了。所以我做了很多自定义配置。</p>\n<h2 id=\"其他更有趣的用法\"><a href=\"#其他更有趣的用法\" class=\"headerlink\" title=\"其他更有趣的用法\"></a>其他更有趣的用法</h2><p><code>.tmux.conf</code> 是tmux的配置文件，默认放在<code>~</code>目录下。Github上有很多人分享自己的配置。我大概搜了下做了下调整，写了个自己的：<a href=\"https://github.com/erictt/dotfiles/blob/master/tmux/.tmux.conf\">https://github.com/erictt/dotfiles/blob/master/tmux/.tmux.conf</a></p>\n<ul>\n<li><p>激活快捷键修改成了<code>Ctrl+a</code></p>\n  <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">unbind C-b</span><br><span class=\"line\">set -g prefix C-a</span><br><span class=\"line\">bind a send-prefix</span><br></pre></td></tr></table></figure></li>\n<li><p>visual mode里用<code>v</code>来选中文字， <code>y</code>用来复制。比较可惜的是，不知道怎么把<code>p</code>配置成粘贴。好像和默认快捷键有冲突。</p>\n  <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># Use vi mode to copy</span><br><span class=\"line\">bind-key -T copy-mode-vi v send-keys -X begin-selection</span><br><span class=\"line\">bind-key -T copy-mode-vi y send-keys -X copy-selection</span><br><span class=\"line\">bind-key -T copy-mode-vi r send-keys -X rectangle-toggle</span><br></pre></td></tr></table></figure>\n</li>\n<li><p><code>&lt;prefix&gt; + e</code> 同时操控所有pane, <code>&lt;prefix&gt; + E</code> 取消</p>\n  <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># easily toggle synchronization (mnemonic: e is for echo)</span><br><span class=\"line\"># sends input to all panes in a given window.</span><br><span class=\"line\">bind e setw synchronize-panes on</span><br><span class=\"line\">bind E setw synchronize-panes off</span><br></pre></td></tr></table></figure>\n</li>\n<li><p><code>&lt;prefix&gt; + v</code> 垂直切分窗口，<code>&lt;prefix&gt; + s</code> 水平切分窗口</p>\n  <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># Create splits and vertical splits</span><br><span class=\"line\">bind-key v split-window -h -p 50 -c &quot;#&#123;pane_current_path&#125;&quot;</span><br><span class=\"line\">bind-key ^V split-window -h -p 50 -c &quot;#&#123;pane_current_path&#125;&quot;</span><br><span class=\"line\">bind-key s split-window -p 50 -c &quot;#&#123;pane_current_path&#125;&quot;</span><br><span class=\"line\">bind-key ^S split-window -p 50 -c &quot;#&#123;pane_current_path&#125;&quot;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>用鼠标来调整窗口大小、切换window&#x2F;pane</p>\n  <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># mouse behavior</span><br><span class=\"line\">set-window-option -g mouse on</span><br><span class=\"line\"># Using set -gq instead of set -g will silence the unknown option error, while still setting it on old versions of tmux</span><br><span class=\"line\">setw -gq mode-mouse on</span><br><span class=\"line\">set -gq mouse-select-pane on</span><br><span class=\"line\">set -gq mouse-resize-pane on</span><br><span class=\"line\">set -gq mouse-select-window on</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>插件 <code>christoomey/vim-tmux-navigator</code>。可以直接使用快捷键<code>Ctrl + hjkl</code> 来切换pane</p>\n</li>\n</ul>\n<h2 id=\"CheatSheet\"><a href=\"#CheatSheet\" class=\"headerlink\" title=\"CheatSheet\"></a>CheatSheet</h2><p>忘记按键的话，可以在这个网站上搜索。</p>\n<ul>\n<li><a href=\"https://tmuxcheatsheet.com/\">https://tmuxcheatsheet.com/</a></li>\n</ul>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h2><ul>\n<li><a href=\"https://github.com/tmux/tmux/wiki/Getting-Started\">https://github.com/tmux/tmux/wiki/Getting-Started</a></li>\n<li><a href=\"https://linuxize.com/post/getting-started-with-tmux/\">https://linuxize.com/post/getting-started-with-tmux/</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"Tmux-是什么？\"><a href=\"#Tmux-是什么？\" class=\"headerlink\" title=\"Tmux 是什么？\"></a>Tmux 是什么？</h2><p>Tmux 是终端的多窗口工具，跟 screen 的功能差不多，能够将当前所有窗口的状态保存到session (会话)里并挂起，之后可以用 reattach session 的方式重新恢复。不同于 screen 的是，tmux能够在一个窗口添加多个面板。比较常用的场景比如，开两个面板，一个打开 vim， 一个用来运行命令；再比如，需要同时操作多个服务器的时候，打开多个面板，同步输入到所有面板上去。这样就能在多个服务器上同时执行同一条命令。</p>\n<ul>\n<li>安装：<ul>\n<li>Ubuntu &amp; Debian: <code>sudo apt install tmux</code></li>\n<li>CentOS: <code>sudo yum install tmux</code></li>\n<li>macOS: <code>brew install tmux</code><ul>\n<li>需要先安装 <a href=\"https://brew.sh/index_zh-cn\">HomeBrew</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"什么是-session-以及如何管理-session-？\"><a href=\"#什么是-session-以及如何管理-session-？\" class=\"headerlink\" title=\"什么是 session 以及如何管理 session ？\"></a>什么是 session 以及如何管理 session ？</h2><ul>\n<li><p>在终端输入<code>tmux</code> 后，窗口会自动创建一个session 。所有的操作都会在这个 session 中进行。比如创建多个面板，在面板之间切换等等。session 可以被保存和恢复。比如你在一个 session 中打开了很多窗口，但是需要重启电脑，这个时候就可把 session 保存起来，然后重启之后恢复 session 来继续工作。</p>\n</li>\n<li><p>新建 session</p>\n<ul>\n<li><code>tmux</code> 或者 <code>tmux new</code></li>\n<li><code>tmux new -s &lt;session_name&gt; [-n &lt;window_name]</code> 指定 session 的名字和窗口的名字</li>\n</ul>\n</li>\n<li><p>离开 session</p>\n<ul>\n<li><code>Ctrl+b d</code>: 挂起session，可以随时恢复</li>\n</ul>\n</li>\n<li><p>恢复 session</p>\n<ul>\n<li><code>tmux a</code>: 恢复最近的session</li>\n<li><code>tmux a -t &lt;session_name&gt;</code>: 恢复制定的session</li>\n</ul>\n</li>\n<li><p>删除 session</p>\n<ul>\n<li>删除当前的session 只需要 exit 即可</li>\n<li>删除挂起的session: <code>tmux kill-session -t &lt;session_name&gt;</code></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"常用的管理窗口-x2F-面板快捷键\"><a href=\"#常用的管理窗口-x2F-面板快捷键\" class=\"headerlink\" title=\"常用的管理窗口&#x2F;面板快捷键\"></a>常用的管理窗口&#x2F;面板快捷键</h2><p>刚开始使用tmux的时候，快捷键有点不太适应。比如<code>Ctrl+b c</code>，我们正常情况下是按下<code>Ctrl</code>和<code>b</code>的同时按<code>c</code>。但是在tmux的session里，是按下<code>Ctrl+b</code>松开，然后按c。<code>Ctrl+b</code>用来激活命令模式。（以下用 <code>&lt;prefix&gt;</code> 代替 <code>Ctrl+b</code>）</p>\n<ul>\n<li><code>&lt;prefix&gt; c</code>: 创建新的窗口</li>\n<li><code>&lt;prefix&gt; w</code>: 打开窗口列表</li>\n<li><code>&lt;prefix&gt; 1</code>: 切换至窗口 1 （或任意数字）</li>\n<li><code>&lt;prefix&gt; ,</code>: 重命名当前窗口</li>\n<li><code>&lt;prefix&gt; %</code>: 水平切分当前面板</li>\n<li><code>&lt;prefix&gt; &quot;</code>: 垂直切分当前面板</li>\n<li><code>&lt;prefix&gt; o</code>: 切换到下一个面板</li>\n<li><code>&lt;prefix&gt; ;</code>: 在上一个和下一个面板之间切换</li>\n<li><code>&lt;prefix&gt; x</code>: 关闭当前面板</li>\n</ul>\n<p>说实话，我并没有记住所有的快捷键。对我来说，这些快捷键都太奇怪了。所以我做了很多自定义配置。</p>\n<h2 id=\"其他更有趣的用法\"><a href=\"#其他更有趣的用法\" class=\"headerlink\" title=\"其他更有趣的用法\"></a>其他更有趣的用法</h2><p><code>.tmux.conf</code> 是tmux的配置文件，默认放在<code>~</code>目录下。Github上有很多人分享自己的配置。我大概搜了下做了下调整，写了个自己的：<a href=\"https://github.com/erictt/dotfiles/blob/master/tmux/.tmux.conf\">https://github.com/erictt/dotfiles/blob/master/tmux/.tmux.conf</a></p>\n<ul>\n<li><p>激活快捷键修改成了<code>Ctrl+a</code></p>\n  <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">unbind C-b</span><br><span class=\"line\">set -g prefix C-a</span><br><span class=\"line\">bind a send-prefix</span><br></pre></td></tr></table></figure></li>\n<li><p>visual mode里用<code>v</code>来选中文字， <code>y</code>用来复制。比较可惜的是，不知道怎么把<code>p</code>配置成粘贴。好像和默认快捷键有冲突。</p>\n  <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># Use vi mode to copy</span><br><span class=\"line\">bind-key -T copy-mode-vi v send-keys -X begin-selection</span><br><span class=\"line\">bind-key -T copy-mode-vi y send-keys -X copy-selection</span><br><span class=\"line\">bind-key -T copy-mode-vi r send-keys -X rectangle-toggle</span><br></pre></td></tr></table></figure>\n</li>\n<li><p><code>&lt;prefix&gt; + e</code> 同时操控所有pane, <code>&lt;prefix&gt; + E</code> 取消</p>\n  <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># easily toggle synchronization (mnemonic: e is for echo)</span><br><span class=\"line\"># sends input to all panes in a given window.</span><br><span class=\"line\">bind e setw synchronize-panes on</span><br><span class=\"line\">bind E setw synchronize-panes off</span><br></pre></td></tr></table></figure>\n</li>\n<li><p><code>&lt;prefix&gt; + v</code> 垂直切分窗口，<code>&lt;prefix&gt; + s</code> 水平切分窗口</p>\n  <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># Create splits and vertical splits</span><br><span class=\"line\">bind-key v split-window -h -p 50 -c &quot;#&#123;pane_current_path&#125;&quot;</span><br><span class=\"line\">bind-key ^V split-window -h -p 50 -c &quot;#&#123;pane_current_path&#125;&quot;</span><br><span class=\"line\">bind-key s split-window -p 50 -c &quot;#&#123;pane_current_path&#125;&quot;</span><br><span class=\"line\">bind-key ^S split-window -p 50 -c &quot;#&#123;pane_current_path&#125;&quot;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>用鼠标来调整窗口大小、切换window&#x2F;pane</p>\n  <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># mouse behavior</span><br><span class=\"line\">set-window-option -g mouse on</span><br><span class=\"line\"># Using set -gq instead of set -g will silence the unknown option error, while still setting it on old versions of tmux</span><br><span class=\"line\">setw -gq mode-mouse on</span><br><span class=\"line\">set -gq mouse-select-pane on</span><br><span class=\"line\">set -gq mouse-resize-pane on</span><br><span class=\"line\">set -gq mouse-select-window on</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>插件 <code>christoomey/vim-tmux-navigator</code>。可以直接使用快捷键<code>Ctrl + hjkl</code> 来切换pane</p>\n</li>\n</ul>\n<h2 id=\"CheatSheet\"><a href=\"#CheatSheet\" class=\"headerlink\" title=\"CheatSheet\"></a>CheatSheet</h2><p>忘记按键的话，可以在这个网站上搜索。</p>\n<ul>\n<li><a href=\"https://tmuxcheatsheet.com/\">https://tmuxcheatsheet.com/</a></li>\n</ul>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h2><ul>\n<li><a href=\"https://github.com/tmux/tmux/wiki/Getting-Started\">https://github.com/tmux/tmux/wiki/Getting-Started</a></li>\n<li><a href=\"https://linuxize.com/post/getting-started-with-tmux/\">https://linuxize.com/post/getting-started-with-tmux/</a></li>\n</ul>\n"},{"layout":"post","title":"Linux 常用命令(3) - 检查网络流量","date":"2021-03-18T04:00:00.000Z","description":"Linux 常用命令, tcpdump","keywords":"tcpdump","_content":"\n## 检查网络流量\n\n### tcpdump\n\nTcpdump 是用于捕获发出和收到的网络流量的工具。在日常工作中经常用来检查调试网络问题。它不单能捕获 TCP 流量，也能捕获 UDP、ARP 和 ICMP 流量。\n\n首先，tcpdump 需要 root 权限，所以别忘了用 sudo 来执行。\n\n#### 常用参数及对应的命令组合\n\n* `-D`: 查看所有的网络接口\n* `-i <interface>`: 捕获特定网络接口，输出到屏幕\n* `-n`: 不反向解析域名。在捕获的记录里，默认情况tcpdump会反向解析所有的IP地址，然后显示域名地址。该参数可以避免这个行为。\n* `-w <file.pcap>`: 输出到文件 file.pcap。通常大家会使用`.pcap`扩展名，表示 packet capture。\n    * 在输出到文件的时候，内容是不会输出到屏幕的。如果希望查看，可以打开新的终端，然后使用 `tcpdump -r file.pcap` 命令查看。\n    * 当然，你也可以使用 `tcpdump -w file.pcap &` 命令。让输出到文件的命令运行在后台。或者使用 `-l` + `tee` 命令输出到文件的同时查看。\n    * 推荐使用 Wireshark 来分析捕获的流量日志。\n* `-l`: 缓存输出，用于输出到屏幕的同时保存到文件。常用命令为 `tcpdump -l | tee file.out` 或者 `tcpdump -l > file.out & tail -f file.out`\n* `-W 10 -C 200`: 当需要运行很长时间并且保存日志的时候，可以指定这两个参数。`-C` 指定单个文件大小， 单位为MB。`-W` 文件数量。Tcpdump会自动切分和更新日志。\n* `-A | -X` 默认情况下，tcpdump **输出到屏幕**时，仅捕获数据包的headers。如果需要检查包信息，可以加上 `-A` 以ASCII格式输出，或者 `-X` 以HEX格式输出。\n\n####  过滤流量\n\ntcpdump使用的是[BPF](https://en.wikipedia.org/wiki/Berkeley_Packet_Filter)语法用来作为过滤参数，很接近自然语言。比如，只希望捕获端口27017的TCP流量：`tcpdump tcp port 27017`。以下是常用的组合：\n\n* `tcpdump [udp|tcp]`: 只捕获 UDP 或 TCP 流量。Tcpdump也支持使用[IP协议数字](https://en.wikipedia.org/wiki/List_of_IP_protocol_numbers)的格式。比如 udp 是 17， tcp 是 6，所以这个命令也可以写作 `tcpdump proto [17|6]`。 \n* `tcpdump host 192.168.1.185`: 只捕获跟 host: 192.168.1.185 相关的流量。也可以指定IP范围，比如 `tcpdump net 10.10` 是捕获10.10.0.0/16 相关的所有流量。\n* `tcpdump port 27017`: 只捕获跟端口27017相关的流量， 也可以指定端口范围：`tcpdump portrange 100-200`\n* `tcpdump src host 192.168.1.185`: 只捕获来自 host: 192.168.1.185 的流量\n* `tcpdump dst port 80`: 只捕获访问本机 80 端口的流量\n\n\n复杂的过滤可以使用 `&&`， `｜｜`， `！` 或者 `and` 和 `not` 等关键词，比如：\n\n* `tcpdump -n src 192.168.1.185 and not dst port 22`: 捕获来自 host: 192.169.1.185 并且目的端口不是22的流量\n* 还可以加上 `()` 来实现更复杂的过滤： `tcpdump -n 'host 192.168.1.185 and (tcp port 80 or tcp port 443)'`\n\n#### 几个例子\n\n*  `tcpdump -D` 来查看所有的网络接口\n    ```\n    # tcpdump -D\n    1.eth0\n    2.nflog (Linux netfilter log (NFLOG) interface)\n    3.nfqueue (Linux netfilter queue (NFQUEUE) interface)\n    4.any (Pseudo-device that captures on all interfaces)\n    5.lo [Loopback]\n    ```\n            \n    * 其中 eth0 是物理网卡。any 比较特殊是包含了所有接口的流量。lo 是本地流量。其他两个我也不知道是什么。\n\n* `tcpdump -i <interface>` 来查看特定的接口，比如 `tcpdump -i any`  可以捕获所有接口的所有流量，输出到屏幕。 可以追加 `-c <number>` 来指定捕获包的数量。\n    \n    ```\n    # tcpdump -i any -c 10 -n\n    tcpdump: data link type PKTAP\n    tcpdump: verbose output suppressed, use -v or -vv for full protocol decode\n    listening on any, link-type PKTAP (Apple DLT_PKTAP), capture size 262144 bytes\n    23:23:45.199840 IP 127.0.0.1.57437 > 127.0.0.1.64582: Flags [F.], seq 3146809726, ack 228856637, win 6375, options [nop,nop,TS val 1294890263 ecr 1294763197], length 0\n    23:23:45.199884 IP 127.0.0.1.57437 > 127.0.0.1.64582: Flags [F.], seq 0, ack 1, win 6375, options [nop,nop,TS val 1294890263 ecr 1294763197], length 0\n    23:23:45.199903 IP 127.0.0.1.64582 > 127.0.0.1.57437: Flags [.], ack 1, win 6376, options [nop,nop,TS val 1294890263 ecr 1294890263], length 0\n    23:23:45.199908 IP 127.0.0.1.64582 > 127.0.0.1.57437: Flags [.], ack 1, win 6376, options [nop,nop,TS val 1294890263 ecr 1294890263], length 0\n    23:23:45.432277 IP 192.168.10.123.63284 > 70.103.220.153.4501: UDP, length 132\n    23:23:45.511805 IP 70.103.220.153.4501 > 192.168.10.123.63284: UDP, length 132\n    23:23:45.716903 ARP, Announcement 192.168.10.101, length 28\n    23:23:46.639929 IP 192.168.10.124.49154 > 255.255.255.255.6667: UDP, length 188\n    23:23:46.837854 IP 192.168.10.123.64333 > 172.217.6.69.443: Flags [.], seq 1059163531:1059164949, ack 51371873, win 2048, options [nop,nop,TS val 1294891899 ecr 1148464805], length 1418\n    23:23:46.837860 IP 192.168.10.123.64333 > 172.217.6.69.443: Flags [.], seq 1418:2836, ack 1, win 2048, options [nop,nop,TS val 1294891899 ecr 1148464805], length 1418\n    10 packets captured\n    13 packets received by filter\n    0 packets dropped by kernel\n    ```\n\n#### 输出日志解析\n\n典型的结构：\n\n```\n[Timestamp] [Protocol] [Src IP].[Src Port] > [Dst IP].[Dst Port]: [Flags], [Seq], [Ack], [Win Size], [Options], [Data Length]\n```\n\n例子：\n\n```\n23:25:46.253052 IP 192.168.10.123.64581 > 192.168.10.107.8009: Flags [P.], seq 139835987:139836097, ack 801463949, win 2048, options [nop,nop,TS val 1295011047 ecr 5804669], length 110\n```\n\n其中：\n\n* `23:25:46.253052` 时间戳\n* `IP` 包协议。IP意思是 IPv4\n* `192.168.10.123.64581` 来源IP和端口，最后一个 `.` 后边是端口\n* `>` 数据流从源IP到目的IP\n* `192.168.10.107.8009` 目的IP和端口，最后一个 `.` 后边是端口\n* `Flags [P.]` TCP 标识。 `[P.]` 是 发送告知以接收的数据包，用于告知上一个数据包和发送数据。其他的标识包括：\n    * [S] - SYN (数据包发送者发起TCP第一次握手)\n    * [S.] - SYN-ACK (接送者发起第二次握手，并告知上一个数据包接受不了成功)\n    * [.] - ACK (发送者发起第三次握手，告知接收成功)\n    * [P] - PSH (发送数据)\n    * [F] - FIN (发送者告知数据传输完成)\n    * [R] - RST (接收者发起，表示接收到了意外数据包)\n    * 还有 URG、CWR等\n* `seq 139835987:139836097`\n    * 当前数据流中包含了完整数据包的第 139835987 到 139836097 byte\n* `ack 801463949`\n    * 最后的期望的 bytes 数量\n* `win 2048`\n    * 接收者可以缓存的 bytes\n* `options [nop,nop,TS val 1295011047 ecr 5804669]`\n    * `nop`: no operation\n    * `TS val` TCP 时间戳\n    * `ecr`: echo reply.\n* `length 110`\n    * 本次数据流传输的大小 当前是 1024 bytes\n\n## 参考\n\n* https://linuxize.com/post/tcpdump-command-in-linux/\n* https://www.tcpdump.org/manpages/tcpdump.1.html\n* https://en.wikipedia.org/wiki/Berkeley_Packet_Filter\n* https://www.keycdn.com/support/tcp-flags","source":"_posts/2021-03-18-linux-common-commands-3.md","raw":"---\nlayout: post\ntitle: Linux 常用命令(3) - 检查网络流量\ncategory: 编程学习\ntags: [Linux, tcpdump]\ndate: 2021-03-18\ndescription: Linux 常用命令, tcpdump\nkeywords: tcpdump\n---\n\n## 检查网络流量\n\n### tcpdump\n\nTcpdump 是用于捕获发出和收到的网络流量的工具。在日常工作中经常用来检查调试网络问题。它不单能捕获 TCP 流量，也能捕获 UDP、ARP 和 ICMP 流量。\n\n首先，tcpdump 需要 root 权限，所以别忘了用 sudo 来执行。\n\n#### 常用参数及对应的命令组合\n\n* `-D`: 查看所有的网络接口\n* `-i <interface>`: 捕获特定网络接口，输出到屏幕\n* `-n`: 不反向解析域名。在捕获的记录里，默认情况tcpdump会反向解析所有的IP地址，然后显示域名地址。该参数可以避免这个行为。\n* `-w <file.pcap>`: 输出到文件 file.pcap。通常大家会使用`.pcap`扩展名，表示 packet capture。\n    * 在输出到文件的时候，内容是不会输出到屏幕的。如果希望查看，可以打开新的终端，然后使用 `tcpdump -r file.pcap` 命令查看。\n    * 当然，你也可以使用 `tcpdump -w file.pcap &` 命令。让输出到文件的命令运行在后台。或者使用 `-l` + `tee` 命令输出到文件的同时查看。\n    * 推荐使用 Wireshark 来分析捕获的流量日志。\n* `-l`: 缓存输出，用于输出到屏幕的同时保存到文件。常用命令为 `tcpdump -l | tee file.out` 或者 `tcpdump -l > file.out & tail -f file.out`\n* `-W 10 -C 200`: 当需要运行很长时间并且保存日志的时候，可以指定这两个参数。`-C` 指定单个文件大小， 单位为MB。`-W` 文件数量。Tcpdump会自动切分和更新日志。\n* `-A | -X` 默认情况下，tcpdump **输出到屏幕**时，仅捕获数据包的headers。如果需要检查包信息，可以加上 `-A` 以ASCII格式输出，或者 `-X` 以HEX格式输出。\n\n####  过滤流量\n\ntcpdump使用的是[BPF](https://en.wikipedia.org/wiki/Berkeley_Packet_Filter)语法用来作为过滤参数，很接近自然语言。比如，只希望捕获端口27017的TCP流量：`tcpdump tcp port 27017`。以下是常用的组合：\n\n* `tcpdump [udp|tcp]`: 只捕获 UDP 或 TCP 流量。Tcpdump也支持使用[IP协议数字](https://en.wikipedia.org/wiki/List_of_IP_protocol_numbers)的格式。比如 udp 是 17， tcp 是 6，所以这个命令也可以写作 `tcpdump proto [17|6]`。 \n* `tcpdump host 192.168.1.185`: 只捕获跟 host: 192.168.1.185 相关的流量。也可以指定IP范围，比如 `tcpdump net 10.10` 是捕获10.10.0.0/16 相关的所有流量。\n* `tcpdump port 27017`: 只捕获跟端口27017相关的流量， 也可以指定端口范围：`tcpdump portrange 100-200`\n* `tcpdump src host 192.168.1.185`: 只捕获来自 host: 192.168.1.185 的流量\n* `tcpdump dst port 80`: 只捕获访问本机 80 端口的流量\n\n\n复杂的过滤可以使用 `&&`， `｜｜`， `！` 或者 `and` 和 `not` 等关键词，比如：\n\n* `tcpdump -n src 192.168.1.185 and not dst port 22`: 捕获来自 host: 192.169.1.185 并且目的端口不是22的流量\n* 还可以加上 `()` 来实现更复杂的过滤： `tcpdump -n 'host 192.168.1.185 and (tcp port 80 or tcp port 443)'`\n\n#### 几个例子\n\n*  `tcpdump -D` 来查看所有的网络接口\n    ```\n    # tcpdump -D\n    1.eth0\n    2.nflog (Linux netfilter log (NFLOG) interface)\n    3.nfqueue (Linux netfilter queue (NFQUEUE) interface)\n    4.any (Pseudo-device that captures on all interfaces)\n    5.lo [Loopback]\n    ```\n            \n    * 其中 eth0 是物理网卡。any 比较特殊是包含了所有接口的流量。lo 是本地流量。其他两个我也不知道是什么。\n\n* `tcpdump -i <interface>` 来查看特定的接口，比如 `tcpdump -i any`  可以捕获所有接口的所有流量，输出到屏幕。 可以追加 `-c <number>` 来指定捕获包的数量。\n    \n    ```\n    # tcpdump -i any -c 10 -n\n    tcpdump: data link type PKTAP\n    tcpdump: verbose output suppressed, use -v or -vv for full protocol decode\n    listening on any, link-type PKTAP (Apple DLT_PKTAP), capture size 262144 bytes\n    23:23:45.199840 IP 127.0.0.1.57437 > 127.0.0.1.64582: Flags [F.], seq 3146809726, ack 228856637, win 6375, options [nop,nop,TS val 1294890263 ecr 1294763197], length 0\n    23:23:45.199884 IP 127.0.0.1.57437 > 127.0.0.1.64582: Flags [F.], seq 0, ack 1, win 6375, options [nop,nop,TS val 1294890263 ecr 1294763197], length 0\n    23:23:45.199903 IP 127.0.0.1.64582 > 127.0.0.1.57437: Flags [.], ack 1, win 6376, options [nop,nop,TS val 1294890263 ecr 1294890263], length 0\n    23:23:45.199908 IP 127.0.0.1.64582 > 127.0.0.1.57437: Flags [.], ack 1, win 6376, options [nop,nop,TS val 1294890263 ecr 1294890263], length 0\n    23:23:45.432277 IP 192.168.10.123.63284 > 70.103.220.153.4501: UDP, length 132\n    23:23:45.511805 IP 70.103.220.153.4501 > 192.168.10.123.63284: UDP, length 132\n    23:23:45.716903 ARP, Announcement 192.168.10.101, length 28\n    23:23:46.639929 IP 192.168.10.124.49154 > 255.255.255.255.6667: UDP, length 188\n    23:23:46.837854 IP 192.168.10.123.64333 > 172.217.6.69.443: Flags [.], seq 1059163531:1059164949, ack 51371873, win 2048, options [nop,nop,TS val 1294891899 ecr 1148464805], length 1418\n    23:23:46.837860 IP 192.168.10.123.64333 > 172.217.6.69.443: Flags [.], seq 1418:2836, ack 1, win 2048, options [nop,nop,TS val 1294891899 ecr 1148464805], length 1418\n    10 packets captured\n    13 packets received by filter\n    0 packets dropped by kernel\n    ```\n\n#### 输出日志解析\n\n典型的结构：\n\n```\n[Timestamp] [Protocol] [Src IP].[Src Port] > [Dst IP].[Dst Port]: [Flags], [Seq], [Ack], [Win Size], [Options], [Data Length]\n```\n\n例子：\n\n```\n23:25:46.253052 IP 192.168.10.123.64581 > 192.168.10.107.8009: Flags [P.], seq 139835987:139836097, ack 801463949, win 2048, options [nop,nop,TS val 1295011047 ecr 5804669], length 110\n```\n\n其中：\n\n* `23:25:46.253052` 时间戳\n* `IP` 包协议。IP意思是 IPv4\n* `192.168.10.123.64581` 来源IP和端口，最后一个 `.` 后边是端口\n* `>` 数据流从源IP到目的IP\n* `192.168.10.107.8009` 目的IP和端口，最后一个 `.` 后边是端口\n* `Flags [P.]` TCP 标识。 `[P.]` 是 发送告知以接收的数据包，用于告知上一个数据包和发送数据。其他的标识包括：\n    * [S] - SYN (数据包发送者发起TCP第一次握手)\n    * [S.] - SYN-ACK (接送者发起第二次握手，并告知上一个数据包接受不了成功)\n    * [.] - ACK (发送者发起第三次握手，告知接收成功)\n    * [P] - PSH (发送数据)\n    * [F] - FIN (发送者告知数据传输完成)\n    * [R] - RST (接收者发起，表示接收到了意外数据包)\n    * 还有 URG、CWR等\n* `seq 139835987:139836097`\n    * 当前数据流中包含了完整数据包的第 139835987 到 139836097 byte\n* `ack 801463949`\n    * 最后的期望的 bytes 数量\n* `win 2048`\n    * 接收者可以缓存的 bytes\n* `options [nop,nop,TS val 1295011047 ecr 5804669]`\n    * `nop`: no operation\n    * `TS val` TCP 时间戳\n    * `ecr`: echo reply.\n* `length 110`\n    * 本次数据流传输的大小 当前是 1024 bytes\n\n## 参考\n\n* https://linuxize.com/post/tcpdump-command-in-linux/\n* https://www.tcpdump.org/manpages/tcpdump.1.html\n* https://en.wikipedia.org/wiki/Berkeley_Packet_Filter\n* https://www.keycdn.com/support/tcp-flags","slug":"2021-03-18-linux-common-commands-3","published":1,"updated":"2022-02-12T20:53:10.510Z","comments":1,"photos":[],"link":"","_id":"ckzkc92xn002qoqox29197kvf","content":"<h2 id=\"检查网络流量\"><a href=\"#检查网络流量\" class=\"headerlink\" title=\"检查网络流量\"></a>检查网络流量</h2><h3 id=\"tcpdump\"><a href=\"#tcpdump\" class=\"headerlink\" title=\"tcpdump\"></a>tcpdump</h3><p>Tcpdump 是用于捕获发出和收到的网络流量的工具。在日常工作中经常用来检查调试网络问题。它不单能捕获 TCP 流量，也能捕获 UDP、ARP 和 ICMP 流量。</p>\n<p>首先，tcpdump 需要 root 权限，所以别忘了用 sudo 来执行。</p>\n<h4 id=\"常用参数及对应的命令组合\"><a href=\"#常用参数及对应的命令组合\" class=\"headerlink\" title=\"常用参数及对应的命令组合\"></a>常用参数及对应的命令组合</h4><ul>\n<li><code>-D</code>: 查看所有的网络接口</li>\n<li><code>-i &lt;interface&gt;</code>: 捕获特定网络接口，输出到屏幕</li>\n<li><code>-n</code>: 不反向解析域名。在捕获的记录里，默认情况tcpdump会反向解析所有的IP地址，然后显示域名地址。该参数可以避免这个行为。</li>\n<li><code>-w &lt;file.pcap&gt;</code>: 输出到文件 file.pcap。通常大家会使用<code>.pcap</code>扩展名，表示 packet capture。<ul>\n<li>在输出到文件的时候，内容是不会输出到屏幕的。如果希望查看，可以打开新的终端，然后使用 <code>tcpdump -r file.pcap</code> 命令查看。</li>\n<li>当然，你也可以使用 <code>tcpdump -w file.pcap &amp;</code> 命令。让输出到文件的命令运行在后台。或者使用 <code>-l</code> + <code>tee</code> 命令输出到文件的同时查看。</li>\n<li>推荐使用 Wireshark 来分析捕获的流量日志。</li>\n</ul>\n</li>\n<li><code>-l</code>: 缓存输出，用于输出到屏幕的同时保存到文件。常用命令为 <code>tcpdump -l | tee file.out</code> 或者 <code>tcpdump -l &gt; file.out &amp; tail -f file.out</code></li>\n<li><code>-W 10 -C 200</code>: 当需要运行很长时间并且保存日志的时候，可以指定这两个参数。<code>-C</code> 指定单个文件大小， 单位为MB。<code>-W</code> 文件数量。Tcpdump会自动切分和更新日志。</li>\n<li><code>-A | -X</code> 默认情况下，tcpdump <strong>输出到屏幕</strong>时，仅捕获数据包的headers。如果需要检查包信息，可以加上 <code>-A</code> 以ASCII格式输出，或者 <code>-X</code> 以HEX格式输出。</li>\n</ul>\n<h4 id=\"过滤流量\"><a href=\"#过滤流量\" class=\"headerlink\" title=\"过滤流量\"></a>过滤流量</h4><p>tcpdump使用的是<a href=\"https://en.wikipedia.org/wiki/Berkeley_Packet_Filter\">BPF</a>语法用来作为过滤参数，很接近自然语言。比如，只希望捕获端口27017的TCP流量：<code>tcpdump tcp port 27017</code>。以下是常用的组合：</p>\n<ul>\n<li><code>tcpdump [udp|tcp]</code>: 只捕获 UDP 或 TCP 流量。Tcpdump也支持使用<a href=\"https://en.wikipedia.org/wiki/List_of_IP_protocol_numbers\">IP协议数字</a>的格式。比如 udp 是 17， tcp 是 6，所以这个命令也可以写作 <code>tcpdump proto [17|6]</code>。 </li>\n<li><code>tcpdump host 192.168.1.185</code>: 只捕获跟 host: 192.168.1.185 相关的流量。也可以指定IP范围，比如 <code>tcpdump net 10.10</code> 是捕获10.10.0.0&#x2F;16 相关的所有流量。</li>\n<li><code>tcpdump port 27017</code>: 只捕获跟端口27017相关的流量， 也可以指定端口范围：<code>tcpdump portrange 100-200</code></li>\n<li><code>tcpdump src host 192.168.1.185</code>: 只捕获来自 host: 192.168.1.185 的流量</li>\n<li><code>tcpdump dst port 80</code>: 只捕获访问本机 80 端口的流量</li>\n</ul>\n<p>复杂的过滤可以使用 <code>&amp;&amp;</code>， <code>｜｜</code>， <code>！</code> 或者 <code>and</code> 和 <code>not</code> 等关键词，比如：</p>\n<ul>\n<li><code>tcpdump -n src 192.168.1.185 and not dst port 22</code>: 捕获来自 host: 192.169.1.185 并且目的端口不是22的流量</li>\n<li>还可以加上 <code>()</code> 来实现更复杂的过滤： <code>tcpdump -n &#39;host 192.168.1.185 and (tcp port 80 or tcp port 443)&#39;</code></li>\n</ul>\n<h4 id=\"几个例子\"><a href=\"#几个例子\" class=\"headerlink\" title=\"几个例子\"></a>几个例子</h4><ul>\n<li><p><code>tcpdump -D</code> 来查看所有的网络接口</p>\n <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># tcpdump -D</span><br><span class=\"line\">1.eth0</span><br><span class=\"line\">2.nflog (Linux netfilter log (NFLOG) interface)</span><br><span class=\"line\">3.nfqueue (Linux netfilter queue (NFQUEUE) interface)</span><br><span class=\"line\">4.any (Pseudo-device that captures on all interfaces)</span><br><span class=\"line\">5.lo [Loopback]</span><br></pre></td></tr></table></figure>\n<ul>\n<li>其中 eth0 是物理网卡。any 比较特殊是包含了所有接口的流量。lo 是本地流量。其他两个我也不知道是什么。</li>\n</ul>\n</li>\n<li><p><code>tcpdump -i &lt;interface&gt;</code> 来查看特定的接口，比如 <code>tcpdump -i any</code>  可以捕获所有接口的所有流量，输出到屏幕。 可以追加 <code>-c &lt;number&gt;</code> 来指定捕获包的数量。</p>\n  <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># tcpdump -i any -c 10 -n</span><br><span class=\"line\">tcpdump: data link type PKTAP</span><br><span class=\"line\">tcpdump: verbose output suppressed, use -v or -vv for full protocol decode</span><br><span class=\"line\">listening on any, link-type PKTAP (Apple DLT_PKTAP), capture size 262144 bytes</span><br><span class=\"line\">23:23:45.199840 IP 127.0.0.1.57437 &gt; 127.0.0.1.64582: Flags [F.], seq 3146809726, ack 228856637, win 6375, options [nop,nop,TS val 1294890263 ecr 1294763197], length 0</span><br><span class=\"line\">23:23:45.199884 IP 127.0.0.1.57437 &gt; 127.0.0.1.64582: Flags [F.], seq 0, ack 1, win 6375, options [nop,nop,TS val 1294890263 ecr 1294763197], length 0</span><br><span class=\"line\">23:23:45.199903 IP 127.0.0.1.64582 &gt; 127.0.0.1.57437: Flags [.], ack 1, win 6376, options [nop,nop,TS val 1294890263 ecr 1294890263], length 0</span><br><span class=\"line\">23:23:45.199908 IP 127.0.0.1.64582 &gt; 127.0.0.1.57437: Flags [.], ack 1, win 6376, options [nop,nop,TS val 1294890263 ecr 1294890263], length 0</span><br><span class=\"line\">23:23:45.432277 IP 192.168.10.123.63284 &gt; 70.103.220.153.4501: UDP, length 132</span><br><span class=\"line\">23:23:45.511805 IP 70.103.220.153.4501 &gt; 192.168.10.123.63284: UDP, length 132</span><br><span class=\"line\">23:23:45.716903 ARP, Announcement 192.168.10.101, length 28</span><br><span class=\"line\">23:23:46.639929 IP 192.168.10.124.49154 &gt; 255.255.255.255.6667: UDP, length 188</span><br><span class=\"line\">23:23:46.837854 IP 192.168.10.123.64333 &gt; 172.217.6.69.443: Flags [.], seq 1059163531:1059164949, ack 51371873, win 2048, options [nop,nop,TS val 1294891899 ecr 1148464805], length 1418</span><br><span class=\"line\">23:23:46.837860 IP 192.168.10.123.64333 &gt; 172.217.6.69.443: Flags [.], seq 1418:2836, ack 1, win 2048, options [nop,nop,TS val 1294891899 ecr 1148464805], length 1418</span><br><span class=\"line\">10 packets captured</span><br><span class=\"line\">13 packets received by filter</span><br><span class=\"line\">0 packets dropped by kernel</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"输出日志解析\"><a href=\"#输出日志解析\" class=\"headerlink\" title=\"输出日志解析\"></a>输出日志解析</h4><p>典型的结构：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[Timestamp] [Protocol] [Src IP].[Src Port] &gt; [Dst IP].[Dst Port]: [Flags], [Seq], [Ack], [Win Size], [Options], [Data Length]</span><br></pre></td></tr></table></figure>\n\n<p>例子：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">23:25:46.253052 IP 192.168.10.123.64581 &gt; 192.168.10.107.8009: Flags [P.], seq 139835987:139836097, ack 801463949, win 2048, options [nop,nop,TS val 1295011047 ecr 5804669], length 110</span><br></pre></td></tr></table></figure>\n\n<p>其中：</p>\n<ul>\n<li><code>23:25:46.253052</code> 时间戳</li>\n<li><code>IP</code> 包协议。IP意思是 IPv4</li>\n<li><code>192.168.10.123.64581</code> 来源IP和端口，最后一个 <code>.</code> 后边是端口</li>\n<li><code>&gt;</code> 数据流从源IP到目的IP</li>\n<li><code>192.168.10.107.8009</code> 目的IP和端口，最后一个 <code>.</code> 后边是端口</li>\n<li><code>Flags [P.]</code> TCP 标识。 <code>[P.]</code> 是 发送告知以接收的数据包，用于告知上一个数据包和发送数据。其他的标识包括：<ul>\n<li>[S] - SYN (数据包发送者发起TCP第一次握手)</li>\n<li>[S.] - SYN-ACK (接送者发起第二次握手，并告知上一个数据包接受不了成功)</li>\n<li>[.] - ACK (发送者发起第三次握手，告知接收成功)</li>\n<li>[P] - PSH (发送数据)</li>\n<li>[F] - FIN (发送者告知数据传输完成)</li>\n<li>[R] - RST (接收者发起，表示接收到了意外数据包)</li>\n<li>还有 URG、CWR等</li>\n</ul>\n</li>\n<li><code>seq 139835987:139836097</code><ul>\n<li>当前数据流中包含了完整数据包的第 139835987 到 139836097 byte</li>\n</ul>\n</li>\n<li><code>ack 801463949</code><ul>\n<li>最后的期望的 bytes 数量</li>\n</ul>\n</li>\n<li><code>win 2048</code><ul>\n<li>接收者可以缓存的 bytes</li>\n</ul>\n</li>\n<li><code>options [nop,nop,TS val 1295011047 ecr 5804669]</code><ul>\n<li><code>nop</code>: no operation</li>\n<li><code>TS val</code> TCP 时间戳</li>\n<li><code>ecr</code>: echo reply.</li>\n</ul>\n</li>\n<li><code>length 110</code><ul>\n<li>本次数据流传输的大小 当前是 1024 bytes</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h2><ul>\n<li><a href=\"https://linuxize.com/post/tcpdump-command-in-linux/\">https://linuxize.com/post/tcpdump-command-in-linux/</a></li>\n<li><a href=\"https://www.tcpdump.org/manpages/tcpdump.1.html\">https://www.tcpdump.org/manpages/tcpdump.1.html</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Berkeley_Packet_Filter\">https://en.wikipedia.org/wiki/Berkeley_Packet_Filter</a></li>\n<li><a href=\"https://www.keycdn.com/support/tcp-flags\">https://www.keycdn.com/support/tcp-flags</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"检查网络流量\"><a href=\"#检查网络流量\" class=\"headerlink\" title=\"检查网络流量\"></a>检查网络流量</h2><h3 id=\"tcpdump\"><a href=\"#tcpdump\" class=\"headerlink\" title=\"tcpdump\"></a>tcpdump</h3><p>Tcpdump 是用于捕获发出和收到的网络流量的工具。在日常工作中经常用来检查调试网络问题。它不单能捕获 TCP 流量，也能捕获 UDP、ARP 和 ICMP 流量。</p>\n<p>首先，tcpdump 需要 root 权限，所以别忘了用 sudo 来执行。</p>\n<h4 id=\"常用参数及对应的命令组合\"><a href=\"#常用参数及对应的命令组合\" class=\"headerlink\" title=\"常用参数及对应的命令组合\"></a>常用参数及对应的命令组合</h4><ul>\n<li><code>-D</code>: 查看所有的网络接口</li>\n<li><code>-i &lt;interface&gt;</code>: 捕获特定网络接口，输出到屏幕</li>\n<li><code>-n</code>: 不反向解析域名。在捕获的记录里，默认情况tcpdump会反向解析所有的IP地址，然后显示域名地址。该参数可以避免这个行为。</li>\n<li><code>-w &lt;file.pcap&gt;</code>: 输出到文件 file.pcap。通常大家会使用<code>.pcap</code>扩展名，表示 packet capture。<ul>\n<li>在输出到文件的时候，内容是不会输出到屏幕的。如果希望查看，可以打开新的终端，然后使用 <code>tcpdump -r file.pcap</code> 命令查看。</li>\n<li>当然，你也可以使用 <code>tcpdump -w file.pcap &amp;</code> 命令。让输出到文件的命令运行在后台。或者使用 <code>-l</code> + <code>tee</code> 命令输出到文件的同时查看。</li>\n<li>推荐使用 Wireshark 来分析捕获的流量日志。</li>\n</ul>\n</li>\n<li><code>-l</code>: 缓存输出，用于输出到屏幕的同时保存到文件。常用命令为 <code>tcpdump -l | tee file.out</code> 或者 <code>tcpdump -l &gt; file.out &amp; tail -f file.out</code></li>\n<li><code>-W 10 -C 200</code>: 当需要运行很长时间并且保存日志的时候，可以指定这两个参数。<code>-C</code> 指定单个文件大小， 单位为MB。<code>-W</code> 文件数量。Tcpdump会自动切分和更新日志。</li>\n<li><code>-A | -X</code> 默认情况下，tcpdump <strong>输出到屏幕</strong>时，仅捕获数据包的headers。如果需要检查包信息，可以加上 <code>-A</code> 以ASCII格式输出，或者 <code>-X</code> 以HEX格式输出。</li>\n</ul>\n<h4 id=\"过滤流量\"><a href=\"#过滤流量\" class=\"headerlink\" title=\"过滤流量\"></a>过滤流量</h4><p>tcpdump使用的是<a href=\"https://en.wikipedia.org/wiki/Berkeley_Packet_Filter\">BPF</a>语法用来作为过滤参数，很接近自然语言。比如，只希望捕获端口27017的TCP流量：<code>tcpdump tcp port 27017</code>。以下是常用的组合：</p>\n<ul>\n<li><code>tcpdump [udp|tcp]</code>: 只捕获 UDP 或 TCP 流量。Tcpdump也支持使用<a href=\"https://en.wikipedia.org/wiki/List_of_IP_protocol_numbers\">IP协议数字</a>的格式。比如 udp 是 17， tcp 是 6，所以这个命令也可以写作 <code>tcpdump proto [17|6]</code>。 </li>\n<li><code>tcpdump host 192.168.1.185</code>: 只捕获跟 host: 192.168.1.185 相关的流量。也可以指定IP范围，比如 <code>tcpdump net 10.10</code> 是捕获10.10.0.0&#x2F;16 相关的所有流量。</li>\n<li><code>tcpdump port 27017</code>: 只捕获跟端口27017相关的流量， 也可以指定端口范围：<code>tcpdump portrange 100-200</code></li>\n<li><code>tcpdump src host 192.168.1.185</code>: 只捕获来自 host: 192.168.1.185 的流量</li>\n<li><code>tcpdump dst port 80</code>: 只捕获访问本机 80 端口的流量</li>\n</ul>\n<p>复杂的过滤可以使用 <code>&amp;&amp;</code>， <code>｜｜</code>， <code>！</code> 或者 <code>and</code> 和 <code>not</code> 等关键词，比如：</p>\n<ul>\n<li><code>tcpdump -n src 192.168.1.185 and not dst port 22</code>: 捕获来自 host: 192.169.1.185 并且目的端口不是22的流量</li>\n<li>还可以加上 <code>()</code> 来实现更复杂的过滤： <code>tcpdump -n &#39;host 192.168.1.185 and (tcp port 80 or tcp port 443)&#39;</code></li>\n</ul>\n<h4 id=\"几个例子\"><a href=\"#几个例子\" class=\"headerlink\" title=\"几个例子\"></a>几个例子</h4><ul>\n<li><p><code>tcpdump -D</code> 来查看所有的网络接口</p>\n <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># tcpdump -D</span><br><span class=\"line\">1.eth0</span><br><span class=\"line\">2.nflog (Linux netfilter log (NFLOG) interface)</span><br><span class=\"line\">3.nfqueue (Linux netfilter queue (NFQUEUE) interface)</span><br><span class=\"line\">4.any (Pseudo-device that captures on all interfaces)</span><br><span class=\"line\">5.lo [Loopback]</span><br></pre></td></tr></table></figure>\n<ul>\n<li>其中 eth0 是物理网卡。any 比较特殊是包含了所有接口的流量。lo 是本地流量。其他两个我也不知道是什么。</li>\n</ul>\n</li>\n<li><p><code>tcpdump -i &lt;interface&gt;</code> 来查看特定的接口，比如 <code>tcpdump -i any</code>  可以捕获所有接口的所有流量，输出到屏幕。 可以追加 <code>-c &lt;number&gt;</code> 来指定捕获包的数量。</p>\n  <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># tcpdump -i any -c 10 -n</span><br><span class=\"line\">tcpdump: data link type PKTAP</span><br><span class=\"line\">tcpdump: verbose output suppressed, use -v or -vv for full protocol decode</span><br><span class=\"line\">listening on any, link-type PKTAP (Apple DLT_PKTAP), capture size 262144 bytes</span><br><span class=\"line\">23:23:45.199840 IP 127.0.0.1.57437 &gt; 127.0.0.1.64582: Flags [F.], seq 3146809726, ack 228856637, win 6375, options [nop,nop,TS val 1294890263 ecr 1294763197], length 0</span><br><span class=\"line\">23:23:45.199884 IP 127.0.0.1.57437 &gt; 127.0.0.1.64582: Flags [F.], seq 0, ack 1, win 6375, options [nop,nop,TS val 1294890263 ecr 1294763197], length 0</span><br><span class=\"line\">23:23:45.199903 IP 127.0.0.1.64582 &gt; 127.0.0.1.57437: Flags [.], ack 1, win 6376, options [nop,nop,TS val 1294890263 ecr 1294890263], length 0</span><br><span class=\"line\">23:23:45.199908 IP 127.0.0.1.64582 &gt; 127.0.0.1.57437: Flags [.], ack 1, win 6376, options [nop,nop,TS val 1294890263 ecr 1294890263], length 0</span><br><span class=\"line\">23:23:45.432277 IP 192.168.10.123.63284 &gt; 70.103.220.153.4501: UDP, length 132</span><br><span class=\"line\">23:23:45.511805 IP 70.103.220.153.4501 &gt; 192.168.10.123.63284: UDP, length 132</span><br><span class=\"line\">23:23:45.716903 ARP, Announcement 192.168.10.101, length 28</span><br><span class=\"line\">23:23:46.639929 IP 192.168.10.124.49154 &gt; 255.255.255.255.6667: UDP, length 188</span><br><span class=\"line\">23:23:46.837854 IP 192.168.10.123.64333 &gt; 172.217.6.69.443: Flags [.], seq 1059163531:1059164949, ack 51371873, win 2048, options [nop,nop,TS val 1294891899 ecr 1148464805], length 1418</span><br><span class=\"line\">23:23:46.837860 IP 192.168.10.123.64333 &gt; 172.217.6.69.443: Flags [.], seq 1418:2836, ack 1, win 2048, options [nop,nop,TS val 1294891899 ecr 1148464805], length 1418</span><br><span class=\"line\">10 packets captured</span><br><span class=\"line\">13 packets received by filter</span><br><span class=\"line\">0 packets dropped by kernel</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"输出日志解析\"><a href=\"#输出日志解析\" class=\"headerlink\" title=\"输出日志解析\"></a>输出日志解析</h4><p>典型的结构：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[Timestamp] [Protocol] [Src IP].[Src Port] &gt; [Dst IP].[Dst Port]: [Flags], [Seq], [Ack], [Win Size], [Options], [Data Length]</span><br></pre></td></tr></table></figure>\n\n<p>例子：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">23:25:46.253052 IP 192.168.10.123.64581 &gt; 192.168.10.107.8009: Flags [P.], seq 139835987:139836097, ack 801463949, win 2048, options [nop,nop,TS val 1295011047 ecr 5804669], length 110</span><br></pre></td></tr></table></figure>\n\n<p>其中：</p>\n<ul>\n<li><code>23:25:46.253052</code> 时间戳</li>\n<li><code>IP</code> 包协议。IP意思是 IPv4</li>\n<li><code>192.168.10.123.64581</code> 来源IP和端口，最后一个 <code>.</code> 后边是端口</li>\n<li><code>&gt;</code> 数据流从源IP到目的IP</li>\n<li><code>192.168.10.107.8009</code> 目的IP和端口，最后一个 <code>.</code> 后边是端口</li>\n<li><code>Flags [P.]</code> TCP 标识。 <code>[P.]</code> 是 发送告知以接收的数据包，用于告知上一个数据包和发送数据。其他的标识包括：<ul>\n<li>[S] - SYN (数据包发送者发起TCP第一次握手)</li>\n<li>[S.] - SYN-ACK (接送者发起第二次握手，并告知上一个数据包接受不了成功)</li>\n<li>[.] - ACK (发送者发起第三次握手，告知接收成功)</li>\n<li>[P] - PSH (发送数据)</li>\n<li>[F] - FIN (发送者告知数据传输完成)</li>\n<li>[R] - RST (接收者发起，表示接收到了意外数据包)</li>\n<li>还有 URG、CWR等</li>\n</ul>\n</li>\n<li><code>seq 139835987:139836097</code><ul>\n<li>当前数据流中包含了完整数据包的第 139835987 到 139836097 byte</li>\n</ul>\n</li>\n<li><code>ack 801463949</code><ul>\n<li>最后的期望的 bytes 数量</li>\n</ul>\n</li>\n<li><code>win 2048</code><ul>\n<li>接收者可以缓存的 bytes</li>\n</ul>\n</li>\n<li><code>options [nop,nop,TS val 1295011047 ecr 5804669]</code><ul>\n<li><code>nop</code>: no operation</li>\n<li><code>TS val</code> TCP 时间戳</li>\n<li><code>ecr</code>: echo reply.</li>\n</ul>\n</li>\n<li><code>length 110</code><ul>\n<li>本次数据流传输的大小 当前是 1024 bytes</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h2><ul>\n<li><a href=\"https://linuxize.com/post/tcpdump-command-in-linux/\">https://linuxize.com/post/tcpdump-command-in-linux/</a></li>\n<li><a href=\"https://www.tcpdump.org/manpages/tcpdump.1.html\">https://www.tcpdump.org/manpages/tcpdump.1.html</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Berkeley_Packet_Filter\">https://en.wikipedia.org/wiki/Berkeley_Packet_Filter</a></li>\n<li><a href=\"https://www.keycdn.com/support/tcp-flags\">https://www.keycdn.com/support/tcp-flags</a></li>\n</ul>\n"},{"layout":"post","title":"Linux 常用命令(1) - 检查本地端口, 查看进程, 文件","date":"2021-03-03T05:00:00.000Z","description":"Linux 常用命令, ps, netstat, ss, lsof, less, cat, kill, tee","keywords":"ps, netstat, ss, lsof, less, cat, kill, tee","_content":"\n## 检查本地端口\n\n### netstat\n\n* 大多数linux系统已经内置了这个命令。如果没有，可以通过以下命令安装：\n\n    * Ubuntu & Debian: `sudo apt install net-tools`\n    * CentOS: `sudo yum install net-tools`\n\n* 列出所有在使用的TCP和UDP端口，包括服务名称和 Socket：\n\n    ```\n    $ sudo netstat -tunlp\n    ```\n\n    * `-t` - 显示 TCP 端口\n    * `-u` - 显示 UDP 端口\n    * `-n` - 直接使用 IP 地址，不通过域名服务器\n    * `-l` - 仅显示正在监听的端口\n    * `-p` - 显示正在使用 Socket 的 PID 和程序名称\n\n* 输出结果示例：\n\n    ```\n    $ sudo netstat -tunlp\n    Active Internet connections (only servers)\n    Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name\n    tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      1755/sshd\n    tcp6       0      0 :::22                   :::*                    LISTEN      1755/sshd\n    udp        0      0 0.0.0.0:68              0.0.0.0:*                           1075/dhclient\n    udp        0      0 0.0.0.0:68              0.0.0.0:*                           1074/dhclient\n    ```\n\n    * Proto - 协议名称.\n    * Local Address - 程序监听的 IP 和端口\n    * PID/Program name - PID 和程序名称\n\n* 通常情况下我们只需要查看特定的端口监听情况，可以通过 grep 管道命令来实现：\n\n    ```\n    sudo netstat -tnlp | grep :22\n    tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      1755/sshd\n    tcp6       0      0 :::22                   :::*                    LISTEN      1755/sshd\n    ```\n\n    * 如果输出结果为空，说明现在没有程序在监听这个端口。\n    * 你也可以通过 grep PID、协议、监听状态等来过滤结果。比如：\n        * `sudo netstat -tunlp | grep 0.0.0.0`\n        * `sudo netstat -tunlp | grep tcp`\n        * `sudo netstat -tunlp | grep sshd`\n\n### ss\n\n* 使用上类似 netstat。优点是速度更快，得到更多TCP状态。\n* 示例：\n\n    ```\n    $ sudo ss -tunlp\n    Netid State      Recv-Q Send-Q Local Address:Port               Peer Address:Port\n    udp   UNCONN     0      0               *:68                          *:*                   users:((\"dhclient\",pid=1075,fd=6))\n    udp   UNCONN     0      0               *:68                          *:*                   users:((\"dhclient\",pid=1074,fd=6))\n    tcp   LISTEN     0      128             *:22                          *:*                   users:((\"sshd\",pid=1755,fd=3))\n    tcp   LISTEN     0      128            :::22                         :::*                   users:((\"sshd\",pid=1755,fd=4))\n    ```\n\n### lsof\n\n* `lsof`(list opened files) 是用来查看当前系统打开文件的工具。但是由于在类 unix 的系统中，一切皆文件，所以 lsof 也可以用来查看进程、端口等。\n\n* 输出示例：\n    ```\n    COMMAND     PID   TID             USER   FD      TYPE             DEVICE SIZE/OFF       NODE NAME\n    systemd       1                   root  cwd       DIR                8,1     4096          2 /\n    systemd       1                   root  rtd       DIR                8,1     4096          2 /\n    systemd       1                   root  txt       REG                8,1  1589552      10104 /lib/systemd/systemd\n    systemd       1                   root  DEL       REG                8,1                2119 /lib/x86_64-linux-gnu/libuuid.so.1.3.0\n    systemd       1                   root  mem       REG                8,1   162632       2068 /lib/x86_64-linux-gnu/ld-2.23.so\n    systemd       1                   root    0u      CHR                1,3      0t0          6 /dev/null\n    systemd       1                   root    2u      CHR                1,3      0t0          6 /dev/null\n    dnsmasq     972                dnsmasq    5u      IPv4             19118      0t0        TCP 127.0.0.1:53 (LISTEN)\n    sshd       1515                   root    3u      IPv4             22999      0t0        TCP *:ssh (LISTEN)\n    ...\n    ```\n\n    - Command: 进程相关的命令\n    - PID: 进程 ID\n    - TID: 线程 ID。为空的话说明当前是进程。\n    - User: 用户名或用户ID\n    - Type: 有超过70种。常见的包括\n      - REG: 常规系统文件文件\n      - DIR: 目录\n      - FIFO: 先进先出\n      - CHR: Character special file\n      - BLK: Block special file\n      - INET: 网络 socket\n      - unix: UNIX domain socket\n    - Device: 磁盘的名称\n    - Size/Off: 文件大小或者文件所在的磁盘中的位置\n    - Node: 文件在磁盘中的索引节点\n    - Name: 文件挂载点\n    - FD: 可能是以下几种:\n      - 文件描述。常见的包括 cwd、rtd、txt、mem 和一些数字等等。其中，\n        - cwd 表示当前的工作目录\n        - rtd 表示根目录\n        - txt 表示程序的可执行文件\n        - mem 表示内存映射文件\n        - mmap 表示内存映射设备\n      - 数字描述。以数字表示的，比如标准输入输出文件。数字后面的字母表示进程对该文件的读写模式。\n        - u 表示该文件被打开并处于读取/写入模式\n        - r 表示只读模式\n        - w 表示只写模式\n        - ‘ ‘ 空字符表示未知\n        - 当字母`u`, `r`, `w` 大写的情况下表示该进程拥有对文件的对应操作的锁。\n\n#### 常见用法\n\n* 查看所有正在监听的TCP端口: `lsof -nP -iTCP -sTCP:LISTEN`\n   * `-n` - 不解析域名，直接使用IP地址\n   * `-P` - 不解析端口，直接使用数字。比如默认情况下 端口22会用`ssh`来表示。带上这个参数后，会直接显示22。\n   * `-iTCP -sTCP:LISTEN` - 仅显示网络文件，并且是TCP协议,以及状态为LISTEN\n* 查看特定的端口：`lsof -i :22`\n     * 只看 TCP：`lsof -i TCP:22`\n* 查看已建立的连接: `lsof  -i -s TCP:ESTABLISHED`\n* 列出指定进程打开的所有文件： `lsof -p 588`\n* 查看指定文件正在被哪些进程访问： `lsof -t /var/log/auth.log`\n\n## 管理进程\n\n### 查看进程 - ps\n\n* `ps aux` - BSD风格，没有 `-`\n    * `a` - 显示所有用户的所有的进程\n    * `u` - 提供更多细节，包括进程所属用户，以及内存使用\n    * `x` - 显示所有程序，包括没有 attacth 终端的\n\n* `ps -elf` - UNIX风格，一个 `-`。（其实还有GNU风格，是两个`-`）\n    * `-l` / `-f` - 类似于`u`，显示更多细节，只是侧重不同。两个参数都包含了PPID(父进程ID)\n    * `-e` - 类似于 `x`，显示所有程序\n    \n* 示例：\n\n    ```\n    # ps aux | head -10\n    USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND\n    root         8  0.0  0.0      0     0 ?        S    Feb25   0:00 [rcu_bh]\n    root         9  0.0  0.0      0     0 ?        R    Feb25   1:02 [rcu_sched]\n    root        10  0.0  0.0      0     0 ?        S<   Feb25   0:00 [lru-add-drain]\n    root        11  0.0  0.0      0     0 ?        S    Feb25   0:04 [watchdog/0]\n    root        13  0.0  0.0      0     0 ?        S    Feb25   0:00 [kdevtmpfs]\n    root        14  0.0  0.0      0     0 ?        S<   Feb25   0:00 [netns]\n    root        15  0.0  0.0      0     0 ?        S    Feb25   0:00 [khungtaskd]\n    root        16  0.0  0.0      0     0 ?        S<   Feb25   0:00 [writeback]\n    root        17  0.0  0.0      0     0 ?        S<   Feb25   0:00 [kintegrityd]\n    ```\n\n    * `USER` - 用户\n    * `PID` - 进程ID\n    * `%CPU` - CPU占有率\n    * `%MEM` - 内存占有率\n    * `VSZ` - 虚拟内存占有大小(KB)\n    * `RSS` - 物理内存占有大小\n    * `STAT` - 进程状态 Z (僵死), S (中断), R (运行), T (停止), D (不可中断)\n    * `START` - 进程开始运行时间\n\n### 重启/杀死进程 - kill / pkill\n\n* `kill [OPTIONS] [PID]...`\n* 常用参数：\n    * `1`(HUP) - 重新加载进程\n    * `9`(KILL) - 直接杀死进程\n    * `15`(TERM) - 逐步停止进程\n    * `kill -l` 可以查看更多参数\n* 用法：\n    1. 使用数字 - `kill -1 <PID>` 或者 `kill -s 1 <PID>`\n    2. 使用`SIG`前缀 - `kill -SIGHUP <PID>` 或者 `kill -s SIGHUP <PID>`\n    3. 不使用`SIG`前缀 - `kill -HUP <PID>` 或者 `kill -s HUP <PID>`\n* 复合用法：\n    * `kill -9 $(pidof mongod)`\n        * `pidof mongod` 会输出 mongod的PID, 作为变量传递给 kill命令\n* 更多信号： https://en.wikipedia.org/wiki/Signal_(IPC)\n\n## 查看文件\n\n### less\n\n* 对比`more`的优点是，不会一次性加载整个文件。速度会快很多。\n* 常用命令：\n    - `less +5 /var/log/auth.log` 从第五行开始\n    - `less -N /var/log/auth.log` 显示行数\n    - `less -5 /var/log/auth.log` 按空格或回车时默认翻整页，`-5` 指定每页为5行\n* 在查看文件时\n    - 可以使用 `/keyword` 来查找关键词，然后使用`n`或`N`来查找下一个或上一个\n    - `gg`回到顶部，G至底部\n    - `q` 退出阅读文件\n\n### cat\n\n* 默认输出所有文本到终端。可搭配less使用：\n    * `cat /var/log/auth.log | less` = `less /var/log/auth.log`\n* 常用：\n    * `cat -n /var/log/auth.log` 显示行数\n    * `cat -b /var/log/auth.log` 过滤空行后，显示行数。会覆盖 `-n`\n\n## 写入文件\n\n### echo\n\n应该是最简单的输出命令了。类似java/python的print方法。\n\n* `echo \"hello world\" > file.txt`\n\n### tee\n\n从标准输入流中读取并同时写入多个文件。\n\n常用参数：\n\n* `-a` - 以追加的方式写入，不覆盖文件已有文本。\n\n常用命令：\n\n* `command | tee file1.out file2.out file3.out`\n\n一个特殊的使用场景：\n\n当使用 `echo` 输入文本到 没有权限的文件时：`sudo echo \"text\" >> /etc/hello.conf` 是会失败的。因为重定向 `>` 不是 sudo 执行的。这个时候可以使用 `tee` 解决： `echo \"text\" | sudo tee -a /etc/hello.conf`\n\n## 其他\n\n* Mac 里的 `netstat` 跟 Linux 差异很大。比如 `-p` 在 Linux 里是指定是否查看 PID，但在 Mac 里是用来指定协议的 -- `-p tcp`。为了避免搞混，建议在 Mac 里使用 `lsof` 代替。\n\n## 参考\n\n* https://linuxize.com/post/check-listening-ports-linux/\n* https://computingforgeeks.com/netstat-vs-ss-usage-guide-linux/\n* https://www.howtogeek.com/426031/how-to-use-the-linux-lsof-command/\n* https://www.tecmint.com/linux-more-command-and-less-command-examples/\n* https://www.jianshu.com/p/be0c534c6a41\n* https://linuxize.com/post/ps-command-in-linux/\n* https://www.runoob.com/linux/linux-comm-ps.html\n* https://www.linuxcool.com/ps\n\n","source":"_posts/2021-03-03-linux-common-commands-1.md","raw":"---\nlayout: post\ntitle: Linux 常用命令(1) - 检查本地端口, 查看进程, 文件\ncategory: 编程学习\ntags: [Linux, ps, netstat, ss, lsof, less, cat, kill, tee]\ndate: 2021-03-03\ndescription: Linux 常用命令, ps, netstat, ss, lsof, less, cat, kill, tee\nkeywords: ps, netstat, ss, lsof, less, cat, kill, tee\n---\n\n## 检查本地端口\n\n### netstat\n\n* 大多数linux系统已经内置了这个命令。如果没有，可以通过以下命令安装：\n\n    * Ubuntu & Debian: `sudo apt install net-tools`\n    * CentOS: `sudo yum install net-tools`\n\n* 列出所有在使用的TCP和UDP端口，包括服务名称和 Socket：\n\n    ```\n    $ sudo netstat -tunlp\n    ```\n\n    * `-t` - 显示 TCP 端口\n    * `-u` - 显示 UDP 端口\n    * `-n` - 直接使用 IP 地址，不通过域名服务器\n    * `-l` - 仅显示正在监听的端口\n    * `-p` - 显示正在使用 Socket 的 PID 和程序名称\n\n* 输出结果示例：\n\n    ```\n    $ sudo netstat -tunlp\n    Active Internet connections (only servers)\n    Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name\n    tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      1755/sshd\n    tcp6       0      0 :::22                   :::*                    LISTEN      1755/sshd\n    udp        0      0 0.0.0.0:68              0.0.0.0:*                           1075/dhclient\n    udp        0      0 0.0.0.0:68              0.0.0.0:*                           1074/dhclient\n    ```\n\n    * Proto - 协议名称.\n    * Local Address - 程序监听的 IP 和端口\n    * PID/Program name - PID 和程序名称\n\n* 通常情况下我们只需要查看特定的端口监听情况，可以通过 grep 管道命令来实现：\n\n    ```\n    sudo netstat -tnlp | grep :22\n    tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      1755/sshd\n    tcp6       0      0 :::22                   :::*                    LISTEN      1755/sshd\n    ```\n\n    * 如果输出结果为空，说明现在没有程序在监听这个端口。\n    * 你也可以通过 grep PID、协议、监听状态等来过滤结果。比如：\n        * `sudo netstat -tunlp | grep 0.0.0.0`\n        * `sudo netstat -tunlp | grep tcp`\n        * `sudo netstat -tunlp | grep sshd`\n\n### ss\n\n* 使用上类似 netstat。优点是速度更快，得到更多TCP状态。\n* 示例：\n\n    ```\n    $ sudo ss -tunlp\n    Netid State      Recv-Q Send-Q Local Address:Port               Peer Address:Port\n    udp   UNCONN     0      0               *:68                          *:*                   users:((\"dhclient\",pid=1075,fd=6))\n    udp   UNCONN     0      0               *:68                          *:*                   users:((\"dhclient\",pid=1074,fd=6))\n    tcp   LISTEN     0      128             *:22                          *:*                   users:((\"sshd\",pid=1755,fd=3))\n    tcp   LISTEN     0      128            :::22                         :::*                   users:((\"sshd\",pid=1755,fd=4))\n    ```\n\n### lsof\n\n* `lsof`(list opened files) 是用来查看当前系统打开文件的工具。但是由于在类 unix 的系统中，一切皆文件，所以 lsof 也可以用来查看进程、端口等。\n\n* 输出示例：\n    ```\n    COMMAND     PID   TID             USER   FD      TYPE             DEVICE SIZE/OFF       NODE NAME\n    systemd       1                   root  cwd       DIR                8,1     4096          2 /\n    systemd       1                   root  rtd       DIR                8,1     4096          2 /\n    systemd       1                   root  txt       REG                8,1  1589552      10104 /lib/systemd/systemd\n    systemd       1                   root  DEL       REG                8,1                2119 /lib/x86_64-linux-gnu/libuuid.so.1.3.0\n    systemd       1                   root  mem       REG                8,1   162632       2068 /lib/x86_64-linux-gnu/ld-2.23.so\n    systemd       1                   root    0u      CHR                1,3      0t0          6 /dev/null\n    systemd       1                   root    2u      CHR                1,3      0t0          6 /dev/null\n    dnsmasq     972                dnsmasq    5u      IPv4             19118      0t0        TCP 127.0.0.1:53 (LISTEN)\n    sshd       1515                   root    3u      IPv4             22999      0t0        TCP *:ssh (LISTEN)\n    ...\n    ```\n\n    - Command: 进程相关的命令\n    - PID: 进程 ID\n    - TID: 线程 ID。为空的话说明当前是进程。\n    - User: 用户名或用户ID\n    - Type: 有超过70种。常见的包括\n      - REG: 常规系统文件文件\n      - DIR: 目录\n      - FIFO: 先进先出\n      - CHR: Character special file\n      - BLK: Block special file\n      - INET: 网络 socket\n      - unix: UNIX domain socket\n    - Device: 磁盘的名称\n    - Size/Off: 文件大小或者文件所在的磁盘中的位置\n    - Node: 文件在磁盘中的索引节点\n    - Name: 文件挂载点\n    - FD: 可能是以下几种:\n      - 文件描述。常见的包括 cwd、rtd、txt、mem 和一些数字等等。其中，\n        - cwd 表示当前的工作目录\n        - rtd 表示根目录\n        - txt 表示程序的可执行文件\n        - mem 表示内存映射文件\n        - mmap 表示内存映射设备\n      - 数字描述。以数字表示的，比如标准输入输出文件。数字后面的字母表示进程对该文件的读写模式。\n        - u 表示该文件被打开并处于读取/写入模式\n        - r 表示只读模式\n        - w 表示只写模式\n        - ‘ ‘ 空字符表示未知\n        - 当字母`u`, `r`, `w` 大写的情况下表示该进程拥有对文件的对应操作的锁。\n\n#### 常见用法\n\n* 查看所有正在监听的TCP端口: `lsof -nP -iTCP -sTCP:LISTEN`\n   * `-n` - 不解析域名，直接使用IP地址\n   * `-P` - 不解析端口，直接使用数字。比如默认情况下 端口22会用`ssh`来表示。带上这个参数后，会直接显示22。\n   * `-iTCP -sTCP:LISTEN` - 仅显示网络文件，并且是TCP协议,以及状态为LISTEN\n* 查看特定的端口：`lsof -i :22`\n     * 只看 TCP：`lsof -i TCP:22`\n* 查看已建立的连接: `lsof  -i -s TCP:ESTABLISHED`\n* 列出指定进程打开的所有文件： `lsof -p 588`\n* 查看指定文件正在被哪些进程访问： `lsof -t /var/log/auth.log`\n\n## 管理进程\n\n### 查看进程 - ps\n\n* `ps aux` - BSD风格，没有 `-`\n    * `a` - 显示所有用户的所有的进程\n    * `u` - 提供更多细节，包括进程所属用户，以及内存使用\n    * `x` - 显示所有程序，包括没有 attacth 终端的\n\n* `ps -elf` - UNIX风格，一个 `-`。（其实还有GNU风格，是两个`-`）\n    * `-l` / `-f` - 类似于`u`，显示更多细节，只是侧重不同。两个参数都包含了PPID(父进程ID)\n    * `-e` - 类似于 `x`，显示所有程序\n    \n* 示例：\n\n    ```\n    # ps aux | head -10\n    USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND\n    root         8  0.0  0.0      0     0 ?        S    Feb25   0:00 [rcu_bh]\n    root         9  0.0  0.0      0     0 ?        R    Feb25   1:02 [rcu_sched]\n    root        10  0.0  0.0      0     0 ?        S<   Feb25   0:00 [lru-add-drain]\n    root        11  0.0  0.0      0     0 ?        S    Feb25   0:04 [watchdog/0]\n    root        13  0.0  0.0      0     0 ?        S    Feb25   0:00 [kdevtmpfs]\n    root        14  0.0  0.0      0     0 ?        S<   Feb25   0:00 [netns]\n    root        15  0.0  0.0      0     0 ?        S    Feb25   0:00 [khungtaskd]\n    root        16  0.0  0.0      0     0 ?        S<   Feb25   0:00 [writeback]\n    root        17  0.0  0.0      0     0 ?        S<   Feb25   0:00 [kintegrityd]\n    ```\n\n    * `USER` - 用户\n    * `PID` - 进程ID\n    * `%CPU` - CPU占有率\n    * `%MEM` - 内存占有率\n    * `VSZ` - 虚拟内存占有大小(KB)\n    * `RSS` - 物理内存占有大小\n    * `STAT` - 进程状态 Z (僵死), S (中断), R (运行), T (停止), D (不可中断)\n    * `START` - 进程开始运行时间\n\n### 重启/杀死进程 - kill / pkill\n\n* `kill [OPTIONS] [PID]...`\n* 常用参数：\n    * `1`(HUP) - 重新加载进程\n    * `9`(KILL) - 直接杀死进程\n    * `15`(TERM) - 逐步停止进程\n    * `kill -l` 可以查看更多参数\n* 用法：\n    1. 使用数字 - `kill -1 <PID>` 或者 `kill -s 1 <PID>`\n    2. 使用`SIG`前缀 - `kill -SIGHUP <PID>` 或者 `kill -s SIGHUP <PID>`\n    3. 不使用`SIG`前缀 - `kill -HUP <PID>` 或者 `kill -s HUP <PID>`\n* 复合用法：\n    * `kill -9 $(pidof mongod)`\n        * `pidof mongod` 会输出 mongod的PID, 作为变量传递给 kill命令\n* 更多信号： https://en.wikipedia.org/wiki/Signal_(IPC)\n\n## 查看文件\n\n### less\n\n* 对比`more`的优点是，不会一次性加载整个文件。速度会快很多。\n* 常用命令：\n    - `less +5 /var/log/auth.log` 从第五行开始\n    - `less -N /var/log/auth.log` 显示行数\n    - `less -5 /var/log/auth.log` 按空格或回车时默认翻整页，`-5` 指定每页为5行\n* 在查看文件时\n    - 可以使用 `/keyword` 来查找关键词，然后使用`n`或`N`来查找下一个或上一个\n    - `gg`回到顶部，G至底部\n    - `q` 退出阅读文件\n\n### cat\n\n* 默认输出所有文本到终端。可搭配less使用：\n    * `cat /var/log/auth.log | less` = `less /var/log/auth.log`\n* 常用：\n    * `cat -n /var/log/auth.log` 显示行数\n    * `cat -b /var/log/auth.log` 过滤空行后，显示行数。会覆盖 `-n`\n\n## 写入文件\n\n### echo\n\n应该是最简单的输出命令了。类似java/python的print方法。\n\n* `echo \"hello world\" > file.txt`\n\n### tee\n\n从标准输入流中读取并同时写入多个文件。\n\n常用参数：\n\n* `-a` - 以追加的方式写入，不覆盖文件已有文本。\n\n常用命令：\n\n* `command | tee file1.out file2.out file3.out`\n\n一个特殊的使用场景：\n\n当使用 `echo` 输入文本到 没有权限的文件时：`sudo echo \"text\" >> /etc/hello.conf` 是会失败的。因为重定向 `>` 不是 sudo 执行的。这个时候可以使用 `tee` 解决： `echo \"text\" | sudo tee -a /etc/hello.conf`\n\n## 其他\n\n* Mac 里的 `netstat` 跟 Linux 差异很大。比如 `-p` 在 Linux 里是指定是否查看 PID，但在 Mac 里是用来指定协议的 -- `-p tcp`。为了避免搞混，建议在 Mac 里使用 `lsof` 代替。\n\n## 参考\n\n* https://linuxize.com/post/check-listening-ports-linux/\n* https://computingforgeeks.com/netstat-vs-ss-usage-guide-linux/\n* https://www.howtogeek.com/426031/how-to-use-the-linux-lsof-command/\n* https://www.tecmint.com/linux-more-command-and-less-command-examples/\n* https://www.jianshu.com/p/be0c534c6a41\n* https://linuxize.com/post/ps-command-in-linux/\n* https://www.runoob.com/linux/linux-comm-ps.html\n* https://www.linuxcool.com/ps\n\n","slug":"2021-03-03-linux-common-commands-1","published":1,"updated":"2022-02-12T20:53:10.509Z","comments":1,"photos":[],"link":"","_id":"ckzkc92xo002uoqoxg4puci1k","content":"<h2 id=\"检查本地端口\"><a href=\"#检查本地端口\" class=\"headerlink\" title=\"检查本地端口\"></a>检查本地端口</h2><h3 id=\"netstat\"><a href=\"#netstat\" class=\"headerlink\" title=\"netstat\"></a>netstat</h3><ul>\n<li><p>大多数linux系统已经内置了这个命令。如果没有，可以通过以下命令安装：</p>\n<ul>\n<li>Ubuntu &amp; Debian: <code>sudo apt install net-tools</code></li>\n<li>CentOS: <code>sudo yum install net-tools</code></li>\n</ul>\n</li>\n<li><p>列出所有在使用的TCP和UDP端口，包括服务名称和 Socket：</p>\n  <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ sudo netstat -tunlp</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>-t</code> - 显示 TCP 端口</li>\n<li><code>-u</code> - 显示 UDP 端口</li>\n<li><code>-n</code> - 直接使用 IP 地址，不通过域名服务器</li>\n<li><code>-l</code> - 仅显示正在监听的端口</li>\n<li><code>-p</code> - 显示正在使用 Socket 的 PID 和程序名称</li>\n</ul>\n</li>\n<li><p>输出结果示例：</p>\n  <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ sudo netstat -tunlp</span><br><span class=\"line\">Active Internet connections (only servers)</span><br><span class=\"line\">Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name</span><br><span class=\"line\">tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      1755/sshd</span><br><span class=\"line\">tcp6       0      0 :::22                   :::*                    LISTEN      1755/sshd</span><br><span class=\"line\">udp        0      0 0.0.0.0:68              0.0.0.0:*                           1075/dhclient</span><br><span class=\"line\">udp        0      0 0.0.0.0:68              0.0.0.0:*                           1074/dhclient</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>Proto - 协议名称.</li>\n<li>Local Address - 程序监听的 IP 和端口</li>\n<li>PID&#x2F;Program name - PID 和程序名称</li>\n</ul>\n</li>\n<li><p>通常情况下我们只需要查看特定的端口监听情况，可以通过 grep 管道命令来实现：</p>\n  <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo netstat -tnlp | grep :22</span><br><span class=\"line\">tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      1755/sshd</span><br><span class=\"line\">tcp6       0      0 :::22                   :::*                    LISTEN      1755/sshd</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>如果输出结果为空，说明现在没有程序在监听这个端口。</li>\n<li>你也可以通过 grep PID、协议、监听状态等来过滤结果。比如：<ul>\n<li><code>sudo netstat -tunlp | grep 0.0.0.0</code></li>\n<li><code>sudo netstat -tunlp | grep tcp</code></li>\n<li><code>sudo netstat -tunlp | grep sshd</code></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"ss\"><a href=\"#ss\" class=\"headerlink\" title=\"ss\"></a>ss</h3><ul>\n<li><p>使用上类似 netstat。优点是速度更快，得到更多TCP状态。</p>\n</li>\n<li><p>示例：</p>\n  <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ sudo ss -tunlp</span><br><span class=\"line\">Netid State      Recv-Q Send-Q Local Address:Port               Peer Address:Port</span><br><span class=\"line\">udp   UNCONN     0      0               *:68                          *:*                   users:((&quot;dhclient&quot;,pid=1075,fd=6))</span><br><span class=\"line\">udp   UNCONN     0      0               *:68                          *:*                   users:((&quot;dhclient&quot;,pid=1074,fd=6))</span><br><span class=\"line\">tcp   LISTEN     0      128             *:22                          *:*                   users:((&quot;sshd&quot;,pid=1755,fd=3))</span><br><span class=\"line\">tcp   LISTEN     0      128            :::22                         :::*                   users:((&quot;sshd&quot;,pid=1755,fd=4))</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"lsof\"><a href=\"#lsof\" class=\"headerlink\" title=\"lsof\"></a>lsof</h3><ul>\n<li><p><code>lsof</code>(list opened files) 是用来查看当前系统打开文件的工具。但是由于在类 unix 的系统中，一切皆文件，所以 lsof 也可以用来查看进程、端口等。</p>\n</li>\n<li><p>输出示例：</p>\n  <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">COMMAND     PID   TID             USER   FD      TYPE             DEVICE SIZE/OFF       NODE NAME</span><br><span class=\"line\">systemd       1                   root  cwd       DIR                8,1     4096          2 /</span><br><span class=\"line\">systemd       1                   root  rtd       DIR                8,1     4096          2 /</span><br><span class=\"line\">systemd       1                   root  txt       REG                8,1  1589552      10104 /lib/systemd/systemd</span><br><span class=\"line\">systemd       1                   root  DEL       REG                8,1                2119 /lib/x86_64-linux-gnu/libuuid.so.1.3.0</span><br><span class=\"line\">systemd       1                   root  mem       REG                8,1   162632       2068 /lib/x86_64-linux-gnu/ld-2.23.so</span><br><span class=\"line\">systemd       1                   root    0u      CHR                1,3      0t0          6 /dev/null</span><br><span class=\"line\">systemd       1                   root    2u      CHR                1,3      0t0          6 /dev/null</span><br><span class=\"line\">dnsmasq     972                dnsmasq    5u      IPv4             19118      0t0        TCP 127.0.0.1:53 (LISTEN)</span><br><span class=\"line\">sshd       1515                   root    3u      IPv4             22999      0t0        TCP *:ssh (LISTEN)</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>Command: 进程相关的命令</li>\n<li>PID: 进程 ID</li>\n<li>TID: 线程 ID。为空的话说明当前是进程。</li>\n<li>User: 用户名或用户ID</li>\n<li>Type: 有超过70种。常见的包括<ul>\n<li>REG: 常规系统文件文件</li>\n<li>DIR: 目录</li>\n<li>FIFO: 先进先出</li>\n<li>CHR: Character special file</li>\n<li>BLK: Block special file</li>\n<li>INET: 网络 socket</li>\n<li>unix: UNIX domain socket</li>\n</ul>\n</li>\n<li>Device: 磁盘的名称</li>\n<li>Size&#x2F;Off: 文件大小或者文件所在的磁盘中的位置</li>\n<li>Node: 文件在磁盘中的索引节点</li>\n<li>Name: 文件挂载点</li>\n<li>FD: 可能是以下几种:<ul>\n<li>文件描述。常见的包括 cwd、rtd、txt、mem 和一些数字等等。其中，<ul>\n<li>cwd 表示当前的工作目录</li>\n<li>rtd 表示根目录</li>\n<li>txt 表示程序的可执行文件</li>\n<li>mem 表示内存映射文件</li>\n<li>mmap 表示内存映射设备</li>\n</ul>\n</li>\n<li>数字描述。以数字表示的，比如标准输入输出文件。数字后面的字母表示进程对该文件的读写模式。<ul>\n<li>u 表示该文件被打开并处于读取&#x2F;写入模式</li>\n<li>r 表示只读模式</li>\n<li>w 表示只写模式</li>\n<li>‘ ‘ 空字符表示未知</li>\n<li>当字母<code>u</code>, <code>r</code>, <code>w</code> 大写的情况下表示该进程拥有对文件的对应操作的锁。</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"常见用法\"><a href=\"#常见用法\" class=\"headerlink\" title=\"常见用法\"></a>常见用法</h4><ul>\n<li>查看所有正在监听的TCP端口: <code>lsof -nP -iTCP -sTCP:LISTEN</code><ul>\n<li><code>-n</code> - 不解析域名，直接使用IP地址</li>\n<li><code>-P</code> - 不解析端口，直接使用数字。比如默认情况下 端口22会用<code>ssh</code>来表示。带上这个参数后，会直接显示22。</li>\n<li><code>-iTCP -sTCP:LISTEN</code> - 仅显示网络文件，并且是TCP协议,以及状态为LISTEN</li>\n</ul>\n</li>\n<li>查看特定的端口：<code>lsof -i :22</code><ul>\n<li>只看 TCP：<code>lsof -i TCP:22</code></li>\n</ul>\n</li>\n<li>查看已建立的连接: <code>lsof  -i -s TCP:ESTABLISHED</code></li>\n<li>列出指定进程打开的所有文件： <code>lsof -p 588</code></li>\n<li>查看指定文件正在被哪些进程访问： <code>lsof -t /var/log/auth.log</code></li>\n</ul>\n<h2 id=\"管理进程\"><a href=\"#管理进程\" class=\"headerlink\" title=\"管理进程\"></a>管理进程</h2><h3 id=\"查看进程-ps\"><a href=\"#查看进程-ps\" class=\"headerlink\" title=\"查看进程 - ps\"></a>查看进程 - ps</h3><ul>\n<li><p><code>ps aux</code> - BSD风格，没有 <code>-</code></p>\n<ul>\n<li><code>a</code> - 显示所有用户的所有的进程</li>\n<li><code>u</code> - 提供更多细节，包括进程所属用户，以及内存使用</li>\n<li><code>x</code> - 显示所有程序，包括没有 attacth 终端的</li>\n</ul>\n</li>\n<li><p><code>ps -elf</code> - UNIX风格，一个 <code>-</code>。（其实还有GNU风格，是两个<code>-</code>）</p>\n<ul>\n<li><code>-l</code> &#x2F; <code>-f</code> - 类似于<code>u</code>，显示更多细节，只是侧重不同。两个参数都包含了PPID(父进程ID)</li>\n<li><code>-e</code> - 类似于 <code>x</code>，显示所有程序</li>\n</ul>\n</li>\n<li><p>示例：</p>\n  <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># ps aux | head -10</span><br><span class=\"line\">USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND</span><br><span class=\"line\">root         8  0.0  0.0      0     0 ?        S    Feb25   0:00 [rcu_bh]</span><br><span class=\"line\">root         9  0.0  0.0      0     0 ?        R    Feb25   1:02 [rcu_sched]</span><br><span class=\"line\">root        10  0.0  0.0      0     0 ?        S&lt;   Feb25   0:00 [lru-add-drain]</span><br><span class=\"line\">root        11  0.0  0.0      0     0 ?        S    Feb25   0:04 [watchdog/0]</span><br><span class=\"line\">root        13  0.0  0.0      0     0 ?        S    Feb25   0:00 [kdevtmpfs]</span><br><span class=\"line\">root        14  0.0  0.0      0     0 ?        S&lt;   Feb25   0:00 [netns]</span><br><span class=\"line\">root        15  0.0  0.0      0     0 ?        S    Feb25   0:00 [khungtaskd]</span><br><span class=\"line\">root        16  0.0  0.0      0     0 ?        S&lt;   Feb25   0:00 [writeback]</span><br><span class=\"line\">root        17  0.0  0.0      0     0 ?        S&lt;   Feb25   0:00 [kintegrityd]</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>USER</code> - 用户</li>\n<li><code>PID</code> - 进程ID</li>\n<li><code>%CPU</code> - CPU占有率</li>\n<li><code>%MEM</code> - 内存占有率</li>\n<li><code>VSZ</code> - 虚拟内存占有大小(KB)</li>\n<li><code>RSS</code> - 物理内存占有大小</li>\n<li><code>STAT</code> - 进程状态 Z (僵死), S (中断), R (运行), T (停止), D (不可中断)</li>\n<li><code>START</code> - 进程开始运行时间</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"重启-x2F-杀死进程-kill-x2F-pkill\"><a href=\"#重启-x2F-杀死进程-kill-x2F-pkill\" class=\"headerlink\" title=\"重启&#x2F;杀死进程 - kill &#x2F; pkill\"></a>重启&#x2F;杀死进程 - kill &#x2F; pkill</h3><ul>\n<li><code>kill [OPTIONS] [PID]...</code></li>\n<li>常用参数：<ul>\n<li><code>1</code>(HUP) - 重新加载进程</li>\n<li><code>9</code>(KILL) - 直接杀死进程</li>\n<li><code>15</code>(TERM) - 逐步停止进程</li>\n<li><code>kill -l</code> 可以查看更多参数</li>\n</ul>\n</li>\n<li>用法：<ol>\n<li>使用数字 - <code>kill -1 &lt;PID&gt;</code> 或者 <code>kill -s 1 &lt;PID&gt;</code></li>\n<li>使用<code>SIG</code>前缀 - <code>kill -SIGHUP &lt;PID&gt;</code> 或者 <code>kill -s SIGHUP &lt;PID&gt;</code></li>\n<li>不使用<code>SIG</code>前缀 - <code>kill -HUP &lt;PID&gt;</code> 或者 <code>kill -s HUP &lt;PID&gt;</code></li>\n</ol>\n</li>\n<li>复合用法：<ul>\n<li><code>kill -9 $(pidof mongod)</code><ul>\n<li><code>pidof mongod</code> 会输出 mongod的PID, 作为变量传递给 kill命令</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>更多信号： <a href=\"https://en.wikipedia.org/wiki/Signal_(IPC)\">https://en.wikipedia.org/wiki/Signal_(IPC)</a></li>\n</ul>\n<h2 id=\"查看文件\"><a href=\"#查看文件\" class=\"headerlink\" title=\"查看文件\"></a>查看文件</h2><h3 id=\"less\"><a href=\"#less\" class=\"headerlink\" title=\"less\"></a>less</h3><ul>\n<li>对比<code>more</code>的优点是，不会一次性加载整个文件。速度会快很多。</li>\n<li>常用命令：<ul>\n<li><code>less +5 /var/log/auth.log</code> 从第五行开始</li>\n<li><code>less -N /var/log/auth.log</code> 显示行数</li>\n<li><code>less -5 /var/log/auth.log</code> 按空格或回车时默认翻整页，<code>-5</code> 指定每页为5行</li>\n</ul>\n</li>\n<li>在查看文件时<ul>\n<li>可以使用 <code>/keyword</code> 来查找关键词，然后使用<code>n</code>或<code>N</code>来查找下一个或上一个</li>\n<li><code>gg</code>回到顶部，G至底部</li>\n<li><code>q</code> 退出阅读文件</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"cat\"><a href=\"#cat\" class=\"headerlink\" title=\"cat\"></a>cat</h3><ul>\n<li>默认输出所有文本到终端。可搭配less使用：<ul>\n<li><code>cat /var/log/auth.log | less</code> &#x3D; <code>less /var/log/auth.log</code></li>\n</ul>\n</li>\n<li>常用：<ul>\n<li><code>cat -n /var/log/auth.log</code> 显示行数</li>\n<li><code>cat -b /var/log/auth.log</code> 过滤空行后，显示行数。会覆盖 <code>-n</code></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"写入文件\"><a href=\"#写入文件\" class=\"headerlink\" title=\"写入文件\"></a>写入文件</h2><h3 id=\"echo\"><a href=\"#echo\" class=\"headerlink\" title=\"echo\"></a>echo</h3><p>应该是最简单的输出命令了。类似java&#x2F;python的print方法。</p>\n<ul>\n<li><code>echo &quot;hello world&quot; &gt; file.txt</code></li>\n</ul>\n<h3 id=\"tee\"><a href=\"#tee\" class=\"headerlink\" title=\"tee\"></a>tee</h3><p>从标准输入流中读取并同时写入多个文件。</p>\n<p>常用参数：</p>\n<ul>\n<li><code>-a</code> - 以追加的方式写入，不覆盖文件已有文本。</li>\n</ul>\n<p>常用命令：</p>\n<ul>\n<li><code>command | tee file1.out file2.out file3.out</code></li>\n</ul>\n<p>一个特殊的使用场景：</p>\n<p>当使用 <code>echo</code> 输入文本到 没有权限的文件时：<code>sudo echo &quot;text&quot; &gt;&gt; /etc/hello.conf</code> 是会失败的。因为重定向 <code>&gt;</code> 不是 sudo 执行的。这个时候可以使用 <code>tee</code> 解决： <code>echo &quot;text&quot; | sudo tee -a /etc/hello.conf</code></p>\n<h2 id=\"其他\"><a href=\"#其他\" class=\"headerlink\" title=\"其他\"></a>其他</h2><ul>\n<li>Mac 里的 <code>netstat</code> 跟 Linux 差异很大。比如 <code>-p</code> 在 Linux 里是指定是否查看 PID，但在 Mac 里是用来指定协议的 – <code>-p tcp</code>。为了避免搞混，建议在 Mac 里使用 <code>lsof</code> 代替。</li>\n</ul>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h2><ul>\n<li><a href=\"https://linuxize.com/post/check-listening-ports-linux/\">https://linuxize.com/post/check-listening-ports-linux/</a></li>\n<li><a href=\"https://computingforgeeks.com/netstat-vs-ss-usage-guide-linux/\">https://computingforgeeks.com/netstat-vs-ss-usage-guide-linux/</a></li>\n<li><a href=\"https://www.howtogeek.com/426031/how-to-use-the-linux-lsof-command/\">https://www.howtogeek.com/426031/how-to-use-the-linux-lsof-command/</a></li>\n<li><a href=\"https://www.tecmint.com/linux-more-command-and-less-command-examples/\">https://www.tecmint.com/linux-more-command-and-less-command-examples/</a></li>\n<li><a href=\"https://www.jianshu.com/p/be0c534c6a41\">https://www.jianshu.com/p/be0c534c6a41</a></li>\n<li><a href=\"https://linuxize.com/post/ps-command-in-linux/\">https://linuxize.com/post/ps-command-in-linux/</a></li>\n<li><a href=\"https://www.runoob.com/linux/linux-comm-ps.html\">https://www.runoob.com/linux/linux-comm-ps.html</a></li>\n<li><a href=\"https://www.linuxcool.com/ps\">https://www.linuxcool.com/ps</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"检查本地端口\"><a href=\"#检查本地端口\" class=\"headerlink\" title=\"检查本地端口\"></a>检查本地端口</h2><h3 id=\"netstat\"><a href=\"#netstat\" class=\"headerlink\" title=\"netstat\"></a>netstat</h3><ul>\n<li><p>大多数linux系统已经内置了这个命令。如果没有，可以通过以下命令安装：</p>\n<ul>\n<li>Ubuntu &amp; Debian: <code>sudo apt install net-tools</code></li>\n<li>CentOS: <code>sudo yum install net-tools</code></li>\n</ul>\n</li>\n<li><p>列出所有在使用的TCP和UDP端口，包括服务名称和 Socket：</p>\n  <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ sudo netstat -tunlp</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>-t</code> - 显示 TCP 端口</li>\n<li><code>-u</code> - 显示 UDP 端口</li>\n<li><code>-n</code> - 直接使用 IP 地址，不通过域名服务器</li>\n<li><code>-l</code> - 仅显示正在监听的端口</li>\n<li><code>-p</code> - 显示正在使用 Socket 的 PID 和程序名称</li>\n</ul>\n</li>\n<li><p>输出结果示例：</p>\n  <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ sudo netstat -tunlp</span><br><span class=\"line\">Active Internet connections (only servers)</span><br><span class=\"line\">Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name</span><br><span class=\"line\">tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      1755/sshd</span><br><span class=\"line\">tcp6       0      0 :::22                   :::*                    LISTEN      1755/sshd</span><br><span class=\"line\">udp        0      0 0.0.0.0:68              0.0.0.0:*                           1075/dhclient</span><br><span class=\"line\">udp        0      0 0.0.0.0:68              0.0.0.0:*                           1074/dhclient</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>Proto - 协议名称.</li>\n<li>Local Address - 程序监听的 IP 和端口</li>\n<li>PID&#x2F;Program name - PID 和程序名称</li>\n</ul>\n</li>\n<li><p>通常情况下我们只需要查看特定的端口监听情况，可以通过 grep 管道命令来实现：</p>\n  <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo netstat -tnlp | grep :22</span><br><span class=\"line\">tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      1755/sshd</span><br><span class=\"line\">tcp6       0      0 :::22                   :::*                    LISTEN      1755/sshd</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>如果输出结果为空，说明现在没有程序在监听这个端口。</li>\n<li>你也可以通过 grep PID、协议、监听状态等来过滤结果。比如：<ul>\n<li><code>sudo netstat -tunlp | grep 0.0.0.0</code></li>\n<li><code>sudo netstat -tunlp | grep tcp</code></li>\n<li><code>sudo netstat -tunlp | grep sshd</code></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"ss\"><a href=\"#ss\" class=\"headerlink\" title=\"ss\"></a>ss</h3><ul>\n<li><p>使用上类似 netstat。优点是速度更快，得到更多TCP状态。</p>\n</li>\n<li><p>示例：</p>\n  <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ sudo ss -tunlp</span><br><span class=\"line\">Netid State      Recv-Q Send-Q Local Address:Port               Peer Address:Port</span><br><span class=\"line\">udp   UNCONN     0      0               *:68                          *:*                   users:((&quot;dhclient&quot;,pid=1075,fd=6))</span><br><span class=\"line\">udp   UNCONN     0      0               *:68                          *:*                   users:((&quot;dhclient&quot;,pid=1074,fd=6))</span><br><span class=\"line\">tcp   LISTEN     0      128             *:22                          *:*                   users:((&quot;sshd&quot;,pid=1755,fd=3))</span><br><span class=\"line\">tcp   LISTEN     0      128            :::22                         :::*                   users:((&quot;sshd&quot;,pid=1755,fd=4))</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"lsof\"><a href=\"#lsof\" class=\"headerlink\" title=\"lsof\"></a>lsof</h3><ul>\n<li><p><code>lsof</code>(list opened files) 是用来查看当前系统打开文件的工具。但是由于在类 unix 的系统中，一切皆文件，所以 lsof 也可以用来查看进程、端口等。</p>\n</li>\n<li><p>输出示例：</p>\n  <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">COMMAND     PID   TID             USER   FD      TYPE             DEVICE SIZE/OFF       NODE NAME</span><br><span class=\"line\">systemd       1                   root  cwd       DIR                8,1     4096          2 /</span><br><span class=\"line\">systemd       1                   root  rtd       DIR                8,1     4096          2 /</span><br><span class=\"line\">systemd       1                   root  txt       REG                8,1  1589552      10104 /lib/systemd/systemd</span><br><span class=\"line\">systemd       1                   root  DEL       REG                8,1                2119 /lib/x86_64-linux-gnu/libuuid.so.1.3.0</span><br><span class=\"line\">systemd       1                   root  mem       REG                8,1   162632       2068 /lib/x86_64-linux-gnu/ld-2.23.so</span><br><span class=\"line\">systemd       1                   root    0u      CHR                1,3      0t0          6 /dev/null</span><br><span class=\"line\">systemd       1                   root    2u      CHR                1,3      0t0          6 /dev/null</span><br><span class=\"line\">dnsmasq     972                dnsmasq    5u      IPv4             19118      0t0        TCP 127.0.0.1:53 (LISTEN)</span><br><span class=\"line\">sshd       1515                   root    3u      IPv4             22999      0t0        TCP *:ssh (LISTEN)</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>Command: 进程相关的命令</li>\n<li>PID: 进程 ID</li>\n<li>TID: 线程 ID。为空的话说明当前是进程。</li>\n<li>User: 用户名或用户ID</li>\n<li>Type: 有超过70种。常见的包括<ul>\n<li>REG: 常规系统文件文件</li>\n<li>DIR: 目录</li>\n<li>FIFO: 先进先出</li>\n<li>CHR: Character special file</li>\n<li>BLK: Block special file</li>\n<li>INET: 网络 socket</li>\n<li>unix: UNIX domain socket</li>\n</ul>\n</li>\n<li>Device: 磁盘的名称</li>\n<li>Size&#x2F;Off: 文件大小或者文件所在的磁盘中的位置</li>\n<li>Node: 文件在磁盘中的索引节点</li>\n<li>Name: 文件挂载点</li>\n<li>FD: 可能是以下几种:<ul>\n<li>文件描述。常见的包括 cwd、rtd、txt、mem 和一些数字等等。其中，<ul>\n<li>cwd 表示当前的工作目录</li>\n<li>rtd 表示根目录</li>\n<li>txt 表示程序的可执行文件</li>\n<li>mem 表示内存映射文件</li>\n<li>mmap 表示内存映射设备</li>\n</ul>\n</li>\n<li>数字描述。以数字表示的，比如标准输入输出文件。数字后面的字母表示进程对该文件的读写模式。<ul>\n<li>u 表示该文件被打开并处于读取&#x2F;写入模式</li>\n<li>r 表示只读模式</li>\n<li>w 表示只写模式</li>\n<li>‘ ‘ 空字符表示未知</li>\n<li>当字母<code>u</code>, <code>r</code>, <code>w</code> 大写的情况下表示该进程拥有对文件的对应操作的锁。</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"常见用法\"><a href=\"#常见用法\" class=\"headerlink\" title=\"常见用法\"></a>常见用法</h4><ul>\n<li>查看所有正在监听的TCP端口: <code>lsof -nP -iTCP -sTCP:LISTEN</code><ul>\n<li><code>-n</code> - 不解析域名，直接使用IP地址</li>\n<li><code>-P</code> - 不解析端口，直接使用数字。比如默认情况下 端口22会用<code>ssh</code>来表示。带上这个参数后，会直接显示22。</li>\n<li><code>-iTCP -sTCP:LISTEN</code> - 仅显示网络文件，并且是TCP协议,以及状态为LISTEN</li>\n</ul>\n</li>\n<li>查看特定的端口：<code>lsof -i :22</code><ul>\n<li>只看 TCP：<code>lsof -i TCP:22</code></li>\n</ul>\n</li>\n<li>查看已建立的连接: <code>lsof  -i -s TCP:ESTABLISHED</code></li>\n<li>列出指定进程打开的所有文件： <code>lsof -p 588</code></li>\n<li>查看指定文件正在被哪些进程访问： <code>lsof -t /var/log/auth.log</code></li>\n</ul>\n<h2 id=\"管理进程\"><a href=\"#管理进程\" class=\"headerlink\" title=\"管理进程\"></a>管理进程</h2><h3 id=\"查看进程-ps\"><a href=\"#查看进程-ps\" class=\"headerlink\" title=\"查看进程 - ps\"></a>查看进程 - ps</h3><ul>\n<li><p><code>ps aux</code> - BSD风格，没有 <code>-</code></p>\n<ul>\n<li><code>a</code> - 显示所有用户的所有的进程</li>\n<li><code>u</code> - 提供更多细节，包括进程所属用户，以及内存使用</li>\n<li><code>x</code> - 显示所有程序，包括没有 attacth 终端的</li>\n</ul>\n</li>\n<li><p><code>ps -elf</code> - UNIX风格，一个 <code>-</code>。（其实还有GNU风格，是两个<code>-</code>）</p>\n<ul>\n<li><code>-l</code> &#x2F; <code>-f</code> - 类似于<code>u</code>，显示更多细节，只是侧重不同。两个参数都包含了PPID(父进程ID)</li>\n<li><code>-e</code> - 类似于 <code>x</code>，显示所有程序</li>\n</ul>\n</li>\n<li><p>示例：</p>\n  <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># ps aux | head -10</span><br><span class=\"line\">USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND</span><br><span class=\"line\">root         8  0.0  0.0      0     0 ?        S    Feb25   0:00 [rcu_bh]</span><br><span class=\"line\">root         9  0.0  0.0      0     0 ?        R    Feb25   1:02 [rcu_sched]</span><br><span class=\"line\">root        10  0.0  0.0      0     0 ?        S&lt;   Feb25   0:00 [lru-add-drain]</span><br><span class=\"line\">root        11  0.0  0.0      0     0 ?        S    Feb25   0:04 [watchdog/0]</span><br><span class=\"line\">root        13  0.0  0.0      0     0 ?        S    Feb25   0:00 [kdevtmpfs]</span><br><span class=\"line\">root        14  0.0  0.0      0     0 ?        S&lt;   Feb25   0:00 [netns]</span><br><span class=\"line\">root        15  0.0  0.0      0     0 ?        S    Feb25   0:00 [khungtaskd]</span><br><span class=\"line\">root        16  0.0  0.0      0     0 ?        S&lt;   Feb25   0:00 [writeback]</span><br><span class=\"line\">root        17  0.0  0.0      0     0 ?        S&lt;   Feb25   0:00 [kintegrityd]</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>USER</code> - 用户</li>\n<li><code>PID</code> - 进程ID</li>\n<li><code>%CPU</code> - CPU占有率</li>\n<li><code>%MEM</code> - 内存占有率</li>\n<li><code>VSZ</code> - 虚拟内存占有大小(KB)</li>\n<li><code>RSS</code> - 物理内存占有大小</li>\n<li><code>STAT</code> - 进程状态 Z (僵死), S (中断), R (运行), T (停止), D (不可中断)</li>\n<li><code>START</code> - 进程开始运行时间</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"重启-x2F-杀死进程-kill-x2F-pkill\"><a href=\"#重启-x2F-杀死进程-kill-x2F-pkill\" class=\"headerlink\" title=\"重启&#x2F;杀死进程 - kill &#x2F; pkill\"></a>重启&#x2F;杀死进程 - kill &#x2F; pkill</h3><ul>\n<li><code>kill [OPTIONS] [PID]...</code></li>\n<li>常用参数：<ul>\n<li><code>1</code>(HUP) - 重新加载进程</li>\n<li><code>9</code>(KILL) - 直接杀死进程</li>\n<li><code>15</code>(TERM) - 逐步停止进程</li>\n<li><code>kill -l</code> 可以查看更多参数</li>\n</ul>\n</li>\n<li>用法：<ol>\n<li>使用数字 - <code>kill -1 &lt;PID&gt;</code> 或者 <code>kill -s 1 &lt;PID&gt;</code></li>\n<li>使用<code>SIG</code>前缀 - <code>kill -SIGHUP &lt;PID&gt;</code> 或者 <code>kill -s SIGHUP &lt;PID&gt;</code></li>\n<li>不使用<code>SIG</code>前缀 - <code>kill -HUP &lt;PID&gt;</code> 或者 <code>kill -s HUP &lt;PID&gt;</code></li>\n</ol>\n</li>\n<li>复合用法：<ul>\n<li><code>kill -9 $(pidof mongod)</code><ul>\n<li><code>pidof mongod</code> 会输出 mongod的PID, 作为变量传递给 kill命令</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>更多信号： <a href=\"https://en.wikipedia.org/wiki/Signal_(IPC)\">https://en.wikipedia.org/wiki/Signal_(IPC)</a></li>\n</ul>\n<h2 id=\"查看文件\"><a href=\"#查看文件\" class=\"headerlink\" title=\"查看文件\"></a>查看文件</h2><h3 id=\"less\"><a href=\"#less\" class=\"headerlink\" title=\"less\"></a>less</h3><ul>\n<li>对比<code>more</code>的优点是，不会一次性加载整个文件。速度会快很多。</li>\n<li>常用命令：<ul>\n<li><code>less +5 /var/log/auth.log</code> 从第五行开始</li>\n<li><code>less -N /var/log/auth.log</code> 显示行数</li>\n<li><code>less -5 /var/log/auth.log</code> 按空格或回车时默认翻整页，<code>-5</code> 指定每页为5行</li>\n</ul>\n</li>\n<li>在查看文件时<ul>\n<li>可以使用 <code>/keyword</code> 来查找关键词，然后使用<code>n</code>或<code>N</code>来查找下一个或上一个</li>\n<li><code>gg</code>回到顶部，G至底部</li>\n<li><code>q</code> 退出阅读文件</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"cat\"><a href=\"#cat\" class=\"headerlink\" title=\"cat\"></a>cat</h3><ul>\n<li>默认输出所有文本到终端。可搭配less使用：<ul>\n<li><code>cat /var/log/auth.log | less</code> &#x3D; <code>less /var/log/auth.log</code></li>\n</ul>\n</li>\n<li>常用：<ul>\n<li><code>cat -n /var/log/auth.log</code> 显示行数</li>\n<li><code>cat -b /var/log/auth.log</code> 过滤空行后，显示行数。会覆盖 <code>-n</code></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"写入文件\"><a href=\"#写入文件\" class=\"headerlink\" title=\"写入文件\"></a>写入文件</h2><h3 id=\"echo\"><a href=\"#echo\" class=\"headerlink\" title=\"echo\"></a>echo</h3><p>应该是最简单的输出命令了。类似java&#x2F;python的print方法。</p>\n<ul>\n<li><code>echo &quot;hello world&quot; &gt; file.txt</code></li>\n</ul>\n<h3 id=\"tee\"><a href=\"#tee\" class=\"headerlink\" title=\"tee\"></a>tee</h3><p>从标准输入流中读取并同时写入多个文件。</p>\n<p>常用参数：</p>\n<ul>\n<li><code>-a</code> - 以追加的方式写入，不覆盖文件已有文本。</li>\n</ul>\n<p>常用命令：</p>\n<ul>\n<li><code>command | tee file1.out file2.out file3.out</code></li>\n</ul>\n<p>一个特殊的使用场景：</p>\n<p>当使用 <code>echo</code> 输入文本到 没有权限的文件时：<code>sudo echo &quot;text&quot; &gt;&gt; /etc/hello.conf</code> 是会失败的。因为重定向 <code>&gt;</code> 不是 sudo 执行的。这个时候可以使用 <code>tee</code> 解决： <code>echo &quot;text&quot; | sudo tee -a /etc/hello.conf</code></p>\n<h2 id=\"其他\"><a href=\"#其他\" class=\"headerlink\" title=\"其他\"></a>其他</h2><ul>\n<li>Mac 里的 <code>netstat</code> 跟 Linux 差异很大。比如 <code>-p</code> 在 Linux 里是指定是否查看 PID，但在 Mac 里是用来指定协议的 – <code>-p tcp</code>。为了避免搞混，建议在 Mac 里使用 <code>lsof</code> 代替。</li>\n</ul>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h2><ul>\n<li><a href=\"https://linuxize.com/post/check-listening-ports-linux/\">https://linuxize.com/post/check-listening-ports-linux/</a></li>\n<li><a href=\"https://computingforgeeks.com/netstat-vs-ss-usage-guide-linux/\">https://computingforgeeks.com/netstat-vs-ss-usage-guide-linux/</a></li>\n<li><a href=\"https://www.howtogeek.com/426031/how-to-use-the-linux-lsof-command/\">https://www.howtogeek.com/426031/how-to-use-the-linux-lsof-command/</a></li>\n<li><a href=\"https://www.tecmint.com/linux-more-command-and-less-command-examples/\">https://www.tecmint.com/linux-more-command-and-less-command-examples/</a></li>\n<li><a href=\"https://www.jianshu.com/p/be0c534c6a41\">https://www.jianshu.com/p/be0c534c6a41</a></li>\n<li><a href=\"https://linuxize.com/post/ps-command-in-linux/\">https://linuxize.com/post/ps-command-in-linux/</a></li>\n<li><a href=\"https://www.runoob.com/linux/linux-comm-ps.html\">https://www.runoob.com/linux/linux-comm-ps.html</a></li>\n<li><a href=\"https://www.linuxcool.com/ps\">https://www.linuxcool.com/ps</a></li>\n</ul>\n"}],"PostAsset":[],"PostCategory":[{"post_id":"ckzkc92wu0001oqoxaveve1sy","category_id":"ckzkc92wy0004oqox6ghlbce6","_id":"ckzkc92x4000goqox8xiq875d"},{"post_id":"ckzkc92wx0003oqox58dzgsha","category_id":"ckzkc92wy0004oqox6ghlbce6","_id":"ckzkc92x6000koqoxcxs825a2"},{"post_id":"ckzkc92x5000ioqox8kgj9qe3","category_id":"ckzkc92x4000foqox6k3n3mxq","_id":"ckzkc92x8000qoqox7otb7242"},{"post_id":"ckzkc92x00007oqoxalribsm7","category_id":"ckzkc92x4000foqox6k3n3mxq","_id":"ckzkc92x9000voqoxhjl691ce"},{"post_id":"ckzkc92x5000joqoxej03gdpo","category_id":"ckzkc92x4000foqox6k3n3mxq","_id":"ckzkc92xa000yoqox7qj3d0ym"},{"post_id":"ckzkc92x7000noqoxa32z062m","category_id":"ckzkc92x4000foqox6k3n3mxq","_id":"ckzkc92xb0013oqox304o6pil"},{"post_id":"ckzkc92x10008oqoxf01s44xb","category_id":"ckzkc92x4000foqox6k3n3mxq","_id":"ckzkc92xc0016oqox0s6ah30x"},{"post_id":"ckzkc92x8000poqox69k9gqs3","category_id":"ckzkc92wy0004oqox6ghlbce6","_id":"ckzkc92xc001boqoxe43n5lc5"},{"post_id":"ckzkc92x9000uoqoxd6necjcb","category_id":"ckzkc92x4000foqox6k3n3mxq","_id":"ckzkc92xd001doqox8bfe53om"},{"post_id":"ckzkc92x10009oqox8ro51v6k","category_id":"ckzkc92x4000foqox6k3n3mxq","_id":"ckzkc92xe001foqox9r2h0e3t"},{"post_id":"ckzkc92xa000xoqoxfcqj9u9z","category_id":"ckzkc92wy0004oqox6ghlbce6","_id":"ckzkc92xe001joqox5bpwhac3"},{"post_id":"ckzkc92xa0012oqoxgdhg774n","category_id":"ckzkc92x4000foqox6k3n3mxq","_id":"ckzkc92xf001noqoxhd7me734"},{"post_id":"ckzkc92x3000doqoxcifjc8qs","category_id":"ckzkc92x4000foqox6k3n3mxq","_id":"ckzkc92xg001roqox5gpc9ugl"},{"post_id":"ckzkc92xb0015oqoxc3w77nw4","category_id":"ckzkc92x4000foqox6k3n3mxq","_id":"ckzkc92xh001uoqoxdows5qch"},{"post_id":"ckzkc92xc001aoqox97zegupu","category_id":"ckzkc92x4000foqox6k3n3mxq","_id":"ckzkc92xh001yoqox3ivcb22t"},{"post_id":"ckzkc92x4000eoqox7s05gzzm","category_id":"ckzkc92x4000foqox6k3n3mxq","_id":"ckzkc92xi0020oqox9qph3t7s"},{"post_id":"ckzkc92xd001coqoxgt67h7ww","category_id":"ckzkc92x4000foqox6k3n3mxq","_id":"ckzkc92xj0023oqoxbf4tfhcs"},{"post_id":"ckzkc92xe001ioqox4uyk0nnb","category_id":"ckzkc92x4000foqox6k3n3mxq","_id":"ckzkc92xj0025oqox1zdu3586"},{"post_id":"ckzkc92xg001qoqoxddu0efhp","category_id":"ckzkc92x4000foqox6k3n3mxq","_id":"ckzkc92xk0028oqox0zx9873q"},{"post_id":"ckzkc92xd001eoqoxe9ulaz4h","category_id":"ckzkc92xe001koqoxbxo7f4z5","_id":"ckzkc92xk002aoqox6c2zfdsp"},{"post_id":"ckzkc92xg001soqox3hm1f3yi","category_id":"ckzkc92x4000foqox6k3n3mxq","_id":"ckzkc92xl002eoqox9cc10bkm"},{"post_id":"ckzkc92xh001xoqox3ocueaks","category_id":"ckzkc92x4000foqox6k3n3mxq","_id":"ckzkc92xm002hoqoxgj8yhi1v"},{"post_id":"ckzkc92xf001moqox1ajyd3i1","category_id":"ckzkc92xe001koqoxbxo7f4z5","_id":"ckzkc92xm002loqox2zy227nh"},{"post_id":"ckzkc92xi001zoqoxelcvh0g5","category_id":"ckzkc92x4000foqox6k3n3mxq","_id":"ckzkc92xn002ooqox5sp6hkkn"},{"post_id":"ckzkc92xi0022oqox21899yc9","category_id":"ckzkc92x4000foqox6k3n3mxq","_id":"ckzkc92xo002roqox7lmvdyf1"},{"post_id":"ckzkc92xj0024oqoxc4cadyko","category_id":"ckzkc92xe001koqoxbxo7f4z5","_id":"ckzkc92xo002voqox1epjf9r4"},{"post_id":"ckzkc92xk0027oqoxd35z353y","category_id":"ckzkc92wy0004oqox6ghlbce6","_id":"ckzkc92xp002xoqox69njglur"},{"post_id":"ckzkc92xk0029oqox2uqu5iwt","category_id":"ckzkc92wy0004oqox6ghlbce6","_id":"ckzkc92xp002zoqox6f0t33m0"},{"post_id":"ckzkc92xl002doqoxb5yyh4hr","category_id":"ckzkc92xe001koqoxbxo7f4z5","_id":"ckzkc92xp0030oqox4tutbm8m"},{"post_id":"ckzkc92xl002goqox044133ng","category_id":"ckzkc92xe001koqoxbxo7f4z5","_id":"ckzkc92xp0032oqoxfn558n49"},{"post_id":"ckzkc92xm002koqox7o0b4oks","category_id":"ckzkc92x4000foqox6k3n3mxq","_id":"ckzkc92xq0034oqox7kz246vd"},{"post_id":"ckzkc92xn002noqoxfrwq2fl6","category_id":"ckzkc92x4000foqox6k3n3mxq","_id":"ckzkc92xq0037oqox1x5050v1"},{"post_id":"ckzkc92xn002qoqox29197kvf","category_id":"ckzkc92x4000foqox6k3n3mxq","_id":"ckzkc92xq0039oqoxeqn71ovk"},{"post_id":"ckzkc92xo002uoqoxg4puci1k","category_id":"ckzkc92x4000foqox6k3n3mxq","_id":"ckzkc92xq003boqox2w9g46j5"}],"PostTag":[{"post_id":"ckzkc92wu0001oqoxaveve1sy","tag_id":"ckzkc92wz0005oqox7x1abjsd","_id":"ckzkc92x3000coqox78rx0gts"},{"post_id":"ckzkc92wx0003oqox58dzgsha","tag_id":"ckzkc92x2000boqox8j3e4mw4","_id":"ckzkc92x7000ooqox7jj38u7o"},{"post_id":"ckzkc92wx0003oqox58dzgsha","tag_id":"ckzkc92wz0005oqox7x1abjsd","_id":"ckzkc92x8000roqox7dpz9tb8"},{"post_id":"ckzkc92x00007oqoxalribsm7","tag_id":"ckzkc92x6000moqoxamr63lcz","_id":"ckzkc92x9000woqoxg3i6eurh"},{"post_id":"ckzkc92x8000poqox69k9gqs3","tag_id":"ckzkc92wz0005oqox7x1abjsd","_id":"ckzkc92xa0010oqox5mx67am8"},{"post_id":"ckzkc92x10008oqoxf01s44xb","tag_id":"ckzkc92x9000toqox7enkf7xe","_id":"ckzkc92xb0014oqoxf1s0cg3a"},{"post_id":"ckzkc92xa000xoqoxfcqj9u9z","tag_id":"ckzkc92wz0005oqox7x1abjsd","_id":"ckzkc92xc0018oqox2cil5y3x"},{"post_id":"ckzkc92x10009oqox8ro51v6k","tag_id":"ckzkc92x6000moqoxamr63lcz","_id":"ckzkc92xe001hoqoxfoekgkpx"},{"post_id":"ckzkc92x10009oqox8ro51v6k","tag_id":"ckzkc92xc0019oqoxayza75gm","_id":"ckzkc92xf001loqox3y4zbbt4"},{"post_id":"ckzkc92x3000doqoxcifjc8qs","tag_id":"ckzkc92x6000moqoxamr63lcz","_id":"ckzkc92xf001poqoxf39cg2q2"},{"post_id":"ckzkc92x4000eoqox7s05gzzm","tag_id":"ckzkc92x6000moqoxamr63lcz","_id":"ckzkc92xh001woqox15ybfe0h"},{"post_id":"ckzkc92xk0027oqoxd35z353y","tag_id":"ckzkc92wz0005oqox7x1abjsd","_id":"ckzkc92xl002coqoxg0elgh1z"},{"post_id":"ckzkc92x5000ioqox8kgj9qe3","tag_id":"ckzkc92x6000moqoxamr63lcz","_id":"ckzkc92xl002foqox4ia5b6j3"},{"post_id":"ckzkc92x5000ioqox8kgj9qe3","tag_id":"ckzkc92xi0021oqoxdj0t2u88","_id":"ckzkc92xm002ioqoxbzlt6bio"},{"post_id":"ckzkc92x5000ioqox8kgj9qe3","tag_id":"ckzkc92xj0026oqox93fz5lad","_id":"ckzkc92xn002moqoxgrpjf4fw"},{"post_id":"ckzkc92xk0029oqox2uqu5iwt","tag_id":"ckzkc92wz0005oqox7x1abjsd","_id":"ckzkc92xn002poqox6zqwa73g"},{"post_id":"ckzkc92x5000joqoxej03gdpo","tag_id":"ckzkc92xl002boqox3dmdg90s","_id":"ckzkc92xo002toqoxd8r16skn"},{"post_id":"ckzkc92x5000joqoxej03gdpo","tag_id":"ckzkc92xm002joqox5jax3eon","_id":"ckzkc92xp002woqox6p62fssy"},{"post_id":"ckzkc92x7000noqoxa32z062m","tag_id":"ckzkc92xo002soqoxavhl0eob","_id":"ckzkc92xp0033oqox7ip39l6x"},{"post_id":"ckzkc92x7000noqoxa32z062m","tag_id":"ckzkc92xi0021oqoxdj0t2u88","_id":"ckzkc92xq0035oqoxfa29b61m"},{"post_id":"ckzkc92x9000uoqoxd6necjcb","tag_id":"ckzkc92xi0021oqoxdj0t2u88","_id":"ckzkc92xq0038oqox5fts8vfe"},{"post_id":"ckzkc92xa0012oqoxgdhg774n","tag_id":"ckzkc92xi0021oqoxdj0t2u88","_id":"ckzkc92xq003doqox1usp1dey"},{"post_id":"ckzkc92xa0012oqoxgdhg774n","tag_id":"ckzkc92xq003aoqox2zc45244","_id":"ckzkc92xq003eoqox4rra0d19"},{"post_id":"ckzkc92xb0015oqoxc3w77nw4","tag_id":"ckzkc92xq003aoqox2zc45244","_id":"ckzkc92xr003goqoxcorl6j1e"},{"post_id":"ckzkc92xc001aoqox97zegupu","tag_id":"ckzkc92xq003aoqox2zc45244","_id":"ckzkc92xr003ioqox3w874d83"},{"post_id":"ckzkc92xd001coqoxgt67h7ww","tag_id":"ckzkc92xr003hoqox8bsahqd7","_id":"ckzkc92xr003koqox60gra163"},{"post_id":"ckzkc92xd001eoqoxe9ulaz4h","tag_id":"ckzkc92xr003joqoxhgep34o4","_id":"ckzkc92xr003moqox7m4w5z82"},{"post_id":"ckzkc92xe001ioqox4uyk0nnb","tag_id":"ckzkc92xr003hoqox8bsahqd7","_id":"ckzkc92xs003ooqoxaq3334vs"},{"post_id":"ckzkc92xf001moqox1ajyd3i1","tag_id":"ckzkc92xr003joqoxhgep34o4","_id":"ckzkc92xs003soqox08dc1457"},{"post_id":"ckzkc92xf001moqox1ajyd3i1","tag_id":"ckzkc92xs003poqoxe3m04dlb","_id":"ckzkc92xs003toqoxgb5ab5tp"},{"post_id":"ckzkc92xf001moqox1ajyd3i1","tag_id":"ckzkc92xs003qoqoxbqr10jbr","_id":"ckzkc92xt003voqox0yaz2gw1"},{"post_id":"ckzkc92xg001qoqoxddu0efhp","tag_id":"ckzkc92xs003poqoxe3m04dlb","_id":"ckzkc92xt003xoqox4jp12rs6"},{"post_id":"ckzkc92xg001qoqoxddu0efhp","tag_id":"ckzkc92xt003uoqox7n60ahzh","_id":"ckzkc92xt003yoqoxan0y4c7a"},{"post_id":"ckzkc92xg001soqox3hm1f3yi","tag_id":"ckzkc92xi0021oqoxdj0t2u88","_id":"ckzkc92xt0040oqoxf8dl7kz7"},{"post_id":"ckzkc92xh001xoqox3ocueaks","tag_id":"ckzkc92xi0021oqoxdj0t2u88","_id":"ckzkc92xu0042oqoxgmrwdof9"},{"post_id":"ckzkc92xi001zoqoxelcvh0g5","tag_id":"ckzkc92xi0021oqoxdj0t2u88","_id":"ckzkc92xu0044oqoxgfplavpu"},{"post_id":"ckzkc92xi0022oqox21899yc9","tag_id":"ckzkc92xu0043oqox6m03f809","_id":"ckzkc92xu0047oqoxhpse9yuc"},{"post_id":"ckzkc92xi0022oqox21899yc9","tag_id":"ckzkc92xu0045oqox1mkgd3oc","_id":"ckzkc92xu0048oqox94vo5ofs"},{"post_id":"ckzkc92xj0024oqoxc4cadyko","tag_id":"ckzkc92xu0046oqoxhad4e6ir","_id":"ckzkc92xu004aoqox7cy4c7t3"},{"post_id":"ckzkc92xl002doqoxb5yyh4hr","tag_id":"ckzkc92xu0049oqoxc0xsgpcd","_id":"ckzkc92xv004coqox4ptq3iv8"},{"post_id":"ckzkc92xl002goqox044133ng","tag_id":"ckzkc92xu004boqox6fska8cb","_id":"ckzkc92xv004eoqox52z72x1i"},{"post_id":"ckzkc92xm002koqox7o0b4oks","tag_id":"ckzkc92x6000moqoxamr63lcz","_id":"ckzkc92xw004loqoxct9q0gzb"},{"post_id":"ckzkc92xm002koqox7o0b4oks","tag_id":"ckzkc92xv004doqoxf6y87gw2","_id":"ckzkc92xw004moqoxejnl0rfr"},{"post_id":"ckzkc92xm002koqox7o0b4oks","tag_id":"ckzkc92xv004foqox2accclb3","_id":"ckzkc92xw004ooqoxgtha2z4y"},{"post_id":"ckzkc92xm002koqox7o0b4oks","tag_id":"ckzkc92xv004goqox82lr2qih","_id":"ckzkc92xw004poqox9vag8q8w"},{"post_id":"ckzkc92xm002koqox7o0b4oks","tag_id":"ckzkc92xv004hoqoxacaq9ziy","_id":"ckzkc92xw004roqox1rde7uwe"},{"post_id":"ckzkc92xm002koqox7o0b4oks","tag_id":"ckzkc92xv004ioqox20h79rjq","_id":"ckzkc92xw004soqox6ojzbxuf"},{"post_id":"ckzkc92xm002koqox7o0b4oks","tag_id":"ckzkc92xw004joqoxgnx1ah85","_id":"ckzkc92xx004uoqox5vkh8l4b"},{"post_id":"ckzkc92xn002noqoxfrwq2fl6","tag_id":"ckzkc92x6000moqoxamr63lcz","_id":"ckzkc92xx004voqoxaihd3i57"},{"post_id":"ckzkc92xn002noqoxfrwq2fl6","tag_id":"ckzkc92xw004koqox8n3b6uvi","_id":"ckzkc92xx004woqoxhm8abbjv"},{"post_id":"ckzkc92xn002qoqox29197kvf","tag_id":"ckzkc92x6000moqoxamr63lcz","_id":"ckzkc92xx004yoqox0gmyb9cw"},{"post_id":"ckzkc92xn002qoqox29197kvf","tag_id":"ckzkc92xw004noqox45ko87xj","_id":"ckzkc92xx004zoqox177ddhnr"},{"post_id":"ckzkc92xo002uoqoxg4puci1k","tag_id":"ckzkc92x6000moqoxamr63lcz","_id":"ckzkc92xy0055oqoxfvxa0qms"},{"post_id":"ckzkc92xo002uoqoxg4puci1k","tag_id":"ckzkc92xw004qoqoxe4hz1bqx","_id":"ckzkc92xy0056oqox47pya2q4"},{"post_id":"ckzkc92xo002uoqoxg4puci1k","tag_id":"ckzkc92xx004toqoxan351oaq","_id":"ckzkc92xy0057oqox93qj95rc"},{"post_id":"ckzkc92xo002uoqoxg4puci1k","tag_id":"ckzkc92xx004xoqoxeplb9v9k","_id":"ckzkc92xy0058oqoxfgzu3ygo"},{"post_id":"ckzkc92xo002uoqoxg4puci1k","tag_id":"ckzkc92xx0050oqox2skuhsyq","_id":"ckzkc92xy0059oqoxda6qfkig"},{"post_id":"ckzkc92xo002uoqoxg4puci1k","tag_id":"ckzkc92xx0051oqoxadwa0xuw","_id":"ckzkc92xy005aoqoxbdiycj89"},{"post_id":"ckzkc92xo002uoqoxg4puci1k","tag_id":"ckzkc92xy0052oqox7lj2hmji","_id":"ckzkc92xy005boqox8um83iom"},{"post_id":"ckzkc92xo002uoqoxg4puci1k","tag_id":"ckzkc92xy0053oqox7auy0iru","_id":"ckzkc92xy005coqox6x0oct47"},{"post_id":"ckzkc92xo002uoqoxg4puci1k","tag_id":"ckzkc92xy0054oqoxccw7axpk","_id":"ckzkc92xy005doqox62facnz9"}],"Tag":[{"name":"笔记","_id":"ckzkc92wz0005oqox7x1abjsd"},{"name":"哲学","_id":"ckzkc92x2000boqox8j3e4mw4"},{"name":"Linux","_id":"ckzkc92x6000moqoxamr63lcz"},{"name":"MongoDB","_id":"ckzkc92x9000toqox7enkf7xe"},{"name":"Git","_id":"ckzkc92xc0019oqoxayza75gm"},{"name":"PHP","_id":"ckzkc92xi0021oqoxdj0t2u88"},{"name":"Laravel","_id":"ckzkc92xj0026oqox93fz5lad"},{"name":"CSS","_id":"ckzkc92xl002boqox3dmdg90s"},{"name":"Javascript","_id":"ckzkc92xm002joqox5jax3eon"},{"name":"Nginx","_id":"ckzkc92xo002soqoxavhl0eob"},{"name":"编程规范","_id":"ckzkc92xq003aoqox2zc45244"},{"name":"Elasticsearch","_id":"ckzkc92xr003hoqox8bsahqd7"},{"name":"效率工具","_id":"ckzkc92xr003joqoxhgep34o4"},{"name":"Mac","_id":"ckzkc92xs003poqoxe3m04dlb"},{"name":"键盘","_id":"ckzkc92xs003qoqoxbqr10jbr"},{"name":"VIM","_id":"ckzkc92xt003uoqox7n60ahzh"},{"name":"算法","_id":"ckzkc92xu0043oqox6m03f809"},{"name":"排列组合","_id":"ckzkc92xu0045oqox1mkgd3oc"},{"name":"The School of Life","_id":"ckzkc92xu0046oqoxhad4e6ir"},{"name":"加拿大税务","_id":"ckzkc92xu0049oqoxc0xsgpcd"},{"name":"GTD","_id":"ckzkc92xu004boqox6fska8cb"},{"name":"stdin","_id":"ckzkc92xv004doqoxf6y87gw2"},{"name":"stdout","_id":"ckzkc92xv004foqox2accclb3"},{"name":"stderr","_id":"ckzkc92xv004goqox82lr2qih"},{"name":"netcat","_id":"ckzkc92xv004hoqoxacaq9ziy"},{"name":"tar","_id":"ckzkc92xv004ioqox20h79rjq"},{"name":"gzip","_id":"ckzkc92xw004joqoxgnx1ah85"},{"name":"Tmux","_id":"ckzkc92xw004koqox8n3b6uvi"},{"name":"tcpdump","_id":"ckzkc92xw004noqox45ko87xj"},{"name":"ps","_id":"ckzkc92xw004qoqoxe4hz1bqx"},{"name":"netstat","_id":"ckzkc92xx004toqoxan351oaq"},{"name":"ss","_id":"ckzkc92xx004xoqoxeplb9v9k"},{"name":"lsof","_id":"ckzkc92xx0050oqox2skuhsyq"},{"name":"less","_id":"ckzkc92xx0051oqoxadwa0xuw"},{"name":"cat","_id":"ckzkc92xy0052oqox7lj2hmji"},{"name":"kill","_id":"ckzkc92xy0053oqox7auy0iru"},{"name":"tee","_id":"ckzkc92xy0054oqoxccw7axpk"}]}}